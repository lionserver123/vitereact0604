function hF(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var _d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function fF(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var gP={exports:{}},b0={},mP={exports:{}},mt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yp=Symbol.for("react.element"),gF=Symbol.for("react.portal"),mF=Symbol.for("react.fragment"),vF=Symbol.for("react.strict_mode"),xF=Symbol.for("react.profiler"),yF=Symbol.for("react.provider"),bF=Symbol.for("react.context"),wF=Symbol.for("react.forward_ref"),SF=Symbol.for("react.suspense"),CF=Symbol.for("react.memo"),_F=Symbol.for("react.lazy"),L_=Symbol.iterator;function kF(e){return e===null||typeof e!="object"?null:(e=L_&&e[L_]||e["@@iterator"],typeof e=="function"?e:null)}var vP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xP=Object.assign,yP={};function Zc(e,t,n){this.props=e,this.context=t,this.refs=yP,this.updater=n||vP}Zc.prototype.isReactComponent={};Zc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function bP(){}bP.prototype=Zc.prototype;function dw(e,t,n){this.props=e,this.context=t,this.refs=yP,this.updater=n||vP}var pw=dw.prototype=new bP;pw.constructor=dw;xP(pw,Zc.prototype);pw.isPureReactComponent=!0;var F_=Array.isArray,wP=Object.prototype.hasOwnProperty,hw={current:null},SP={key:!0,ref:!0,__self:!0,__source:!0};function CP(e,t,n){var r,i={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)wP.call(t,r)&&!SP.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:Yp,type:e,key:o,ref:a,props:i,_owner:hw.current}}function EF(e,t){return{$$typeof:Yp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function fw(e){return typeof e=="object"&&e!==null&&e.$$typeof===Yp}function TF(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var B_=/\/+/g;function px(e,t){return typeof e=="object"&&e!==null&&e.key!=null?TF(""+e.key):t.toString(36)}function Cg(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Yp:case gF:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+px(a,0):r,F_(i)?(n="",e!=null&&(n=e.replace(B_,"$&/")+"/"),Cg(i,t,n,"",function(c){return c})):i!=null&&(fw(i)&&(i=EF(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(B_,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",F_(e))for(var s=0;s<e.length;s++){o=e[s];var l=r+px(o,s);a+=Cg(o,t,n,l,i)}else if(l=kF(e),typeof l=="function")for(e=l.call(e),s=0;!(o=e.next()).done;)o=o.value,l=r+px(o,s++),a+=Cg(o,t,n,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function ef(e,t,n){if(e==null)return e;var r=[],i=0;return Cg(e,r,"","",function(o){return t.call(n,o,i++)}),r}function IF(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Dr={current:null},_g={transition:null},AF={ReactCurrentDispatcher:Dr,ReactCurrentBatchConfig:_g,ReactCurrentOwner:hw};function _P(){throw Error("act(...) is not supported in production builds of React.")}mt.Children={map:ef,forEach:function(e,t,n){ef(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ef(e,function(){t++}),t},toArray:function(e){return ef(e,function(t){return t})||[]},only:function(e){if(!fw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};mt.Component=Zc;mt.Fragment=mF;mt.Profiler=xF;mt.PureComponent=dw;mt.StrictMode=vF;mt.Suspense=SF;mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AF;mt.act=_P;mt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=xP({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=hw.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)wP.call(t,l)&&!SP.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];r.children=s}return{$$typeof:Yp,type:e.type,key:i,ref:o,props:r,_owner:a}};mt.createContext=function(e){return e={$$typeof:bF,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:yF,_context:e},e.Consumer=e};mt.createElement=CP;mt.createFactory=function(e){var t=CP.bind(null,e);return t.type=e,t};mt.createRef=function(){return{current:null}};mt.forwardRef=function(e){return{$$typeof:wF,render:e}};mt.isValidElement=fw;mt.lazy=function(e){return{$$typeof:_F,_payload:{_status:-1,_result:e},_init:IF}};mt.memo=function(e,t){return{$$typeof:CF,type:e,compare:t===void 0?null:t}};mt.startTransition=function(e){var t=_g.transition;_g.transition={};try{e()}finally{_g.transition=t}};mt.unstable_act=_P;mt.useCallback=function(e,t){return Dr.current.useCallback(e,t)};mt.useContext=function(e){return Dr.current.useContext(e)};mt.useDebugValue=function(){};mt.useDeferredValue=function(e){return Dr.current.useDeferredValue(e)};mt.useEffect=function(e,t){return Dr.current.useEffect(e,t)};mt.useId=function(){return Dr.current.useId()};mt.useImperativeHandle=function(e,t,n){return Dr.current.useImperativeHandle(e,t,n)};mt.useInsertionEffect=function(e,t){return Dr.current.useInsertionEffect(e,t)};mt.useLayoutEffect=function(e,t){return Dr.current.useLayoutEffect(e,t)};mt.useMemo=function(e,t){return Dr.current.useMemo(e,t)};mt.useReducer=function(e,t,n){return Dr.current.useReducer(e,t,n)};mt.useRef=function(e){return Dr.current.useRef(e)};mt.useState=function(e){return Dr.current.useState(e)};mt.useSyncExternalStore=function(e,t,n){return Dr.current.useSyncExternalStore(e,t,n)};mt.useTransition=function(){return Dr.current.useTransition()};mt.version="18.3.1";mP.exports=mt;var D=mP.exports;const ut=Jc(D),J1=hF({__proto__:null,default:ut},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PF=D,DF=Symbol.for("react.element"),RF=Symbol.for("react.fragment"),NF=Object.prototype.hasOwnProperty,MF=PF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,OF={key:!0,ref:!0,__self:!0,__source:!0};function kP(e,t,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)NF.call(t,r)&&!OF.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:DF,type:e,key:o,ref:a,props:i,_owner:MF.current}}b0.Fragment=RF;b0.jsx=kP;b0.jsxs=kP;gP.exports=b0;var qr=gP.exports;function $F(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function LF(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var FF=function(){function e(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(LF(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=$F(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},e}(),pr="-ms-",rm="-moz-",Pt="-webkit-",EP="comm",gw="rule",mw="decl",BF="@import",TP="@keyframes",zF="@layer",VF=Math.abs,w0=String.fromCharCode,jF=Object.assign;function UF(e,t){return Jn(e,0)^45?(((t<<2^Jn(e,0))<<2^Jn(e,1))<<2^Jn(e,2))<<2^Jn(e,3):0}function IP(e){return e.trim()}function qF(e,t){return(e=t.exec(e))?e[0]:e}function Dt(e,t,n){return e.replace(t,n)}function Z1(e,t){return e.indexOf(t)}function Jn(e,t){return e.charCodeAt(t)|0}function Xd(e,t,n){return e.slice(t,n)}function co(e){return e.length}function vw(e){return e.length}function tf(e,t){return t.push(e),e}function WF(e,t){return e.map(t).join("")}var S0=1,Tc=1,AP=0,Yr=0,_n=0,eu="";function C0(e,t,n,r,i,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:S0,column:Tc,length:a,return:""}}function Iu(e,t){return jF(C0("",null,null,"",null,null,0),e,{length:-e.length},t)}function HF(){return _n}function GF(){return _n=Yr>0?Jn(eu,--Yr):0,Tc--,_n===10&&(Tc=1,S0--),_n}function oi(){return _n=Yr<AP?Jn(eu,Yr++):0,Tc++,_n===10&&(Tc=1,S0++),_n}function go(){return Jn(eu,Yr)}function kg(){return Yr}function Kp(e,t){return Xd(eu,e,t)}function Qd(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function PP(e){return S0=Tc=1,AP=co(eu=e),Yr=0,[]}function DP(e){return eu="",e}function Eg(e){return IP(Kp(Yr-1,eb(e===91?e+2:e===40?e+1:e)))}function YF(e){for(;(_n=go())&&_n<33;)oi();return Qd(e)>2||Qd(_n)>3?"":" "}function KF(e,t){for(;--t&&oi()&&!(_n<48||_n>102||_n>57&&_n<65||_n>70&&_n<97););return Kp(e,kg()+(t<6&&go()==32&&oi()==32))}function eb(e){for(;oi();)switch(_n){case e:return Yr;case 34:case 39:e!==34&&e!==39&&eb(_n);break;case 40:e===41&&eb(e);break;case 92:oi();break}return Yr}function XF(e,t){for(;oi()&&e+_n!==57;)if(e+_n===84&&go()===47)break;return"/*"+Kp(t,Yr-1)+"*"+w0(e===47?e:oi())}function QF(e){for(;!Qd(go());)oi();return Kp(e,Yr)}function JF(e){return DP(Tg("",null,null,null,[""],e=PP(e),0,[0],e))}function Tg(e,t,n,r,i,o,a,s,l){for(var c=0,d=0,p=a,f=0,h=0,g=0,m=1,v=1,w=1,S=0,C="",A=i,_=o,I=r,E=C;v;)switch(g=S,S=oi()){case 40:if(g!=108&&Jn(E,p-1)==58){Z1(E+=Dt(Eg(S),"&","&\f"),"&\f")!=-1&&(w=-1);break}case 34:case 39:case 91:E+=Eg(S);break;case 9:case 10:case 13:case 32:E+=YF(g);break;case 92:E+=KF(kg()-1,7);continue;case 47:switch(go()){case 42:case 47:tf(ZF(XF(oi(),kg()),t,n),l);break;default:E+="/"}break;case 123*m:s[c++]=co(E)*w;case 125*m:case 59:case 0:switch(S){case 0:case 125:v=0;case 59+d:w==-1&&(E=Dt(E,/\f/g,"")),h>0&&co(E)-p&&tf(h>32?V_(E+";",r,n,p-1):V_(Dt(E," ","")+";",r,n,p-2),l);break;case 59:E+=";";default:if(tf(I=z_(E,t,n,c,d,i,s,C,A=[],_=[],p),o),S===123)if(d===0)Tg(E,t,I,I,A,o,p,s,_);else switch(f===99&&Jn(E,3)===110?100:f){case 100:case 108:case 109:case 115:Tg(e,I,I,r&&tf(z_(e,I,I,0,0,i,s,C,i,A=[],p),_),i,_,p,s,r?A:_);break;default:Tg(E,I,I,I,[""],_,0,s,_)}}c=d=h=0,m=w=1,C=E="",p=a;break;case 58:p=1+co(E),h=g;default:if(m<1){if(S==123)--m;else if(S==125&&m++==0&&GF()==125)continue}switch(E+=w0(S),S*m){case 38:w=d>0?1:(E+="\f",-1);break;case 44:s[c++]=(co(E)-1)*w,w=1;break;case 64:go()===45&&(E+=Eg(oi())),f=go(),d=p=co(C=E+=QF(kg())),S++;break;case 45:g===45&&co(E)==2&&(m=0)}}return o}function z_(e,t,n,r,i,o,a,s,l,c,d){for(var p=i-1,f=i===0?o:[""],h=vw(f),g=0,m=0,v=0;g<r;++g)for(var w=0,S=Xd(e,p+1,p=VF(m=a[g])),C=e;w<h;++w)(C=IP(m>0?f[w]+" "+S:Dt(S,/&\f/g,f[w])))&&(l[v++]=C);return C0(e,t,n,i===0?gw:s,l,c,d)}function ZF(e,t,n){return C0(e,t,n,EP,w0(HF()),Xd(e,2,-2),0)}function V_(e,t,n,r){return C0(e,t,n,mw,Xd(e,0,r),Xd(e,r+1,-1),r)}function gc(e,t){for(var n="",r=vw(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function eB(e,t,n,r){switch(e.type){case zF:if(e.children.length)break;case BF:case mw:return e.return=e.return||e.value;case EP:return"";case TP:return e.return=e.value+"{"+gc(e.children,r)+"}";case gw:e.value=e.props.join(",")}return co(n=gc(e.children,r))?e.return=e.value+"{"+n+"}":""}function tB(e){var t=vw(e);return function(n,r,i,o){for(var a="",s=0;s<t;s++)a+=e[s](n,r,i,o)||"";return a}}function nB(e){return function(t){t.root||(t=t.return)&&e(t)}}var j_=function(t){var n=new WeakMap;return function(r){if(n.has(r))return n.get(r);var i=t(r);return n.set(r,i),i}};function RP(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var rB=function(t,n,r){for(var i=0,o=0;i=o,o=go(),i===38&&o===12&&(n[r]=1),!Qd(o);)oi();return Kp(t,Yr)},iB=function(t,n){var r=-1,i=44;do switch(Qd(i)){case 0:i===38&&go()===12&&(n[r]=1),t[r]+=rB(Yr-1,n,r);break;case 2:t[r]+=Eg(i);break;case 4:if(i===44){t[++r]=go()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=w0(i)}while(i=oi());return t},oB=function(t,n){return DP(iB(PP(t),n))},U_=new WeakMap,aB=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!U_.get(r))&&!i){U_.set(t,!0);for(var o=[],a=oB(n,o),s=r.props,l=0,c=0;l<a.length;l++)for(var d=0;d<s.length;d++,c++)t.props[c]=o[l]?a[l].replace(/&\f/g,s[d]):s[d]+" "+a[l]}}},sB=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function NP(e,t){switch(UF(e,t)){case 5103:return Pt+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Pt+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Pt+e+rm+e+pr+e+e;case 6828:case 4268:return Pt+e+pr+e+e;case 6165:return Pt+e+pr+"flex-"+e+e;case 5187:return Pt+e+Dt(e,/(\w+).+(:[^]+)/,Pt+"box-$1$2"+pr+"flex-$1$2")+e;case 5443:return Pt+e+pr+"flex-item-"+Dt(e,/flex-|-self/,"")+e;case 4675:return Pt+e+pr+"flex-line-pack"+Dt(e,/align-content|flex-|-self/,"")+e;case 5548:return Pt+e+pr+Dt(e,"shrink","negative")+e;case 5292:return Pt+e+pr+Dt(e,"basis","preferred-size")+e;case 6060:return Pt+"box-"+Dt(e,"-grow","")+Pt+e+pr+Dt(e,"grow","positive")+e;case 4554:return Pt+Dt(e,/([^-])(transform)/g,"$1"+Pt+"$2")+e;case 6187:return Dt(Dt(Dt(e,/(zoom-|grab)/,Pt+"$1"),/(image-set)/,Pt+"$1"),e,"")+e;case 5495:case 3959:return Dt(e,/(image-set\([^]*)/,Pt+"$1$`$1");case 4968:return Dt(Dt(e,/(.+:)(flex-)?(.*)/,Pt+"box-pack:$3"+pr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Pt+e+e;case 4095:case 3583:case 4068:case 2532:return Dt(e,/(.+)-inline(.+)/,Pt+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(co(e)-1-t>6)switch(Jn(e,t+1)){case 109:if(Jn(e,t+4)!==45)break;case 102:return Dt(e,/(.+:)(.+)-([^]+)/,"$1"+Pt+"$2-$3$1"+rm+(Jn(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Z1(e,"stretch")?NP(Dt(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Jn(e,t+1)!==115)break;case 6444:switch(Jn(e,co(e)-3-(~Z1(e,"!important")&&10))){case 107:return Dt(e,":",":"+Pt)+e;case 101:return Dt(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Pt+(Jn(e,14)===45?"inline-":"")+"box$3$1"+Pt+"$2$3$1"+pr+"$2box$3")+e}break;case 5936:switch(Jn(e,t+11)){case 114:return Pt+e+pr+Dt(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Pt+e+pr+Dt(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Pt+e+pr+Dt(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Pt+e+pr+e+e}return e}var lB=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case mw:t.return=NP(t.value,t.length);break;case TP:return gc([Iu(t,{value:Dt(t.value,"@","@"+Pt)})],i);case gw:if(t.length)return WF(t.props,function(o){switch(qF(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return gc([Iu(t,{props:[Dt(o,/:(read-\w+)/,":"+rm+"$1")]})],i);case"::placeholder":return gc([Iu(t,{props:[Dt(o,/:(plac\w+)/,":"+Pt+"input-$1")]}),Iu(t,{props:[Dt(o,/:(plac\w+)/,":"+rm+"$1")]}),Iu(t,{props:[Dt(o,/:(plac\w+)/,pr+"input-$1")]})],i)}return""})}},cB=[lB],uB=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(m){var v=m.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var i=t.stylisPlugins||cB,o={},a,s=[];a=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(m){for(var v=m.getAttribute("data-emotion").split(" "),w=1;w<v.length;w++)o[v[w]]=!0;s.push(m)});var l,c=[aB,sB];{var d,p=[eB,nB(function(m){d.insert(m)})],f=tB(c.concat(i,p)),h=function(v){return gc(JF(v),f)};l=function(v,w,S,C){d=S,h(v?v+"{"+w.styles+"}":w.styles),C&&(g.inserted[w.name]=!0)}}var g={key:n,sheet:new FF({key:n,container:a,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:l};return g.sheet.hydrate(s),g};function Ye(){return Ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ye.apply(null,arguments)}var MP={exports:{}},Lt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Un=typeof Symbol=="function"&&Symbol.for,xw=Un?Symbol.for("react.element"):60103,yw=Un?Symbol.for("react.portal"):60106,_0=Un?Symbol.for("react.fragment"):60107,k0=Un?Symbol.for("react.strict_mode"):60108,E0=Un?Symbol.for("react.profiler"):60114,T0=Un?Symbol.for("react.provider"):60109,I0=Un?Symbol.for("react.context"):60110,bw=Un?Symbol.for("react.async_mode"):60111,A0=Un?Symbol.for("react.concurrent_mode"):60111,P0=Un?Symbol.for("react.forward_ref"):60112,D0=Un?Symbol.for("react.suspense"):60113,dB=Un?Symbol.for("react.suspense_list"):60120,R0=Un?Symbol.for("react.memo"):60115,N0=Un?Symbol.for("react.lazy"):60116,pB=Un?Symbol.for("react.block"):60121,hB=Un?Symbol.for("react.fundamental"):60117,fB=Un?Symbol.for("react.responder"):60118,gB=Un?Symbol.for("react.scope"):60119;function pi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case xw:switch(e=e.type,e){case bw:case A0:case _0:case E0:case k0:case D0:return e;default:switch(e=e&&e.$$typeof,e){case I0:case P0:case N0:case R0:case T0:return e;default:return t}}case yw:return t}}}function OP(e){return pi(e)===A0}Lt.AsyncMode=bw;Lt.ConcurrentMode=A0;Lt.ContextConsumer=I0;Lt.ContextProvider=T0;Lt.Element=xw;Lt.ForwardRef=P0;Lt.Fragment=_0;Lt.Lazy=N0;Lt.Memo=R0;Lt.Portal=yw;Lt.Profiler=E0;Lt.StrictMode=k0;Lt.Suspense=D0;Lt.isAsyncMode=function(e){return OP(e)||pi(e)===bw};Lt.isConcurrentMode=OP;Lt.isContextConsumer=function(e){return pi(e)===I0};Lt.isContextProvider=function(e){return pi(e)===T0};Lt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===xw};Lt.isForwardRef=function(e){return pi(e)===P0};Lt.isFragment=function(e){return pi(e)===_0};Lt.isLazy=function(e){return pi(e)===N0};Lt.isMemo=function(e){return pi(e)===R0};Lt.isPortal=function(e){return pi(e)===yw};Lt.isProfiler=function(e){return pi(e)===E0};Lt.isStrictMode=function(e){return pi(e)===k0};Lt.isSuspense=function(e){return pi(e)===D0};Lt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===_0||e===A0||e===E0||e===k0||e===D0||e===dB||typeof e=="object"&&e!==null&&(e.$$typeof===N0||e.$$typeof===R0||e.$$typeof===T0||e.$$typeof===I0||e.$$typeof===P0||e.$$typeof===hB||e.$$typeof===fB||e.$$typeof===gB||e.$$typeof===pB)};Lt.typeOf=pi;MP.exports=Lt;var mB=MP.exports,ww=mB,vB={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},xB={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},yB={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},$P={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Sw={};Sw[ww.ForwardRef]=yB;Sw[ww.Memo]=$P;function q_(e){return ww.isMemo(e)?$P:Sw[e.$$typeof]||vB}var bB=Object.defineProperty,wB=Object.getOwnPropertyNames,W_=Object.getOwnPropertySymbols,SB=Object.getOwnPropertyDescriptor,CB=Object.getPrototypeOf,H_=Object.prototype;function LP(e,t,n){if(typeof t!="string"){if(H_){var r=CB(t);r&&r!==H_&&LP(e,r,n)}var i=wB(t);W_&&(i=i.concat(W_(t)));for(var o=q_(e),a=q_(t),s=0;s<i.length;++s){var l=i[s];if(!xB[l]&&!(n&&n[l])&&!(a&&a[l])&&!(o&&o[l])){var c=SB(t,l);try{bB(e,l,c)}catch{}}}}return e}var _B=LP;const G_=Jc(_B);var kB=!0;function FP(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(r+=i+" ")}),r}var Cw=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||kB===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},_w=function(t,n,r){Cw(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var o=n;do t.insert(n===o?"."+i:"",o,t.sheet,!0),o=o.next;while(o!==void 0)}};function EB(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var TB={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},IB=/[A-Z]|^ms/g,AB=/_EMO_([^_]+?)_([^]*?)_EMO_/g,BP=function(t){return t.charCodeAt(1)===45},Y_=function(t){return t!=null&&typeof t!="boolean"},hx=RP(function(e){return BP(e)?e:e.replace(IB,"-$&").toLowerCase()}),K_=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(AB,function(r,i,o){return uo={name:i,styles:o,next:uo},i})}return TB[t]!==1&&!BP(t)&&typeof n=="number"&&n!==0?n+"px":n};function Jd(e,t,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return uo={name:i.name,styles:i.styles,next:uo},i.name;var o=n;if(o.styles!==void 0){var a=o.next;if(a!==void 0)for(;a!==void 0;)uo={name:a.name,styles:a.styles,next:uo},a=a.next;var s=o.styles+";";return s}return PB(e,t,n)}case"function":{if(e!==void 0){var l=uo,c=n(e);return uo=l,Jd(e,t,c)}break}}var d=n;if(t==null)return d;var p=t[d];return p!==void 0?p:d}function PB(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Jd(e,t,n[i])+";";else for(var o in n){var a=n[o];if(typeof a!="object"){var s=a;t!=null&&t[s]!==void 0?r+=o+"{"+t[s]+"}":Y_(s)&&(r+=hx(o)+":"+K_(o,s)+";")}else if(Array.isArray(a)&&typeof a[0]=="string"&&(t==null||t[a[0]]===void 0))for(var l=0;l<a.length;l++)Y_(a[l])&&(r+=hx(o)+":"+K_(o,a[l])+";");else{var c=Jd(e,t,a);switch(o){case"animation":case"animationName":{r+=hx(o)+":"+c+";";break}default:r+=o+"{"+c+"}"}}}return r}var X_=/label:\s*([^\s;{]+)\s*(;|$)/g,uo;function M0(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,i="";uo=void 0;var o=e[0];if(o==null||o.raw===void 0)r=!1,i+=Jd(n,t,o);else{var a=o;i+=a[0]}for(var s=1;s<e.length;s++)if(i+=Jd(n,t,e[s]),r){var l=o;i+=l[s]}X_.lastIndex=0;for(var c="",d;(d=X_.exec(i))!==null;)c+="-"+d[1];var p=EB(i)+c;return{name:p,styles:i,next:uo}}var DB=function(t){return t()},zP=J1.useInsertionEffect?J1.useInsertionEffect:!1,VP=zP||DB,Q_=zP||D.useLayoutEffect,jP=D.createContext(typeof HTMLElement<"u"?uB({key:"css"}):null);jP.Provider;var kw=function(t){return D.forwardRef(function(n,r){var i=D.useContext(jP);return t(n,i,r)})},Zd=D.createContext({}),RB=function(t,n){if(typeof n=="function"){var r=n(t);return r}return Ye({},t,n)},NB=j_(function(e){return j_(function(t){return RB(e,t)})}),MB=function(t){var n=D.useContext(Zd);return t.theme!==n&&(n=NB(n)(t.theme)),D.createElement(Zd.Provider,{value:n},t.children)},Xp={}.hasOwnProperty,tb="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Ew=function(t,n){var r={};for(var i in n)Xp.call(n,i)&&(r[i]=n[i]);return r[tb]=t,r},OB=function(t){var n=t.cache,r=t.serialized,i=t.isStringTag;return Cw(n,r,i),VP(function(){return _w(n,r,i)}),null},$B=kw(function(e,t,n){var r=e.css;typeof r=="string"&&t.registered[r]!==void 0&&(r=t.registered[r]);var i=e[tb],o=[r],a="";typeof e.className=="string"?a=FP(t.registered,o,e.className):e.className!=null&&(a=e.className+" ");var s=M0(o,void 0,D.useContext(Zd));a+=t.key+"-"+s.name;var l={};for(var c in e)Xp.call(e,c)&&c!=="css"&&c!==tb&&(l[c]=e[c]);return l.className=a,n&&(l.ref=n),D.createElement(D.Fragment,null,D.createElement(OB,{cache:t,serialized:s,isStringTag:typeof i=="string"}),D.createElement(i,l))}),Tw=$B,Ne=qr.Fragment,u=function(t,n,r){return Xp.call(n,"css")?qr.jsx(Tw,Ew(t,n),r):qr.jsx(t,n,r)},y=function(t,n,r){return Xp.call(n,"css")?qr.jsxs(Tw,Ew(t,n),r):qr.jsxs(t,n,r)},nb={},UP={exports:{}},hi={},qP={exports:{}},WP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,H){var J=z.length;z.push(H);e:for(;0<J;){var de=J-1>>>1,ae=z[de];if(0<i(ae,H))z[de]=H,z[J]=ae,J=de;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var H=z[0],J=z.pop();if(J!==H){z[0]=J;e:for(var de=0,ae=z.length,Ce=ae>>>1;de<Ce;){var te=2*(de+1)-1,G=z[te],K=te+1,me=z[K];if(0>i(G,J))K<ae&&0>i(me,G)?(z[de]=me,z[K]=J,de=K):(z[de]=G,z[te]=J,de=te);else if(K<ae&&0>i(me,J))z[de]=me,z[K]=J,de=K;else break e}}return H}function i(z,H){var J=z.sortIndex-H.sortIndex;return J!==0?J:z.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],c=[],d=1,p=null,f=3,h=!1,g=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(z){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=z)r(c),H.sortIndex=H.expirationTime,t(l,H);else break;H=n(c)}}function A(z){if(m=!1,C(z),!g)if(n(l)!==null)g=!0,V(_);else{var H=n(c);H!==null&&j(A,H.startTime-z)}}function _(z,H){g=!1,m&&(m=!1,w(k),k=-1),h=!0;var J=f;try{for(C(H),p=n(l);p!==null&&(!(p.expirationTime>H)||z&&!O());){var de=p.callback;if(typeof de=="function"){p.callback=null,f=p.priorityLevel;var ae=de(p.expirationTime<=H);H=e.unstable_now(),typeof ae=="function"?p.callback=ae:p===n(l)&&r(l),C(H)}else r(l);p=n(l)}if(p!==null)var Ce=!0;else{var te=n(c);te!==null&&j(A,te.startTime-H),Ce=!1}return Ce}finally{p=null,f=J,h=!1}}var I=!1,E=null,k=-1,T=5,P=-1;function O(){return!(e.unstable_now()-P<T)}function R(){if(E!==null){var z=e.unstable_now();P=z;var H=!0;try{H=E(!0,z)}finally{H?N():(I=!1,E=null)}}else I=!1}var N;if(typeof S=="function")N=function(){S(R)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,B=L.port2;L.port1.onmessage=R,N=function(){B.postMessage(null)}}else N=function(){v(R,0)};function V(z){E=z,I||(I=!0,N())}function j(z,H){k=v(function(){z(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){g||h||(g=!0,V(_))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(z){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var J=f;f=H;try{return z()}finally{f=J}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,H){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var J=f;f=z;try{return H()}finally{f=J}},e.unstable_scheduleCallback=function(z,H,J){var de=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?de+J:de):J=de,z){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=J+ae,z={id:d++,callback:H,priorityLevel:z,startTime:J,expirationTime:ae,sortIndex:-1},J>de?(z.sortIndex=J,t(c,z),n(l)===null&&z===n(c)&&(m?(w(k),k=-1):m=!0,j(A,J-de))):(z.sortIndex=ae,t(l,z),g||h||(g=!0,V(_))),z},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(z){var H=f;return function(){var J=f;f=H;try{return z.apply(this,arguments)}finally{f=J}}}})(WP);qP.exports=WP;var LB=qP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FB=D,di=LB;function xe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var HP=new Set,ep={};function bl(e,t){Ic(e,t),Ic(e+"Capture",t)}function Ic(e,t){for(ep[e]=t,e=0;e<t.length;e++)HP.add(t[e])}var Xo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rb=Object.prototype.hasOwnProperty,BB=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,J_={},Z_={};function zB(e){return rb.call(Z_,e)?!0:rb.call(J_,e)?!1:BB.test(e)?Z_[e]=!0:(J_[e]=!0,!1)}function VB(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function jB(e,t,n,r){if(t===null||typeof t>"u"||VB(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Rr(e,t,n,r,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var ir={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ir[e]=new Rr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ir[t]=new Rr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ir[e]=new Rr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ir[e]=new Rr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ir[e]=new Rr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ir[e]=new Rr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ir[e]=new Rr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ir[e]=new Rr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ir[e]=new Rr(e,5,!1,e.toLowerCase(),null,!1,!1)});var Iw=/[\-:]([a-z])/g;function Aw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Iw,Aw);ir[t]=new Rr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Iw,Aw);ir[t]=new Rr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Iw,Aw);ir[t]=new Rr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ir[e]=new Rr(e,1,!1,e.toLowerCase(),null,!1,!1)});ir.xlinkHref=new Rr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ir[e]=new Rr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Pw(e,t,n,r){var i=ir.hasOwnProperty(t)?ir[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(jB(t,n,i,r)&&(n=null),r||i===null?zB(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var la=FB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nf=Symbol.for("react.element"),Kl=Symbol.for("react.portal"),Xl=Symbol.for("react.fragment"),Dw=Symbol.for("react.strict_mode"),ib=Symbol.for("react.profiler"),GP=Symbol.for("react.provider"),YP=Symbol.for("react.context"),Rw=Symbol.for("react.forward_ref"),ob=Symbol.for("react.suspense"),ab=Symbol.for("react.suspense_list"),Nw=Symbol.for("react.memo"),Ra=Symbol.for("react.lazy"),KP=Symbol.for("react.offscreen"),e3=Symbol.iterator;function Au(e){return e===null||typeof e!="object"?null:(e=e3&&e[e3]||e["@@iterator"],typeof e=="function"?e:null)}var an=Object.assign,fx;function ud(e){if(fx===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);fx=t&&t[1]||""}return`
`+fx+e}var gx=!1;function mx(e,t){if(!e||gx)return"";gx=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var l=`
`+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=s);break}}}finally{gx=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ud(e):""}function UB(e){switch(e.tag){case 5:return ud(e.type);case 16:return ud("Lazy");case 13:return ud("Suspense");case 19:return ud("SuspenseList");case 0:case 2:case 15:return e=mx(e.type,!1),e;case 11:return e=mx(e.type.render,!1),e;case 1:return e=mx(e.type,!0),e;default:return""}}function sb(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Xl:return"Fragment";case Kl:return"Portal";case ib:return"Profiler";case Dw:return"StrictMode";case ob:return"Suspense";case ab:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case YP:return(e.displayName||"Context")+".Consumer";case GP:return(e._context.displayName||"Context")+".Provider";case Rw:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Nw:return t=e.displayName||null,t!==null?t:sb(e.type)||"Memo";case Ra:t=e._payload,e=e._init;try{return sb(e(t))}catch{}}return null}function qB(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sb(t);case 8:return t===Dw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function cs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function XP(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function WB(e){var t=XP(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function rf(e){e._valueTracker||(e._valueTracker=WB(e))}function QP(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=XP(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function im(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function lb(e,t){var n=t.checked;return an({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function t3(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=cs(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function JP(e,t){t=t.checked,t!=null&&Pw(e,"checked",t,!1)}function cb(e,t){JP(e,t);var n=cs(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ub(e,t.type,n):t.hasOwnProperty("defaultValue")&&ub(e,t.type,cs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function n3(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ub(e,t,n){(t!=="number"||im(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var dd=Array.isArray;function mc(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+cs(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function db(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(xe(91));return an({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function r3(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(xe(92));if(dd(n)){if(1<n.length)throw Error(xe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:cs(n)}}function ZP(e,t){var n=cs(t.value),r=cs(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function i3(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function eD(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pb(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?eD(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var of,tD=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(of=of||document.createElement("div"),of.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=of.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function tp(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var kd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},HB=["Webkit","ms","Moz","O"];Object.keys(kd).forEach(function(e){HB.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),kd[t]=kd[e]})});function nD(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||kd.hasOwnProperty(e)&&kd[e]?(""+t).trim():t+"px"}function rD(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=nD(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var GB=an({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hb(e,t){if(t){if(GB[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(xe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(xe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(xe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(xe(62))}}function fb(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gb=null;function Mw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var mb=null,vc=null,xc=null;function o3(e){if(e=Zp(e)){if(typeof mb!="function")throw Error(xe(280));var t=e.stateNode;t&&(t=B0(t),mb(e.stateNode,e.type,t))}}function iD(e){vc?xc?xc.push(e):xc=[e]:vc=e}function oD(){if(vc){var e=vc,t=xc;if(xc=vc=null,o3(e),t)for(e=0;e<t.length;e++)o3(t[e])}}function aD(e,t){return e(t)}function sD(){}var vx=!1;function lD(e,t,n){if(vx)return e(t,n);vx=!0;try{return aD(e,t,n)}finally{vx=!1,(vc!==null||xc!==null)&&(sD(),oD())}}function np(e,t){var n=e.stateNode;if(n===null)return null;var r=B0(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(xe(231,t,typeof n));return n}var vb=!1;if(Xo)try{var Pu={};Object.defineProperty(Pu,"passive",{get:function(){vb=!0}}),window.addEventListener("test",Pu,Pu),window.removeEventListener("test",Pu,Pu)}catch{vb=!1}function YB(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Ed=!1,om=null,am=!1,xb=null,KB={onError:function(e){Ed=!0,om=e}};function XB(e,t,n,r,i,o,a,s,l){Ed=!1,om=null,YB.apply(KB,arguments)}function QB(e,t,n,r,i,o,a,s,l){if(XB.apply(this,arguments),Ed){if(Ed){var c=om;Ed=!1,om=null}else throw Error(xe(198));am||(am=!0,xb=c)}}function wl(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function cD(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function a3(e){if(wl(e)!==e)throw Error(xe(188))}function JB(e){var t=e.alternate;if(!t){if(t=wl(e),t===null)throw Error(xe(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return a3(i),e;if(o===r)return a3(i),t;o=o.sibling}throw Error(xe(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(xe(189))}}if(n.alternate!==r)throw Error(xe(190))}if(n.tag!==3)throw Error(xe(188));return n.stateNode.current===n?e:t}function uD(e){return e=JB(e),e!==null?dD(e):null}function dD(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=dD(e);if(t!==null)return t;e=e.sibling}return null}var pD=di.unstable_scheduleCallback,s3=di.unstable_cancelCallback,ZB=di.unstable_shouldYield,ez=di.unstable_requestPaint,wn=di.unstable_now,tz=di.unstable_getCurrentPriorityLevel,Ow=di.unstable_ImmediatePriority,hD=di.unstable_UserBlockingPriority,sm=di.unstable_NormalPriority,nz=di.unstable_LowPriority,fD=di.unstable_IdlePriority,O0=null,mo=null;function rz(e){if(mo&&typeof mo.onCommitFiberRoot=="function")try{mo.onCommitFiberRoot(O0,e,void 0,(e.current.flags&128)===128)}catch{}}var Xi=Math.clz32?Math.clz32:az,iz=Math.log,oz=Math.LN2;function az(e){return e>>>=0,e===0?32:31-(iz(e)/oz|0)|0}var af=64,sf=4194304;function pd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function lm(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var s=a&~i;s!==0?r=pd(s):(o&=a,o!==0&&(r=pd(o)))}else a=n&~i,a!==0?r=pd(a):o!==0&&(r=pd(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Xi(t),i=1<<n,r|=e[n],t&=~i;return r}function sz(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lz(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-Xi(o),s=1<<a,l=i[a];l===-1?(!(s&n)||s&r)&&(i[a]=sz(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}function yb(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function gD(){var e=af;return af<<=1,!(af&4194240)&&(af=64),e}function xx(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Qp(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Xi(t),e[t]=n}function cz(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Xi(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function $w(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Xi(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var $t=0;function mD(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var vD,Lw,xD,yD,bD,bb=!1,lf=[],Ha=null,Ga=null,Ya=null,rp=new Map,ip=new Map,Oa=[],uz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function l3(e,t){switch(e){case"focusin":case"focusout":Ha=null;break;case"dragenter":case"dragleave":Ga=null;break;case"mouseover":case"mouseout":Ya=null;break;case"pointerover":case"pointerout":rp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ip.delete(t.pointerId)}}function Du(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Zp(t),t!==null&&Lw(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function dz(e,t,n,r,i){switch(t){case"focusin":return Ha=Du(Ha,e,t,n,r,i),!0;case"dragenter":return Ga=Du(Ga,e,t,n,r,i),!0;case"mouseover":return Ya=Du(Ya,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return rp.set(o,Du(rp.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ip.set(o,Du(ip.get(o)||null,e,t,n,r,i)),!0}return!1}function wD(e){var t=Ks(e.target);if(t!==null){var n=wl(t);if(n!==null){if(t=n.tag,t===13){if(t=cD(n),t!==null){e.blockedOn=t,bD(e.priority,function(){xD(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ig(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=wb(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);gb=r,n.target.dispatchEvent(r),gb=null}else return t=Zp(n),t!==null&&Lw(t),e.blockedOn=n,!1;t.shift()}return!0}function c3(e,t,n){Ig(e)&&n.delete(t)}function pz(){bb=!1,Ha!==null&&Ig(Ha)&&(Ha=null),Ga!==null&&Ig(Ga)&&(Ga=null),Ya!==null&&Ig(Ya)&&(Ya=null),rp.forEach(c3),ip.forEach(c3)}function Ru(e,t){e.blockedOn===t&&(e.blockedOn=null,bb||(bb=!0,di.unstable_scheduleCallback(di.unstable_NormalPriority,pz)))}function op(e){function t(i){return Ru(i,e)}if(0<lf.length){Ru(lf[0],e);for(var n=1;n<lf.length;n++){var r=lf[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ha!==null&&Ru(Ha,e),Ga!==null&&Ru(Ga,e),Ya!==null&&Ru(Ya,e),rp.forEach(t),ip.forEach(t),n=0;n<Oa.length;n++)r=Oa[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Oa.length&&(n=Oa[0],n.blockedOn===null);)wD(n),n.blockedOn===null&&Oa.shift()}var yc=la.ReactCurrentBatchConfig,cm=!0;function hz(e,t,n,r){var i=$t,o=yc.transition;yc.transition=null;try{$t=1,Fw(e,t,n,r)}finally{$t=i,yc.transition=o}}function fz(e,t,n,r){var i=$t,o=yc.transition;yc.transition=null;try{$t=4,Fw(e,t,n,r)}finally{$t=i,yc.transition=o}}function Fw(e,t,n,r){if(cm){var i=wb(e,t,n,r);if(i===null)Ix(e,t,r,um,n),l3(e,r);else if(dz(i,e,t,n,r))r.stopPropagation();else if(l3(e,r),t&4&&-1<uz.indexOf(e)){for(;i!==null;){var o=Zp(i);if(o!==null&&vD(o),o=wb(e,t,n,r),o===null&&Ix(e,t,r,um,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Ix(e,t,r,null,n)}}var um=null;function wb(e,t,n,r){if(um=null,e=Mw(r),e=Ks(e),e!==null)if(t=wl(e),t===null)e=null;else if(n=t.tag,n===13){if(e=cD(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return um=e,null}function SD(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tz()){case Ow:return 1;case hD:return 4;case sm:case nz:return 16;case fD:return 536870912;default:return 16}default:return 16}}var ja=null,Bw=null,Ag=null;function CD(){if(Ag)return Ag;var e,t=Bw,n=t.length,r,i="value"in ja?ja.value:ja.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[o-r];r++);return Ag=i.slice(e,1<r?1-r:void 0)}function Pg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function cf(){return!0}function u3(){return!1}function fi(e){function t(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?cf:u3,this.isPropagationStopped=u3,this}return an(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cf)},persist:function(){},isPersistent:cf}),t}var tu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zw=fi(tu),Jp=an({},tu,{view:0,detail:0}),gz=fi(Jp),yx,bx,Nu,$0=an({},Jp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Nu&&(Nu&&e.type==="mousemove"?(yx=e.screenX-Nu.screenX,bx=e.screenY-Nu.screenY):bx=yx=0,Nu=e),yx)},movementY:function(e){return"movementY"in e?e.movementY:bx}}),d3=fi($0),mz=an({},$0,{dataTransfer:0}),vz=fi(mz),xz=an({},Jp,{relatedTarget:0}),wx=fi(xz),yz=an({},tu,{animationName:0,elapsedTime:0,pseudoElement:0}),bz=fi(yz),wz=an({},tu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Sz=fi(wz),Cz=an({},tu,{data:0}),p3=fi(Cz),_z={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kz={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ez={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tz(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ez[e])?!!t[e]:!1}function Vw(){return Tz}var Iz=an({},Jp,{key:function(e){if(e.key){var t=_z[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Pg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?kz[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vw,charCode:function(e){return e.type==="keypress"?Pg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Pg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Az=fi(Iz),Pz=an({},$0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),h3=fi(Pz),Dz=an({},Jp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vw}),Rz=fi(Dz),Nz=an({},tu,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mz=fi(Nz),Oz=an({},$0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$z=fi(Oz),Lz=[9,13,27,32],jw=Xo&&"CompositionEvent"in window,Td=null;Xo&&"documentMode"in document&&(Td=document.documentMode);var Fz=Xo&&"TextEvent"in window&&!Td,_D=Xo&&(!jw||Td&&8<Td&&11>=Td),f3=" ",g3=!1;function kD(e,t){switch(e){case"keyup":return Lz.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ED(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ql=!1;function Bz(e,t){switch(e){case"compositionend":return ED(t);case"keypress":return t.which!==32?null:(g3=!0,f3);case"textInput":return e=t.data,e===f3&&g3?null:e;default:return null}}function zz(e,t){if(Ql)return e==="compositionend"||!jw&&kD(e,t)?(e=CD(),Ag=Bw=ja=null,Ql=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _D&&t.locale!=="ko"?null:t.data;default:return null}}var Vz={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function m3(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Vz[e.type]:t==="textarea"}function TD(e,t,n,r){iD(r),t=dm(t,"onChange"),0<t.length&&(n=new zw("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Id=null,ap=null;function jz(e){FD(e,0)}function L0(e){var t=ec(e);if(QP(t))return e}function Uz(e,t){if(e==="change")return t}var ID=!1;if(Xo){var Sx;if(Xo){var Cx="oninput"in document;if(!Cx){var v3=document.createElement("div");v3.setAttribute("oninput","return;"),Cx=typeof v3.oninput=="function"}Sx=Cx}else Sx=!1;ID=Sx&&(!document.documentMode||9<document.documentMode)}function x3(){Id&&(Id.detachEvent("onpropertychange",AD),ap=Id=null)}function AD(e){if(e.propertyName==="value"&&L0(ap)){var t=[];TD(t,ap,e,Mw(e)),lD(jz,t)}}function qz(e,t,n){e==="focusin"?(x3(),Id=t,ap=n,Id.attachEvent("onpropertychange",AD)):e==="focusout"&&x3()}function Wz(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return L0(ap)}function Hz(e,t){if(e==="click")return L0(t)}function Gz(e,t){if(e==="input"||e==="change")return L0(t)}function Yz(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ji=typeof Object.is=="function"?Object.is:Yz;function sp(e,t){if(Ji(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!rb.call(t,i)||!Ji(e[i],t[i]))return!1}return!0}function y3(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function b3(e,t){var n=y3(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=y3(n)}}function PD(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?PD(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function DD(){for(var e=window,t=im();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=im(e.document)}return t}function Uw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Kz(e){var t=DD(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&PD(n.ownerDocument.documentElement,n)){if(r!==null&&Uw(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=b3(n,o);var a=b3(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Xz=Xo&&"documentMode"in document&&11>=document.documentMode,Jl=null,Sb=null,Ad=null,Cb=!1;function w3(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Cb||Jl==null||Jl!==im(r)||(r=Jl,"selectionStart"in r&&Uw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ad&&sp(Ad,r)||(Ad=r,r=dm(Sb,"onSelect"),0<r.length&&(t=new zw("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Jl)))}function uf(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Zl={animationend:uf("Animation","AnimationEnd"),animationiteration:uf("Animation","AnimationIteration"),animationstart:uf("Animation","AnimationStart"),transitionend:uf("Transition","TransitionEnd")},_x={},RD={};Xo&&(RD=document.createElement("div").style,"AnimationEvent"in window||(delete Zl.animationend.animation,delete Zl.animationiteration.animation,delete Zl.animationstart.animation),"TransitionEvent"in window||delete Zl.transitionend.transition);function F0(e){if(_x[e])return _x[e];if(!Zl[e])return e;var t=Zl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in RD)return _x[e]=t[n];return e}var ND=F0("animationend"),MD=F0("animationiteration"),OD=F0("animationstart"),$D=F0("transitionend"),LD=new Map,S3="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ws(e,t){LD.set(e,t),bl(t,[e])}for(var kx=0;kx<S3.length;kx++){var Ex=S3[kx],Qz=Ex.toLowerCase(),Jz=Ex[0].toUpperCase()+Ex.slice(1);ws(Qz,"on"+Jz)}ws(ND,"onAnimationEnd");ws(MD,"onAnimationIteration");ws(OD,"onAnimationStart");ws("dblclick","onDoubleClick");ws("focusin","onFocus");ws("focusout","onBlur");ws($D,"onTransitionEnd");Ic("onMouseEnter",["mouseout","mouseover"]);Ic("onMouseLeave",["mouseout","mouseover"]);Ic("onPointerEnter",["pointerout","pointerover"]);Ic("onPointerLeave",["pointerout","pointerover"]);bl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bl("onBeforeInput",["compositionend","keypress","textInput","paste"]);bl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zz=new Set("cancel close invalid load scroll toggle".split(" ").concat(hd));function C3(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,QB(r,t,void 0,e),e.currentTarget=null}function FD(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;C3(i,s,c),o=l}else for(a=0;a<r.length;a++){if(s=r[a],l=s.instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;C3(i,s,c),o=l}}}if(am)throw e=xb,am=!1,xb=null,e}function Xt(e,t){var n=t[Ib];n===void 0&&(n=t[Ib]=new Set);var r=e+"__bubble";n.has(r)||(BD(t,e,2,!1),n.add(r))}function Tx(e,t,n){var r=0;t&&(r|=4),BD(n,e,r,t)}var df="_reactListening"+Math.random().toString(36).slice(2);function lp(e){if(!e[df]){e[df]=!0,HP.forEach(function(n){n!=="selectionchange"&&(Zz.has(n)||Tx(n,!1,e),Tx(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[df]||(t[df]=!0,Tx("selectionchange",!1,t))}}function BD(e,t,n,r){switch(SD(t)){case 1:var i=hz;break;case 4:i=fz;break;default:i=Fw}n=i.bind(null,t,n,e),i=void 0,!vb||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Ix(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;s!==null;){if(a=Ks(s),a===null)return;if(l=a.tag,l===5||l===6){r=o=a;continue e}s=s.parentNode}}r=r.return}lD(function(){var c=o,d=Mw(n),p=[];e:{var f=LD.get(e);if(f!==void 0){var h=zw,g=e;switch(e){case"keypress":if(Pg(n)===0)break e;case"keydown":case"keyup":h=Az;break;case"focusin":g="focus",h=wx;break;case"focusout":g="blur",h=wx;break;case"beforeblur":case"afterblur":h=wx;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=d3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=vz;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Rz;break;case ND:case MD:case OD:h=bz;break;case $D:h=Mz;break;case"scroll":h=gz;break;case"wheel":h=$z;break;case"copy":case"cut":case"paste":h=Sz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=h3}var m=(t&4)!==0,v=!m&&e==="scroll",w=m?f!==null?f+"Capture":null:f;m=[];for(var S=c,C;S!==null;){C=S;var A=C.stateNode;if(C.tag===5&&A!==null&&(C=A,w!==null&&(A=np(S,w),A!=null&&m.push(cp(S,A,C)))),v)break;S=S.return}0<m.length&&(f=new h(f,g,null,n,d),p.push({event:f,listeners:m}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&n!==gb&&(g=n.relatedTarget||n.fromElement)&&(Ks(g)||g[Qo]))break e;if((h||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,h?(g=n.relatedTarget||n.toElement,h=c,g=g?Ks(g):null,g!==null&&(v=wl(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(h=null,g=c),h!==g)){if(m=d3,A="onMouseLeave",w="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(m=h3,A="onPointerLeave",w="onPointerEnter",S="pointer"),v=h==null?f:ec(h),C=g==null?f:ec(g),f=new m(A,S+"leave",h,n,d),f.target=v,f.relatedTarget=C,A=null,Ks(d)===c&&(m=new m(w,S+"enter",g,n,d),m.target=C,m.relatedTarget=v,A=m),v=A,h&&g)t:{for(m=h,w=g,S=0,C=m;C;C=Dl(C))S++;for(C=0,A=w;A;A=Dl(A))C++;for(;0<S-C;)m=Dl(m),S--;for(;0<C-S;)w=Dl(w),C--;for(;S--;){if(m===w||w!==null&&m===w.alternate)break t;m=Dl(m),w=Dl(w)}m=null}else m=null;h!==null&&_3(p,f,h,m,!1),g!==null&&v!==null&&_3(p,v,g,m,!0)}}e:{if(f=c?ec(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var _=Uz;else if(m3(f))if(ID)_=Gz;else{_=Wz;var I=qz}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=Hz);if(_&&(_=_(e,c))){TD(p,_,n,d);break e}I&&I(e,f,c),e==="focusout"&&(I=f._wrapperState)&&I.controlled&&f.type==="number"&&ub(f,"number",f.value)}switch(I=c?ec(c):window,e){case"focusin":(m3(I)||I.contentEditable==="true")&&(Jl=I,Sb=c,Ad=null);break;case"focusout":Ad=Sb=Jl=null;break;case"mousedown":Cb=!0;break;case"contextmenu":case"mouseup":case"dragend":Cb=!1,w3(p,n,d);break;case"selectionchange":if(Xz)break;case"keydown":case"keyup":w3(p,n,d)}var E;if(jw)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Ql?kD(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(_D&&n.locale!=="ko"&&(Ql||k!=="onCompositionStart"?k==="onCompositionEnd"&&Ql&&(E=CD()):(ja=d,Bw="value"in ja?ja.value:ja.textContent,Ql=!0)),I=dm(c,k),0<I.length&&(k=new p3(k,e,null,n,d),p.push({event:k,listeners:I}),E?k.data=E:(E=ED(n),E!==null&&(k.data=E)))),(E=Fz?Bz(e,n):zz(e,n))&&(c=dm(c,"onBeforeInput"),0<c.length&&(d=new p3("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:c}),d.data=E))}FD(p,t)})}function cp(e,t,n){return{instance:e,listener:t,currentTarget:n}}function dm(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=np(e,n),o!=null&&r.unshift(cp(e,o,i)),o=np(e,t),o!=null&&r.push(cp(e,o,i))),e=e.return}return r}function Dl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function _3(e,t,n,r,i){for(var o=t._reactName,a=[];n!==null&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&c!==null&&(s=c,i?(l=np(n,o),l!=null&&a.unshift(cp(n,l,s))):i||(l=np(n,o),l!=null&&a.push(cp(n,l,s)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var e7=/\r\n?/g,t7=/\u0000|\uFFFD/g;function k3(e){return(typeof e=="string"?e:""+e).replace(e7,`
`).replace(t7,"")}function pf(e,t,n){if(t=k3(t),k3(e)!==t&&n)throw Error(xe(425))}function pm(){}var _b=null,kb=null;function Eb(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Tb=typeof setTimeout=="function"?setTimeout:void 0,n7=typeof clearTimeout=="function"?clearTimeout:void 0,E3=typeof Promise=="function"?Promise:void 0,r7=typeof queueMicrotask=="function"?queueMicrotask:typeof E3<"u"?function(e){return E3.resolve(null).then(e).catch(i7)}:Tb;function i7(e){setTimeout(function(){throw e})}function Ax(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),op(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);op(t)}function Ka(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function T3(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var nu=Math.random().toString(36).slice(2),po="__reactFiber$"+nu,up="__reactProps$"+nu,Qo="__reactContainer$"+nu,Ib="__reactEvents$"+nu,o7="__reactListeners$"+nu,a7="__reactHandles$"+nu;function Ks(e){var t=e[po];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Qo]||n[po]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=T3(e);e!==null;){if(n=e[po])return n;e=T3(e)}return t}e=n,n=e.parentNode}return null}function Zp(e){return e=e[po]||e[Qo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ec(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(xe(33))}function B0(e){return e[up]||null}var Ab=[],tc=-1;function Ss(e){return{current:e}}function Jt(e){0>tc||(e.current=Ab[tc],Ab[tc]=null,tc--)}function Gt(e,t){tc++,Ab[tc]=e.current,e.current=t}var us={},yr=Ss(us),Wr=Ss(!1),ll=us;function Ac(e,t){var n=e.type.contextTypes;if(!n)return us;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Hr(e){return e=e.childContextTypes,e!=null}function hm(){Jt(Wr),Jt(yr)}function I3(e,t,n){if(yr.current!==us)throw Error(xe(168));Gt(yr,t),Gt(Wr,n)}function zD(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(xe(108,qB(e)||"Unknown",i));return an({},n,r)}function fm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||us,ll=yr.current,Gt(yr,e),Gt(Wr,Wr.current),!0}function A3(e,t,n){var r=e.stateNode;if(!r)throw Error(xe(169));n?(e=zD(e,t,ll),r.__reactInternalMemoizedMergedChildContext=e,Jt(Wr),Jt(yr),Gt(yr,e)):Jt(Wr),Gt(Wr,n)}var Vo=null,z0=!1,Px=!1;function VD(e){Vo===null?Vo=[e]:Vo.push(e)}function s7(e){z0=!0,VD(e)}function Cs(){if(!Px&&Vo!==null){Px=!0;var e=0,t=$t;try{var n=Vo;for($t=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Vo=null,z0=!1}catch(i){throw Vo!==null&&(Vo=Vo.slice(e+1)),pD(Ow,Cs),i}finally{$t=t,Px=!1}}return null}var nc=[],rc=0,gm=null,mm=0,Ii=[],Ai=0,cl=null,jo=1,Uo="";function qs(e,t){nc[rc++]=mm,nc[rc++]=gm,gm=e,mm=t}function jD(e,t,n){Ii[Ai++]=jo,Ii[Ai++]=Uo,Ii[Ai++]=cl,cl=e;var r=jo;e=Uo;var i=32-Xi(r)-1;r&=~(1<<i),n+=1;var o=32-Xi(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,jo=1<<32-Xi(t)+i|n<<i|r,Uo=o+e}else jo=1<<o|n<<i|r,Uo=e}function qw(e){e.return!==null&&(qs(e,1),jD(e,1,0))}function Ww(e){for(;e===gm;)gm=nc[--rc],nc[rc]=null,mm=nc[--rc],nc[rc]=null;for(;e===cl;)cl=Ii[--Ai],Ii[Ai]=null,Uo=Ii[--Ai],Ii[Ai]=null,jo=Ii[--Ai],Ii[Ai]=null}var ai=null,ei=null,Zt=!1,Gi=null;function UD(e,t){var n=Pi(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function P3(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ai=e,ei=Ka(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ai=e,ei=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=cl!==null?{id:jo,overflow:Uo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Pi(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ai=e,ei=null,!0):!1;default:return!1}}function Pb(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Db(e){if(Zt){var t=ei;if(t){var n=t;if(!P3(e,t)){if(Pb(e))throw Error(xe(418));t=Ka(n.nextSibling);var r=ai;t&&P3(e,t)?UD(r,n):(e.flags=e.flags&-4097|2,Zt=!1,ai=e)}}else{if(Pb(e))throw Error(xe(418));e.flags=e.flags&-4097|2,Zt=!1,ai=e}}}function D3(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ai=e}function hf(e){if(e!==ai)return!1;if(!Zt)return D3(e),Zt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Eb(e.type,e.memoizedProps)),t&&(t=ei)){if(Pb(e))throw qD(),Error(xe(418));for(;t;)UD(e,t),t=Ka(t.nextSibling)}if(D3(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(xe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ei=Ka(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ei=null}}else ei=ai?Ka(e.stateNode.nextSibling):null;return!0}function qD(){for(var e=ei;e;)e=Ka(e.nextSibling)}function Pc(){ei=ai=null,Zt=!1}function Hw(e){Gi===null?Gi=[e]:Gi.push(e)}var l7=la.ReactCurrentBatchConfig;function Mu(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(xe(309));var r=n.stateNode}if(!r)throw Error(xe(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(xe(284));if(!n._owner)throw Error(xe(290,e))}return e}function ff(e,t){throw e=Object.prototype.toString.call(t),Error(xe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function R3(e){var t=e._init;return t(e._payload)}function WD(e){function t(w,S){if(e){var C=w.deletions;C===null?(w.deletions=[S],w.flags|=16):C.push(S)}}function n(w,S){if(!e)return null;for(;S!==null;)t(w,S),S=S.sibling;return null}function r(w,S){for(w=new Map;S!==null;)S.key!==null?w.set(S.key,S):w.set(S.index,S),S=S.sibling;return w}function i(w,S){return w=Za(w,S),w.index=0,w.sibling=null,w}function o(w,S,C){return w.index=C,e?(C=w.alternate,C!==null?(C=C.index,C<S?(w.flags|=2,S):C):(w.flags|=2,S)):(w.flags|=1048576,S)}function a(w){return e&&w.alternate===null&&(w.flags|=2),w}function s(w,S,C,A){return S===null||S.tag!==6?(S=Lx(C,w.mode,A),S.return=w,S):(S=i(S,C),S.return=w,S)}function l(w,S,C,A){var _=C.type;return _===Xl?d(w,S,C.props.children,A,C.key):S!==null&&(S.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ra&&R3(_)===S.type)?(A=i(S,C.props),A.ref=Mu(w,S,C),A.return=w,A):(A=Lg(C.type,C.key,C.props,null,w.mode,A),A.ref=Mu(w,S,C),A.return=w,A)}function c(w,S,C,A){return S===null||S.tag!==4||S.stateNode.containerInfo!==C.containerInfo||S.stateNode.implementation!==C.implementation?(S=Fx(C,w.mode,A),S.return=w,S):(S=i(S,C.children||[]),S.return=w,S)}function d(w,S,C,A,_){return S===null||S.tag!==7?(S=nl(C,w.mode,A,_),S.return=w,S):(S=i(S,C),S.return=w,S)}function p(w,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Lx(""+S,w.mode,C),S.return=w,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case nf:return C=Lg(S.type,S.key,S.props,null,w.mode,C),C.ref=Mu(w,null,S),C.return=w,C;case Kl:return S=Fx(S,w.mode,C),S.return=w,S;case Ra:var A=S._init;return p(w,A(S._payload),C)}if(dd(S)||Au(S))return S=nl(S,w.mode,C,null),S.return=w,S;ff(w,S)}return null}function f(w,S,C,A){var _=S!==null?S.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return _!==null?null:s(w,S,""+C,A);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case nf:return C.key===_?l(w,S,C,A):null;case Kl:return C.key===_?c(w,S,C,A):null;case Ra:return _=C._init,f(w,S,_(C._payload),A)}if(dd(C)||Au(C))return _!==null?null:d(w,S,C,A,null);ff(w,C)}return null}function h(w,S,C,A,_){if(typeof A=="string"&&A!==""||typeof A=="number")return w=w.get(C)||null,s(S,w,""+A,_);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case nf:return w=w.get(A.key===null?C:A.key)||null,l(S,w,A,_);case Kl:return w=w.get(A.key===null?C:A.key)||null,c(S,w,A,_);case Ra:var I=A._init;return h(w,S,C,I(A._payload),_)}if(dd(A)||Au(A))return w=w.get(C)||null,d(S,w,A,_,null);ff(S,A)}return null}function g(w,S,C,A){for(var _=null,I=null,E=S,k=S=0,T=null;E!==null&&k<C.length;k++){E.index>k?(T=E,E=null):T=E.sibling;var P=f(w,E,C[k],A);if(P===null){E===null&&(E=T);break}e&&E&&P.alternate===null&&t(w,E),S=o(P,S,k),I===null?_=P:I.sibling=P,I=P,E=T}if(k===C.length)return n(w,E),Zt&&qs(w,k),_;if(E===null){for(;k<C.length;k++)E=p(w,C[k],A),E!==null&&(S=o(E,S,k),I===null?_=E:I.sibling=E,I=E);return Zt&&qs(w,k),_}for(E=r(w,E);k<C.length;k++)T=h(E,w,k,C[k],A),T!==null&&(e&&T.alternate!==null&&E.delete(T.key===null?k:T.key),S=o(T,S,k),I===null?_=T:I.sibling=T,I=T);return e&&E.forEach(function(O){return t(w,O)}),Zt&&qs(w,k),_}function m(w,S,C,A){var _=Au(C);if(typeof _!="function")throw Error(xe(150));if(C=_.call(C),C==null)throw Error(xe(151));for(var I=_=null,E=S,k=S=0,T=null,P=C.next();E!==null&&!P.done;k++,P=C.next()){E.index>k?(T=E,E=null):T=E.sibling;var O=f(w,E,P.value,A);if(O===null){E===null&&(E=T);break}e&&E&&O.alternate===null&&t(w,E),S=o(O,S,k),I===null?_=O:I.sibling=O,I=O,E=T}if(P.done)return n(w,E),Zt&&qs(w,k),_;if(E===null){for(;!P.done;k++,P=C.next())P=p(w,P.value,A),P!==null&&(S=o(P,S,k),I===null?_=P:I.sibling=P,I=P);return Zt&&qs(w,k),_}for(E=r(w,E);!P.done;k++,P=C.next())P=h(E,w,k,P.value,A),P!==null&&(e&&P.alternate!==null&&E.delete(P.key===null?k:P.key),S=o(P,S,k),I===null?_=P:I.sibling=P,I=P);return e&&E.forEach(function(R){return t(w,R)}),Zt&&qs(w,k),_}function v(w,S,C,A){if(typeof C=="object"&&C!==null&&C.type===Xl&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case nf:e:{for(var _=C.key,I=S;I!==null;){if(I.key===_){if(_=C.type,_===Xl){if(I.tag===7){n(w,I.sibling),S=i(I,C.props.children),S.return=w,w=S;break e}}else if(I.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ra&&R3(_)===I.type){n(w,I.sibling),S=i(I,C.props),S.ref=Mu(w,I,C),S.return=w,w=S;break e}n(w,I);break}else t(w,I);I=I.sibling}C.type===Xl?(S=nl(C.props.children,w.mode,A,C.key),S.return=w,w=S):(A=Lg(C.type,C.key,C.props,null,w.mode,A),A.ref=Mu(w,S,C),A.return=w,w=A)}return a(w);case Kl:e:{for(I=C.key;S!==null;){if(S.key===I)if(S.tag===4&&S.stateNode.containerInfo===C.containerInfo&&S.stateNode.implementation===C.implementation){n(w,S.sibling),S=i(S,C.children||[]),S.return=w,w=S;break e}else{n(w,S);break}else t(w,S);S=S.sibling}S=Fx(C,w.mode,A),S.return=w,w=S}return a(w);case Ra:return I=C._init,v(w,S,I(C._payload),A)}if(dd(C))return g(w,S,C,A);if(Au(C))return m(w,S,C,A);ff(w,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,S!==null&&S.tag===6?(n(w,S.sibling),S=i(S,C),S.return=w,w=S):(n(w,S),S=Lx(C,w.mode,A),S.return=w,w=S),a(w)):n(w,S)}return v}var Dc=WD(!0),HD=WD(!1),vm=Ss(null),xm=null,ic=null,Gw=null;function Yw(){Gw=ic=xm=null}function Kw(e){var t=vm.current;Jt(vm),e._currentValue=t}function Rb(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function bc(e,t){xm=e,Gw=ic=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Vr=!0),e.firstContext=null)}function $i(e){var t=e._currentValue;if(Gw!==e)if(e={context:e,memoizedValue:t,next:null},ic===null){if(xm===null)throw Error(xe(308));ic=e,xm.dependencies={lanes:0,firstContext:e}}else ic=ic.next=e;return t}var Xs=null;function Xw(e){Xs===null?Xs=[e]:Xs.push(e)}function GD(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Xw(t)):(n.next=i.next,i.next=n),t.interleaved=n,Jo(e,r)}function Jo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Na=!1;function Qw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function YD(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ho(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xa(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Et&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Jo(e,n)}return i=r.interleaved,i===null?(t.next=t,Xw(r)):(t.next=i.next,i.next=t),r.interleaved=t,Jo(e,n)}function Dg(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,$w(e,n)}}function N3(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ym(e,t,n,r){var i=e.updateQueue;Na=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,c=l.next;l.next=null,a===null?o=c:a.next=c,a=l;var d=e.alternate;d!==null&&(d=d.updateQueue,s=d.lastBaseUpdate,s!==a&&(s===null?d.firstBaseUpdate=c:s.next=c,d.lastBaseUpdate=l))}if(o!==null){var p=i.baseState;a=0,d=c=l=null,s=o;do{var f=s.lane,h=s.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var g=e,m=s;switch(f=t,h=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){p=g.call(h,p,f);break e}p=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,f=typeof g=="function"?g.call(h,p,f):g,f==null)break e;p=an({},p,f);break e;case 2:Na=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[s]:f.push(s))}else h={eventTime:h,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},d===null?(c=d=h,l=p):d=d.next=h,a|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;f=s,s=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=p),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);dl|=a,e.lanes=a,e.memoizedState=p}}function M3(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(xe(191,i));i.call(r)}}}var eh={},vo=Ss(eh),dp=Ss(eh),pp=Ss(eh);function Qs(e){if(e===eh)throw Error(xe(174));return e}function Jw(e,t){switch(Gt(pp,t),Gt(dp,e),Gt(vo,eh),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pb(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=pb(t,e)}Jt(vo),Gt(vo,t)}function Rc(){Jt(vo),Jt(dp),Jt(pp)}function KD(e){Qs(pp.current);var t=Qs(vo.current),n=pb(t,e.type);t!==n&&(Gt(dp,e),Gt(vo,n))}function Zw(e){dp.current===e&&(Jt(vo),Jt(dp))}var en=Ss(0);function bm(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Dx=[];function e5(){for(var e=0;e<Dx.length;e++)Dx[e]._workInProgressVersionPrimary=null;Dx.length=0}var Rg=la.ReactCurrentDispatcher,Rx=la.ReactCurrentBatchConfig,ul=0,rn=null,Dn=null,Bn=null,wm=!1,Pd=!1,hp=0,c7=0;function lr(){throw Error(xe(321))}function t5(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ji(e[n],t[n]))return!1;return!0}function n5(e,t,n,r,i,o){if(ul=o,rn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Rg.current=e===null||e.memoizedState===null?h7:f7,e=n(r,i),Pd){o=0;do{if(Pd=!1,hp=0,25<=o)throw Error(xe(301));o+=1,Bn=Dn=null,t.updateQueue=null,Rg.current=g7,e=n(r,i)}while(Pd)}if(Rg.current=Sm,t=Dn!==null&&Dn.next!==null,ul=0,Bn=Dn=rn=null,wm=!1,t)throw Error(xe(300));return e}function r5(){var e=hp!==0;return hp=0,e}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bn===null?rn.memoizedState=Bn=e:Bn=Bn.next=e,Bn}function Li(){if(Dn===null){var e=rn.alternate;e=e!==null?e.memoizedState:null}else e=Dn.next;var t=Bn===null?rn.memoizedState:Bn.next;if(t!==null)Bn=t,Dn=e;else{if(e===null)throw Error(xe(310));Dn=e,e={memoizedState:Dn.memoizedState,baseState:Dn.baseState,baseQueue:Dn.baseQueue,queue:Dn.queue,next:null},Bn===null?rn.memoizedState=Bn=e:Bn=Bn.next=e}return Bn}function fp(e,t){return typeof t=="function"?t(e):t}function Nx(e){var t=Li(),n=t.queue;if(n===null)throw Error(xe(311));n.lastRenderedReducer=e;var r=Dn,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,l=null,c=o;do{var d=c.lane;if((ul&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var p={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(s=l=p,a=r):l=l.next=p,rn.lanes|=d,dl|=d}c=c.next}while(c!==null&&c!==o);l===null?a=r:l.next=s,Ji(r,t.memoizedState)||(Vr=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,rn.lanes|=o,dl|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Mx(e){var t=Li(),n=t.queue;if(n===null)throw Error(xe(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);Ji(o,t.memoizedState)||(Vr=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function XD(){}function QD(e,t){var n=rn,r=Li(),i=t(),o=!Ji(r.memoizedState,i);if(o&&(r.memoizedState=i,Vr=!0),r=r.queue,i5(eR.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Bn!==null&&Bn.memoizedState.tag&1){if(n.flags|=2048,gp(9,ZD.bind(null,n,r,i,t),void 0,null),zn===null)throw Error(xe(349));ul&30||JD(n,t,i)}return i}function JD(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=rn.updateQueue,t===null?(t={lastEffect:null,stores:null},rn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ZD(e,t,n,r){t.value=n,t.getSnapshot=r,tR(t)&&nR(e)}function eR(e,t,n){return n(function(){tR(t)&&nR(e)})}function tR(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ji(e,n)}catch{return!0}}function nR(e){var t=Jo(e,1);t!==null&&Qi(t,e,1,-1)}function O3(e){var t=so();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fp,lastRenderedState:e},t.queue=e,e=e.dispatch=p7.bind(null,rn,e),[t.memoizedState,e]}function gp(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=rn.updateQueue,t===null?(t={lastEffect:null,stores:null},rn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function rR(){return Li().memoizedState}function Ng(e,t,n,r){var i=so();rn.flags|=e,i.memoizedState=gp(1|t,n,void 0,r===void 0?null:r)}function V0(e,t,n,r){var i=Li();r=r===void 0?null:r;var o=void 0;if(Dn!==null){var a=Dn.memoizedState;if(o=a.destroy,r!==null&&t5(r,a.deps)){i.memoizedState=gp(t,n,o,r);return}}rn.flags|=e,i.memoizedState=gp(1|t,n,o,r)}function $3(e,t){return Ng(8390656,8,e,t)}function i5(e,t){return V0(2048,8,e,t)}function iR(e,t){return V0(4,2,e,t)}function oR(e,t){return V0(4,4,e,t)}function aR(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sR(e,t,n){return n=n!=null?n.concat([e]):null,V0(4,4,aR.bind(null,t,e),n)}function o5(){}function lR(e,t){var n=Li();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&t5(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function cR(e,t){var n=Li();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&t5(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function uR(e,t,n){return ul&21?(Ji(n,t)||(n=gD(),rn.lanes|=n,dl|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Vr=!0),e.memoizedState=n)}function u7(e,t){var n=$t;$t=n!==0&&4>n?n:4,e(!0);var r=Rx.transition;Rx.transition={};try{e(!1),t()}finally{$t=n,Rx.transition=r}}function dR(){return Li().memoizedState}function d7(e,t,n){var r=Ja(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},pR(e))hR(t,n);else if(n=GD(e,t,n,r),n!==null){var i=Ir();Qi(n,e,r,i),fR(n,t,r)}}function p7(e,t,n){var r=Ja(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(pR(e))hR(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,Ji(s,a)){var l=t.interleaved;l===null?(i.next=i,Xw(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=GD(e,t,i,r),n!==null&&(i=Ir(),Qi(n,e,r,i),fR(n,t,r))}}function pR(e){var t=e.alternate;return e===rn||t!==null&&t===rn}function hR(e,t){Pd=wm=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function fR(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,$w(e,n)}}var Sm={readContext:$i,useCallback:lr,useContext:lr,useEffect:lr,useImperativeHandle:lr,useInsertionEffect:lr,useLayoutEffect:lr,useMemo:lr,useReducer:lr,useRef:lr,useState:lr,useDebugValue:lr,useDeferredValue:lr,useTransition:lr,useMutableSource:lr,useSyncExternalStore:lr,useId:lr,unstable_isNewReconciler:!1},h7={readContext:$i,useCallback:function(e,t){return so().memoizedState=[e,t===void 0?null:t],e},useContext:$i,useEffect:$3,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ng(4194308,4,aR.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ng(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ng(4,2,e,t)},useMemo:function(e,t){var n=so();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=so();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=d7.bind(null,rn,e),[r.memoizedState,e]},useRef:function(e){var t=so();return e={current:e},t.memoizedState=e},useState:O3,useDebugValue:o5,useDeferredValue:function(e){return so().memoizedState=e},useTransition:function(){var e=O3(!1),t=e[0];return e=u7.bind(null,e[1]),so().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=rn,i=so();if(Zt){if(n===void 0)throw Error(xe(407));n=n()}else{if(n=t(),zn===null)throw Error(xe(349));ul&30||JD(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,$3(eR.bind(null,r,o,e),[e]),r.flags|=2048,gp(9,ZD.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=so(),t=zn.identifierPrefix;if(Zt){var n=Uo,r=jo;n=(r&~(1<<32-Xi(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=hp++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=c7++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},f7={readContext:$i,useCallback:lR,useContext:$i,useEffect:i5,useImperativeHandle:sR,useInsertionEffect:iR,useLayoutEffect:oR,useMemo:cR,useReducer:Nx,useRef:rR,useState:function(){return Nx(fp)},useDebugValue:o5,useDeferredValue:function(e){var t=Li();return uR(t,Dn.memoizedState,e)},useTransition:function(){var e=Nx(fp)[0],t=Li().memoizedState;return[e,t]},useMutableSource:XD,useSyncExternalStore:QD,useId:dR,unstable_isNewReconciler:!1},g7={readContext:$i,useCallback:lR,useContext:$i,useEffect:i5,useImperativeHandle:sR,useInsertionEffect:iR,useLayoutEffect:oR,useMemo:cR,useReducer:Mx,useRef:rR,useState:function(){return Mx(fp)},useDebugValue:o5,useDeferredValue:function(e){var t=Li();return Dn===null?t.memoizedState=e:uR(t,Dn.memoizedState,e)},useTransition:function(){var e=Mx(fp)[0],t=Li().memoizedState;return[e,t]},useMutableSource:XD,useSyncExternalStore:QD,useId:dR,unstable_isNewReconciler:!1};function Wi(e,t){if(e&&e.defaultProps){t=an({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Nb(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:an({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var j0={isMounted:function(e){return(e=e._reactInternals)?wl(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ir(),i=Ja(e),o=Ho(r,i);o.payload=t,n!=null&&(o.callback=n),t=Xa(e,o,i),t!==null&&(Qi(t,e,i,r),Dg(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ir(),i=Ja(e),o=Ho(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Xa(e,o,i),t!==null&&(Qi(t,e,i,r),Dg(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ir(),r=Ja(e),i=Ho(n,r);i.tag=2,t!=null&&(i.callback=t),t=Xa(e,i,r),t!==null&&(Qi(t,e,r,n),Dg(t,e,r))}};function L3(e,t,n,r,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!sp(n,r)||!sp(i,o):!0}function gR(e,t,n){var r=!1,i=us,o=t.contextType;return typeof o=="object"&&o!==null?o=$i(o):(i=Hr(t)?ll:yr.current,r=t.contextTypes,o=(r=r!=null)?Ac(e,i):us),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=j0,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function F3(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&j0.enqueueReplaceState(t,t.state,null)}function Mb(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Qw(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=$i(o):(o=Hr(t)?ll:yr.current,i.context=Ac(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Nb(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&j0.enqueueReplaceState(i,i.state,null),ym(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Nc(e,t){try{var n="",r=t;do n+=UB(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function Ox(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ob(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var m7=typeof WeakMap=="function"?WeakMap:Map;function mR(e,t,n){n=Ho(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){_m||(_m=!0,Wb=r),Ob(e,t)},n}function vR(e,t,n){n=Ho(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Ob(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Ob(e,t),typeof r!="function"&&(Qa===null?Qa=new Set([this]):Qa.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function B3(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new m7;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=P7.bind(null,e,t,n),t.then(e,e))}function z3(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function V3(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ho(-1,1),t.tag=2,Xa(n,t,1))),n.lanes|=1),e)}var v7=la.ReactCurrentOwner,Vr=!1;function Er(e,t,n,r){t.child=e===null?HD(t,null,n,r):Dc(t,e.child,n,r)}function j3(e,t,n,r,i){n=n.render;var o=t.ref;return bc(t,i),r=n5(e,t,n,r,o,i),n=r5(),e!==null&&!Vr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Zo(e,t,i)):(Zt&&n&&qw(t),t.flags|=1,Er(e,t,r,i),t.child)}function U3(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!h5(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,xR(e,t,o,r,i)):(e=Lg(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:sp,n(a,r)&&e.ref===t.ref)return Zo(e,t,i)}return t.flags|=1,e=Za(o,r),e.ref=t.ref,e.return=t,t.child=e}function xR(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(sp(o,r)&&e.ref===t.ref)if(Vr=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(Vr=!0);else return t.lanes=e.lanes,Zo(e,t,i)}return $b(e,t,n,r,i)}function yR(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Gt(ac,Jr),Jr|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Gt(ac,Jr),Jr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Gt(ac,Jr),Jr|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Gt(ac,Jr),Jr|=r;return Er(e,t,i,n),t.child}function bR(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function $b(e,t,n,r,i){var o=Hr(n)?ll:yr.current;return o=Ac(t,o),bc(t,i),n=n5(e,t,n,r,o,i),r=r5(),e!==null&&!Vr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Zo(e,t,i)):(Zt&&r&&qw(t),t.flags|=1,Er(e,t,n,i),t.child)}function q3(e,t,n,r,i){if(Hr(n)){var o=!0;fm(t)}else o=!1;if(bc(t,i),t.stateNode===null)Mg(e,t),gR(t,n,r),Mb(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=$i(c):(c=Hr(n)?ll:yr.current,c=Ac(t,c));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||l!==c)&&F3(t,a,r,c),Na=!1;var f=t.memoizedState;a.state=f,ym(t,r,a,i),l=t.memoizedState,s!==r||f!==l||Wr.current||Na?(typeof d=="function"&&(Nb(t,n,d,r),l=t.memoizedState),(s=Na||L3(t,n,s,r,f,l,c))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,YD(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Wi(t.type,s),a.props=c,p=t.pendingProps,f=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=$i(l):(l=Hr(n)?ll:yr.current,l=Ac(t,l));var h=n.getDerivedStateFromProps;(d=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==p||f!==l)&&F3(t,a,r,l),Na=!1,f=t.memoizedState,a.state=f,ym(t,r,a,i);var g=t.memoizedState;s!==p||f!==g||Wr.current||Na?(typeof h=="function"&&(Nb(t,n,h,r),g=t.memoizedState),(c=Na||L3(t,n,c,r,f,g,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),a.props=r,a.state=g,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Lb(e,t,n,r,o,i)}function Lb(e,t,n,r,i,o){bR(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&A3(t,n,!1),Zo(e,t,o);r=t.stateNode,v7.current=t;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Dc(t,e.child,null,o),t.child=Dc(t,null,s,o)):Er(e,t,s,o),t.memoizedState=r.state,i&&A3(t,n,!0),t.child}function wR(e){var t=e.stateNode;t.pendingContext?I3(e,t.pendingContext,t.pendingContext!==t.context):t.context&&I3(e,t.context,!1),Jw(e,t.containerInfo)}function W3(e,t,n,r,i){return Pc(),Hw(i),t.flags|=256,Er(e,t,n,r),t.child}var Fb={dehydrated:null,treeContext:null,retryLane:0};function Bb(e){return{baseLanes:e,cachePool:null,transitions:null}}function SR(e,t,n){var r=t.pendingProps,i=en.current,o=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Gt(en,i&1),e===null)return Db(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=W0(a,r,0,null),e=nl(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Bb(n),t.memoizedState=Fb,e):a5(t,a));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return x7(e,t,a,r,s,i,n);if(o){o=r.fallback,a=t.mode,i=e.child,s=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Za(i,l),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=Za(s,o):(o=nl(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?Bb(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=Fb,r}return o=e.child,e=o.sibling,r=Za(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function a5(e,t){return t=W0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function gf(e,t,n,r){return r!==null&&Hw(r),Dc(t,e.child,null,n),e=a5(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function x7(e,t,n,r,i,o,a){if(n)return t.flags&256?(t.flags&=-257,r=Ox(Error(xe(422))),gf(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=W0({mode:"visible",children:r.children},i,0,null),o=nl(o,i,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Dc(t,e.child,null,a),t.child.memoizedState=Bb(a),t.memoizedState=Fb,o);if(!(t.mode&1))return gf(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(xe(419)),r=Ox(o,r,void 0),gf(e,t,a,r)}if(s=(a&e.childLanes)!==0,Vr||s){if(r=zn,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Jo(e,i),Qi(r,e,i,-1))}return p5(),r=Ox(Error(xe(421))),gf(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=D7.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ei=Ka(i.nextSibling),ai=t,Zt=!0,Gi=null,e!==null&&(Ii[Ai++]=jo,Ii[Ai++]=Uo,Ii[Ai++]=cl,jo=e.id,Uo=e.overflow,cl=t),t=a5(t,r.children),t.flags|=4096,t)}function H3(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Rb(e.return,t,n)}function $x(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function CR(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Er(e,t,r.children,n),r=en.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&H3(e,n,t);else if(e.tag===19)H3(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Gt(en,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&bm(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),$x(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&bm(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}$x(t,!0,n,null,o);break;case"together":$x(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Mg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),dl|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(xe(153));if(t.child!==null){for(e=t.child,n=Za(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Za(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function y7(e,t,n){switch(t.tag){case 3:wR(t),Pc();break;case 5:KD(t);break;case 1:Hr(t.type)&&fm(t);break;case 4:Jw(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Gt(vm,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Gt(en,en.current&1),t.flags|=128,null):n&t.child.childLanes?SR(e,t,n):(Gt(en,en.current&1),e=Zo(e,t,n),e!==null?e.sibling:null);Gt(en,en.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return CR(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Gt(en,en.current),r)break;return null;case 22:case 23:return t.lanes=0,yR(e,t,n)}return Zo(e,t,n)}var _R,zb,kR,ER;_R=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zb=function(){};kR=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(vo.current);var o=null;switch(n){case"input":i=lb(e,i),r=lb(e,r),o=[];break;case"select":i=an({},i,{value:void 0}),r=an({},r,{value:void 0}),o=[];break;case"textarea":i=db(e,i),r=db(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=pm)}hb(n,r);var a;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var s=i[c];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ep.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(s=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==s&&(l!=null||s!=null))if(c==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ep.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Xt("scroll",e),o||s===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}};ER=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ou(e,t){if(!Zt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function cr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function b7(e,t,n){var r=t.pendingProps;switch(Ww(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cr(t),null;case 1:return Hr(t.type)&&hm(),cr(t),null;case 3:return r=t.stateNode,Rc(),Jt(Wr),Jt(yr),e5(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(hf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Gi!==null&&(Yb(Gi),Gi=null))),zb(e,t),cr(t),null;case 5:Zw(t);var i=Qs(pp.current);if(n=t.type,e!==null&&t.stateNode!=null)kR(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(xe(166));return cr(t),null}if(e=Qs(vo.current),hf(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[po]=t,r[up]=o,e=(t.mode&1)!==0,n){case"dialog":Xt("cancel",r),Xt("close",r);break;case"iframe":case"object":case"embed":Xt("load",r);break;case"video":case"audio":for(i=0;i<hd.length;i++)Xt(hd[i],r);break;case"source":Xt("error",r);break;case"img":case"image":case"link":Xt("error",r),Xt("load",r);break;case"details":Xt("toggle",r);break;case"input":t3(r,o),Xt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Xt("invalid",r);break;case"textarea":r3(r,o),Xt("invalid",r)}hb(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&pf(r.textContent,s,e),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&pf(r.textContent,s,e),i=["children",""+s]):ep.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&Xt("scroll",r)}switch(n){case"input":rf(r),n3(r,o,!0);break;case"textarea":rf(r),i3(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=pm)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=eD(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[po]=t,e[up]=r,_R(e,t,!1,!1),t.stateNode=e;e:{switch(a=fb(n,r),n){case"dialog":Xt("cancel",e),Xt("close",e),i=r;break;case"iframe":case"object":case"embed":Xt("load",e),i=r;break;case"video":case"audio":for(i=0;i<hd.length;i++)Xt(hd[i],e);i=r;break;case"source":Xt("error",e),i=r;break;case"img":case"image":case"link":Xt("error",e),Xt("load",e),i=r;break;case"details":Xt("toggle",e),i=r;break;case"input":t3(e,r),i=lb(e,r),Xt("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=an({},r,{value:void 0}),Xt("invalid",e);break;case"textarea":r3(e,r),i=db(e,r),Xt("invalid",e);break;default:i=r}hb(n,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?rD(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&tD(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&tp(e,l):typeof l=="number"&&tp(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ep.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Xt("scroll",e):l!=null&&Pw(e,o,l,a))}switch(n){case"input":rf(e),n3(e,r,!1);break;case"textarea":rf(e),i3(e);break;case"option":r.value!=null&&e.setAttribute("value",""+cs(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?mc(e,!!r.multiple,o,!1):r.defaultValue!=null&&mc(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=pm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return cr(t),null;case 6:if(e&&t.stateNode!=null)ER(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(xe(166));if(n=Qs(pp.current),Qs(vo.current),hf(t)){if(r=t.stateNode,n=t.memoizedProps,r[po]=t,(o=r.nodeValue!==n)&&(e=ai,e!==null))switch(e.tag){case 3:pf(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&pf(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[po]=t,t.stateNode=r}return cr(t),null;case 13:if(Jt(en),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Zt&&ei!==null&&t.mode&1&&!(t.flags&128))qD(),Pc(),t.flags|=98560,o=!1;else if(o=hf(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(xe(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(xe(317));o[po]=t}else Pc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;cr(t),o=!1}else Gi!==null&&(Yb(Gi),Gi=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||en.current&1?Rn===0&&(Rn=3):p5())),t.updateQueue!==null&&(t.flags|=4),cr(t),null);case 4:return Rc(),zb(e,t),e===null&&lp(t.stateNode.containerInfo),cr(t),null;case 10:return Kw(t.type._context),cr(t),null;case 17:return Hr(t.type)&&hm(),cr(t),null;case 19:if(Jt(en),o=t.memoizedState,o===null)return cr(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)Ou(o,!1);else{if(Rn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=bm(e),a!==null){for(t.flags|=128,Ou(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Gt(en,en.current&1|2),t.child}e=e.sibling}o.tail!==null&&wn()>Mc&&(t.flags|=128,r=!0,Ou(o,!1),t.lanes=4194304)}else{if(!r)if(e=bm(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ou(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Zt)return cr(t),null}else 2*wn()-o.renderingStartTime>Mc&&n!==1073741824&&(t.flags|=128,r=!0,Ou(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=wn(),t.sibling=null,n=en.current,Gt(en,r?n&1|2:n&1),t):(cr(t),null);case 22:case 23:return d5(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Jr&1073741824&&(cr(t),t.subtreeFlags&6&&(t.flags|=8192)):cr(t),null;case 24:return null;case 25:return null}throw Error(xe(156,t.tag))}function w7(e,t){switch(Ww(t),t.tag){case 1:return Hr(t.type)&&hm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Rc(),Jt(Wr),Jt(yr),e5(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Zw(t),null;case 13:if(Jt(en),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(xe(340));Pc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Jt(en),null;case 4:return Rc(),null;case 10:return Kw(t.type._context),null;case 22:case 23:return d5(),null;case 24:return null;default:return null}}var mf=!1,gr=!1,S7=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function oc(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){hn(e,t,r)}else n.current=null}function Vb(e,t,n){try{n()}catch(r){hn(e,t,r)}}var G3=!1;function C7(e,t){if(_b=cm,e=DD(),Uw(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,l=-1,c=0,d=0,p=e,f=null;t:for(;;){for(var h;p!==n||i!==0&&p.nodeType!==3||(s=a+i),p!==o||r!==0&&p.nodeType!==3||(l=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(h=p.firstChild)!==null;)f=p,p=h;for(;;){if(p===e)break t;if(f===n&&++c===i&&(s=a),f===o&&++d===r&&(l=a),(h=p.nextSibling)!==null)break;p=f,f=p.parentNode}p=h}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(kb={focusedElem:e,selectionRange:n},cm=!1,Oe=t;Oe!==null;)if(t=Oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Oe=e;else for(;Oe!==null;){t=Oe;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,v=g.memoizedState,w=t.stateNode,S=w.getSnapshotBeforeUpdate(t.elementType===t.type?m:Wi(t.type,m),v);w.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var C=t.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(xe(163))}}catch(A){hn(t,t.return,A)}if(e=t.sibling,e!==null){e.return=t.return,Oe=e;break}Oe=t.return}return g=G3,G3=!1,g}function Dd(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&Vb(t,n,o)}i=i.next}while(i!==r)}}function U0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function jb(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function TR(e){var t=e.alternate;t!==null&&(e.alternate=null,TR(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[po],delete t[up],delete t[Ib],delete t[o7],delete t[a7])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function IR(e){return e.tag===5||e.tag===3||e.tag===4}function Y3(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||IR(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ub(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=pm));else if(r!==4&&(e=e.child,e!==null))for(Ub(e,t,n),e=e.sibling;e!==null;)Ub(e,t,n),e=e.sibling}function qb(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(qb(e,t,n),e=e.sibling;e!==null;)qb(e,t,n),e=e.sibling}var Kn=null,Hi=!1;function ga(e,t,n){for(n=n.child;n!==null;)AR(e,t,n),n=n.sibling}function AR(e,t,n){if(mo&&typeof mo.onCommitFiberUnmount=="function")try{mo.onCommitFiberUnmount(O0,n)}catch{}switch(n.tag){case 5:gr||oc(n,t);case 6:var r=Kn,i=Hi;Kn=null,ga(e,t,n),Kn=r,Hi=i,Kn!==null&&(Hi?(e=Kn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Kn.removeChild(n.stateNode));break;case 18:Kn!==null&&(Hi?(e=Kn,n=n.stateNode,e.nodeType===8?Ax(e.parentNode,n):e.nodeType===1&&Ax(e,n),op(e)):Ax(Kn,n.stateNode));break;case 4:r=Kn,i=Hi,Kn=n.stateNode.containerInfo,Hi=!0,ga(e,t,n),Kn=r,Hi=i;break;case 0:case 11:case 14:case 15:if(!gr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Vb(n,t,a),i=i.next}while(i!==r)}ga(e,t,n);break;case 1:if(!gr&&(oc(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){hn(n,t,s)}ga(e,t,n);break;case 21:ga(e,t,n);break;case 22:n.mode&1?(gr=(r=gr)||n.memoizedState!==null,ga(e,t,n),gr=r):ga(e,t,n);break;default:ga(e,t,n)}}function K3(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new S7),t.forEach(function(r){var i=R7.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Vi(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:Kn=s.stateNode,Hi=!1;break e;case 3:Kn=s.stateNode.containerInfo,Hi=!0;break e;case 4:Kn=s.stateNode.containerInfo,Hi=!0;break e}s=s.return}if(Kn===null)throw Error(xe(160));AR(o,a,i),Kn=null,Hi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){hn(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)PR(t,e),t=t.sibling}function PR(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Vi(t,e),ao(e),r&4){try{Dd(3,e,e.return),U0(3,e)}catch(m){hn(e,e.return,m)}try{Dd(5,e,e.return)}catch(m){hn(e,e.return,m)}}break;case 1:Vi(t,e),ao(e),r&512&&n!==null&&oc(n,n.return);break;case 5:if(Vi(t,e),ao(e),r&512&&n!==null&&oc(n,n.return),e.flags&32){var i=e.stateNode;try{tp(i,"")}catch(m){hn(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&JP(i,o),fb(s,a);var c=fb(s,o);for(a=0;a<l.length;a+=2){var d=l[a],p=l[a+1];d==="style"?rD(i,p):d==="dangerouslySetInnerHTML"?tD(i,p):d==="children"?tp(i,p):Pw(i,d,p,c)}switch(s){case"input":cb(i,o);break;case"textarea":ZP(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?mc(i,!!o.multiple,h,!1):f!==!!o.multiple&&(o.defaultValue!=null?mc(i,!!o.multiple,o.defaultValue,!0):mc(i,!!o.multiple,o.multiple?[]:"",!1))}i[up]=o}catch(m){hn(e,e.return,m)}}break;case 6:if(Vi(t,e),ao(e),r&4){if(e.stateNode===null)throw Error(xe(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){hn(e,e.return,m)}}break;case 3:if(Vi(t,e),ao(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{op(t.containerInfo)}catch(m){hn(e,e.return,m)}break;case 4:Vi(t,e),ao(e);break;case 13:Vi(t,e),ao(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(c5=wn())),r&4&&K3(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(gr=(c=gr)||d,Vi(t,e),gr=c):Vi(t,e),ao(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(Oe=e,d=e.child;d!==null;){for(p=Oe=d;Oe!==null;){switch(f=Oe,h=f.child,f.tag){case 0:case 11:case 14:case 15:Dd(4,f,f.return);break;case 1:oc(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){hn(r,n,m)}}break;case 5:oc(f,f.return);break;case 22:if(f.memoizedState!==null){Q3(p);continue}}h!==null?(h.return=f,Oe=h):Q3(p)}d=d.sibling}e:for(d=null,p=e;;){if(p.tag===5){if(d===null){d=p;try{i=p.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=p.stateNode,l=p.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=nD("display",a))}catch(m){hn(e,e.return,m)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(m){hn(e,e.return,m)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Vi(t,e),ao(e),r&4&&K3(e);break;case 21:break;default:Vi(t,e),ao(e)}}function ao(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(IR(n)){var r=n;break e}n=n.return}throw Error(xe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(tp(i,""),r.flags&=-33);var o=Y3(e);qb(e,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,s=Y3(e);Ub(e,s,a);break;default:throw Error(xe(161))}}catch(l){hn(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _7(e,t,n){Oe=e,DR(e)}function DR(e,t,n){for(var r=(e.mode&1)!==0;Oe!==null;){var i=Oe,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||mf;if(!a){var s=i.alternate,l=s!==null&&s.memoizedState!==null||gr;s=mf;var c=gr;if(mf=a,(gr=l)&&!c)for(Oe=i;Oe!==null;)a=Oe,l=a.child,a.tag===22&&a.memoizedState!==null?J3(i):l!==null?(l.return=a,Oe=l):J3(i);for(;o!==null;)Oe=o,DR(o),o=o.sibling;Oe=i,mf=s,gr=c}X3(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Oe=o):X3(e)}}function X3(e){for(;Oe!==null;){var t=Oe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:gr||U0(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!gr)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Wi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&M3(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}M3(t,a,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&op(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(xe(163))}gr||t.flags&512&&jb(t)}catch(f){hn(t,t.return,f)}}if(t===e){Oe=null;break}if(n=t.sibling,n!==null){n.return=t.return,Oe=n;break}Oe=t.return}}function Q3(e){for(;Oe!==null;){var t=Oe;if(t===e){Oe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Oe=n;break}Oe=t.return}}function J3(e){for(;Oe!==null;){var t=Oe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{U0(4,t)}catch(l){hn(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){hn(t,i,l)}}var o=t.return;try{jb(t)}catch(l){hn(t,o,l)}break;case 5:var a=t.return;try{jb(t)}catch(l){hn(t,a,l)}}}catch(l){hn(t,t.return,l)}if(t===e){Oe=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Oe=s;break}Oe=t.return}}var k7=Math.ceil,Cm=la.ReactCurrentDispatcher,s5=la.ReactCurrentOwner,Ri=la.ReactCurrentBatchConfig,Et=0,zn=null,En=null,rr=0,Jr=0,ac=Ss(0),Rn=0,mp=null,dl=0,q0=0,l5=0,Rd=null,Fr=null,c5=0,Mc=1/0,zo=null,_m=!1,Wb=null,Qa=null,vf=!1,Ua=null,km=0,Nd=0,Hb=null,Og=-1,$g=0;function Ir(){return Et&6?wn():Og!==-1?Og:Og=wn()}function Ja(e){return e.mode&1?Et&2&&rr!==0?rr&-rr:l7.transition!==null?($g===0&&($g=gD()),$g):(e=$t,e!==0||(e=window.event,e=e===void 0?16:SD(e.type)),e):1}function Qi(e,t,n,r){if(50<Nd)throw Nd=0,Hb=null,Error(xe(185));Qp(e,n,r),(!(Et&2)||e!==zn)&&(e===zn&&(!(Et&2)&&(q0|=n),Rn===4&&$a(e,rr)),Gr(e,r),n===1&&Et===0&&!(t.mode&1)&&(Mc=wn()+500,z0&&Cs()))}function Gr(e,t){var n=e.callbackNode;lz(e,t);var r=lm(e,e===zn?rr:0);if(r===0)n!==null&&s3(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&s3(n),t===1)e.tag===0?s7(Z3.bind(null,e)):VD(Z3.bind(null,e)),r7(function(){!(Et&6)&&Cs()}),n=null;else{switch(mD(r)){case 1:n=Ow;break;case 4:n=hD;break;case 16:n=sm;break;case 536870912:n=fD;break;default:n=sm}n=BR(n,RR.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function RR(e,t){if(Og=-1,$g=0,Et&6)throw Error(xe(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=lm(e,e===zn?rr:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Em(e,r);else{t=r;var i=Et;Et|=2;var o=MR();(zn!==e||rr!==t)&&(zo=null,Mc=wn()+500,tl(e,t));do try{I7();break}catch(s){NR(e,s)}while(!0);Yw(),Cm.current=o,Et=i,En!==null?t=0:(zn=null,rr=0,t=Rn)}if(t!==0){if(t===2&&(i=yb(e),i!==0&&(r=i,t=Gb(e,i))),t===1)throw n=mp,tl(e,0),$a(e,r),Gr(e,wn()),n;if(t===6)$a(e,r);else{if(i=e.current.alternate,!(r&30)&&!E7(i)&&(t=Em(e,r),t===2&&(o=yb(e),o!==0&&(r=o,t=Gb(e,o))),t===1))throw n=mp,tl(e,0),$a(e,r),Gr(e,wn()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(xe(345));case 2:Ws(e,Fr,zo);break;case 3:if($a(e,r),(r&130023424)===r&&(t=c5+500-wn(),10<t)){if(lm(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ir(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Tb(Ws.bind(null,e,Fr,zo),t);break}Ws(e,Fr,zo);break;case 4:if($a(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-Xi(r);o=1<<a,a=t[a],a>i&&(i=a),r&=~o}if(r=i,r=wn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*k7(r/1960))-r,10<r){e.timeoutHandle=Tb(Ws.bind(null,e,Fr,zo),r);break}Ws(e,Fr,zo);break;case 5:Ws(e,Fr,zo);break;default:throw Error(xe(329))}}}return Gr(e,wn()),e.callbackNode===n?RR.bind(null,e):null}function Gb(e,t){var n=Rd;return e.current.memoizedState.isDehydrated&&(tl(e,t).flags|=256),e=Em(e,t),e!==2&&(t=Fr,Fr=n,t!==null&&Yb(t)),e}function Yb(e){Fr===null?Fr=e:Fr.push.apply(Fr,e)}function E7(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Ji(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $a(e,t){for(t&=~l5,t&=~q0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Xi(t),r=1<<n;e[n]=-1,t&=~r}}function Z3(e){if(Et&6)throw Error(xe(327));wc();var t=lm(e,0);if(!(t&1))return Gr(e,wn()),null;var n=Em(e,t);if(e.tag!==0&&n===2){var r=yb(e);r!==0&&(t=r,n=Gb(e,r))}if(n===1)throw n=mp,tl(e,0),$a(e,t),Gr(e,wn()),n;if(n===6)throw Error(xe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ws(e,Fr,zo),Gr(e,wn()),null}function u5(e,t){var n=Et;Et|=1;try{return e(t)}finally{Et=n,Et===0&&(Mc=wn()+500,z0&&Cs())}}function pl(e){Ua!==null&&Ua.tag===0&&!(Et&6)&&wc();var t=Et;Et|=1;var n=Ri.transition,r=$t;try{if(Ri.transition=null,$t=1,e)return e()}finally{$t=r,Ri.transition=n,Et=t,!(Et&6)&&Cs()}}function d5(){Jr=ac.current,Jt(ac)}function tl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,n7(n)),En!==null)for(n=En.return;n!==null;){var r=n;switch(Ww(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&hm();break;case 3:Rc(),Jt(Wr),Jt(yr),e5();break;case 5:Zw(r);break;case 4:Rc();break;case 13:Jt(en);break;case 19:Jt(en);break;case 10:Kw(r.type._context);break;case 22:case 23:d5()}n=n.return}if(zn=e,En=e=Za(e.current,null),rr=Jr=t,Rn=0,mp=null,l5=q0=dl=0,Fr=Rd=null,Xs!==null){for(t=0;t<Xs.length;t++)if(n=Xs[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}Xs=null}return e}function NR(e,t){do{var n=En;try{if(Yw(),Rg.current=Sm,wm){for(var r=rn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}wm=!1}if(ul=0,Bn=Dn=rn=null,Pd=!1,hp=0,s5.current=null,n===null||n.return===null){Rn=1,mp=t,En=null;break}e:{var o=e,a=n.return,s=n,l=t;if(t=rr,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=s,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=z3(a);if(h!==null){h.flags&=-257,V3(h,a,s,o,t),h.mode&1&&B3(o,c,t),t=h,l=c;var g=t.updateQueue;if(g===null){var m=new Set;m.add(l),t.updateQueue=m}else g.add(l);break e}else{if(!(t&1)){B3(o,c,t),p5();break e}l=Error(xe(426))}}else if(Zt&&s.mode&1){var v=z3(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),V3(v,a,s,o,t),Hw(Nc(l,s));break e}}o=l=Nc(l,s),Rn!==4&&(Rn=2),Rd===null?Rd=[o]:Rd.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var w=mR(o,l,t);N3(o,w);break e;case 1:s=l;var S=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof S.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Qa===null||!Qa.has(C)))){o.flags|=65536,t&=-t,o.lanes|=t;var A=vR(o,s,t);N3(o,A);break e}}o=o.return}while(o!==null)}$R(n)}catch(_){t=_,En===n&&n!==null&&(En=n=n.return);continue}break}while(!0)}function MR(){var e=Cm.current;return Cm.current=Sm,e===null?Sm:e}function p5(){(Rn===0||Rn===3||Rn===2)&&(Rn=4),zn===null||!(dl&268435455)&&!(q0&268435455)||$a(zn,rr)}function Em(e,t){var n=Et;Et|=2;var r=MR();(zn!==e||rr!==t)&&(zo=null,tl(e,t));do try{T7();break}catch(i){NR(e,i)}while(!0);if(Yw(),Et=n,Cm.current=r,En!==null)throw Error(xe(261));return zn=null,rr=0,Rn}function T7(){for(;En!==null;)OR(En)}function I7(){for(;En!==null&&!ZB();)OR(En)}function OR(e){var t=FR(e.alternate,e,Jr);e.memoizedProps=e.pendingProps,t===null?$R(e):En=t,s5.current=null}function $R(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=w7(n,t),n!==null){n.flags&=32767,En=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Rn=6,En=null;return}}else if(n=b7(n,t,Jr),n!==null){En=n;return}if(t=t.sibling,t!==null){En=t;return}En=t=e}while(t!==null);Rn===0&&(Rn=5)}function Ws(e,t,n){var r=$t,i=Ri.transition;try{Ri.transition=null,$t=1,A7(e,t,n,r)}finally{Ri.transition=i,$t=r}return null}function A7(e,t,n,r){do wc();while(Ua!==null);if(Et&6)throw Error(xe(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(xe(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(cz(e,o),e===zn&&(En=zn=null,rr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vf||(vf=!0,BR(sm,function(){return wc(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ri.transition,Ri.transition=null;var a=$t;$t=1;var s=Et;Et|=4,s5.current=null,C7(e,n),PR(n,e),Kz(kb),cm=!!_b,kb=_b=null,e.current=n,_7(n),ez(),Et=s,$t=a,Ri.transition=o}else e.current=n;if(vf&&(vf=!1,Ua=e,km=i),o=e.pendingLanes,o===0&&(Qa=null),rz(n.stateNode),Gr(e,wn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(_m)throw _m=!1,e=Wb,Wb=null,e;return km&1&&e.tag!==0&&wc(),o=e.pendingLanes,o&1?e===Hb?Nd++:(Nd=0,Hb=e):Nd=0,Cs(),null}function wc(){if(Ua!==null){var e=mD(km),t=Ri.transition,n=$t;try{if(Ri.transition=null,$t=16>e?16:e,Ua===null)var r=!1;else{if(e=Ua,Ua=null,km=0,Et&6)throw Error(xe(331));var i=Et;for(Et|=4,Oe=e.current;Oe!==null;){var o=Oe,a=o.child;if(Oe.flags&16){var s=o.deletions;if(s!==null){for(var l=0;l<s.length;l++){var c=s[l];for(Oe=c;Oe!==null;){var d=Oe;switch(d.tag){case 0:case 11:case 15:Dd(8,d,o)}var p=d.child;if(p!==null)p.return=d,Oe=p;else for(;Oe!==null;){d=Oe;var f=d.sibling,h=d.return;if(TR(d),d===c){Oe=null;break}if(f!==null){f.return=h,Oe=f;break}Oe=h}}}var g=o.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}Oe=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Oe=a;else e:for(;Oe!==null;){if(o=Oe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Dd(9,o,o.return)}var w=o.sibling;if(w!==null){w.return=o.return,Oe=w;break e}Oe=o.return}}var S=e.current;for(Oe=S;Oe!==null;){a=Oe;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,Oe=C;else e:for(a=S;Oe!==null;){if(s=Oe,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:U0(9,s)}}catch(_){hn(s,s.return,_)}if(s===a){Oe=null;break e}var A=s.sibling;if(A!==null){A.return=s.return,Oe=A;break e}Oe=s.return}}if(Et=i,Cs(),mo&&typeof mo.onPostCommitFiberRoot=="function")try{mo.onPostCommitFiberRoot(O0,e)}catch{}r=!0}return r}finally{$t=n,Ri.transition=t}}return!1}function ek(e,t,n){t=Nc(n,t),t=mR(e,t,1),e=Xa(e,t,1),t=Ir(),e!==null&&(Qp(e,1,t),Gr(e,t))}function hn(e,t,n){if(e.tag===3)ek(e,e,n);else for(;t!==null;){if(t.tag===3){ek(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qa===null||!Qa.has(r))){e=Nc(n,e),e=vR(t,e,1),t=Xa(t,e,1),e=Ir(),t!==null&&(Qp(t,1,e),Gr(t,e));break}}t=t.return}}function P7(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ir(),e.pingedLanes|=e.suspendedLanes&n,zn===e&&(rr&n)===n&&(Rn===4||Rn===3&&(rr&130023424)===rr&&500>wn()-c5?tl(e,0):l5|=n),Gr(e,t)}function LR(e,t){t===0&&(e.mode&1?(t=sf,sf<<=1,!(sf&130023424)&&(sf=4194304)):t=1);var n=Ir();e=Jo(e,t),e!==null&&(Qp(e,t,n),Gr(e,n))}function D7(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),LR(e,n)}function R7(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(xe(314))}r!==null&&r.delete(t),LR(e,n)}var FR;FR=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Wr.current)Vr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Vr=!1,y7(e,t,n);Vr=!!(e.flags&131072)}else Vr=!1,Zt&&t.flags&1048576&&jD(t,mm,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Mg(e,t),e=t.pendingProps;var i=Ac(t,yr.current);bc(t,n),i=n5(null,t,r,e,i,n);var o=r5();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Hr(r)?(o=!0,fm(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Qw(t),i.updater=j0,t.stateNode=i,i._reactInternals=t,Mb(t,r,e,n),t=Lb(null,t,r,!0,o,n)):(t.tag=0,Zt&&o&&qw(t),Er(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Mg(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=M7(r),e=Wi(r,e),i){case 0:t=$b(null,t,r,e,n);break e;case 1:t=q3(null,t,r,e,n);break e;case 11:t=j3(null,t,r,e,n);break e;case 14:t=U3(null,t,r,Wi(r.type,e),n);break e}throw Error(xe(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wi(r,i),$b(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wi(r,i),q3(e,t,r,i,n);case 3:e:{if(wR(t),e===null)throw Error(xe(387));r=t.pendingProps,o=t.memoizedState,i=o.element,YD(e,t),ym(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Nc(Error(xe(423)),t),t=W3(e,t,r,n,i);break e}else if(r!==i){i=Nc(Error(xe(424)),t),t=W3(e,t,r,n,i);break e}else for(ei=Ka(t.stateNode.containerInfo.firstChild),ai=t,Zt=!0,Gi=null,n=HD(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pc(),r===i){t=Zo(e,t,n);break e}Er(e,t,r,n)}t=t.child}return t;case 5:return KD(t),e===null&&Db(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,Eb(r,i)?a=null:o!==null&&Eb(r,o)&&(t.flags|=32),bR(e,t),Er(e,t,a,n),t.child;case 6:return e===null&&Db(t),null;case 13:return SR(e,t,n);case 4:return Jw(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Dc(t,null,r,n):Er(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wi(r,i),j3(e,t,r,i,n);case 7:return Er(e,t,t.pendingProps,n),t.child;case 8:return Er(e,t,t.pendingProps.children,n),t.child;case 12:return Er(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Gt(vm,r._currentValue),r._currentValue=a,o!==null)if(Ji(o.value,a)){if(o.children===i.children&&!Wr.current){t=Zo(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Ho(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Rb(o.return,n,t),s.lanes|=n;break}l=l.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(xe(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Rb(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Er(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,bc(t,n),i=$i(i),r=r(i),t.flags|=1,Er(e,t,r,n),t.child;case 14:return r=t.type,i=Wi(r,t.pendingProps),i=Wi(r.type,i),U3(e,t,r,i,n);case 15:return xR(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wi(r,i),Mg(e,t),t.tag=1,Hr(r)?(e=!0,fm(t)):e=!1,bc(t,n),gR(t,r,i),Mb(t,r,i,n),Lb(null,t,r,!0,e,n);case 19:return CR(e,t,n);case 22:return yR(e,t,n)}throw Error(xe(156,t.tag))};function BR(e,t){return pD(e,t)}function N7(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pi(e,t,n,r){return new N7(e,t,n,r)}function h5(e){return e=e.prototype,!(!e||!e.isReactComponent)}function M7(e){if(typeof e=="function")return h5(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Rw)return 11;if(e===Nw)return 14}return 2}function Za(e,t){var n=e.alternate;return n===null?(n=Pi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lg(e,t,n,r,i,o){var a=2;if(r=e,typeof e=="function")h5(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Xl:return nl(n.children,i,o,t);case Dw:a=8,i|=8;break;case ib:return e=Pi(12,n,t,i|2),e.elementType=ib,e.lanes=o,e;case ob:return e=Pi(13,n,t,i),e.elementType=ob,e.lanes=o,e;case ab:return e=Pi(19,n,t,i),e.elementType=ab,e.lanes=o,e;case KP:return W0(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case GP:a=10;break e;case YP:a=9;break e;case Rw:a=11;break e;case Nw:a=14;break e;case Ra:a=16,r=null;break e}throw Error(xe(130,e==null?e:typeof e,""))}return t=Pi(a,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function nl(e,t,n,r){return e=Pi(7,e,r,t),e.lanes=n,e}function W0(e,t,n,r){return e=Pi(22,e,r,t),e.elementType=KP,e.lanes=n,e.stateNode={isHidden:!1},e}function Lx(e,t,n){return e=Pi(6,e,null,t),e.lanes=n,e}function Fx(e,t,n){return t=Pi(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function O7(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xx(0),this.expirationTimes=xx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xx(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function f5(e,t,n,r,i,o,a,s,l){return e=new O7(e,t,n,s,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Pi(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qw(o),e}function $7(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Kl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function zR(e){if(!e)return us;e=e._reactInternals;e:{if(wl(e)!==e||e.tag!==1)throw Error(xe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Hr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(xe(171))}if(e.tag===1){var n=e.type;if(Hr(n))return zD(e,n,t)}return t}function VR(e,t,n,r,i,o,a,s,l){return e=f5(n,r,!0,e,i,o,a,s,l),e.context=zR(null),n=e.current,r=Ir(),i=Ja(n),o=Ho(r,i),o.callback=t??null,Xa(n,o,i),e.current.lanes=i,Qp(e,i,r),Gr(e,r),e}function H0(e,t,n,r){var i=t.current,o=Ir(),a=Ja(i);return n=zR(n),t.context===null?t.context=n:t.pendingContext=n,t=Ho(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Xa(i,t,a),e!==null&&(Qi(e,i,a,o),Dg(e,i,a)),a}function Tm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function tk(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function g5(e,t){tk(e,t),(e=e.alternate)&&tk(e,t)}function L7(){return null}var jR=typeof reportError=="function"?reportError:function(e){console.error(e)};function m5(e){this._internalRoot=e}G0.prototype.render=m5.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(xe(409));H0(e,t,null,null)};G0.prototype.unmount=m5.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;pl(function(){H0(null,e,null,null)}),t[Qo]=null}};function G0(e){this._internalRoot=e}G0.prototype.unstable_scheduleHydration=function(e){if(e){var t=yD();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Oa.length&&t!==0&&t<Oa[n].priority;n++);Oa.splice(n,0,e),n===0&&wD(e)}};function v5(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Y0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function nk(){}function F7(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=Tm(a);o.call(c)}}var a=VR(t,r,e,0,null,!1,!1,"",nk);return e._reactRootContainer=a,e[Qo]=a.current,lp(e.nodeType===8?e.parentNode:e),pl(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var c=Tm(l);s.call(c)}}var l=f5(e,0,!1,null,null,!1,!1,"",nk);return e._reactRootContainer=l,e[Qo]=l.current,lp(e.nodeType===8?e.parentNode:e),pl(function(){H0(t,l,n,r)}),l}function K0(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var l=Tm(a);s.call(l)}}H0(t,a,e,i)}else a=F7(n,t,e,i,r);return Tm(a)}vD=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=pd(t.pendingLanes);n!==0&&($w(t,n|1),Gr(t,wn()),!(Et&6)&&(Mc=wn()+500,Cs()))}break;case 13:pl(function(){var r=Jo(e,1);if(r!==null){var i=Ir();Qi(r,e,1,i)}}),g5(e,1)}};Lw=function(e){if(e.tag===13){var t=Jo(e,134217728);if(t!==null){var n=Ir();Qi(t,e,134217728,n)}g5(e,134217728)}};xD=function(e){if(e.tag===13){var t=Ja(e),n=Jo(e,t);if(n!==null){var r=Ir();Qi(n,e,t,r)}g5(e,t)}};yD=function(){return $t};bD=function(e,t){var n=$t;try{return $t=e,t()}finally{$t=n}};mb=function(e,t,n){switch(t){case"input":if(cb(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=B0(r);if(!i)throw Error(xe(90));QP(r),cb(r,i)}}}break;case"textarea":ZP(e,n);break;case"select":t=n.value,t!=null&&mc(e,!!n.multiple,t,!1)}};aD=u5;sD=pl;var B7={usingClientEntryPoint:!1,Events:[Zp,ec,B0,iD,oD,u5]},$u={findFiberByHostInstance:Ks,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},z7={bundleType:$u.bundleType,version:$u.version,rendererPackageName:$u.rendererPackageName,rendererConfig:$u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:la.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=uD(e),e===null?null:e.stateNode},findFiberByHostInstance:$u.findFiberByHostInstance||L7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xf.isDisabled&&xf.supportsFiber)try{O0=xf.inject(z7),mo=xf}catch{}}hi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B7;hi.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v5(t))throw Error(xe(200));return $7(e,t,null,n)};hi.createRoot=function(e,t){if(!v5(e))throw Error(xe(299));var n=!1,r="",i=jR;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=f5(e,1,!1,null,null,n,!1,r,i),e[Qo]=t.current,lp(e.nodeType===8?e.parentNode:e),new m5(t)};hi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(xe(188)):(e=Object.keys(e).join(","),Error(xe(268,e)));return e=uD(t),e=e===null?null:e.stateNode,e};hi.flushSync=function(e){return pl(e)};hi.hydrate=function(e,t,n){if(!Y0(t))throw Error(xe(200));return K0(null,e,t,!0,n)};hi.hydrateRoot=function(e,t,n){if(!v5(e))throw Error(xe(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=jR;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=VR(t,null,e,1,n??null,i,!1,o,a),e[Qo]=t.current,lp(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new G0(t)};hi.render=function(e,t,n){if(!Y0(t))throw Error(xe(200));return K0(null,e,t,!1,n)};hi.unmountComponentAtNode=function(e){if(!Y0(e))throw Error(xe(40));return e._reactRootContainer?(pl(function(){K0(null,null,e,!1,function(){e._reactRootContainer=null,e[Qo]=null})}),!0):!1};hi.unstable_batchedUpdates=u5;hi.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Y0(n))throw Error(xe(200));if(e==null||e._reactInternals===void 0)throw Error(xe(38));return K0(e,t,n,!1,r)};hi.version="18.3.1-next-f1338f8080-20240426";function UR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(UR)}catch(e){console.error(e)}}UR(),UP.exports=hi;var ru=UP.exports;const V7=Jc(ru);var rk=ru;nb.createRoot=rk.createRoot,nb.hydrateRoot=rk.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vp(){return vp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vp.apply(this,arguments)}var qa;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(qa||(qa={}));const ik="popstate";function j7(e){e===void 0&&(e={});function t(r,i){let{pathname:o,search:a,hash:s}=r.location;return Kb("",{pathname:o,search:a,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Im(i)}return q7(t,n,null,e)}function Sn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function qR(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function U7(){return Math.random().toString(36).substr(2,8)}function ok(e,t){return{usr:e.state,key:e.key,idx:t}}function Kb(e,t,n,r){return n===void 0&&(n=null),vp({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?iu(t):t,{state:n,key:t&&t.key||r||U7()})}function Im(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function iu(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function q7(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,s=qa.Pop,l=null,c=d();c==null&&(c=0,a.replaceState(vp({},a.state,{idx:c}),""));function d(){return(a.state||{idx:null}).idx}function p(){s=qa.Pop;let v=d(),w=v==null?null:v-c;c=v,l&&l({action:s,location:m.location,delta:w})}function f(v,w){s=qa.Push;let S=Kb(m.location,v,w);c=d()+1;let C=ok(S,c),A=m.createHref(S);try{a.pushState(C,"",A)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;i.location.assign(A)}o&&l&&l({action:s,location:m.location,delta:1})}function h(v,w){s=qa.Replace;let S=Kb(m.location,v,w);c=d();let C=ok(S,c),A=m.createHref(S);a.replaceState(C,"",A),o&&l&&l({action:s,location:m.location,delta:0})}function g(v){let w=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof v=="string"?v:Im(v);return S=S.replace(/ $/,"%20"),Sn(w,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,w)}let m={get action(){return s},get location(){return e(i,a)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(ik,p),l=v,()=>{i.removeEventListener(ik,p),l=null}},createHref(v){return t(i,v)},createURL:g,encodeLocation(v){let w=g(v);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:h,go(v){return a.go(v)}};return m}var ak;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ak||(ak={}));function W7(e,t,n){return n===void 0&&(n="/"),H7(e,t,n)}function H7(e,t,n,r){let i=typeof t=="string"?iu(t):t,o=x5(i.pathname||"/",n);if(o==null)return null;let a=WR(e);G7(a);let s=null;for(let l=0;s==null&&l<a.length;++l){let c=oV(o);s=nV(a[l],c)}return s}function WR(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,a,s)=>{let l={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};l.relativePath.startsWith("/")&&(Sn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=es([r,l.relativePath]),d=n.concat(l);o.children&&o.children.length>0&&(Sn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),WR(o.children,t,d,c)),!(o.path==null&&!o.index)&&t.push({path:c,score:eV(c,o.index),routesMeta:d})};return e.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))i(o,a);else for(let l of HR(o.path))i(o,a,l)}),t}function HR(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=HR(r.join("/")),s=[];return s.push(...a.map(l=>l===""?o:[o,l].join("/"))),i&&s.push(...a),s.map(l=>e.startsWith("/")&&l===""?"/":l)}function G7(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:tV(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Y7=/^:[\w-]+$/,K7=3,X7=2,Q7=1,J7=10,Z7=-2,sk=e=>e==="*";function eV(e,t){let n=e.split("/"),r=n.length;return n.some(sk)&&(r+=Z7),t&&(r+=X7),n.filter(i=>!sk(i)).reduce((i,o)=>i+(Y7.test(o)?K7:o===""?Q7:J7),r)}function tV(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function nV(e,t,n){let{routesMeta:r}=e,i={},o="/",a=[];for(let s=0;s<r.length;++s){let l=r[s],c=s===r.length-1,d=o==="/"?t:t.slice(o.length)||"/",p=rV({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!p)return null;Object.assign(i,p.params),a.push({params:i,pathname:es([o,p.pathname]),pathnameBase:cV(es([o,p.pathnameBase])),route:f}),p.pathnameBase!=="/"&&(o=es([o,p.pathnameBase]))}return a}function rV(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=iV(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((c,d,p)=>{let{paramName:f,isOptional:h}=d;if(f==="*"){let m=s[p]||"";a=o.slice(0,o.length-m.length).replace(/(.)\/+$/,"$1")}const g=s[p];return h&&!g?c[f]=void 0:c[f]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:a,pattern:e}}function iV(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),qR(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,l)=>(r.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function oV(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return qR(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function x5(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function aV(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?iu(e):e;return{pathname:n?n.startsWith("/")?n:sV(n,t):t,search:uV(r),hash:dV(i)}}function sV(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Bx(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lV(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function y5(e,t){let n=lV(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function b5(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=iu(e):(i=vp({},e),Sn(!i.pathname||!i.pathname.includes("?"),Bx("?","pathname","search",i)),Sn(!i.pathname||!i.pathname.includes("#"),Bx("#","pathname","hash",i)),Sn(!i.search||!i.search.includes("#"),Bx("#","search","hash",i)));let o=e===""||i.pathname==="",a=o?"/":i.pathname,s;if(a==null)s=n;else{let p=t.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),p-=1;i.pathname=f.join("/")}s=p>=0?t[p]:"/"}let l=aV(i,s),c=a&&a!=="/"&&a.endsWith("/"),d=(o||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const es=e=>e.join("/").replace(/\/\/+/g,"/"),cV=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),uV=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,dV=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function pV(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const GR=["post","put","patch","delete"];new Set(GR);const hV=["get",...GR];new Set(hV);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xp(){return xp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xp.apply(this,arguments)}const w5=D.createContext(null),fV=D.createContext(null),_s=D.createContext(null),X0=D.createContext(null),ca=D.createContext({outlet:null,matches:[],isDataRoute:!1}),YR=D.createContext(null);function gV(e,t){let{relative:n}=t===void 0?{}:t;ou()||Sn(!1);let{basename:r,navigator:i}=D.useContext(_s),{hash:o,pathname:a,search:s}=XR(e,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:es([r,a])),i.createHref({pathname:l,search:s,hash:o})}function ou(){return D.useContext(X0)!=null}function Io(){return ou()||Sn(!1),D.useContext(X0).location}function KR(e){D.useContext(_s).static||D.useLayoutEffect(e)}function qt(){let{isDataRoute:e}=D.useContext(ca);return e?IV():mV()}function mV(){ou()||Sn(!1);let e=D.useContext(w5),{basename:t,future:n,navigator:r}=D.useContext(_s),{matches:i}=D.useContext(ca),{pathname:o}=Io(),a=JSON.stringify(y5(i,n.v7_relativeSplatPath)),s=D.useRef(!1);return KR(()=>{s.current=!0}),D.useCallback(function(c,d){if(d===void 0&&(d={}),!s.current)return;if(typeof c=="number"){r.go(c);return}let p=b5(c,JSON.parse(a),o,d.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:es([t,p.pathname])),(d.replace?r.replace:r.push)(p,d.state,d)},[t,r,a,o,e])}function au(){let{matches:e}=D.useContext(ca),t=e[e.length-1];return t?t.params:{}}function XR(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=D.useContext(_s),{matches:i}=D.useContext(ca),{pathname:o}=Io(),a=JSON.stringify(y5(i,r.v7_relativeSplatPath));return D.useMemo(()=>b5(e,JSON.parse(a),o,n==="path"),[e,a,o,n])}function vV(e,t){return xV(e,t)}function xV(e,t,n,r){ou()||Sn(!1);let{navigator:i}=D.useContext(_s),{matches:o}=D.useContext(ca),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=Io(),d;if(t){var p;let v=typeof t=="string"?iu(t):t;l==="/"||(p=v.pathname)!=null&&p.startsWith(l)||Sn(!1),d=v}else d=c;let f=d.pathname||"/",h=f;if(l!=="/"){let v=l.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=W7(e,{pathname:h}),m=CV(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},s,v.params),pathname:es([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:es([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,n,r);return t&&m?D.createElement(X0.Provider,{value:{location:xp({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:qa.Pop}},m):m}function yV(){let e=TV(),t=pV(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},t),n?D.createElement("pre",{style:i},n):null,null)}const bV=D.createElement(yV,null);class wV extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?D.createElement(ca.Provider,{value:this.props.routeContext},D.createElement(YR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function SV(e){let{routeContext:t,match:n,children:r}=e,i=D.useContext(w5);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(ca.Provider,{value:t},r)}function CV(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,s=(i=n)==null?void 0:i.errors;if(s!=null){let d=a.findIndex(p=>p.route.id&&(s==null?void 0:s[p.route.id])!==void 0);d>=0||Sn(!1),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<a.length;d++){let p=a[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=d),p.route.id){let{loaderData:f,errors:h}=n,g=p.route.loader&&f[p.route.id]===void 0&&(!h||h[p.route.id]===void 0);if(p.route.lazy||g){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((d,p,f)=>{let h,g=!1,m=null,v=null;n&&(h=s&&p.route.id?s[p.route.id]:void 0,m=p.route.errorElement||bV,l&&(c<0&&f===0?(AV("route-fallback"),g=!0,v=null):c===f&&(g=!0,v=p.route.hydrateFallbackElement||null)));let w=t.concat(a.slice(0,f+1)),S=()=>{let C;return h?C=m:g?C=v:p.route.Component?C=D.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=d,D.createElement(SV,{match:p,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:C})};return n&&(p.route.ErrorBoundary||p.route.errorElement||f===0)?D.createElement(wV,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:S(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):S()},null)}var QR=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(QR||{}),JR=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(JR||{});function _V(e){let t=D.useContext(w5);return t||Sn(!1),t}function kV(e){let t=D.useContext(fV);return t||Sn(!1),t}function EV(e){let t=D.useContext(ca);return t||Sn(!1),t}function ZR(e){let t=EV(),n=t.matches[t.matches.length-1];return n.route.id||Sn(!1),n.route.id}function TV(){var e;let t=D.useContext(YR),n=kV(),r=ZR();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function IV(){let{router:e}=_V(QR.UseNavigateStable),t=ZR(JR.UseNavigateStable),n=D.useRef(!1);return KR(()=>{n.current=!0}),D.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,xp({fromRouteId:t},o)))},[e,t])}const lk={};function AV(e,t,n){lk[e]||(lk[e]=!0)}function PV(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Xb(e){let{to:t,replace:n,state:r,relative:i}=e;ou()||Sn(!1);let{future:o,static:a}=D.useContext(_s),{matches:s}=D.useContext(ca),{pathname:l}=Io(),c=qt(),d=b5(t,y5(s,o.v7_relativeSplatPath),l,i==="path"),p=JSON.stringify(d);return D.useEffect(()=>c(JSON.parse(p),{replace:n,state:r,relative:i}),[c,p,i,n,r]),null}function ze(e){Sn(!1)}function DV(e){let{basename:t="/",children:n=null,location:r,navigationType:i=qa.Pop,navigator:o,static:a=!1,future:s}=e;ou()&&Sn(!1);let l=t.replace(/^\/*/,"/"),c=D.useMemo(()=>({basename:l,navigator:o,static:a,future:xp({v7_relativeSplatPath:!1},s)}),[l,s,o,a]);typeof r=="string"&&(r=iu(r));let{pathname:d="/",search:p="",hash:f="",state:h=null,key:g="default"}=r,m=D.useMemo(()=>{let v=x5(d,l);return v==null?null:{location:{pathname:v,search:p,hash:f,state:h,key:g},navigationType:i}},[l,d,p,f,h,g,i]);return m==null?null:D.createElement(_s.Provider,{value:c},D.createElement(X0.Provider,{children:n,value:m}))}function RV(e){let{children:t,location:n}=e;return vV(Qb(t),n)}new Promise(()=>{});function Qb(e,t){t===void 0&&(t=[]);let n=[];return D.Children.forEach(e,(r,i)=>{if(!D.isValidElement(r))return;let o=[...t,i];if(r.type===D.Fragment){n.push.apply(n,Qb(r.props.children,o));return}r.type!==ze&&Sn(!1),!r.props.index||!r.props.children||Sn(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Qb(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jb(){return Jb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jb.apply(this,arguments)}function NV(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function MV(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function OV(e,t){return e.button===0&&(!t||t==="_self")&&!MV(e)}const $V=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],LV="6";try{window.__reactRouterVersion=LV}catch{}const FV="startTransition",ck=J1[FV];function BV(e){let{basename:t,children:n,future:r,window:i}=e,o=D.useRef();o.current==null&&(o.current=j7({window:i,v5Compat:!0}));let a=o.current,[s,l]=D.useState({action:a.action,location:a.location}),{v7_startTransition:c}=r||{},d=D.useCallback(p=>{c&&ck?ck(()=>l(p)):l(p)},[l,c]);return D.useLayoutEffect(()=>a.listen(d),[a,d]),D.useEffect(()=>PV(r),[r]),D.createElement(DV,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:a,future:r})}const zV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bt=D.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:o,replace:a,state:s,target:l,to:c,preventScrollReset:d,viewTransition:p}=t,f=NV(t,$V),{basename:h}=D.useContext(_s),g,m=!1;if(typeof c=="string"&&VV.test(c)&&(g=c,zV))try{let C=new URL(window.location.href),A=c.startsWith("//")?new URL(C.protocol+c):new URL(c),_=x5(A.pathname,h);A.origin===C.origin&&_!=null?c=_+A.search+A.hash:m=!0}catch{}let v=gV(c,{relative:i}),w=jV(c,{replace:a,state:s,target:l,preventScrollReset:d,relative:i,viewTransition:p});function S(C){r&&r(C),C.defaultPrevented||w(C)}return D.createElement("a",Jb({},f,{href:g||v,onClick:m||o?r:S,ref:n,target:l}))});var uk;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(uk||(uk={}));var dk;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(dk||(dk={}));function jV(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:a,viewTransition:s}=t===void 0?{}:t,l=qt(),c=Io(),d=XR(e,{relative:a});return D.useCallback(p=>{if(OV(p,n)){p.preventDefault();let f=r!==void 0?r:Im(c)===Im(d);l(e,{replace:f,state:i,preventScrollReset:o,relative:a,viewTransition:s})}},[c,l,d,r,i,n,e,o,a,s])}var pk=function(t,n){var r=arguments;if(n==null||!Xp.call(n,"css"))return D.createElement.apply(void 0,r);var i=r.length,o=new Array(i);o[0]=Tw,o[1]=Ew(t,n);for(var a=2;a<i;a++)o[a]=r[a];return D.createElement.apply(null,o)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(pk||(pk={}));var ks=kw(function(e,t){var n=e.styles,r=M0([n],void 0,D.useContext(Zd)),i=D.useRef();return Q_(function(){var o=t.key+"-global",a=new t.sheet.constructor({key:o,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),s=!1,l=document.querySelector('style[data-emotion="'+o+" "+r.name+'"]');return t.sheet.tags.length&&(a.before=t.sheet.tags[0]),l!==null&&(s=!0,l.setAttribute("data-emotion",o),a.hydrate([l])),i.current=[a,s],function(){a.flush()}},[t]),Q_(function(){var o=i.current,a=o[0],s=o[1];if(s){o[1]=!1;return}if(r.next!==void 0&&_w(t,r.next,!0),a.tags.length){var l=a.tags[a.tags.length-1].nextElementSibling;a.before=l,a.flush()}t.insert("",r,a,!1)},[t,r.name]),null});function Ke(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return M0(t)}function it(){var e=Ke.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}const UV=()=>{};var hk={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e8=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},qV=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=e[n++],a=e[n++],s=e[n++],l=((i&7)<<18|(o&63)<<12|(a&63)<<6|s&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const o=e[n++],a=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return t.join("")},t8={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const o=e[i],a=i+1<e.length,s=a?e[i+1]:0,l=i+2<e.length,c=l?e[i+2]:0,d=o>>2,p=(o&3)<<4|s>>4;let f=(s&15)<<2|c>>6,h=c&63;l||(h=64,a||(f=64)),r.push(n[d],n[p],n[f],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(e8(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):qV(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const o=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const c=i<e.length?n[e.charAt(i)]:64;++i;const p=i<e.length?n[e.charAt(i)]:64;if(++i,o==null||s==null||c==null||p==null)throw new WV;const f=o<<2|s>>4;if(r.push(f),c!==64){const h=s<<4&240|c>>2;if(r.push(h),p!==64){const g=c<<6&192|p;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class WV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HV=function(e){const t=e8(e);return t8.encodeByteArray(t,!0)},Am=function(e){return HV(e).replace(/\./g,"")},n8=function(e){try{return t8.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV=()=>GV().__FIREBASE_DEFAULTS__,KV=()=>{if(typeof process>"u"||typeof hk>"u")return;const e=hk.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},XV=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&n8(e[1]);return t&&JSON.parse(t)},Q0=()=>{try{return UV()||YV()||KV()||XV()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},r8=e=>{var t,n;return(n=(t=Q0())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},S5=e=>{const t=r8(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},i8=()=>{var e;return(e=Q0())===null||e===void 0?void 0:e.config},o8=e=>{var t;return(t=Q0())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(e){return e.endsWith(".cloudworkstations.dev")}async function J0(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a8(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Am(JSON.stringify(n)),Am(JSON.stringify(a)),""].join(".")}const Md={};function JV(){const e={prod:[],emulator:[]};for(const t of Object.keys(Md))Md[t]?e.emulator.push(t):e.prod.push(t);return e}function ZV(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let fk=!1;function Z0(e,t){if(typeof window>"u"||typeof document>"u"||!Es(window.location.host)||Md[e]===t||Md[e]||fk)return;Md[e]=t;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",o=JV().prod.length>0;function a(){const f=document.getElementById(r);f&&f.remove()}function s(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,h){f.setAttribute("width","24"),f.setAttribute("id",h),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{fk=!0,a()},f}function d(f,h){f.setAttribute("id",h),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function p(){const f=ZV(r),h=n("text"),g=document.getElementById(h)||document.createElement("span"),m=n("learnmore"),v=document.getElementById(m)||document.createElement("a"),w=n("preprendIcon"),S=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const C=f.element;s(C),d(v,m);const A=c();l(S,w),C.append(S,g,v,A),document.body.appendChild(C)}o?(g.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ej(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(br())}function tj(){var e;const t=(e=Q0())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rj(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function ij(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oj(){const e=br();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function aj(){return!tj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sj(){try{return typeof indexedDB=="object"}catch{return!1}}function lj(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;t(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj="FirebaseError";class to extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=cj,Object.setPrototypeOf(this,to.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,th.prototype.create)}}class th{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],a=o?uj(o,r):"Error",s=`${this.serviceName}: ${a} (${i}).`;return new to(i,s,r)}}function uj(e,t){return e.replace(dj,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const dj=/\{\$([^}]+)}/g;function pj(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function hl(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const o=e[i],a=t[i];if(gk(o)&&gk(a)){if(!hl(o,a))return!1}else if(o!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function gk(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function fd(e){const t={};return e.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");t[decodeURIComponent(i)]=decodeURIComponent(o)}}),t}function gd(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function hj(e,t){const n=new fj(e,t);return n.subscribe.bind(n)}class fj{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");gj(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=zx),i.error===void 0&&(i.error=zx),i.complete===void 0&&(i.complete=zx);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gj(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function zx(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(e){return e&&e._delegate?e._delegate:e}class ea{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mj=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new QV;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(xj(t))try{this.getOrInitializeService({instanceIdentifier:Hs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=Hs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Hs){return this.instances.has(t)}getOptions(t=Hs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,a]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(o);r===s&&a.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(t),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&t(a,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vj(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Hs){return this.component?this.component.multipleInstances?t:Hs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function vj(e){return e===Hs?void 0:e}function xj(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new mj(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(vt||(vt={}));const bj={debug:vt.DEBUG,verbose:vt.VERBOSE,info:vt.INFO,warn:vt.WARN,error:vt.ERROR,silent:vt.SILENT},wj=vt.INFO,Sj={[vt.DEBUG]:"log",[vt.VERBOSE]:"log",[vt.INFO]:"info",[vt.WARN]:"warn",[vt.ERROR]:"error"},Cj=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=Sj[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class C5{constructor(t){this.name=t,this._logLevel=wj,this._logHandler=Cj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in vt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?bj[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,vt.DEBUG,...t),this._logHandler(this,vt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,vt.VERBOSE,...t),this._logHandler(this,vt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,vt.INFO,...t),this._logHandler(this,vt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,vt.WARN,...t),this._logHandler(this,vt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,vt.ERROR,...t),this._logHandler(this,vt.ERROR,...t)}}const _j=(e,t)=>t.some(n=>e instanceof n);let mk,vk;function kj(){return mk||(mk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ej(){return vk||(vk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const s8=new WeakMap,Zb=new WeakMap,l8=new WeakMap,Vx=new WeakMap,_5=new WeakMap;function Tj(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",a)},o=()=>{n(ts(e.result)),i()},a=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&s8.set(n,e)}).catch(()=>{}),_5.set(t,e),t}function Ij(e){if(Zb.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",a),e.removeEventListener("abort",a)},o=()=>{n(),i()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",a),e.addEventListener("abort",a)});Zb.set(e,t)}let e2={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Zb.get(e);if(t==="objectStoreNames")return e.objectStoreNames||l8.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ts(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Aj(e){e2=e(e2)}function Pj(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(jx(this),t,...n);return l8.set(r,t.sort?t.sort():[t]),ts(r)}:Ej().includes(e)?function(...t){return e.apply(jx(this),t),ts(s8.get(this))}:function(...t){return ts(e.apply(jx(this),t))}}function Dj(e){return typeof e=="function"?Pj(e):(e instanceof IDBTransaction&&Ij(e),_j(e,kj())?new Proxy(e,e2):e)}function ts(e){if(e instanceof IDBRequest)return Tj(e);if(Vx.has(e))return Vx.get(e);const t=Dj(e);return t!==e&&(Vx.set(e,t),_5.set(t,e)),t}const jx=e=>_5.get(e);function Rj(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(e,t),s=ts(a);return r&&a.addEventListener("upgradeneeded",l=>{r(ts(a.result),l.oldVersion,l.newVersion,ts(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),s.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),s}const Nj=["get","getKey","getAll","getAllKeys","count"],Mj=["put","add","delete","clear"],Ux=new Map;function xk(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Ux.get(t))return Ux.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Mj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Nj.includes(n)))return;const o=async function(a,...s){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(s.shift())),(await Promise.all([c[n](...s),i&&l.done]))[0]};return Ux.set(t,o),o}Aj(e=>({...e,get:(t,n,r)=>xk(t,n)||e.get(t,n,r),has:(t,n)=>!!xk(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($j(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $j(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const t2="@firebase/app",yk="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=new C5("@firebase/app"),Lj="@firebase/app-compat",Fj="@firebase/analytics-compat",Bj="@firebase/analytics",zj="@firebase/app-check-compat",Vj="@firebase/app-check",jj="@firebase/auth",Uj="@firebase/auth-compat",qj="@firebase/database",Wj="@firebase/data-connect",Hj="@firebase/database-compat",Gj="@firebase/functions",Yj="@firebase/functions-compat",Kj="@firebase/installations",Xj="@firebase/installations-compat",Qj="@firebase/messaging",Jj="@firebase/messaging-compat",Zj="@firebase/performance",eU="@firebase/performance-compat",tU="@firebase/remote-config",nU="@firebase/remote-config-compat",rU="@firebase/storage",iU="@firebase/storage-compat",oU="@firebase/firestore",aU="@firebase/ai",sU="@firebase/firestore-compat",lU="firebase",cU="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="[DEFAULT]",uU={[t2]:"fire-core",[Lj]:"fire-core-compat",[Bj]:"fire-analytics",[Fj]:"fire-analytics-compat",[Vj]:"fire-app-check",[zj]:"fire-app-check-compat",[jj]:"fire-auth",[Uj]:"fire-auth-compat",[qj]:"fire-rtdb",[Wj]:"fire-data-connect",[Hj]:"fire-rtdb-compat",[Gj]:"fire-fn",[Yj]:"fire-fn-compat",[Kj]:"fire-iid",[Xj]:"fire-iid-compat",[Qj]:"fire-fcm",[Jj]:"fire-fcm-compat",[Zj]:"fire-perf",[eU]:"fire-perf-compat",[tU]:"fire-rc",[nU]:"fire-rc-compat",[rU]:"fire-gcs",[iU]:"fire-gcs-compat",[oU]:"fire-fst",[sU]:"fire-fst-compat",[aU]:"fire-vertex","fire-js":"fire-js",[lU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm=new Map,dU=new Map,r2=new Map;function bk(e,t){try{e.container.addComponent(t)}catch(n){ta.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ds(e){const t=e.name;if(r2.has(t))return ta.debug(`There were multiple attempts to register component ${t}.`),!1;r2.set(t,e);for(const n of Pm.values())bk(n,e);for(const n of dU.values())bk(n,e);return!0}function rh(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Br(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ns=new th("app","Firebase",pU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ea("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl=cU;function c8(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:n2,automaticDataCollectionEnabled:!0},t),i=r.name;if(typeof i!="string"||!i)throw ns.create("bad-app-name",{appName:String(i)});if(n||(n=i8()),!n)throw ns.create("no-options");const o=Pm.get(i);if(o){if(hl(n,o.options)&&hl(r,o.config))return o;throw ns.create("duplicate-app",{appName:i})}const a=new yj(i);for(const l of r2.values())a.addComponent(l);const s=new hU(n,r,a);return Pm.set(i,s),s}function ev(e=n2){const t=Pm.get(e);if(!t&&e===n2&&i8())return c8();if(!t)throw ns.create("no-app",{appName:e});return t}function Ni(e,t,n){var r;let i=(r=uU[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const s=[`Unable to register library "${i}" with version "${t}":`];o&&s.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&s.push("and"),a&&s.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ta.warn(s.join(" "));return}ds(new ea(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU="firebase-heartbeat-database",gU=1,yp="firebase-heartbeat-store";let qx=null;function u8(){return qx||(qx=Rj(fU,gU,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(yp)}catch(n){console.warn(n)}}}}).catch(e=>{throw ns.create("idb-open",{originalErrorMessage:e.message})})),qx}async function mU(e){try{const n=(await u8()).transaction(yp),r=await n.objectStore(yp).get(d8(e));return await n.done,r}catch(t){if(t instanceof to)ta.warn(t.message);else{const n=ns.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ta.warn(n.message)}}}async function wk(e,t){try{const r=(await u8()).transaction(yp,"readwrite");await r.objectStore(yp).put(t,d8(e)),await r.done}catch(n){if(n instanceof to)ta.warn(n.message);else{const r=ns.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ta.warn(r.message)}}}function d8(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vU=1024,xU=30;class yU{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wU(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Sk();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>xU){const a=SU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ta.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Sk(),{heartbeatsToSend:r,unsentEntries:i}=bU(this._heartbeatsCache.heartbeats),o=Am(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return ta.warn(n),""}}}function Sk(){return new Date().toISOString().substring(0,10)}function bU(e,t=vU){const n=[];let r=e.slice();for(const i of e){const o=n.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),Ck(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ck(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class wU{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sj()?lj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await mU(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return wk(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return wk(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Ck(e){return Am(JSON.stringify({version:2,heartbeats:e})).length}function SU(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CU(e){ds(new ea("platform-logger",t=>new Oj(t),"PRIVATE")),ds(new ea("heartbeat",t=>new yU(t),"PRIVATE")),Ni(t2,yk,e),Ni(t2,yk,"esm2017"),Ni("fire-js","")}CU("");function k5(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function p8(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _U=p8,h8=new th("auth","Firebase",p8());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm=new C5("@firebase/auth");function kU(e,...t){Dm.logLevel<=vt.WARN&&Dm.warn(`Auth (${Sl}): ${e}`,...t)}function Fg(e,...t){Dm.logLevel<=vt.ERROR&&Dm.error(`Auth (${Sl}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(e,...t){throw E5(e,...t)}function xo(e,...t){return E5(e,...t)}function f8(e,t,n){const r=Object.assign(Object.assign({},_U()),{[t]:n});return new th("auth","Firebase",r).create(t,{appName:e.name})}function Go(e){return f8(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function E5(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return h8.create(e,...t)}function Xe(e,t,...n){if(!e)throw E5(t,...n)}function qo(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Fg(t),new Error(t)}function na(e,t){e||qo(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function EU(){return _k()==="http:"||_k()==="https:"}function _k(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(EU()||rj()||"connection"in navigator)?navigator.onLine:!0}function IU(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(t,n){this.shortDelay=t,this.longDelay=n,na(n>t,"Short delay should be less than long delay!"),this.isMobile=ej()||ij()}get(){return TU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T5(e,t){na(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DU=new ih(3e4,6e4);function Ts(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Is(e,t,n,r,i={}){return m8(e,i,async()=>{let o={},a={};r&&(t==="GET"?a=r:o={body:JSON.stringify(r)});const s=nh(Object.assign({key:e.config.apiKey},a)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c=Object.assign({method:t,headers:l},o);return nj()||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&Es(e.emulatorConfig.host)&&(c.credentials="include"),g8.fetch()(await v8(e,e.config.apiHost,n,s),c)})}async function m8(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},AU),t);try{const i=new NU(e),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw yf(e,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const s=o.ok?a.errorMessage:a.error.message,[l,c]=s.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw yf(e,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw yf(e,"email-already-in-use",a);if(l==="USER_DISABLED")throw yf(e,"user-disabled",a);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw f8(e,d,c);Zi(e,d)}}catch(i){if(i instanceof to)throw i;Zi(e,"network-request-failed",{message:String(i)})}}async function oh(e,t,n,r,i={}){const o=await Is(e,t,n,r,i);return"mfaPendingCredential"in o&&Zi(e,"multi-factor-auth-required",{_serverResponse:o}),o}async function v8(e,t,n,r){const i=`${t}${n}?${r}`,o=e,a=o.config.emulator?T5(e.config,i):`${e.config.apiScheme}://${i}`;return PU.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}function RU(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(xo(this.auth,"network-request-failed")),DU.get())})}}function yf(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=xo(e,t,r);return i.customData._tokenResponse=n,i}function kk(e){return e!==void 0&&e.enterprise!==void 0}class MU{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return RU(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function OU(e,t){return Is(e,"GET","/v2/recaptchaConfig",Ts(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $U(e,t){return Is(e,"POST","/v1/accounts:delete",t)}async function Rm(e,t){return Is(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function LU(e,t=!1){const n=Vt(e),r=await n.getIdToken(t),i=I5(r);Xe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Od(Wx(i.auth_time)),issuedAtTime:Od(Wx(i.iat)),expirationTime:Od(Wx(i.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Wx(e){return Number(e)*1e3}function I5(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return Fg("JWT malformed, contained fewer than 3 sections"),null;try{const i=n8(n);return i?JSON.parse(i):(Fg("Failed to decode base64 JWT payload"),null)}catch(i){return Fg("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Ek(e){const t=I5(e);return Xe(t,"internal-error"),Xe(typeof t.exp<"u","internal-error"),Xe(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bp(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof to&&FU(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function FU({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Od(this.lastLoginAt),this.creationTime=Od(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nm(e){var t;const n=e.auth,r=await e.getIdToken(),i=await bp(e,Rm(n,{idToken:r}));Xe(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=!((t=o.providerUserInfo)===null||t===void 0)&&t.length?x8(o.providerUserInfo):[],s=VU(e.providerData,a),l=e.isAnonymous,c=!(e.email&&o.passwordHash)&&!(s!=null&&s.length),d=l?c:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new o2(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(e,p)}async function zU(e){const t=Vt(e);await Nm(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function VU(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function x8(e){return e.map(t=>{var{providerId:n}=t,r=k5(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jU(e,t){const n=await m8(e,{},async()=>{const r=nh({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=e.config,a=await v8(e,i,"/v1/token",`key=${o}`),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",g8.fetch()(a,{method:"POST",headers:s,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function UU(e,t){return Is(e,"POST","/v2/accounts:revokeToken",Ts(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Xe(t.idToken,"internal-error"),Xe(typeof t.idToken<"u","internal-error"),Xe(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Ek(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Xe(t.length!==0,"internal-error");const n=Ek(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Xe(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await jU(t,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,a=new Sc;return r&&(Xe(typeof r=="string","internal-error",{appName:t}),a.refreshToken=r),i&&(Xe(typeof i=="string","internal-error",{appName:t}),a.accessToken=i),o&&(Xe(typeof o=="number","internal-error",{appName:t}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Sc,this.toJSON())}_performRefresh(){return qo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(e,t){Xe(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Yi{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,o=k5(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new BU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new o2(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const n=await bp(this,this.stsTokenManager.getToken(this.auth,t));return Xe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return LU(this,t)}reload(){return zU(this)}_assign(t){this!==t&&(Xe(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Yi(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await Nm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Br(this.auth.app))return Promise.reject(Go(this.auth));const t=await this.getIdToken();return await bp(this,$U(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,o,a,s,l,c,d;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,g=(a=n.photoURL)!==null&&a!==void 0?a:void 0,m=(s=n.tenantId)!==null&&s!==void 0?s:void 0,v=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,S=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:C,emailVerified:A,isAnonymous:_,providerData:I,stsTokenManager:E}=n;Xe(C&&E,t,"internal-error");const k=Sc.fromJSON(this.name,E);Xe(typeof C=="string",t,"internal-error"),ma(p,t.name),ma(f,t.name),Xe(typeof A=="boolean",t,"internal-error"),Xe(typeof _=="boolean",t,"internal-error"),ma(h,t.name),ma(g,t.name),ma(m,t.name),ma(v,t.name),ma(w,t.name),ma(S,t.name);const T=new Yi({uid:C,auth:t,email:f,emailVerified:A,displayName:p,isAnonymous:_,photoURL:g,phoneNumber:h,tenantId:m,stsTokenManager:k,createdAt:w,lastLoginAt:S});return I&&Array.isArray(I)&&(T.providerData=I.map(P=>Object.assign({},P))),v&&(T._redirectEventId=v),T}static async _fromIdTokenResponse(t,n,r=!1){const i=new Sc;i.updateFromServerResponse(n);const o=new Yi({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await Nm(o),o}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];Xe(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?x8(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),s=new Sc;s.updateFromIdToken(r);const l=new Yi({uid:i.localId,auth:t,stsTokenManager:s,isAnonymous:a}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new o2(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=new Map;function Wo(e){na(e instanceof Function,"Expected a class definition");let t=Tk.get(e);return t?(na(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Tk.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}y8.type="NONE";const Ik=y8;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(e,t,n){return`firebase:${e}:${t}:${n}`}class Cc{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Bg(this.userKey,i.apiKey,o),this.fullPersistenceKey=Bg("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Rm(this.auth,{idToken:t}).catch(()=>{});return n?Yi._fromGetAccountInfoResponse(this.auth,n,t):null}return Yi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Cc(Wo(Ik),t,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let o=i[0]||Wo(Ik);const a=Bg(r,t.config.apiKey,t.name);let s=null;for(const c of n)try{const d=await c._get(a);if(d){let p;if(typeof d=="string"){const f=await Rm(t,{idToken:d}).catch(()=>{});if(!f)break;p=await Yi._fromGetAccountInfoResponse(t,f,d)}else p=Yi._fromJSON(t,d);c!==o&&(s=p),o=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new Cc(o,t,r):(o=l[0],s&&await o._set(a,s.toJSON()),await Promise.all(n.map(async c=>{if(c!==o)try{await c._remove(a)}catch{}})),new Cc(o,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(C8(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(b8(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(k8(t))return"Blackberry";if(E8(t))return"Webos";if(w8(t))return"Safari";if((t.includes("chrome/")||S8(t))&&!t.includes("edge/"))return"Chrome";if(_8(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function b8(e=br()){return/firefox\//i.test(e)}function w8(e=br()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function S8(e=br()){return/crios\//i.test(e)}function C8(e=br()){return/iemobile/i.test(e)}function _8(e=br()){return/android/i.test(e)}function k8(e=br()){return/blackberry/i.test(e)}function E8(e=br()){return/webos/i.test(e)}function A5(e=br()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function qU(e=br()){var t;return A5(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function WU(){return oj()&&document.documentMode===10}function T8(e=br()){return A5(e)||_8(e)||E8(e)||k8(e)||/windows phone/i.test(e)||C8(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I8(e,t=[]){let n;switch(e){case"Browser":n=Ak(br());break;case"Worker":n=`${Ak(br())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Sl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=o=>new Promise((a,s)=>{try{const l=t(o);a(l)}catch(l){s(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GU(e,t={}){return Is(e,"GET","/v2/passwordPolicy",Ts(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YU=6;class KU{constructor(t){var n,r,i,o;const a=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:YU,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=t.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,o,a,s;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,l),this.validatePasswordCharacterOptions(t,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(s=l.containsNonAlphanumericCharacter)!==null&&s!==void 0?s:!0),l}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pk(this),this.idTokenSubscription=new Pk(this),this.beforeStateQueue=new HU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=h8,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Wo(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Cc.create(this,t),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Rm(this,{idToken:t}),r=await Yi._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Br(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(s,s))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,s=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(t);(!a||a===s)&&(l!=null&&l.user)&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Nm(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=IU()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Br(this.app))return Promise.reject(Go(this));const n=t?Vt(t):null;return n&&Xe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Xe(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Br(this.app)?Promise.reject(Go(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Br(this.app)?Promise.reject(Go(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wo(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await GU(this),n=new KU(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new th("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await UU(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Wo(t)||this._popupRedirectResolver;Xe(n,this,"argument-error"),this.redirectPersistenceManager=await Cc.create(this,[Wo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(Xe(s,this,"internal-error"),s.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const l=t.addObserver(n,r,i);return()=>{a=!0,l()}}else{const l=t.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=I8(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;if(Br(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&kU(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Cl(e){return Vt(e)}class Pk{constructor(t){this.auth=t,this.observer=null,this.addObserver=hj(n=>this.observer=n)}get next(){return Xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QU(e){tv=e}function A8(e){return tv.loadJS(e)}function JU(){return tv.recaptchaEnterpriseScript}function ZU(){return tv.gapiScript}function eq(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class tq{constructor(){this.enterprise=new nq}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class nq{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const rq="recaptcha-enterprise",P8="NO_RECAPTCHA";class iq{constructor(t){this.type=rq,this.auth=Cl(t)}async verify(t="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,s)=>{OU(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)s(new Error("recaptcha Enterprise site key undefined"));else{const c=new MU(l);return o.tenantId==null?o._agentRecaptchaConfig=c:o._tenantRecaptchaConfigs[o.tenantId]=c,a(c.siteKey)}}).catch(l=>{s(l)})})}function i(o,a,s){const l=window.grecaptcha;kk(l)?l.enterprise.ready(()=>{l.enterprise.execute(o,{action:t}).then(c=>{a(c)}).catch(()=>{a(P8)})}):s(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new tq().execute("siteKey",{action:"verify"}):new Promise((o,a)=>{r(this.auth).then(s=>{if(!n&&kk(window.grecaptcha))i(s,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=JU();l.length!==0&&(l+=s),A8(l).then(()=>{i(s,o,a)}).catch(c=>{a(c)})}}).catch(s=>{a(s)})})}}async function Dk(e,t,n,r=!1,i=!1){const o=new iq(e);let a;if(i)a=P8;else try{a=await o.verify(n)}catch{a=await o.verify(n,!0)}const s=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in s){const l=s.phoneEnrollmentInfo.phoneNumber,c=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in s){const l=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return s}return r?Object.assign(s,{captchaResp:a}):Object.assign(s,{captchaResponse:a}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function a2(e,t,n,r,i){var o;if(!((o=e._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Dk(e,t,n,n==="getOobCode");return r(e,a)}else return r(e,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await Dk(e,t,n,n==="getOobCode");return r(e,s)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oq(e,t){const n=rh(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(hl(o,t??{}))return i;Zi(i,"already-initialized")}return n.initialize({options:t})}function aq(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Wo);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function sq(e,t,n){const r=Cl(e);Xe(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,o=D8(t),{host:a,port:s}=lq(t),l=s===null?"":`:${s}`,c={url:`${o}//${a}${l}/`},d=Object.freeze({host:a,port:s,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Xe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Xe(hl(c,r.config.emulator)&&hl(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Es(a)?(J0(`${o}//${a}${l}`),Z0("Auth",!0)):cq()}function D8(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function lq(e){const t=D8(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:Rk(r.substr(o.length+1))}}else{const[o,a]=r.split(":");return{host:o,port:Rk(a)}}}function Rk(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function cq(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return qo("not implemented")}_getIdTokenResponse(t){return qo("not implemented")}_linkToIdToken(t,n){return qo("not implemented")}_getReauthenticationResolver(t){return qo("not implemented")}}async function uq(e,t){return Is(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dq(e,t){return oh(e,"POST","/v1/accounts:signInWithPassword",Ts(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pq(e,t){return oh(e,"POST","/v1/accounts:signInWithEmailLink",Ts(e,t))}async function hq(e,t){return oh(e,"POST","/v1/accounts:signInWithEmailLink",Ts(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp extends P5{constructor(t,n,r,i=null){super("password",r),this._email=t,this._password=n,this._tenantId=i}static _fromEmailAndPassword(t,n){return new wp(t,n,"password")}static _fromEmailAndCode(t,n,r=null){return new wp(t,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return a2(t,n,"signInWithPassword",dq);case"emailLink":return pq(t,{email:this._email,oobCode:this._password});default:Zi(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return a2(t,r,"signUpPassword",uq);case"emailLink":return hq(t,{idToken:n,email:this._email,oobCode:this._password});default:Zi(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _c(e,t){return oh(e,"POST","/v1/accounts:signInWithIdp",Ts(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fq="http://localhost";class fl extends P5{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new fl(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Zi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,o=k5(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new fl(r,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return _c(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,_c(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,_c(t,n)}buildRequest(){const t={requestUri:fq,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=nh(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gq(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mq(e){const t=fd(gd(e)).link,n=t?fd(gd(t)).deep_link_id:null,r=fd(gd(e)).deep_link_id;return(r?fd(gd(r)).link:null)||r||n||t||e}class D5{constructor(t){var n,r,i,o,a,s;const l=fd(gd(t)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,p=gq((i=l.mode)!==null&&i!==void 0?i:null);Xe(c&&d&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=d,this.continueUrl=(o=l.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=l.lang)!==null&&a!==void 0?a:null,this.tenantId=(s=l.tenantId)!==null&&s!==void 0?s:null}static parseLink(t){const n=mq(t);try{return new D5(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(){this.providerId=su.PROVIDER_ID}static credential(t,n){return wp._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const r=D5.parseLink(n);return Xe(r,"argument-error"),wp._fromEmailAndCode(t,r.code,r.tenantId)}}su.PROVIDER_ID="password";su.EMAIL_PASSWORD_SIGN_IN_METHOD="password";su.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah extends R8{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La extends ah{constructor(){super("facebook.com")}static credential(t){return fl._fromParams({providerId:La.PROVIDER_ID,signInMethod:La.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return La.credentialFromTaggedObject(t)}static credentialFromError(t){return La.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return La.credential(t.oauthAccessToken)}catch{return null}}}La.FACEBOOK_SIGN_IN_METHOD="facebook.com";La.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa extends ah{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return fl._fromParams({providerId:Fa.PROVIDER_ID,signInMethod:Fa.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Fa.credentialFromTaggedObject(t)}static credentialFromError(t){return Fa.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Fa.credential(n,r)}catch{return null}}}Fa.GOOGLE_SIGN_IN_METHOD="google.com";Fa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba extends ah{constructor(){super("github.com")}static credential(t){return fl._fromParams({providerId:Ba.PROVIDER_ID,signInMethod:Ba.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ba.credentialFromTaggedObject(t)}static credentialFromError(t){return Ba.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ba.credential(t.oauthAccessToken)}catch{return null}}}Ba.GITHUB_SIGN_IN_METHOD="github.com";Ba.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za extends ah{constructor(){super("twitter.com")}static credential(t,n){return fl._fromParams({providerId:za.PROVIDER_ID,signInMethod:za.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return za.credentialFromTaggedObject(t)}static credentialFromError(t){return za.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return za.credential(n,r)}catch{return null}}}za.TWITTER_SIGN_IN_METHOD="twitter.com";za.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vq(e,t){return oh(e,"POST","/v1/accounts:signUp",Ts(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const o=await Yi._fromIdTokenResponse(t,r,i),a=Nk(r);return new gl({user:o,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=Nk(r);return new gl({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function Nk(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm extends to{constructor(t,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Mm.prototype),this.customData={appName:t.name,tenantId:(o=t.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new Mm(t,n,r,i)}}function N8(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Mm._fromErrorAndOperation(e,o,t,r):o})}async function xq(e,t,n=!1){const r=await bp(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return gl._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yq(e,t,n=!1){const{auth:r}=e;if(Br(r.app))return Promise.reject(Go(r));const i="reauthenticate";try{const o=await bp(e,N8(r,i,t,e),n);Xe(o.idToken,r,"internal-error");const a=I5(o.idToken);Xe(a,r,"internal-error");const{sub:s}=a;return Xe(e.uid===s,r,"user-mismatch"),gl._forOperation(e,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Zi(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M8(e,t,n=!1){if(Br(e.app))return Promise.reject(Go(e));const r="signIn",i=await N8(e,r,t),o=await gl._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function bq(e,t){return M8(Cl(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O8(e){const t=Cl(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function R5(e,t,n){if(Br(e.app))return Promise.reject(Go(e));const r=Cl(e),a=await a2(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vq).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&O8(e),l}),s=await gl._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(s.user),s}function wq(e,t,n){return Br(e.app)?Promise.reject(Go(e)):bq(Vt(e),su.credential(t,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&O8(e),r})}function Sq(e,t,n,r){return Vt(e).onIdTokenChanged(t,n,r)}function Cq(e,t,n){return Vt(e).beforeAuthStateChanged(t,n)}function $8(e,t,n,r){return Vt(e).onAuthStateChanged(t,n,r)}function L8(e){return Vt(e).signOut()}const Om="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Om,"1"),this.storage.removeItem(Om),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _q=1e3,kq=10;class B8 extends F8{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=T8(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,s,l)=>{this.notifyListeners(a,l)});return}const r=t.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);WU()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,kq):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},_q)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}B8.type="LOCAL";const Eq=B8;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8 extends F8{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}z8.type="SESSION";const V8=z8;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tq(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new nv(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:o}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const s=Array.from(a).map(async c=>c(n.origin,o)),l=await Tq(s);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nv.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N5(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iq{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((s,l)=>{const c=N5("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(p){const f=p;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),s(f.data.response);break;default:clearTimeout(d),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yo(){return window}function Aq(e){yo().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j8(){return typeof yo().WorkerGlobalScope<"u"&&typeof yo().importScripts=="function"}async function Pq(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Dq(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function Rq(){return j8()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U8="firebaseLocalStorageDb",Nq=1,$m="firebaseLocalStorage",q8="fbase_key";class sh{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rv(e,t){return e.transaction([$m],t?"readwrite":"readonly").objectStore($m)}function Mq(){const e=indexedDB.deleteDatabase(U8);return new sh(e).toPromise()}function s2(){const e=indexedDB.open(U8,Nq);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore($m,{keyPath:q8})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains($m)?t(r):(r.close(),await Mq(),t(await s2()))})})}async function Mk(e,t,n){const r=rv(e,!0).put({[q8]:t,value:n});return new sh(r).toPromise()}async function Oq(e,t){const n=rv(e,!1).get(t),r=await new sh(n).toPromise();return r===void 0?null:r.value}function Ok(e,t){const n=rv(e,!0).delete(t);return new sh(n).toPromise()}const $q=800,Lq=3;class W8{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await s2(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>Lq)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return j8()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nv._getInstance(Rq()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await Pq(),!this.activeServiceWorker)return;this.sender=new Iq(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Dq()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await s2();return await Mk(t,Om,"1"),await Ok(t,Om),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Mk(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>Oq(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ok(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const o=rv(i,!1).getAll();return new sh(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:o}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$q)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}W8.type="LOCAL";const Fq=W8;new ih(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bq(e,t){return t?Wo(t):(Xe(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5 extends P5{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return _c(t,this._buildIdpRequest())}_linkToIdToken(t,n){return _c(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return _c(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function zq(e){return M8(e.auth,new M5(e),e.bypassAuthState)}function Vq(e){const{auth:t,user:n}=e;return Xe(n,t,"internal-error"),yq(n,new M5(e),e.bypassAuthState)}async function jq(e){const{auth:t,user:n}=e;return Xe(n,t,"internal-error"),xq(n,new M5(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(t,n,r,i,o=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:a,type:s}=t;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(l))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return zq;case"linkViaPopup":case"linkViaRedirect":return jq;case"reauthViaPopup":case"reauthViaRedirect":return Vq;default:Zi(this.auth,"internal-error")}}resolve(t){na(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){na(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uq=new ih(2e3,1e4);class sc extends H8{constructor(t,n,r,i,o){super(t,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,sc.currentPopupAction&&sc.currentPopupAction.cancel(),sc.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Xe(t,this.auth,"internal-error"),t}async onExecution(){na(this.filter.length===1,"Popup operations only handle one event");const t=N5();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(xo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(xo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sc.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Uq.get())};t()}}sc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qq="pendingRedirect",zg=new Map;class Wq extends H8{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=zg.get(this.auth._key());if(!t){try{const r=await Hq(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}zg.set(this.auth._key(),t)}return this.bypassAuthState||zg.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Hq(e,t){const n=Kq(t),r=Yq(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Gq(e,t){zg.set(e._key(),t)}function Yq(e){return Wo(e._redirectPersistence)}function Kq(e){return Bg(qq,e.config.apiKey,e.name)}async function Xq(e,t,n=!1){if(Br(e.app))return Promise.reject(Go(e));const r=Cl(e),i=Bq(r,t),a=await new Wq(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qq=10*60*1e3;class Jq{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Zq(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!G8(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(xo(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Qq&&this.cachedEventUids.clear(),this.cachedEventUids.has($k(t))}saveEventToCache(t){this.cachedEventUids.add($k(t)),this.lastProcessedEventTime=Date.now()}}function $k(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function G8({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Zq(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return G8(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eW(e,t={}){return Is(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tW=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nW=/^https?/;async function rW(e){if(e.config.emulator)return;const{authorizedDomains:t}=await eW(e);for(const n of t)try{if(iW(n))return}catch{}Zi(e,"unauthorized-domain")}function iW(e){const t=i2(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!nW.test(n))return!1;if(tW.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oW=new ih(3e4,6e4);function Lk(){const e=yo().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function aW(e){return new Promise((t,n)=>{var r,i,o;function a(){Lk(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Lk(),n(xo(e,"network-request-failed"))},timeout:oW.get()})}if(!((i=(r=yo().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((o=yo().gapi)===null||o===void 0)&&o.load)a();else{const s=eq("iframefcb");return yo()[s]=()=>{gapi.load?a():n(xo(e,"network-request-failed"))},A8(`${ZU()}?onload=${s}`).catch(l=>n(l))}}).catch(t=>{throw Vg=null,t})}let Vg=null;function sW(e){return Vg=Vg||aW(e),Vg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lW=new ih(5e3,15e3),cW="__/auth/iframe",uW="emulator/auth/iframe",dW={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pW=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hW(e){const t=e.config;Xe(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?T5(t,uW):`https://${e.config.authDomain}/${cW}`,r={apiKey:t.apiKey,appName:e.name,v:Sl},i=pW.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${nh(r).slice(1)}`}async function fW(e){const t=await sW(e),n=yo().gapi;return Xe(n,e,"internal-error"),t.open({where:document.body,url:hW(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dW,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const a=xo(e,"network-request-failed"),s=yo().setTimeout(()=>{o(a)},lW.get());function l(){yo().clearTimeout(s),i(r)}r.ping(l).then(l,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gW={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mW=500,vW=600,xW="_blank",yW="http://localhost";class Fk{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bW(e,t,n,r=mW,i=vW){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const l=Object.assign(Object.assign({},gW),{width:r.toString(),height:i.toString(),top:o,left:a}),c=br().toLowerCase();n&&(s=S8(c)?xW:n),b8(c)&&(t=t||yW,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[h,g])=>`${f}${h}=${g},`,"");if(qU(c)&&s!=="_self")return wW(t||"",s),new Fk(null);const p=window.open(t||"",s,d);Xe(p,e,"popup-blocked");try{p.focus()}catch{}return new Fk(p)}function wW(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SW="__/auth/handler",CW="emulator/auth/handler",_W=encodeURIComponent("fac");async function Bk(e,t,n,r,i,o){Xe(e.config.authDomain,e,"auth-domain-config-required"),Xe(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Sl,eventId:i};if(t instanceof R8){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",pj(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,p]of Object.entries({}))a[d]=p}if(t instanceof ah){const d=t.getScopes().filter(p=>p!=="");d.length>0&&(a.scopes=d.join(","))}e.tenantId&&(a.tid=e.tenantId);const s=a;for(const d of Object.keys(s))s[d]===void 0&&delete s[d];const l=await e._getAppCheckToken(),c=l?`#${_W}=${encodeURIComponent(l)}`:"";return`${kW(e)}?${nh(s).slice(1)}${c}`}function kW({config:e}){return e.emulator?T5(e,CW):`https://${e.authDomain}/${SW}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="webStorageSupport";class EW{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=V8,this._completeRedirectFn=Xq,this._overrideRedirectResult=Gq}async _openPopup(t,n,r,i){var o;na((o=this.eventManagers[t._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await Bk(t,n,r,i2(),i);return bW(t,a,N5())}async _openRedirect(t,n,r,i){await this._originValidation(t);const o=await Bk(t,n,r,i2(),i);return Aq(o),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(na(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await fW(t),r=new Jq(t);return n.register("authEvent",i=>(Xe(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Hx,{type:Hx},i=>{var o;const a=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[Hx];a!==void 0&&n(!!a),Zi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=rW(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return T8()||w8()||A5()}}const TW=EW;var zk="@firebase/auth",Vk="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IW{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AW(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PW(e){ds(new ea("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=r.options;Xe(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:s,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:I8(e)},c=new XU(r,i,o,l);return aq(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),ds(new ea("auth-internal",t=>{const n=Cl(t.getProvider("auth").getImmediate());return(r=>new IW(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ni(zk,Vk,AW(e)),Ni(zk,Vk,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DW=5*60,RW=o8("authIdTokenMaxAge")||DW;let jk=null;const NW=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>RW)return;const i=n==null?void 0:n.token;jk!==i&&(jk=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function MW(e=ev()){const t=rh(e,"auth");if(t.isInitialized())return t.getImmediate();const n=oq(e,{popupRedirectResolver:TW,persistence:[Fq,Eq,V8]}),r=o8("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const a=NW(o.toString());Cq(n,a,()=>a(n.currentUser)),Sq(n,s=>a(s))}}const i=r8("auth");return i&&sq(n,`http://${i}`),n}function OW(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}QU({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const o=xo("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",OW().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PW("Browser");var $W="firebase",LW="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ni($W,LW,"app");var Uk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rs,Y8;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(E,k){function T(){}T.prototype=k.prototype,E.D=k.prototype,E.prototype=new T,E.prototype.constructor=E,E.C=function(P,O,R){for(var N=Array(arguments.length-2),L=2;L<arguments.length;L++)N[L-2]=arguments[L];return k.prototype[O].apply(P,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,k,T){T||(T=0);var P=Array(16);if(typeof k=="string")for(var O=0;16>O;++O)P[O]=k.charCodeAt(T++)|k.charCodeAt(T++)<<8|k.charCodeAt(T++)<<16|k.charCodeAt(T++)<<24;else for(O=0;16>O;++O)P[O]=k[T++]|k[T++]<<8|k[T++]<<16|k[T++]<<24;k=E.g[0],T=E.g[1],O=E.g[2];var R=E.g[3],N=k+(R^T&(O^R))+P[0]+3614090360&4294967295;k=T+(N<<7&4294967295|N>>>25),N=R+(O^k&(T^O))+P[1]+3905402710&4294967295,R=k+(N<<12&4294967295|N>>>20),N=O+(T^R&(k^T))+P[2]+606105819&4294967295,O=R+(N<<17&4294967295|N>>>15),N=T+(k^O&(R^k))+P[3]+3250441966&4294967295,T=O+(N<<22&4294967295|N>>>10),N=k+(R^T&(O^R))+P[4]+4118548399&4294967295,k=T+(N<<7&4294967295|N>>>25),N=R+(O^k&(T^O))+P[5]+1200080426&4294967295,R=k+(N<<12&4294967295|N>>>20),N=O+(T^R&(k^T))+P[6]+2821735955&4294967295,O=R+(N<<17&4294967295|N>>>15),N=T+(k^O&(R^k))+P[7]+4249261313&4294967295,T=O+(N<<22&4294967295|N>>>10),N=k+(R^T&(O^R))+P[8]+1770035416&4294967295,k=T+(N<<7&4294967295|N>>>25),N=R+(O^k&(T^O))+P[9]+2336552879&4294967295,R=k+(N<<12&4294967295|N>>>20),N=O+(T^R&(k^T))+P[10]+4294925233&4294967295,O=R+(N<<17&4294967295|N>>>15),N=T+(k^O&(R^k))+P[11]+2304563134&4294967295,T=O+(N<<22&4294967295|N>>>10),N=k+(R^T&(O^R))+P[12]+1804603682&4294967295,k=T+(N<<7&4294967295|N>>>25),N=R+(O^k&(T^O))+P[13]+4254626195&4294967295,R=k+(N<<12&4294967295|N>>>20),N=O+(T^R&(k^T))+P[14]+2792965006&4294967295,O=R+(N<<17&4294967295|N>>>15),N=T+(k^O&(R^k))+P[15]+1236535329&4294967295,T=O+(N<<22&4294967295|N>>>10),N=k+(O^R&(T^O))+P[1]+4129170786&4294967295,k=T+(N<<5&4294967295|N>>>27),N=R+(T^O&(k^T))+P[6]+3225465664&4294967295,R=k+(N<<9&4294967295|N>>>23),N=O+(k^T&(R^k))+P[11]+643717713&4294967295,O=R+(N<<14&4294967295|N>>>18),N=T+(R^k&(O^R))+P[0]+3921069994&4294967295,T=O+(N<<20&4294967295|N>>>12),N=k+(O^R&(T^O))+P[5]+3593408605&4294967295,k=T+(N<<5&4294967295|N>>>27),N=R+(T^O&(k^T))+P[10]+38016083&4294967295,R=k+(N<<9&4294967295|N>>>23),N=O+(k^T&(R^k))+P[15]+3634488961&4294967295,O=R+(N<<14&4294967295|N>>>18),N=T+(R^k&(O^R))+P[4]+3889429448&4294967295,T=O+(N<<20&4294967295|N>>>12),N=k+(O^R&(T^O))+P[9]+568446438&4294967295,k=T+(N<<5&4294967295|N>>>27),N=R+(T^O&(k^T))+P[14]+3275163606&4294967295,R=k+(N<<9&4294967295|N>>>23),N=O+(k^T&(R^k))+P[3]+4107603335&4294967295,O=R+(N<<14&4294967295|N>>>18),N=T+(R^k&(O^R))+P[8]+1163531501&4294967295,T=O+(N<<20&4294967295|N>>>12),N=k+(O^R&(T^O))+P[13]+2850285829&4294967295,k=T+(N<<5&4294967295|N>>>27),N=R+(T^O&(k^T))+P[2]+4243563512&4294967295,R=k+(N<<9&4294967295|N>>>23),N=O+(k^T&(R^k))+P[7]+1735328473&4294967295,O=R+(N<<14&4294967295|N>>>18),N=T+(R^k&(O^R))+P[12]+2368359562&4294967295,T=O+(N<<20&4294967295|N>>>12),N=k+(T^O^R)+P[5]+4294588738&4294967295,k=T+(N<<4&4294967295|N>>>28),N=R+(k^T^O)+P[8]+2272392833&4294967295,R=k+(N<<11&4294967295|N>>>21),N=O+(R^k^T)+P[11]+1839030562&4294967295,O=R+(N<<16&4294967295|N>>>16),N=T+(O^R^k)+P[14]+4259657740&4294967295,T=O+(N<<23&4294967295|N>>>9),N=k+(T^O^R)+P[1]+2763975236&4294967295,k=T+(N<<4&4294967295|N>>>28),N=R+(k^T^O)+P[4]+1272893353&4294967295,R=k+(N<<11&4294967295|N>>>21),N=O+(R^k^T)+P[7]+4139469664&4294967295,O=R+(N<<16&4294967295|N>>>16),N=T+(O^R^k)+P[10]+3200236656&4294967295,T=O+(N<<23&4294967295|N>>>9),N=k+(T^O^R)+P[13]+681279174&4294967295,k=T+(N<<4&4294967295|N>>>28),N=R+(k^T^O)+P[0]+3936430074&4294967295,R=k+(N<<11&4294967295|N>>>21),N=O+(R^k^T)+P[3]+3572445317&4294967295,O=R+(N<<16&4294967295|N>>>16),N=T+(O^R^k)+P[6]+76029189&4294967295,T=O+(N<<23&4294967295|N>>>9),N=k+(T^O^R)+P[9]+3654602809&4294967295,k=T+(N<<4&4294967295|N>>>28),N=R+(k^T^O)+P[12]+3873151461&4294967295,R=k+(N<<11&4294967295|N>>>21),N=O+(R^k^T)+P[15]+530742520&4294967295,O=R+(N<<16&4294967295|N>>>16),N=T+(O^R^k)+P[2]+3299628645&4294967295,T=O+(N<<23&4294967295|N>>>9),N=k+(O^(T|~R))+P[0]+4096336452&4294967295,k=T+(N<<6&4294967295|N>>>26),N=R+(T^(k|~O))+P[7]+1126891415&4294967295,R=k+(N<<10&4294967295|N>>>22),N=O+(k^(R|~T))+P[14]+2878612391&4294967295,O=R+(N<<15&4294967295|N>>>17),N=T+(R^(O|~k))+P[5]+4237533241&4294967295,T=O+(N<<21&4294967295|N>>>11),N=k+(O^(T|~R))+P[12]+1700485571&4294967295,k=T+(N<<6&4294967295|N>>>26),N=R+(T^(k|~O))+P[3]+2399980690&4294967295,R=k+(N<<10&4294967295|N>>>22),N=O+(k^(R|~T))+P[10]+4293915773&4294967295,O=R+(N<<15&4294967295|N>>>17),N=T+(R^(O|~k))+P[1]+2240044497&4294967295,T=O+(N<<21&4294967295|N>>>11),N=k+(O^(T|~R))+P[8]+1873313359&4294967295,k=T+(N<<6&4294967295|N>>>26),N=R+(T^(k|~O))+P[15]+4264355552&4294967295,R=k+(N<<10&4294967295|N>>>22),N=O+(k^(R|~T))+P[6]+2734768916&4294967295,O=R+(N<<15&4294967295|N>>>17),N=T+(R^(O|~k))+P[13]+1309151649&4294967295,T=O+(N<<21&4294967295|N>>>11),N=k+(O^(T|~R))+P[4]+4149444226&4294967295,k=T+(N<<6&4294967295|N>>>26),N=R+(T^(k|~O))+P[11]+3174756917&4294967295,R=k+(N<<10&4294967295|N>>>22),N=O+(k^(R|~T))+P[2]+718787259&4294967295,O=R+(N<<15&4294967295|N>>>17),N=T+(R^(O|~k))+P[9]+3951481745&4294967295,E.g[0]=E.g[0]+k&4294967295,E.g[1]=E.g[1]+(O+(N<<21&4294967295|N>>>11))&4294967295,E.g[2]=E.g[2]+O&4294967295,E.g[3]=E.g[3]+R&4294967295}r.prototype.u=function(E,k){k===void 0&&(k=E.length);for(var T=k-this.blockSize,P=this.B,O=this.h,R=0;R<k;){if(O==0)for(;R<=T;)i(this,E,R),R+=this.blockSize;if(typeof E=="string"){for(;R<k;)if(P[O++]=E.charCodeAt(R++),O==this.blockSize){i(this,P),O=0;break}}else for(;R<k;)if(P[O++]=E[R++],O==this.blockSize){i(this,P),O=0;break}}this.h=O,this.o+=k},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var k=1;k<E.length-8;++k)E[k]=0;var T=8*this.o;for(k=E.length-8;k<E.length;++k)E[k]=T&255,T/=256;for(this.u(E),E=Array(16),k=T=0;4>k;++k)for(var P=0;32>P;P+=8)E[T++]=this.g[k]>>>P&255;return E};function o(E,k){var T=s;return Object.prototype.hasOwnProperty.call(T,E)?T[E]:T[E]=k(E)}function a(E,k){this.h=k;for(var T=[],P=!0,O=E.length-1;0<=O;O--){var R=E[O]|0;P&&R==k||(T[O]=R,P=!1)}this.g=T}var s={};function l(E){return-128<=E&&128>E?o(E,function(k){return new a([k|0],0>k?-1:0)}):new a([E|0],0>E?-1:0)}function c(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return v(c(-E));for(var k=[],T=1,P=0;E>=T;P++)k[P]=E/T|0,T*=4294967296;return new a(k,0)}function d(E,k){if(E.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(E.charAt(0)=="-")return v(d(E.substring(1),k));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(k,8)),P=p,O=0;O<E.length;O+=8){var R=Math.min(8,E.length-O),N=parseInt(E.substring(O,O+R),k);8>R?(R=c(Math.pow(k,R)),P=P.j(R).add(c(N))):(P=P.j(T),P=P.add(c(N)))}return P}var p=l(0),f=l(1),h=l(16777216);e=a.prototype,e.m=function(){if(m(this))return-v(this).m();for(var E=0,k=1,T=0;T<this.g.length;T++){var P=this.i(T);E+=(0<=P?P:4294967296+P)*k,k*=4294967296}return E},e.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(g(this))return"0";if(m(this))return"-"+v(this).toString(E);for(var k=c(Math.pow(E,6)),T=this,P="";;){var O=A(T,k).g;T=w(T,O.j(k));var R=((0<T.g.length?T.g[0]:T.h)>>>0).toString(E);if(T=O,g(T))return R+P;for(;6>R.length;)R="0"+R;P=R+P}},e.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function g(E){if(E.h!=0)return!1;for(var k=0;k<E.g.length;k++)if(E.g[k]!=0)return!1;return!0}function m(E){return E.h==-1}e.l=function(E){return E=w(this,E),m(E)?-1:g(E)?0:1};function v(E){for(var k=E.g.length,T=[],P=0;P<k;P++)T[P]=~E.g[P];return new a(T,~E.h).add(f)}e.abs=function(){return m(this)?v(this):this},e.add=function(E){for(var k=Math.max(this.g.length,E.g.length),T=[],P=0,O=0;O<=k;O++){var R=P+(this.i(O)&65535)+(E.i(O)&65535),N=(R>>>16)+(this.i(O)>>>16)+(E.i(O)>>>16);P=N>>>16,R&=65535,N&=65535,T[O]=N<<16|R}return new a(T,T[T.length-1]&-2147483648?-1:0)};function w(E,k){return E.add(v(k))}e.j=function(E){if(g(this)||g(E))return p;if(m(this))return m(E)?v(this).j(v(E)):v(v(this).j(E));if(m(E))return v(this.j(v(E)));if(0>this.l(h)&&0>E.l(h))return c(this.m()*E.m());for(var k=this.g.length+E.g.length,T=[],P=0;P<2*k;P++)T[P]=0;for(P=0;P<this.g.length;P++)for(var O=0;O<E.g.length;O++){var R=this.i(P)>>>16,N=this.i(P)&65535,L=E.i(O)>>>16,B=E.i(O)&65535;T[2*P+2*O]+=N*B,S(T,2*P+2*O),T[2*P+2*O+1]+=R*B,S(T,2*P+2*O+1),T[2*P+2*O+1]+=N*L,S(T,2*P+2*O+1),T[2*P+2*O+2]+=R*L,S(T,2*P+2*O+2)}for(P=0;P<k;P++)T[P]=T[2*P+1]<<16|T[2*P];for(P=k;P<2*k;P++)T[P]=0;return new a(T,0)};function S(E,k){for(;(E[k]&65535)!=E[k];)E[k+1]+=E[k]>>>16,E[k]&=65535,k++}function C(E,k){this.g=E,this.h=k}function A(E,k){if(g(k))throw Error("division by zero");if(g(E))return new C(p,p);if(m(E))return k=A(v(E),k),new C(v(k.g),v(k.h));if(m(k))return k=A(E,v(k)),new C(v(k.g),k.h);if(30<E.g.length){if(m(E)||m(k))throw Error("slowDivide_ only works with positive integers.");for(var T=f,P=k;0>=P.l(E);)T=_(T),P=_(P);var O=I(T,1),R=I(P,1);for(P=I(P,2),T=I(T,2);!g(P);){var N=R.add(P);0>=N.l(E)&&(O=O.add(T),R=N),P=I(P,1),T=I(T,1)}return k=w(E,O.j(k)),new C(O,k)}for(O=p;0<=E.l(k);){for(T=Math.max(1,Math.floor(E.m()/k.m())),P=Math.ceil(Math.log(T)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),R=c(T),N=R.j(k);m(N)||0<N.l(E);)T-=P,R=c(T),N=R.j(k);g(R)&&(R=f),O=O.add(R),E=w(E,N)}return new C(O,E)}e.A=function(E){return A(this,E).h},e.and=function(E){for(var k=Math.max(this.g.length,E.g.length),T=[],P=0;P<k;P++)T[P]=this.i(P)&E.i(P);return new a(T,this.h&E.h)},e.or=function(E){for(var k=Math.max(this.g.length,E.g.length),T=[],P=0;P<k;P++)T[P]=this.i(P)|E.i(P);return new a(T,this.h|E.h)},e.xor=function(E){for(var k=Math.max(this.g.length,E.g.length),T=[],P=0;P<k;P++)T[P]=this.i(P)^E.i(P);return new a(T,this.h^E.h)};function _(E){for(var k=E.g.length+1,T=[],P=0;P<k;P++)T[P]=E.i(P)<<1|E.i(P-1)>>>31;return new a(T,E.h)}function I(E,k){var T=k>>5;k%=32;for(var P=E.g.length-T,O=[],R=0;R<P;R++)O[R]=0<k?E.i(R+T)>>>k|E.i(R+T+1)<<32-k:E.i(R+T);return new a(O,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Y8=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=d,rs=a}).apply(typeof Uk<"u"?Uk:typeof self<"u"?self:typeof window<"u"?window:{});var bf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var K8,md,X8,jg,l2,Q8,J8,Z8;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(x,M,$){return x==Array.prototype||x==Object.prototype||(x[M]=$.value),x};function n(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof bf=="object"&&bf];for(var M=0;M<x.length;++M){var $=x[M];if($&&$.Math==Math)return $}throw Error("Cannot find global object")}var r=n(this);function i(x,M){if(M)e:{var $=r;x=x.split(".");for(var F=0;F<x.length-1;F++){var Y=x[F];if(!(Y in $))break e;$=$[Y]}x=x[x.length-1],F=$[x],M=M(F),M!=F&&M!=null&&t($,x,{configurable:!0,writable:!0,value:M})}}function o(x,M){x instanceof String&&(x+="");var $=0,F=!1,Y={next:function(){if(!F&&$<x.length){var Z=$++;return{value:M(Z,x[Z]),done:!1}}return F=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}i("Array.prototype.values",function(x){return x||function(){return o(this,function(M,$){return $})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},s=this||self;function l(x){var M=typeof x;return M=M!="object"?M:x?Array.isArray(x)?"array":M:"null",M=="array"||M=="object"&&typeof x.length=="number"}function c(x){var M=typeof x;return M=="object"&&x!=null||M=="function"}function d(x,M,$){return x.call.apply(x.bind,arguments)}function p(x,M,$){if(!x)throw Error();if(2<arguments.length){var F=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,F),x.apply(M,Y)}}return function(){return x.apply(M,arguments)}}function f(x,M,$){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,f.apply(null,arguments)}function h(x,M){var $=Array.prototype.slice.call(arguments,1);return function(){var F=$.slice();return F.push.apply(F,arguments),x.apply(this,F)}}function g(x,M){function $(){}$.prototype=M.prototype,x.aa=M.prototype,x.prototype=new $,x.prototype.constructor=x,x.Qb=function(F,Y,Z){for(var _e=Array(arguments.length-2),Ut=2;Ut<arguments.length;Ut++)_e[Ut-2]=arguments[Ut];return M.prototype[Y].apply(F,_e)}}function m(x){const M=x.length;if(0<M){const $=Array(M);for(let F=0;F<M;F++)$[F]=x[F];return $}return[]}function v(x,M){for(let $=1;$<arguments.length;$++){const F=arguments[$];if(l(F)){const Y=x.length||0,Z=F.length||0;x.length=Y+Z;for(let _e=0;_e<Z;_e++)x[Y+_e]=F[_e]}else x.push(F)}}class w{constructor(M,$){this.i=M,this.j=$,this.h=0,this.g=null}get(){let M;return 0<this.h?(this.h--,M=this.g,this.g=M.next,M.next=null):M=this.i(),M}}function S(x){return/^[\s\xa0]*$/.test(x)}function C(){var x=s.navigator;return x&&(x=x.userAgent)?x:""}function A(x){return A[" "](x),x}A[" "]=function(){};var _=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function I(x,M,$){for(const F in x)M.call($,x[F],F,x)}function E(x,M){for(const $ in x)M.call(void 0,x[$],$,x)}function k(x){const M={};for(const $ in x)M[$]=x[$];return M}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(x,M){let $,F;for(let Y=1;Y<arguments.length;Y++){F=arguments[Y];for($ in F)x[$]=F[$];for(let Z=0;Z<T.length;Z++)$=T[Z],Object.prototype.hasOwnProperty.call(F,$)&&(x[$]=F[$])}}function O(x){var M=1;x=x.split(":");const $=[];for(;0<M&&x.length;)$.push(x.shift()),M--;return x.length&&$.push(x.join(":")),$}function R(x){s.setTimeout(()=>{throw x},0)}function N(){var x=H;let M=null;return x.g&&(M=x.g,x.g=x.g.next,x.g||(x.h=null),M.next=null),M}class L{constructor(){this.h=this.g=null}add(M,$){const F=B.get();F.set(M,$),this.h?this.h.next=F:this.g=F,this.h=F}}var B=new w(()=>new V,x=>x.reset());class V{constructor(){this.next=this.g=this.h=null}set(M,$){this.h=M,this.g=$,this.next=null}reset(){this.next=this.g=this.h=null}}let j,z=!1,H=new L,J=()=>{const x=s.Promise.resolve(void 0);j=()=>{x.then(de)}};var de=()=>{for(var x;x=N();){try{x.h.call(x.g)}catch($){R($)}var M=B;M.j(x),100>M.h&&(M.h++,x.next=M.g,M.g=x)}z=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ce(x,M){this.type=x,this.g=this.target=M,this.defaultPrevented=!1}Ce.prototype.h=function(){this.defaultPrevented=!0};var te=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var x=!1,M=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const $=()=>{};s.addEventListener("test",$,M),s.removeEventListener("test",$,M)}catch{}return x}();function G(x,M){if(Ce.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x){var $=this.type=x.type,F=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;if(this.target=x.target||x.srcElement,this.g=M,M=x.relatedTarget){if(_){e:{try{A(M.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(M=null)}}else $=="mouseover"?M=x.fromElement:$=="mouseout"&&(M=x.toElement);this.relatedTarget=M,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=typeof x.pointerType=="string"?x.pointerType:K[x.pointerType]||"",this.state=x.state,this.i=x,x.defaultPrevented&&G.aa.h.call(this)}}g(G,Ce);var K={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var me="closure_listenable_"+(1e6*Math.random()|0),ye=0;function ee(x,M,$,F,Y){this.listener=x,this.proxy=null,this.src=M,this.type=$,this.capture=!!F,this.ha=Y,this.key=++ye,this.da=this.fa=!1}function oe(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function he(x){this.src=x,this.g={},this.h=0}he.prototype.add=function(x,M,$,F,Y){var Z=x.toString();x=this.g[Z],x||(x=this.g[Z]=[],this.h++);var _e=W(x,M,F,Y);return-1<_e?(M=x[_e],$||(M.fa=!1)):(M=new ee(M,this.src,Z,!!F,Y),M.fa=$,x.push(M)),M};function we(x,M){var $=M.type;if($ in x.g){var F=x.g[$],Y=Array.prototype.indexOf.call(F,M,void 0),Z;(Z=0<=Y)&&Array.prototype.splice.call(F,Y,1),Z&&(oe(M),x.g[$].length==0&&(delete x.g[$],x.h--))}}function W(x,M,$,F){for(var Y=0;Y<x.length;++Y){var Z=x[Y];if(!Z.da&&Z.listener==M&&Z.capture==!!$&&Z.ha==F)return Y}return-1}var ge="closure_lm_"+(1e6*Math.random()|0),fe={};function ve(x,M,$,F,Y){if(Array.isArray(M)){for(var Z=0;Z<M.length;Z++)ve(x,M[Z],$,F,Y);return null}return $=ln($),x&&x[me]?x.K(M,$,c(F)?!!F.capture:!1,Y):ce(x,M,$,!1,F,Y)}function ce(x,M,$,F,Y,Z){if(!M)throw Error("Invalid event type");var _e=c(Y)?!!Y.capture:!!Y,Ut=jt(x);if(Ut||(x[ge]=Ut=new he(x)),$=Ut.add(M,$,F,_e,Z),$.proxy)return $;if(F=De(),$.proxy=F,F.src=x,F.listener=$,x.addEventListener)te||(Y=_e),Y===void 0&&(Y=!1),x.addEventListener(M.toString(),F,Y);else if(x.attachEvent)x.attachEvent(et(M.toString()),F);else if(x.addListener&&x.removeListener)x.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return $}function De(){function x($){return M.call(x.src,x.listener,$)}const M=pt;return x}function He(x,M,$,F,Y){if(Array.isArray(M))for(var Z=0;Z<M.length;Z++)He(x,M[Z],$,F,Y);else F=c(F)?!!F.capture:!!F,$=ln($),x&&x[me]?(x=x.i,M=String(M).toString(),M in x.g&&(Z=x.g[M],$=W(Z,$,F,Y),-1<$&&(oe(Z[$]),Array.prototype.splice.call(Z,$,1),Z.length==0&&(delete x.g[M],x.h--)))):x&&(x=jt(x))&&(M=x.g[M.toString()],x=-1,M&&(x=W(M,$,F,Y)),($=-1<x?M[x]:null)&&Ue($))}function Ue(x){if(typeof x!="number"&&x&&!x.da){var M=x.src;if(M&&M[me])we(M.i,x);else{var $=x.type,F=x.proxy;M.removeEventListener?M.removeEventListener($,F,x.capture):M.detachEvent?M.detachEvent(et($),F):M.addListener&&M.removeListener&&M.removeListener(F),($=jt(M))?(we($,x),$.h==0&&($.src=null,M[ge]=null)):oe(x)}}}function et(x){return x in fe?fe[x]:fe[x]="on"+x}function pt(x,M){if(x.da)x=!0;else{M=new G(M,this);var $=x.listener,F=x.ha||x.src;x.fa&&Ue(x),x=$.call(F,M)}return x}function jt(x){return x=x[ge],x instanceof he?x:null}var Rt="__closure_events_fn_"+(1e9*Math.random()>>>0);function ln(x){return typeof x=="function"?x:(x[Rt]||(x[Rt]=function(M){return x.handleEvent(M)}),x[Rt])}function gt(){ae.call(this),this.i=new he(this),this.M=this,this.F=null}g(gt,ae),gt.prototype[me]=!0,gt.prototype.removeEventListener=function(x,M,$,F){He(this,x,M,$,F)};function wt(x,M){var $,F=x.F;if(F)for($=[];F;F=F.F)$.push(F);if(x=x.M,F=M.type||M,typeof M=="string")M=new Ce(M,x);else if(M instanceof Ce)M.target=M.target||x;else{var Y=M;M=new Ce(F,x),P(M,Y)}if(Y=!0,$)for(var Z=$.length-1;0<=Z;Z--){var _e=M.g=$[Z];Y=at(_e,F,!0,M)&&Y}if(_e=M.g=x,Y=at(_e,F,!0,M)&&Y,Y=at(_e,F,!1,M)&&Y,$)for(Z=0;Z<$.length;Z++)_e=M.g=$[Z],Y=at(_e,F,!1,M)&&Y}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var x=this.i,M;for(M in x.g){for(var $=x.g[M],F=0;F<$.length;F++)oe($[F]);delete x.g[M],x.h--}}this.F=null},gt.prototype.K=function(x,M,$,F){return this.i.add(String(x),M,!1,$,F)},gt.prototype.L=function(x,M,$,F){return this.i.add(String(x),M,!0,$,F)};function at(x,M,$,F){if(M=x.i.g[String(M)],!M)return!0;M=M.concat();for(var Y=!0,Z=0;Z<M.length;++Z){var _e=M[Z];if(_e&&!_e.da&&_e.capture==$){var Ut=_e.listener,Hn=_e.ha||_e.src;_e.fa&&we(x.i,_e),Y=Ut.call(Hn,F)!==!1&&Y}}return Y&&!F.defaultPrevented}function _t(x,M,$){if(typeof x=="function")$&&(x=f(x,$));else if(x&&typeof x.handleEvent=="function")x=f(x.handleEvent,x);else throw Error("Invalid listener argument");return 2147483647<Number(M)?-1:s.setTimeout(x,M||0)}function Ht(x){x.g=_t(()=>{x.g=null,x.i&&(x.i=!1,Ht(x))},x.l);const M=x.h;x.h=null,x.m.apply(null,M)}class q extends ae{constructor(M,$){super(),this.m=M,this.l=$,this.h=null,this.i=!1,this.g=null}j(M){this.h=arguments,this.g?this.i=!0:Ht(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function X(x){ae.call(this),this.h=x,this.g={}}g(X,ae);var ie=[];function ne(x){I(x.g,function(M,$){this.g.hasOwnProperty($)&&Ue(M)},x),x.g={}}X.prototype.N=function(){X.aa.N.call(this),ne(this)},X.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Te=s.JSON.stringify,Me=s.JSON.parse,st=class{stringify(x){return s.JSON.stringify(x,void 0)}parse(x){return s.JSON.parse(x,void 0)}};function lt(){}lt.prototype.h=null;function Q(x){return x.h||(x.h=x.i())}function pe(){}var ke={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Be(){Ce.call(this,"d")}g(Be,Ce);function Pe(){Ce.call(this,"c")}g(Pe,Ce);var nt={},ht=null;function Mt(){return ht=ht||new gt}nt.La="serverreachability";function xn(x){Ce.call(this,nt.La,x)}g(xn,Ce);function cn(x){const M=Mt();wt(M,new xn(M))}nt.STAT_EVENT="statevent";function Kr(x,M){Ce.call(this,nt.STAT_EVENT,x),this.stat=M}g(Kr,Ce);function Yt(x){const M=Mt();wt(M,new Kr(M,x))}nt.Ma="timingevent";function wr(x,M){Ce.call(this,nt.Ma,x),this.size=M}g(wr,Ce);function ro(x,M){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){x()},M)}function da(){this.g=!0}da.prototype.xa=function(){this.g=!1};function Bh(x,M,$,F,Y,Z){x.info(function(){if(x.g)if(Z)for(var _e="",Ut=Z.split("&"),Hn=0;Hn<Ut.length;Hn++){var It=Ut[Hn].split("=");if(1<It.length){var ar=It[0];It=It[1];var sr=ar.split("_");_e=2<=sr.length&&sr[1]=="type"?_e+(ar+"="+It+"&"):_e+(ar+"=redacted&")}}else _e=null;else _e=Z;return"XMLHTTP REQ ("+F+") [attempt "+Y+"]: "+M+`
`+$+`
`+_e})}function zh(x,M,$,F,Y,Z,_e){x.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+Y+"]: "+M+`
`+$+`
`+Z+" "+_e})}function re(x,M,$,F){x.info(function(){return"XMLHTTP TEXT ("+M+"): "+$e(x,$)+(F?" "+F:"")})}function Ee(x,M){x.info(function(){return"TIMEOUT: "+M})}da.prototype.info=function(){};function $e(x,M){if(!x.g)return M;if(!M)return null;try{var $=JSON.parse(M);if($){for(x=0;x<$.length;x++)if(Array.isArray($[x])){var F=$[x];if(!(2>F.length)){var Y=F[1];if(Array.isArray(Y)&&!(1>Y.length)){var Z=Y[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var _e=1;_e<Y.length;_e++)Y[_e]=""}}}}return Te($)}catch{return M}}var Je={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ve={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},St;function ft(){}g(ft,lt),ft.prototype.g=function(){return new XMLHttpRequest},ft.prototype.i=function(){return{}},St=new ft;function Tt(x,M,$,F){this.j=x,this.i=M,this.l=$,this.R=F||1,this.U=new X(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new On}function On(){this.i=null,this.g="",this.h=!1}var Wn={},io={};function oo(x,M,$){x.L=1,x.v=Wh(Do(M)),x.m=$,x.P=!0,pa(x,null)}function pa(x,M){x.F=Date.now(),jh(x),x.A=Do(x.v);var $=x.A,F=x.R;Array.isArray(F)||(F=[String(F)]),g_($.i,"t",F),x.C=0,$=x.j.J,x.h=new On,x.g=N_(x.j,$?M:null,!x.m),0<x.O&&(x.M=new q(f(x.Y,x,x.g),x.O)),M=x.U,$=x.g,F=x.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(ie[0]=Y.toString()),Y=ie);for(var Z=0;Z<Y.length;Z++){var _e=ve($,Y[Z],F||M.handleEvent,!1,M.h||M);if(!_e)break;M.g[_e.key]=_e}M=x.H?k(x.H):{},x.m?(x.u||(x.u="POST"),M["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.A,x.u,x.m,M)):(x.u="GET",x.g.ea(x.A,x.u,null,M)),cn(),Bh(x.i,x.u,x.A,x.l,x.R,x.m)}Tt.prototype.ca=function(x){x=x.target;const M=this.M;M&&Ro(x)==3?M.j():this.Y(x)},Tt.prototype.Y=function(x){try{if(x==this.g)e:{const sr=Ro(this.g);var M=this.g.Ba();const Pl=this.g.Z();if(!(3>sr)&&(sr!=3||this.g&&(this.h.h||this.g.oa()||S_(this.g)))){this.J||sr!=4||M==7||(M==8||0>=Pl?cn(3):cn(2)),rx(this);var $=this.g.Z();this.X=$;t:if(Vh(this)){var F=S_(this.g);x="";var Y=F.length,Z=Ro(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ms(this),bu(this);var _e="";break t}this.h.i=new s.TextDecoder}for(M=0;M<Y;M++)this.h.h=!0,x+=this.h.i.decode(F[M],{stream:!(Z&&M==Y-1)});F.length=0,this.h.g+=x,this.C=0,_e=this.h.g}else _e=this.g.oa();if(this.o=$==200,zh(this.i,this.u,this.A,this.l,this.R,sr,$),this.o){if(this.T&&!this.K){t:{if(this.g){var Ut,Hn=this.g;if((Ut=Hn.g?Hn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(Ut)){var It=Ut;break t}}It=null}if($=It)re(this.i,this.l,$,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ix(this,$);else{this.o=!1,this.s=3,Yt(12),Ms(this),bu(this);break e}}if(this.P){$=!0;let zi;for(;!this.J&&this.C<_e.length;)if(zi=Y9(this,_e),zi==io){sr==4&&(this.s=4,Yt(14),$=!1),re(this.i,this.l,null,"[Incomplete Response]");break}else if(zi==Wn){this.s=4,Yt(15),re(this.i,this.l,_e,"[Invalid Chunk]"),$=!1;break}else re(this.i,this.l,zi,null),ix(this,zi);if(Vh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),sr!=4||_e.length!=0||this.h.h||(this.s=1,Yt(16),$=!1),this.o=this.o&&$,!$)re(this.i,this.l,_e,"[Invalid Chunked Response]"),Ms(this),bu(this);else if(0<_e.length&&!this.W){this.W=!0;var ar=this.j;ar.g==this&&ar.ba&&!ar.M&&(ar.j.info("Great, no buffering proxy detected. Bytes received: "+_e.length),ux(ar),ar.M=!0,Yt(11))}}else re(this.i,this.l,_e,null),ix(this,_e);sr==4&&Ms(this),this.o&&!this.J&&(sr==4?A_(this.j,this):(this.o=!1,jh(this)))}else dF(this.g),$==400&&0<_e.indexOf("Unknown SID")?(this.s=3,Yt(12)):(this.s=0,Yt(13)),Ms(this),bu(this)}}}catch{}finally{}};function Vh(x){return x.g?x.u=="GET"&&x.L!=2&&x.j.Ca:!1}function Y9(x,M){var $=x.C,F=M.indexOf(`
`,$);return F==-1?io:($=Number(M.substring($,F)),isNaN($)?Wn:(F+=1,F+$>M.length?io:(M=M.slice(F,F+$),x.C=F+$,M)))}Tt.prototype.cancel=function(){this.J=!0,Ms(this)};function jh(x){x.S=Date.now()+x.I,r_(x,x.I)}function r_(x,M){if(x.B!=null)throw Error("WatchDog timer not null");x.B=ro(f(x.ba,x),M)}function rx(x){x.B&&(s.clearTimeout(x.B),x.B=null)}Tt.prototype.ba=function(){this.B=null;const x=Date.now();0<=x-this.S?(Ee(this.i,this.A),this.L!=2&&(cn(),Yt(17)),Ms(this),this.s=2,bu(this)):r_(this,this.S-x)};function bu(x){x.j.G==0||x.J||A_(x.j,x)}function Ms(x){rx(x);var M=x.M;M&&typeof M.ma=="function"&&M.ma(),x.M=null,ne(x.U),x.g&&(M=x.g,x.g=null,M.abort(),M.ma())}function ix(x,M){try{var $=x.j;if($.G!=0&&($.g==x||ox($.h,x))){if(!x.K&&ox($.h,x)&&$.G==3){try{var F=$.Da.g.parse(M)}catch{F=null}if(Array.isArray(F)&&F.length==3){var Y=F;if(Y[0]==0){e:if(!$.u){if($.g)if($.g.F+3e3<x.F)Qh($),Kh($);else break e;cx($),Yt(18)}}else $.za=Y[1],0<$.za-$.T&&37500>Y[2]&&$.F&&$.v==0&&!$.C&&($.C=ro(f($.Za,$),6e3));if(1>=a_($.h)&&$.ca){try{$.ca()}catch{}$.ca=void 0}}else $s($,11)}else if((x.K||$.g==x)&&Qh($),!S(M))for(Y=$.Da.g.parse(M),M=0;M<Y.length;M++){let It=Y[M];if($.T=It[0],It=It[1],$.G==2)if(It[0]=="c"){$.K=It[1],$.ia=It[2];const ar=It[3];ar!=null&&($.la=ar,$.j.info("VER="+$.la));const sr=It[4];sr!=null&&($.Aa=sr,$.j.info("SVER="+$.Aa));const Pl=It[5];Pl!=null&&typeof Pl=="number"&&0<Pl&&(F=1.5*Pl,$.L=F,$.j.info("backChannelRequestTimeoutMs_="+F)),F=$;const zi=x.g;if(zi){const Zh=zi.g?zi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zh){var Z=F.h;Z.g||Zh.indexOf("spdy")==-1&&Zh.indexOf("quic")==-1&&Zh.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(ax(Z,Z.h),Z.h=null))}if(F.D){const dx=zi.g?zi.g.getResponseHeader("X-HTTP-Session-Id"):null;dx&&(F.ya=dx,Kt(F.I,F.D,dx))}}$.G=3,$.l&&$.l.ua(),$.ba&&($.R=Date.now()-x.F,$.j.info("Handshake RTT: "+$.R+"ms")),F=$;var _e=x;if(F.qa=R_(F,F.J?F.ia:null,F.W),_e.K){s_(F.h,_e);var Ut=_e,Hn=F.L;Hn&&(Ut.I=Hn),Ut.B&&(rx(Ut),jh(Ut)),F.g=_e}else T_(F);0<$.i.length&&Xh($)}else It[0]!="stop"&&It[0]!="close"||$s($,7);else $.G==3&&(It[0]=="stop"||It[0]=="close"?It[0]=="stop"?$s($,7):lx($):It[0]!="noop"&&$.l&&$.l.ta(It),$.v=0)}}cn(4)}catch{}}var K9=class{constructor(x,M){this.g=x,this.map=M}};function i_(x){this.l=x||10,s.PerformanceNavigationTiming?(x=s.performance.getEntriesByType("navigation"),x=0<x.length&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function o_(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function a_(x){return x.h?1:x.g?x.g.size:0}function ox(x,M){return x.h?x.h==M:x.g?x.g.has(M):!1}function ax(x,M){x.g?x.g.add(M):x.h=M}function s_(x,M){x.h&&x.h==M?x.h=null:x.g&&x.g.has(M)&&x.g.delete(M)}i_.prototype.cancel=function(){if(this.i=l_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function l_(x){if(x.h!=null)return x.i.concat(x.h.D);if(x.g!=null&&x.g.size!==0){let M=x.i;for(const $ of x.g.values())M=M.concat($.D);return M}return m(x.i)}function X9(x){if(x.V&&typeof x.V=="function")return x.V();if(typeof Map<"u"&&x instanceof Map||typeof Set<"u"&&x instanceof Set)return Array.from(x.values());if(typeof x=="string")return x.split("");if(l(x)){for(var M=[],$=x.length,F=0;F<$;F++)M.push(x[F]);return M}M=[],$=0;for(F in x)M[$++]=x[F];return M}function Q9(x){if(x.na&&typeof x.na=="function")return x.na();if(!x.V||typeof x.V!="function"){if(typeof Map<"u"&&x instanceof Map)return Array.from(x.keys());if(!(typeof Set<"u"&&x instanceof Set)){if(l(x)||typeof x=="string"){var M=[];x=x.length;for(var $=0;$<x;$++)M.push($);return M}M=[],$=0;for(const F in x)M[$++]=F;return M}}}function c_(x,M){if(x.forEach&&typeof x.forEach=="function")x.forEach(M,void 0);else if(l(x)||typeof x=="string")Array.prototype.forEach.call(x,M,void 0);else for(var $=Q9(x),F=X9(x),Y=F.length,Z=0;Z<Y;Z++)M.call(void 0,F[Z],$&&$[Z],x)}var u_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function J9(x,M){if(x){x=x.split("&");for(var $=0;$<x.length;$++){var F=x[$].indexOf("="),Y=null;if(0<=F){var Z=x[$].substring(0,F);Y=x[$].substring(F+1)}else Z=x[$];M(Z,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Os(x){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,x instanceof Os){this.h=x.h,Uh(this,x.j),this.o=x.o,this.g=x.g,qh(this,x.s),this.l=x.l;var M=x.i,$=new Cu;$.i=M.i,M.g&&($.g=new Map(M.g),$.h=M.h),d_(this,$),this.m=x.m}else x&&(M=String(x).match(u_))?(this.h=!1,Uh(this,M[1]||"",!0),this.o=wu(M[2]||""),this.g=wu(M[3]||"",!0),qh(this,M[4]),this.l=wu(M[5]||"",!0),d_(this,M[6]||"",!0),this.m=wu(M[7]||"")):(this.h=!1,this.i=new Cu(null,this.h))}Os.prototype.toString=function(){var x=[],M=this.j;M&&x.push(Su(M,p_,!0),":");var $=this.g;return($||M=="file")&&(x.push("//"),(M=this.o)&&x.push(Su(M,p_,!0),"@"),x.push(encodeURIComponent(String($)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),$=this.s,$!=null&&x.push(":",String($))),($=this.l)&&(this.g&&$.charAt(0)!="/"&&x.push("/"),x.push(Su($,$.charAt(0)=="/"?tF:eF,!0))),($=this.i.toString())&&x.push("?",$),($=this.m)&&x.push("#",Su($,rF)),x.join("")};function Do(x){return new Os(x)}function Uh(x,M,$){x.j=$?wu(M,!0):M,x.j&&(x.j=x.j.replace(/:$/,""))}function qh(x,M){if(M){if(M=Number(M),isNaN(M)||0>M)throw Error("Bad port number "+M);x.s=M}else x.s=null}function d_(x,M,$){M instanceof Cu?(x.i=M,iF(x.i,x.h)):($||(M=Su(M,nF)),x.i=new Cu(M,x.h))}function Kt(x,M,$){x.i.set(M,$)}function Wh(x){return Kt(x,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),x}function wu(x,M){return x?M?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function Su(x,M,$){return typeof x=="string"?(x=encodeURI(x).replace(M,Z9),$&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function Z9(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var p_=/[#\/\?@]/g,eF=/[#\?:]/g,tF=/[#\?]/g,nF=/[#\?@]/g,rF=/#/g;function Cu(x,M){this.h=this.g=null,this.i=x||null,this.j=!!M}function ha(x){x.g||(x.g=new Map,x.h=0,x.i&&J9(x.i,function(M,$){x.add(decodeURIComponent(M.replace(/\+/g," ")),$)}))}e=Cu.prototype,e.add=function(x,M){ha(this),this.i=null,x=Il(this,x);var $=this.g.get(x);return $||this.g.set(x,$=[]),$.push(M),this.h+=1,this};function h_(x,M){ha(x),M=Il(x,M),x.g.has(M)&&(x.i=null,x.h-=x.g.get(M).length,x.g.delete(M))}function f_(x,M){return ha(x),M=Il(x,M),x.g.has(M)}e.forEach=function(x,M){ha(this),this.g.forEach(function($,F){$.forEach(function(Y){x.call(M,Y,F,this)},this)},this)},e.na=function(){ha(this);const x=Array.from(this.g.values()),M=Array.from(this.g.keys()),$=[];for(let F=0;F<M.length;F++){const Y=x[F];for(let Z=0;Z<Y.length;Z++)$.push(M[F])}return $},e.V=function(x){ha(this);let M=[];if(typeof x=="string")f_(this,x)&&(M=M.concat(this.g.get(Il(this,x))));else{x=Array.from(this.g.values());for(let $=0;$<x.length;$++)M=M.concat(x[$])}return M},e.set=function(x,M){return ha(this),this.i=null,x=Il(this,x),f_(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[M]),this.h+=1,this},e.get=function(x,M){return x?(x=this.V(x),0<x.length?String(x[0]):M):M};function g_(x,M,$){h_(x,M),0<$.length&&(x.i=null,x.g.set(Il(x,M),m($)),x.h+=$.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],M=Array.from(this.g.keys());for(var $=0;$<M.length;$++){var F=M[$];const Z=encodeURIComponent(String(F)),_e=this.V(F);for(F=0;F<_e.length;F++){var Y=Z;_e[F]!==""&&(Y+="="+encodeURIComponent(String(_e[F]))),x.push(Y)}}return this.i=x.join("&")};function Il(x,M){return M=String(M),x.j&&(M=M.toLowerCase()),M}function iF(x,M){M&&!x.j&&(ha(x),x.i=null,x.g.forEach(function($,F){var Y=F.toLowerCase();F!=Y&&(h_(this,F),g_(this,Y,$))},x)),x.j=M}function oF(x,M){const $=new da;if(s.Image){const F=new Image;F.onload=h(fa,$,"TestLoadImage: loaded",!0,M,F),F.onerror=h(fa,$,"TestLoadImage: error",!1,M,F),F.onabort=h(fa,$,"TestLoadImage: abort",!1,M,F),F.ontimeout=h(fa,$,"TestLoadImage: timeout",!1,M,F),s.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=x}else M(!1)}function aF(x,M){const $=new da,F=new AbortController,Y=setTimeout(()=>{F.abort(),fa($,"TestPingServer: timeout",!1,M)},1e4);fetch(x,{signal:F.signal}).then(Z=>{clearTimeout(Y),Z.ok?fa($,"TestPingServer: ok",!0,M):fa($,"TestPingServer: server error",!1,M)}).catch(()=>{clearTimeout(Y),fa($,"TestPingServer: error",!1,M)})}function fa(x,M,$,F,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),F($)}catch{}}function sF(){this.g=new st}function lF(x,M,$){const F=$||"";try{c_(x,function(Y,Z){let _e=Y;c(Y)&&(_e=Te(Y)),M.push(F+Z+"="+encodeURIComponent(_e))})}catch(Y){throw M.push(F+"type="+encodeURIComponent("_badmap")),Y}}function Hh(x){this.l=x.Ub||null,this.j=x.eb||!1}g(Hh,lt),Hh.prototype.g=function(){return new Gh(this.l,this.j)},Hh.prototype.i=function(x){return function(){return x}}({});function Gh(x,M){gt.call(this),this.D=x,this.o=M,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(Gh,gt),e=Gh.prototype,e.open=function(x,M){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=x,this.A=M,this.readyState=1,ku(this)},e.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const M={headers:this.u,method:this.B,credentials:this.m,cache:void 0};x&&(M.body=x),(this.D||s).fetch(new Request(this.A,M)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_u(this)),this.readyState=0},e.Sa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,ku(this)),this.g&&(this.readyState=3,ku(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;m_(this)}else x.text().then(this.Ra.bind(this),this.ga.bind(this))};function m_(x){x.j.read().then(x.Pa.bind(x)).catch(x.ga.bind(x))}e.Pa=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var M=x.value?x.value:new Uint8Array(0);(M=this.v.decode(M,{stream:!x.done}))&&(this.response=this.responseText+=M)}x.done?_u(this):ku(this),this.readyState==3&&m_(this)}},e.Ra=function(x){this.g&&(this.response=this.responseText=x,_u(this))},e.Qa=function(x){this.g&&(this.response=x,_u(this))},e.ga=function(){this.g&&_u(this)};function _u(x){x.readyState=4,x.l=null,x.j=null,x.v=null,ku(x)}e.setRequestHeader=function(x,M){this.u.append(x,M)},e.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],M=this.h.entries();for(var $=M.next();!$.done;)$=$.value,x.push($[0]+": "+$[1]),$=M.next();return x.join(`\r
`)};function ku(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(Gh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function v_(x){let M="";return I(x,function($,F){M+=F,M+=":",M+=$,M+=`\r
`}),M}function sx(x,M,$){e:{for(F in $){var F=!1;break e}F=!0}F||($=v_($),typeof x=="string"?$!=null&&encodeURIComponent(String($)):Kt(x,M,$))}function un(x){gt.call(this),this.headers=new Map,this.o=x||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(un,gt);var cF=/^https?$/i,uF=["POST","PUT"];e=un.prototype,e.Ha=function(x){this.J=x},e.ea=function(x,M,$,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);M=M?M.toUpperCase():"GET",this.D=x,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():St.g(),this.v=this.o?Q(this.o):Q(St),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(M,String(x),!0),this.B=!1}catch(Z){x_(this,Z);return}if(x=$||"",$=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var Y in F)$.set(Y,F[Y]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const Z of F.keys())$.set(Z,F.get(Z));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from($.keys()).find(Z=>Z.toLowerCase()=="content-type"),Y=s.FormData&&x instanceof s.FormData,!(0<=Array.prototype.indexOf.call(uF,M,void 0))||F||Y||$.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,_e]of $)this.g.setRequestHeader(Z,_e);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{w_(this),this.u=!0,this.g.send(x),this.u=!1}catch(Z){x_(this,Z)}};function x_(x,M){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=M,x.m=5,y_(x),Yh(x)}function y_(x){x.A||(x.A=!0,wt(x,"complete"),wt(x,"error"))}e.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=x||7,wt(this,"complete"),wt(this,"abort"),Yh(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yh(this,!0)),un.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?b_(this):this.bb())},e.bb=function(){b_(this)};function b_(x){if(x.h&&typeof a<"u"&&(!x.v[1]||Ro(x)!=4||x.Z()!=2)){if(x.u&&Ro(x)==4)_t(x.Ea,0,x);else if(wt(x,"readystatechange"),Ro(x)==4){x.h=!1;try{const _e=x.Z();e:switch(_e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var M=!0;break e;default:M=!1}var $;if(!($=M)){var F;if(F=_e===0){var Y=String(x.D).match(u_)[1]||null;!Y&&s.self&&s.self.location&&(Y=s.self.location.protocol.slice(0,-1)),F=!cF.test(Y?Y.toLowerCase():"")}$=F}if($)wt(x,"complete"),wt(x,"success");else{x.m=6;try{var Z=2<Ro(x)?x.g.statusText:""}catch{Z=""}x.l=Z+" ["+x.Z()+"]",y_(x)}}finally{Yh(x)}}}}function Yh(x,M){if(x.g){w_(x);const $=x.g,F=x.v[0]?()=>{}:null;x.g=null,x.v=null,M||wt(x,"ready");try{$.onreadystatechange=F}catch{}}}function w_(x){x.I&&(s.clearTimeout(x.I),x.I=null)}e.isActive=function(){return!!this.g};function Ro(x){return x.g?x.g.readyState:0}e.Z=function(){try{return 2<Ro(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(x){if(this.g){var M=this.g.responseText;return x&&M.indexOf(x)==0&&(M=M.substring(x.length)),Me(M)}};function S_(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.H){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function dF(x){const M={};x=(x.g&&2<=Ro(x)&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<x.length;F++){if(S(x[F]))continue;var $=O(x[F]);const Y=$[0];if($=$[1],typeof $!="string")continue;$=$.trim();const Z=M[Y]||[];M[Y]=Z,Z.push($)}E(M,function(F){return F.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Eu(x,M,$){return $&&$.internalChannelParams&&$.internalChannelParams[x]||M}function C_(x){this.Aa=0,this.i=[],this.j=new da,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Eu("failFast",!1,x),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Eu("baseRetryDelayMs",5e3,x),this.cb=Eu("retryDelaySeedMs",1e4,x),this.Wa=Eu("forwardChannelMaxRetries",2,x),this.wa=Eu("forwardChannelRequestTimeoutMs",2e4,x),this.pa=x&&x.xmlHttpFactory||void 0,this.Xa=x&&x.Tb||void 0,this.Ca=x&&x.useFetchStreams||!1,this.L=void 0,this.J=x&&x.supportsCrossDomainXhr||!1,this.K="",this.h=new i_(x&&x.concurrentRequestLimit),this.Da=new sF,this.P=x&&x.fastHandshake||!1,this.O=x&&x.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=x&&x.Rb||!1,x&&x.xa&&this.j.xa(),x&&x.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&x&&x.detectBufferingProxy||!1,this.ja=void 0,x&&x.longPollingTimeout&&0<x.longPollingTimeout&&(this.ja=x.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=C_.prototype,e.la=8,e.G=1,e.connect=function(x,M,$,F){Yt(0),this.W=x,this.H=M||{},$&&F!==void 0&&(this.H.OSID=$,this.H.OAID=F),this.F=this.X,this.I=R_(this,null,this.W),Xh(this)};function lx(x){if(__(x),x.G==3){var M=x.U++,$=Do(x.I);if(Kt($,"SID",x.K),Kt($,"RID",M),Kt($,"TYPE","terminate"),Tu(x,$),M=new Tt(x,x.j,M),M.L=2,M.v=Wh(Do($)),$=!1,s.navigator&&s.navigator.sendBeacon)try{$=s.navigator.sendBeacon(M.v.toString(),"")}catch{}!$&&s.Image&&(new Image().src=M.v,$=!0),$||(M.g=N_(M.j,null),M.g.ea(M.v)),M.F=Date.now(),jh(M)}D_(x)}function Kh(x){x.g&&(ux(x),x.g.cancel(),x.g=null)}function __(x){Kh(x),x.u&&(s.clearTimeout(x.u),x.u=null),Qh(x),x.h.cancel(),x.s&&(typeof x.s=="number"&&s.clearTimeout(x.s),x.s=null)}function Xh(x){if(!o_(x.h)&&!x.s){x.s=!0;var M=x.Ga;j||J(),z||(j(),z=!0),H.add(M,x),x.B=0}}function pF(x,M){return a_(x.h)>=x.h.j-(x.s?1:0)?!1:x.s?(x.i=M.D.concat(x.i),!0):x.G==1||x.G==2||x.B>=(x.Va?0:x.Wa)?!1:(x.s=ro(f(x.Ga,x,M),P_(x,x.B)),x.B++,!0)}e.Ga=function(x){if(this.s)if(this.s=null,this.G==1){if(!x){this.U=Math.floor(1e5*Math.random()),x=this.U++;const Y=new Tt(this,this.j,x);let Z=this.o;if(this.S&&(Z?(Z=k(Z),P(Z,this.S)):Z=this.S),this.m!==null||this.O||(Y.H=Z,Z=null),this.P)e:{for(var M=0,$=0;$<this.i.length;$++){t:{var F=this.i[$];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(M+=F,4096<M){M=$;break e}if(M===4096||$===this.i.length-1){M=$+1;break e}}M=1e3}else M=1e3;M=E_(this,Y,M),$=Do(this.I),Kt($,"RID",x),Kt($,"CVER",22),this.D&&Kt($,"X-HTTP-Session-Id",this.D),Tu(this,$),Z&&(this.O?M="headers="+encodeURIComponent(String(v_(Z)))+"&"+M:this.m&&sx($,this.m,Z)),ax(this.h,Y),this.Ua&&Kt($,"TYPE","init"),this.P?(Kt($,"$req",M),Kt($,"SID","null"),Y.T=!0,oo(Y,$,null)):oo(Y,$,M),this.G=2}}else this.G==3&&(x?k_(this,x):this.i.length==0||o_(this.h)||k_(this))};function k_(x,M){var $;M?$=M.l:$=x.U++;const F=Do(x.I);Kt(F,"SID",x.K),Kt(F,"RID",$),Kt(F,"AID",x.T),Tu(x,F),x.m&&x.o&&sx(F,x.m,x.o),$=new Tt(x,x.j,$,x.B+1),x.m===null&&($.H=x.o),M&&(x.i=M.D.concat(x.i)),M=E_(x,$,1e3),$.I=Math.round(.5*x.wa)+Math.round(.5*x.wa*Math.random()),ax(x.h,$),oo($,F,M)}function Tu(x,M){x.H&&I(x.H,function($,F){Kt(M,F,$)}),x.l&&c_({},function($,F){Kt(M,F,$)})}function E_(x,M,$){$=Math.min(x.i.length,$);var F=x.l?f(x.l.Na,x.l,x):null;e:{var Y=x.i;let Z=-1;for(;;){const _e=["count="+$];Z==-1?0<$?(Z=Y[0].g,_e.push("ofs="+Z)):Z=0:_e.push("ofs="+Z);let Ut=!0;for(let Hn=0;Hn<$;Hn++){let It=Y[Hn].g;const ar=Y[Hn].map;if(It-=Z,0>It)Z=Math.max(0,Y[Hn].g-100),Ut=!1;else try{lF(ar,_e,"req"+It+"_")}catch{F&&F(ar)}}if(Ut){F=_e.join("&");break e}}}return x=x.i.splice(0,$),M.D=x,F}function T_(x){if(!x.g&&!x.u){x.Y=1;var M=x.Fa;j||J(),z||(j(),z=!0),H.add(M,x),x.v=0}}function cx(x){return x.g||x.u||3<=x.v?!1:(x.Y++,x.u=ro(f(x.Fa,x),P_(x,x.v)),x.v++,!0)}e.Fa=function(){if(this.u=null,I_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var x=2*this.R;this.j.info("BP detection timer enabled: "+x),this.A=ro(f(this.ab,this),x)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Yt(10),Kh(this),I_(this))};function ux(x){x.A!=null&&(s.clearTimeout(x.A),x.A=null)}function I_(x){x.g=new Tt(x,x.j,"rpc",x.Y),x.m===null&&(x.g.H=x.o),x.g.O=0;var M=Do(x.qa);Kt(M,"RID","rpc"),Kt(M,"SID",x.K),Kt(M,"AID",x.T),Kt(M,"CI",x.F?"0":"1"),!x.F&&x.ja&&Kt(M,"TO",x.ja),Kt(M,"TYPE","xmlhttp"),Tu(x,M),x.m&&x.o&&sx(M,x.m,x.o),x.L&&(x.g.I=x.L);var $=x.g;x=x.ia,$.L=1,$.v=Wh(Do(M)),$.m=null,$.P=!0,pa($,x)}e.Za=function(){this.C!=null&&(this.C=null,Kh(this),cx(this),Yt(19))};function Qh(x){x.C!=null&&(s.clearTimeout(x.C),x.C=null)}function A_(x,M){var $=null;if(x.g==M){Qh(x),ux(x),x.g=null;var F=2}else if(ox(x.h,M))$=M.D,s_(x.h,M),F=1;else return;if(x.G!=0){if(M.o)if(F==1){$=M.m?M.m.length:0,M=Date.now()-M.F;var Y=x.B;F=Mt(),wt(F,new wr(F,$)),Xh(x)}else T_(x);else if(Y=M.s,Y==3||Y==0&&0<M.X||!(F==1&&pF(x,M)||F==2&&cx(x)))switch($&&0<$.length&&(M=x.h,M.i=M.i.concat($)),Y){case 1:$s(x,5);break;case 4:$s(x,10);break;case 3:$s(x,6);break;default:$s(x,2)}}}function P_(x,M){let $=x.Ta+Math.floor(Math.random()*x.cb);return x.isActive()||($*=2),$*M}function $s(x,M){if(x.j.info("Error code "+M),M==2){var $=f(x.fb,x),F=x.Xa;const Y=!F;F=new Os(F||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Uh(F,"https"),Wh(F),Y?oF(F.toString(),$):aF(F.toString(),$)}else Yt(2);x.G=0,x.l&&x.l.sa(M),D_(x),__(x)}e.fb=function(x){x?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function D_(x){if(x.G=0,x.ka=[],x.l){const M=l_(x.h);(M.length!=0||x.i.length!=0)&&(v(x.ka,M),v(x.ka,x.i),x.h.i.length=0,m(x.i),x.i.length=0),x.l.ra()}}function R_(x,M,$){var F=$ instanceof Os?Do($):new Os($);if(F.g!="")M&&(F.g=M+"."+F.g),qh(F,F.s);else{var Y=s.location;F=Y.protocol,M=M?M+"."+Y.hostname:Y.hostname,Y=+Y.port;var Z=new Os(null);F&&Uh(Z,F),M&&(Z.g=M),Y&&qh(Z,Y),$&&(Z.l=$),F=Z}return $=x.D,M=x.ya,$&&M&&Kt(F,$,M),Kt(F,"VER",x.la),Tu(x,F),F}function N_(x,M,$){if(M&&!x.J)throw Error("Can't create secondary domain capable XhrIo object.");return M=x.Ca&&!x.pa?new un(new Hh({eb:$})):new un(x.pa),M.Ha(x.J),M}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function M_(){}e=M_.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Jh(){}Jh.prototype.g=function(x,M){return new Xr(x,M)};function Xr(x,M){gt.call(this),this.g=new C_(M),this.l=x,this.h=M&&M.messageUrlParams||null,x=M&&M.messageHeaders||null,M&&M.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=M&&M.initMessageHeaders||null,M&&M.messageContentType&&(x?x["X-WebChannel-Content-Type"]=M.messageContentType:x={"X-WebChannel-Content-Type":M.messageContentType}),M&&M.va&&(x?x["X-WebChannel-Client-Profile"]=M.va:x={"X-WebChannel-Client-Profile":M.va}),this.g.S=x,(x=M&&M.Sb)&&!S(x)&&(this.g.m=x),this.v=M&&M.supportsCrossDomainXhr||!1,this.u=M&&M.sendRawJson||!1,(M=M&&M.httpSessionIdParam)&&!S(M)&&(this.g.D=M,x=this.h,x!==null&&M in x&&(x=this.h,M in x&&delete x[M])),this.j=new Al(this)}g(Xr,gt),Xr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xr.prototype.close=function(){lx(this.g)},Xr.prototype.o=function(x){var M=this.g;if(typeof x=="string"){var $={};$.__data__=x,x=$}else this.u&&($={},$.__data__=Te(x),x=$);M.i.push(new K9(M.Ya++,x)),M.G==3&&Xh(M)},Xr.prototype.N=function(){this.g.l=null,delete this.j,lx(this.g),delete this.g,Xr.aa.N.call(this)};function O_(x){Be.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var M=x.__sm__;if(M){e:{for(const $ in M){x=$;break e}x=void 0}(this.i=x)&&(x=this.i,M=M!==null&&x in M?M[x]:void 0),this.data=M}else this.data=x}g(O_,Be);function $_(){Pe.call(this),this.status=1}g($_,Pe);function Al(x){this.g=x}g(Al,M_),Al.prototype.ua=function(){wt(this.g,"a")},Al.prototype.ta=function(x){wt(this.g,new O_(x))},Al.prototype.sa=function(x){wt(this.g,new $_)},Al.prototype.ra=function(){wt(this.g,"b")},Jh.prototype.createWebChannel=Jh.prototype.g,Xr.prototype.send=Xr.prototype.o,Xr.prototype.open=Xr.prototype.m,Xr.prototype.close=Xr.prototype.close,Z8=function(){return new Jh},J8=function(){return Mt()},Q8=nt,l2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Je.NO_ERROR=0,Je.TIMEOUT=8,Je.HTTP_ERROR=6,jg=Je,Ve.COMPLETE="complete",X8=Ve,pe.EventType=ke,ke.OPEN="a",ke.CLOSE="b",ke.ERROR="c",ke.MESSAGE="d",gt.prototype.listen=gt.prototype.K,md=pe,un.prototype.listenOnce=un.prototype.L,un.prototype.getLastError=un.prototype.Ka,un.prototype.getLastErrorCode=un.prototype.Ba,un.prototype.getStatus=un.prototype.Z,un.prototype.getResponseJson=un.prototype.Oa,un.prototype.getResponseText=un.prototype.oa,un.prototype.send=un.prototype.ea,un.prototype.setWithCredentials=un.prototype.Ha,K8=un}).apply(typeof bf<"u"?bf:typeof self<"u"?self:typeof window<"u"?window:{});const qk="@firebase/firestore",Wk="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}fr.UNAUTHENTICATED=new fr(null),fr.GOOGLE_CREDENTIALS=new fr("google-credentials-uid"),fr.FIRST_PARTY=new fr("first-party-uid"),fr.MOCK_USER=new fr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lu="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml=new C5("@firebase/firestore");function ql(){return ml.logLevel}function Re(e,...t){if(ml.logLevel<=vt.DEBUG){const n=t.map(O5);ml.debug(`Firestore (${lu}): ${e}`,...n)}}function ra(e,...t){if(ml.logLevel<=vt.ERROR){const n=t.map(O5);ml.error(`Firestore (${lu}): ${e}`,...n)}}function Oc(e,...t){if(ml.logLevel<=vt.WARN){const n=t.map(O5);ml.warn(`Firestore (${lu}): ${e}`,...n)}}function O5(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,eN(e,r,n)}function eN(e,t,n){let r=`FIRESTORE (${lu}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ra(r),new Error(r)}function Nt(e,t,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,e||eN(t,i,r)}function ot(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends to{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class FW{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(fr.UNAUTHENTICATED))}shutdown(){}}class BW{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class zW{constructor(t){this.t=t,this.currentUser=fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Nt(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let o=new Yo;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Yo,t.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=o;t.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},s=l=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>s(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?s(l):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Yo)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Nt(typeof r.accessToken=="string",31837,{l:r}),new tN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Nt(t===null||typeof t=="string",2055,{h:t}),new fr(t)}}class VW{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=fr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jW{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new VW(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Hk{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UW{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Br(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Nt(this.o===void 0,3512);const r=o=>{o.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,Re("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>r(o))};const i=o=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Hk(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Nt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Hk(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qW(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=qW(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=t.charAt(i[o]%62))}return r}}function dt(e,t){return e<t?-1:e>t?1:0}function c2(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return dt(r,i);{const o=nN(),a=WW(o.encode(Gk(e,n)),o.encode(Gk(t,n)));return a!==0?a:dt(r,i)}}n+=r>65535?2:1}return dt(e.length,t.length)}function Gk(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function WW(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return dt(e[n],t[n]);return dt(e.length,t.length)}function $c(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=-62135596800,Kk=1e6;class Nn{static now(){return Nn.fromMillis(Date.now())}static fromDate(t){return Nn.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*Kk);return new Nn(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Ae(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ae(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Yk)throw new Ae(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ae(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Kk}_compareTo(t){return this.seconds===t.seconds?dt(this.nanoseconds,t.nanoseconds):dt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-Yk;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{static fromTimestamp(t){return new rt(t)}static min(){return new rt(new Nn(0,0))}static max(){return new rt(new Nn(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk="__name__";class lo{constructor(t,n,r){n===void 0?n=0:n>t.length&&Qe(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&Qe(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return lo.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof lo?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const o=lo.compareSegments(t.get(i),n.get(i));if(o!==0)return o}return dt(t.length,n.length)}static compareSegments(t,n){const r=lo.isNumericId(t),i=lo.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?lo.extractNumericId(t).compare(lo.extractNumericId(n)):c2(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return rs.fromString(t.substring(4,t.length-2))}}class Qt extends lo{construct(t,n,r){return new Qt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Ae(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Qt(n)}static emptyPath(){return new Qt([])}}const HW=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class er extends lo{construct(t,n,r){return new er(t,n,r)}static isValidIdentifier(t){return HW.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),er.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Xk}static keyField(){return new er([Xk])}static fromServerFormat(t){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new Ae(le.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<t.length;){const s=t[i];if(s==="\\"){if(i+1===t.length)throw new Ae(le.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ae(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,i+=2}else s==="`"?(a=!a,i++):s!=="."||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new Ae(le.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new er(n)}static emptyPath(){return new er([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(t){this.path=t}static fromPath(t){return new Ge(Qt.fromString(t))}static fromName(t){return new Ge(Qt.fromString(t).popFirst(5))}static empty(){return new Ge(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Qt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Qt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ge(new Qt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp=-1;function GW(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=rt.fromTimestamp(r===1e9?new Nn(n+1,0):new Nn(n,r));return new ps(i,Ge.empty(),t)}function YW(e){return new ps(e.readTime,e.key,Sp)}class ps{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new ps(rt.min(),Ge.empty(),Sp)}static max(){return new ps(rt.max(),Ge.empty(),Sp)}}function KW(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Ge.comparator(e.documentKey,t.documentKey),n!==0?n:dt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XW="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QW{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cu(e){if(e.code!==le.FAILED_PRECONDITION||e.message!==XW)throw e;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Qe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new ue((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof ue?n:ue.resolve(n)}catch(n){return ue.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):ue.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):ue.reject(n)}static resolve(t){return new ue((n,r)=>{n(t)})}static reject(t){return new ue((n,r)=>{r(t)})}static waitFor(t){return new ue((n,r)=>{let i=0,o=0,a=!1;t.forEach(s=>{++i,s.next(()=>{++o,a&&o===i&&n()},l=>r(l))}),a=!0,o===i&&n()})}static or(t){let n=ue.resolve(!1);for(const r of t)n=n.next(i=>i?ue.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(t,n){return new ue((r,i)=>{const o=t.length,a=new Array(o);let s=0;for(let l=0;l<o;l++){const c=l;n(t[c]).next(d=>{a[c]=d,++s,s===o&&r(a)},d=>i(d))}})}static doWhile(t,n){return new ue((r,i)=>{const o=()=>{t()===!0?n().next(()=>{o()},i):r()};o()})}}function JW(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function uu(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}iv.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5=-1;function ov(e){return e==null}function Lm(e){return e===0&&1/e==-1/0}function ZW(e){return typeof e=="number"&&Number.isInteger(e)&&!Lm(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN="";function eH(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Qk(t)),t=tH(e.get(n),t);return Qk(t)}function tH(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const o=e.charAt(i);switch(o){case"\0":n+="";break;case iN:n+="";break;default:n+=o}}return n}function Qk(e){return e+iN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function As(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function oN(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(t,n){this.comparator=t,this.root=n||Qn.EMPTY}insert(t,n){return new sn(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Qn.BLACK,null,null))}remove(t){return new sn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Qn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new wf(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new wf(this.root,t,this.comparator,!1)}getReverseIterator(){return new wf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new wf(this.root,t,this.comparator,!0)}}class wf{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=n?r(t.key,n):1,n&&i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Qn{constructor(t,n,r,i,o){this.key=t,this.value=n,this.color=r??Qn.RED,this.left=i??Qn.EMPTY,this.right=o??Qn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,o){return new Qn(t??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const o=r(t,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(t,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Qn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Qn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Qn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Qn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Qe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Qe(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Qe(27949);return t+(this.isRed()?0:1)}}Qn.EMPTY=null,Qn.RED=!0,Qn.BLACK=!1;Qn.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe(57766)}get value(){throw Qe(16141)}get color(){throw Qe(16727)}get left(){throw Qe(29726)}get right(){throw Qe(36894)}copy(t,n,r,i,o){return this}insert(t,n,r){return new Qn(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(t){this.comparator=t,this.data=new sn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Zk(this.data.getIterator())}getIteratorFrom(t){return new Zk(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Mn)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Mn(this.comparator);return n.data=t,n}}class Zk{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(t){this.fields=t,t.sort(er.comparator)}static empty(){return new ti([])}unionWith(t){let n=new Mn(er.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new ti(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return $c(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new aN("Invalid base64 string: "+o):o}}(t);return new or(n)}static fromUint8Array(t){const n=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(t);return new or(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return dt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}or.EMPTY_BYTE_STRING=new or("");const nH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hs(e){if(Nt(!!e,39018),typeof e=="string"){let t=0;const n=nH.exec(e);if(Nt(!!n,46558,{timestamp:e}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:bn(e.seconds),nanos:bn(e.nanos)}}function bn(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function fs(e){return typeof e=="string"?or.fromBase64String(e):or.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN="server_timestamp",lN="__type__",cN="__previous_value__",uN="__local_write_time__";function L5(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[lN])===null||n===void 0?void 0:n.stringValue)===sN}function av(e){const t=e.mapValue.fields[cN];return L5(t)?av(t):t}function Cp(e){const t=hs(e.mapValue.fields[uN].timestampValue);return new Nn(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rH{constructor(t,n,r,i,o,a,s,l,c,d){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=s,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const Fm="(default)";class _p{constructor(t,n){this.projectId=t,this.database=n||Fm}static empty(){return new _p("","")}get isDefaultDatabase(){return this.database===Fm}isEqual(t){return t instanceof _p&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN="__type__",iH="__max__",Sf={mapValue:{}},pN="__vector__",Bm="value";function gs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?L5(e)?4:aH(e)?9007199254740991:oH(e)?10:11:Qe(28295,{value:e})}function Eo(e,t){if(e===t)return!0;const n=gs(e);if(n!==gs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Cp(e).isEqual(Cp(t));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const a=hs(i.timestampValue),s=hs(o.timestampValue);return a.seconds===s.seconds&&a.nanos===s.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,o){return fs(i.bytesValue).isEqual(fs(o.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,o){return bn(i.geoPointValue.latitude)===bn(o.geoPointValue.latitude)&&bn(i.geoPointValue.longitude)===bn(o.geoPointValue.longitude)}(e,t);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return bn(i.integerValue)===bn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const a=bn(i.doubleValue),s=bn(o.doubleValue);return a===s?Lm(a)===Lm(s):isNaN(a)&&isNaN(s)}return!1}(e,t);case 9:return $c(e.arrayValue.values||[],t.arrayValue.values||[],Eo);case 10:case 11:return function(i,o){const a=i.mapValue.fields||{},s=o.mapValue.fields||{};if(Jk(a)!==Jk(s))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(s[l]===void 0||!Eo(a[l],s[l])))return!1;return!0}(e,t);default:return Qe(52216,{left:e})}}function kp(e,t){return(e.values||[]).find(n=>Eo(n,t))!==void 0}function Lc(e,t){if(e===t)return 0;const n=gs(e),r=gs(t);if(n!==r)return dt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return dt(e.booleanValue,t.booleanValue);case 2:return function(o,a){const s=bn(o.integerValue||o.doubleValue),l=bn(a.integerValue||a.doubleValue);return s<l?-1:s>l?1:s===l?0:isNaN(s)?isNaN(l)?0:-1:1}(e,t);case 3:return eE(e.timestampValue,t.timestampValue);case 4:return eE(Cp(e),Cp(t));case 5:return c2(e.stringValue,t.stringValue);case 6:return function(o,a){const s=fs(o),l=fs(a);return s.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(o,a){const s=o.split("/"),l=a.split("/");for(let c=0;c<s.length&&c<l.length;c++){const d=dt(s[c],l[c]);if(d!==0)return d}return dt(s.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(o,a){const s=dt(bn(o.latitude),bn(a.latitude));return s!==0?s:dt(bn(o.longitude),bn(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return tE(e.arrayValue,t.arrayValue);case 10:return function(o,a){var s,l,c,d;const p=o.fields||{},f=a.fields||{},h=(s=p[Bm])===null||s===void 0?void 0:s.arrayValue,g=(l=f[Bm])===null||l===void 0?void 0:l.arrayValue,m=dt(((c=h==null?void 0:h.values)===null||c===void 0?void 0:c.length)||0,((d=g==null?void 0:g.values)===null||d===void 0?void 0:d.length)||0);return m!==0?m:tE(h,g)}(e.mapValue,t.mapValue);case 11:return function(o,a){if(o===Sf.mapValue&&a===Sf.mapValue)return 0;if(o===Sf.mapValue)return 1;if(a===Sf.mapValue)return-1;const s=o.fields||{},l=Object.keys(s),c=a.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){const f=c2(l[p],d[p]);if(f!==0)return f;const h=Lc(s[l[p]],c[d[p]]);if(h!==0)return h}return dt(l.length,d.length)}(e.mapValue,t.mapValue);default:throw Qe(23264,{Pe:n})}}function eE(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return dt(e,t);const n=hs(e),r=hs(t),i=dt(n.seconds,r.seconds);return i!==0?i:dt(n.nanos,r.nanos)}function tE(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Lc(n[i],r[i]);if(o)return o}return dt(n.length,r.length)}function Fc(e){return u2(e)}function u2(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=hs(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return fs(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Ge.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=u2(o);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const a of r)o?o=!1:i+=",",i+=`${a}:${u2(n.fields[a])}`;return i+"}"}(e.mapValue):Qe(61005,{value:e})}function Ug(e){switch(gs(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=av(e);return t?16+Ug(t):16;case 5:return 2*e.stringValue.length;case 6:return fs(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Ug(o),0)}(e.arrayValue);case 10:case 11:return function(r){let i=0;return As(r.fields,(o,a)=>{i+=o.length+Ug(a)}),i}(e.mapValue);default:throw Qe(13486,{value:e})}}function nE(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function d2(e){return!!e&&"integerValue"in e}function F5(e){return!!e&&"arrayValue"in e}function rE(e){return!!e&&"nullValue"in e}function iE(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function qg(e){return!!e&&"mapValue"in e}function oH(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[dN])===null||n===void 0?void 0:n.stringValue)===pN}function $d(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return As(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=$d(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=$d(e.arrayValue.values[n]);return t}return Object.assign({},e)}function aH(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===iH}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(t){this.value=t}static empty(){return new zr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!qg(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=$d(n)}setAll(t){let n=er.emptyPath(),r={},i=[];t.forEach((a,s)=>{if(!n.isImmediateParentOf(s)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=s.popLast()}a?r[s.lastSegment()]=$d(a):i.push(s.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(t){const n=this.field(t.popLast());qg(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Eo(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];qg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){As(n,(i,o)=>t[i]=o);for(const i of r)delete t[i]}clone(){return new zr($d(this.value))}}function hN(e){const t=[];return As(e.fields,(n,r)=>{const i=new er([n]);if(qg(r)){const o=hN(r.mapValue).fields;if(o.length===0)t.push(i);else for(const a of o)t.push(i.child(a))}else t.push(i)}),new ti(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(t,n,r,i,o,a,s){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=s}static newInvalidDocument(t){return new mr(t,0,rt.min(),rt.min(),rt.min(),zr.empty(),0)}static newFoundDocument(t,n,r,i){return new mr(t,1,n,rt.min(),r,i,0)}static newNoDocument(t,n){return new mr(t,2,n,rt.min(),rt.min(),zr.empty(),0)}static newUnknownDocument(t,n){return new mr(t,3,n,rt.min(),rt.min(),zr.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(rt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=zr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof mr&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new mr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(t,n){this.position=t,this.inclusive=n}}function oE(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],a=e.position[i];if(o.field.isKeyField()?r=Ge.comparator(Ge.fromName(a.referenceValue),n.key):r=Lc(a,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function aE(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Eo(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(t,n="asc"){this.field=t,this.dir=n}}function sH(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{}class Tn extends fN{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new cH(t,n,r):n==="array-contains"?new pH(t,r):n==="in"?new hH(t,r):n==="not-in"?new fH(t,r):n==="array-contains-any"?new gH(t,r):new Tn(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new uH(t,r):new dH(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Lc(n,this.value)):n!==null&&gs(this.value)===gs(n)&&this.matchesComparison(Lc(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Qe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class eo extends fN{constructor(t,n){super(),this.filters=t,this.op=n,this.Te=null}static create(t,n){return new eo(t,n)}matches(t){return gN(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function gN(e){return e.op==="and"}function mN(e){return lH(e)&&gN(e)}function lH(e){for(const t of e.filters)if(t instanceof eo)return!1;return!0}function p2(e){if(e instanceof Tn)return e.field.canonicalString()+e.op.toString()+Fc(e.value);if(mN(e))return e.filters.map(t=>p2(t)).join(",");{const t=e.filters.map(n=>p2(n)).join(",");return`${e.op}(${t})`}}function vN(e,t){return e instanceof Tn?function(r,i){return i instanceof Tn&&r.op===i.op&&r.field.isEqual(i.field)&&Eo(r.value,i.value)}(e,t):e instanceof eo?function(r,i){return i instanceof eo&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,a,s)=>o&&vN(a,i.filters[s]),!0):!1}(e,t):void Qe(19439)}function xN(e){return e instanceof Tn?function(n){return`${n.field.canonicalString()} ${n.op} ${Fc(n.value)}`}(e):e instanceof eo?function(n){return n.op.toString()+" {"+n.getFilters().map(xN).join(" ,")+"}"}(e):"Filter"}class cH extends Tn{constructor(t,n,r){super(t,n,r),this.key=Ge.fromName(r.referenceValue)}matches(t){const n=Ge.comparator(t.key,this.key);return this.matchesComparison(n)}}class uH extends Tn{constructor(t,n){super(t,"in",n),this.keys=yN("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class dH extends Tn{constructor(t,n){super(t,"not-in",n),this.keys=yN("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function yN(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class pH extends Tn{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return F5(n)&&kp(n.arrayValue,this.value)}}class hH extends Tn{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&kp(this.value.arrayValue,n)}}class fH extends Tn{constructor(t,n){super(t,"not-in",n)}matches(t){if(kp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!kp(this.value.arrayValue,n)}}class gH extends Tn{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!F5(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>kp(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mH{constructor(t,n=null,r=[],i=[],o=null,a=null,s=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=s,this.Ie=null}}function sE(e,t=null,n=[],r=[],i=null,o=null,a=null){return new mH(e,t,n,r,i,o,a)}function B5(e){const t=ot(e);if(t.Ie===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>p2(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),ov(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Fc(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Fc(r)).join(",")),t.Ie=n}return t.Ie}function z5(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!sH(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!vN(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!aE(e.startAt,t.startAt)&&aE(e.endAt,t.endAt)}function h2(e){return Ge.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(t,n=null,r=[],i=[],o=null,a="F",s=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=s,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function vH(e,t,n,r,i,o,a,s){return new du(e,t,n,r,i,o,a,s)}function sv(e){return new du(e)}function lE(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function bN(e){return e.collectionGroup!==null}function Ld(e){const t=ot(e);if(t.Ee===null){t.Ee=[];const n=new Set;for(const o of t.explicitOrderBy)t.Ee.push(o),n.add(o.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let s=new Mn(er.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(s=s.add(c.field))})}),s})(t).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||t.Ee.push(new Ep(o,r))}),n.has(er.keyField().canonicalString())||t.Ee.push(new Ep(er.keyField(),r))}return t.Ee}function bo(e){const t=ot(e);return t.de||(t.de=xH(t,Ld(e))),t.de}function xH(e,t){if(e.limitType==="F")return sE(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Ep(i.field,o)});const n=e.endAt?new zm(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new zm(e.startAt.position,e.startAt.inclusive):null;return sE(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function f2(e,t){const n=e.filters.concat([t]);return new du(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Vm(e,t,n){return new du(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function lv(e,t){return z5(bo(e),bo(t))&&e.limitType===t.limitType}function wN(e){return`${B5(bo(e))}|lt:${e.limitType}`}function Wl(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>xN(i)).join(", ")}]`),ov(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Fc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Fc(i)).join(",")),`Target(${r})`}(bo(e))}; limitType=${e.limitType})`}function cv(e,t){return t.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ge.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(e,t)&&function(r,i){for(const o of Ld(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(a,s,l){const c=oE(a,s,l);return a.inclusive?c<=0:c<0}(r.startAt,Ld(r),i)||r.endAt&&!function(a,s,l){const c=oE(a,s,l);return a.inclusive?c>=0:c>0}(r.endAt,Ld(r),i))}(e,t)}function yH(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function SN(e){return(t,n)=>{let r=!1;for(const i of Ld(e)){const o=bH(i,t,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function bH(e,t,n){const r=e.field.isKeyField()?Ge.comparator(t.key,n.key):function(o,a,s){const l=a.data.field(o),c=s.data.field(o);return l!==null&&c!==null?Lc(l,c):Qe(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Qe(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,t))return o}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return void(i[o]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){As(this.inner,(n,r)=>{for(const[i,o]of r)t(i,o)})}isEmpty(){return oN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wH=new sn(Ge.comparator);function ia(){return wH}const CN=new sn(Ge.comparator);function vd(...e){let t=CN;for(const n of e)t=t.insert(n.key,n);return t}function _N(e){let t=CN;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Js(){return Fd()}function kN(){return Fd()}function Fd(){return new _l(e=>e.toString(),(e,t)=>e.isEqual(t))}const SH=new sn(Ge.comparator),CH=new Mn(Ge.comparator);function xt(...e){let t=CH;for(const n of e)t=t.add(n);return t}const _H=new Mn(dt);function kH(){return _H}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V5(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lm(t)?"-0":t}}function EN(e){return{integerValue:""+e}}function TN(e,t){return ZW(t)?EN(t):V5(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(){this._=void 0}}function EH(e,t,n){return e instanceof Tp?function(i,o){const a={fields:{[lN]:{stringValue:sN},[uN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&L5(o)&&(o=av(o)),o&&(a.fields[cN]=o),{mapValue:a}}(n,t):e instanceof Ip?AN(e,t):e instanceof Ap?PN(e,t):function(i,o){const a=IN(i,o),s=cE(a)+cE(i.Re);return d2(a)&&d2(i.Re)?EN(s):V5(i.serializer,s)}(e,t)}function TH(e,t,n){return e instanceof Ip?AN(e,t):e instanceof Ap?PN(e,t):n}function IN(e,t){return e instanceof Pp?function(r){return d2(r)||function(o){return!!o&&"doubleValue"in o}(r)}(t)?t:{integerValue:0}:null}class Tp extends uv{}class Ip extends uv{constructor(t){super(),this.elements=t}}function AN(e,t){const n=DN(t);for(const r of e.elements)n.some(i=>Eo(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ap extends uv{constructor(t){super(),this.elements=t}}function PN(e,t){let n=DN(t);for(const r of e.elements)n=n.filter(i=>!Eo(i,r));return{arrayValue:{values:n}}}class Pp extends uv{constructor(t,n){super(),this.serializer=t,this.Re=n}}function cE(e){return bn(e.integerValue||e.doubleValue)}function DN(e){return F5(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(t,n){this.field=t,this.transform=n}}function IH(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof Ip&&i instanceof Ip||r instanceof Ap&&i instanceof Ap?$c(r.elements,i.elements,Eo):r instanceof Pp&&i instanceof Pp?Eo(r.Re,i.Re):r instanceof Tp&&i instanceof Tp}(e.transform,t.transform)}class AH{constructor(t,n){this.version=t,this.transformResults=n}}class Ar{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Ar}static exists(t){return new Ar(void 0,t)}static updateTime(t){return new Ar(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Wg(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class dv{}function NN(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new pv(e.key,Ar.none()):new lh(e.key,e.data,Ar.none());{const n=e.data,r=zr.empty();let i=new Mn(er.comparator);for(let o of t.fields)if(!i.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new Ps(e.key,r,new ti(i.toArray()),Ar.none())}}function PH(e,t,n){e instanceof lh?function(i,o,a){const s=i.value.clone(),l=dE(i.fieldTransforms,o,a.transformResults);s.setAll(l),o.convertToFoundDocument(a.version,s).setHasCommittedMutations()}(e,t,n):e instanceof Ps?function(i,o,a){if(!Wg(i.precondition,o))return void o.convertToUnknownDocument(a.version);const s=dE(i.fieldTransforms,o,a.transformResults),l=o.data;l.setAll(MN(i)),l.setAll(s),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function Bd(e,t,n,r){return e instanceof lh?function(o,a,s,l){if(!Wg(o.precondition,a))return s;const c=o.value.clone(),d=pE(o.fieldTransforms,l,a);return c.setAll(d),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ps?function(o,a,s,l){if(!Wg(o.precondition,a))return s;const c=pE(o.fieldTransforms,l,a),d=a.data;return d.setAll(MN(o)),d.setAll(c),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),s===null?null:s.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(e,t,n,r):function(o,a,s){return Wg(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):s}(e,t,n)}function DH(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),o=IN(r.transform,i||null);o!=null&&(n===null&&(n=zr.empty()),n.set(r.field,o))}return n||null}function uE(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&$c(r,i,(o,a)=>IH(o,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class lh extends dv{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ps extends dv{constructor(t,n,r,i,o=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function MN(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function dE(e,t,n){const r=new Map;Nt(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let i=0;i<n.length;i++){const o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,TH(a,s,n[i]))}return r}function pE(e,t,n){const r=new Map;for(const i of e){const o=i.transform,a=n.data.field(i.field);r.set(i.field,EH(o,a,t))}return r}class pv extends dv{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RH extends dv{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NH{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(t.key)&&PH(o,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Bd(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Bd(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=kN();return this.mutations.forEach(i=>{const o=t.get(i.key),a=o.overlayedDocument;let s=this.applyToLocalView(a,o.mutatedFields);s=n.has(i.key)?null:s;const l=NN(a,s);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(rt.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),xt())}isEqual(t){return this.batchId===t.batchId&&$c(this.mutations,t.mutations,(n,r)=>uE(n,r))&&$c(this.baseMutations,t.baseMutations,(n,r)=>uE(n,r))}}class j5{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){Nt(t.mutations.length===r.length,58842,{fe:t.mutations.length,ge:r.length});let i=function(){return SH}();const o=t.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new j5(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MH=class{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OH{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cn,Ct;function $H(e){switch(e){case le.OK:return Qe(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return Qe(15467,{code:e})}}function ON(e){if(e===void 0)return ra("GRPC error has no .code"),le.UNKNOWN;switch(e){case Cn.OK:return le.OK;case Cn.CANCELLED:return le.CANCELLED;case Cn.UNKNOWN:return le.UNKNOWN;case Cn.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Cn.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Cn.INTERNAL:return le.INTERNAL;case Cn.UNAVAILABLE:return le.UNAVAILABLE;case Cn.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Cn.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Cn.NOT_FOUND:return le.NOT_FOUND;case Cn.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Cn.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Cn.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Cn.ABORTED:return le.ABORTED;case Cn.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Cn.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Cn.DATA_LOSS:return le.DATA_LOSS;default:return Qe(39323,{code:e})}}(Ct=Cn||(Cn={}))[Ct.OK=0]="OK",Ct[Ct.CANCELLED=1]="CANCELLED",Ct[Ct.UNKNOWN=2]="UNKNOWN",Ct[Ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ct[Ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ct[Ct.NOT_FOUND=5]="NOT_FOUND",Ct[Ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ct[Ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ct[Ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ct[Ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ct[Ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ct[Ct.ABORTED=10]="ABORTED",Ct[Ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ct[Ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ct[Ct.INTERNAL=13]="INTERNAL",Ct[Ct.UNAVAILABLE=14]="UNAVAILABLE",Ct[Ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LH=new rs([4294967295,4294967295],0);function hE(e){const t=nN().encode(e),n=new Y8;return n.update(t),new Uint8Array(n.digest())}function fE(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new rs([n,r],0),new rs([i,o],0)]}class U5{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new xd(`Invalid padding: ${n}`);if(r<0)throw new xd(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new xd(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new xd(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*t.length-n,this.ye=rs.fromNumber(this.pe)}we(t,n,r){let i=t.add(n.multiply(rs.fromNumber(r)));return i.compare(LH)===1&&(i=new rs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}Se(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const n=hE(t),[r,i]=fE(n);for(let o=0;o<this.hashCount;o++){const a=this.we(r,i,o);if(!this.Se(a))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),a=new U5(o,i,n);return r.forEach(s=>a.insert(s)),a}insert(t){if(this.pe===0)return;const n=hE(t),[r,i]=fE(n);for(let o=0;o<this.hashCount;o++){const a=this.we(r,i,o);this.be(a)}}be(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class xd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(t,n,r,i,o){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,ch.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new hv(rt.min(),i,new sn(dt),ia(),xt())}}class ch{constructor(t,n,r,i,o){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new ch(r,n,xt(),xt(),xt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(t,n,r,i){this.De=t,this.removedTargetIds=n,this.key=r,this.ve=i}}class $N{constructor(t,n){this.targetId=t,this.Ce=n}}class LN{constructor(t,n,r=or.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class gE{constructor(){this.Fe=0,this.Me=mE(),this.xe=or.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=xt(),n=xt(),r=xt();return this.Me.forEach((i,o)=>{switch(o){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Qe(38017,{changeType:o})}}),new ch(this.xe,this.Oe,t,n,r)}Qe(){this.Ne=!1,this.Me=mE()}$e(t,n){this.Ne=!0,this.Me=this.Me.insert(t,n)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,Nt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class FH{constructor(t){this.ze=t,this.je=new Map,this.He=ia(),this.Je=Cf(),this.Ye=Cf(),this.Ze=new sn(dt)}Xe(t){for(const n of t.De)t.ve&&t.ve.isFoundDocument()?this.et(n,t.ve):this.tt(n,t.key,t.ve);for(const n of t.removedTargetIds)this.tt(n,t.key,t.ve)}nt(t){this.forEachTarget(t,n=>{const r=this.rt(n);switch(t.state){case 0:this.it(n)&&r.ke(t.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(t.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(t.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(t.resumeToken));break;default:Qe(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.je.forEach((r,i)=>{this.it(i)&&n(i)})}ot(t){const n=t.targetId,r=t.Ce.count,i=this._t(n);if(i){const o=i.target;if(h2(o))if(r===0){const a=new Ge(o.path);this.tt(n,a,mr.newNoDocument(a,rt.min()))}else Nt(r===1,20013,{expectedCount:r});else{const a=this.ut(n);if(a!==r){const s=this.ct(t),l=s?this.lt(s,t,a):1;if(l!==0){this.st(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,c)}}}}}ct(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let a,s;try{a=fs(r).toUint8Array()}catch(l){if(l instanceof aN)return Oc("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{s=new U5(a,i,o)}catch(l){return Oc(l instanceof xd?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return s.pe===0?null:s}lt(t,n,r){return n.Ce.count===r-this.Tt(t,n.targetId)?0:2}Tt(t,n){const r=this.ze.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const a=this.ze.Pt(),s=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;t.mightContain(s)||(this.tt(n,o,null),i++)}),i}It(t){const n=new Map;this.je.forEach((o,a)=>{const s=this._t(a);if(s){if(o.current&&h2(s.target)){const l=new Ge(s.target.path);this.Et(l).has(a)||this.dt(a,l)||this.tt(a,l,mr.newNoDocument(l,t))}o.Le&&(n.set(a,o.qe()),o.Qe())}});let r=xt();this.Ye.forEach((o,a)=>{let s=!0;a.forEachWhile(l=>{const c=this._t(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(s=!1,!1)}),s&&(r=r.add(o))}),this.He.forEach((o,a)=>a.setReadTime(t));const i=new hv(t,n,this.Ze,this.He,r);return this.He=ia(),this.Je=Cf(),this.Ye=Cf(),this.Ze=new sn(dt),i}et(t,n){if(!this.it(t))return;const r=this.dt(t,n.key)?2:0;this.rt(t).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(t)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(t))}tt(t,n,r){if(!this.it(t))return;const i=this.rt(t);this.dt(t,n)?i.$e(n,1):i.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(t)),this.Ye=this.Ye.insert(n,this.At(n).add(t)),r&&(this.He=this.He.insert(n,r))}removeTarget(t){this.je.delete(t)}ut(t){const n=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let n=this.je.get(t);return n||(n=new gE,this.je.set(t,n)),n}At(t){let n=this.Ye.get(t);return n||(n=new Mn(dt),this.Ye=this.Ye.insert(t,n)),n}Et(t){let n=this.Je.get(t);return n||(n=new Mn(dt),this.Je=this.Je.insert(t,n)),n}it(t){const n=this._t(t)!==null;return n||Re("WatchChangeAggregator","Detected inactive target",t),n}_t(t){const n=this.je.get(t);return n&&n.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new gE),this.ze.getRemoteKeysForTarget(t).forEach(n=>{this.tt(t,n,null)})}dt(t,n){return this.ze.getRemoteKeysForTarget(t).has(n)}}function Cf(){return new sn(Ge.comparator)}function mE(){return new sn(Ge.comparator)}const BH={asc:"ASCENDING",desc:"DESCENDING"},zH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VH={and:"AND",or:"OR"};class jH{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function g2(e,t){return e.useProto3Json||ov(t)?t:{value:t}}function jm(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function FN(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function UH(e,t){return jm(e,t.toTimestamp())}function wo(e){return Nt(!!e,49232),rt.fromTimestamp(function(n){const r=hs(n);return new Nn(r.seconds,r.nanos)}(e))}function q5(e,t){return m2(e,t).canonicalString()}function m2(e,t){const n=function(i){return new Qt(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function BN(e){const t=Qt.fromString(e);return Nt(qN(t),10190,{key:t.toString()}),t}function v2(e,t){return q5(e.databaseId,t.path)}function Gx(e,t){const n=BN(t);if(n.get(1)!==e.databaseId.projectId)throw new Ae(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ae(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ge(VN(n))}function zN(e,t){return q5(e.databaseId,t)}function qH(e){const t=BN(e);return t.length===4?Qt.emptyPath():VN(t)}function x2(e){return new Qt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function VN(e){return Nt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function vE(e,t,n){return{name:v2(e,t),fields:n.value.mapValue.fields}}function WH(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Qe(39313,{state:c})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(c,d){return c.useProto3Json?(Nt(d===void 0||typeof d=="string",58123),or.fromBase64String(d||"")):(Nt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),or.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(c){const d=c.code===void 0?le.UNKNOWN:ON(c.code);return new Ae(d,c.message||"")}(a);n=new LN(r,i,o,s||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Gx(e,r.document.name),o=wo(r.document.updateTime),a=r.document.createTime?wo(r.document.createTime):rt.min(),s=new zr({mapValue:{fields:r.document.fields}}),l=mr.newFoundDocument(i,o,a,s),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Hg(c,d,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Gx(e,r.document),o=r.readTime?wo(r.readTime):rt.min(),a=mr.newNoDocument(i,o),s=r.removedTargetIds||[];n=new Hg([],s,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Gx(e,r.document),o=r.removedTargetIds||[];n=new Hg([],o,i,null)}else{if(!("filter"in t))return Qe(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,a=new OH(i,o),s=r.targetId;n=new $N(s,a)}}return n}function HH(e,t){let n;if(t instanceof lh)n={update:vE(e,t.key,t.value)};else if(t instanceof pv)n={delete:v2(e,t.key)};else if(t instanceof Ps)n={update:vE(e,t.key,t.data),updateMask:tG(t.fieldMask)};else{if(!(t instanceof RH))return Qe(16599,{ft:t.type});n={verify:v2(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(o,a){const s=a.transform;if(s instanceof Tp)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof Ip)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof Ap)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof Pp)return{fieldPath:a.field.canonicalString(),increment:s.Re};throw Qe(20930,{transform:a.transform})}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:UH(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Qe(27497)}(e,t.precondition)),n}function GH(e,t){return e&&e.length>0?(Nt(t!==void 0,14353),e.map(n=>function(i,o){let a=i.updateTime?wo(i.updateTime):wo(o);return a.isEqual(rt.min())&&(a=wo(o)),new AH(a,i.transformResults||[])}(n,t))):[]}function YH(e,t){return{documents:[zN(e,t.path)]}}function KH(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=zN(e,i);const o=function(c){if(c.length!==0)return UN(eo.create(c,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const a=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:Hl(f.field),direction:JH(f.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const s=g2(e,t.limit);return s!==null&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{gt:n,parent:i}}function XH(e){let t=qH(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Nt(r===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:t=t.child(d.collectionId)}let o=[];n.where&&(o=function(p){const f=jN(p);return f instanceof eo&&mN(f)?f.getFilters():[f]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(f=>function(g){return new Ep(Gl(g.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(f))}(n.orderBy));let s=null;n.limit&&(s=function(p){let f;return f=typeof p=="object"?p.value:p,ov(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(p){const f=!!p.before,h=p.values||[];return new zm(h,f)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const f=!p.before,h=p.values||[];return new zm(h,f)}(n.endAt)),vH(t,i,a,o,s,"F",l,c)}function QH(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qe(28987,{purpose:i})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function jN(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Gl(n.unaryFilter.field);return Tn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Gl(n.unaryFilter.field);return Tn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Gl(n.unaryFilter.field);return Tn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Gl(n.unaryFilter.field);return Tn.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Qe(61313);default:return Qe(60726)}}(e):e.fieldFilter!==void 0?function(n){return Tn.create(Gl(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Qe(58110);default:return Qe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return eo.create(n.compositeFilter.filters.map(r=>jN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Qe(1026)}}(n.compositeFilter.op))}(e):Qe(30097,{filter:e})}function JH(e){return BH[e]}function ZH(e){return zH[e]}function eG(e){return VH[e]}function Hl(e){return{fieldPath:e.canonicalString()}}function Gl(e){return er.fromServerFormat(e.fieldPath)}function UN(e){return e instanceof Tn?function(n){if(n.op==="=="){if(iE(n.value))return{unaryFilter:{field:Hl(n.field),op:"IS_NAN"}};if(rE(n.value))return{unaryFilter:{field:Hl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(iE(n.value))return{unaryFilter:{field:Hl(n.field),op:"IS_NOT_NAN"}};if(rE(n.value))return{unaryFilter:{field:Hl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hl(n.field),op:ZH(n.op),value:n.value}}}(e):e instanceof eo?function(n){const r=n.getFilters().map(i=>UN(i));return r.length===1?r[0]:{compositeFilter:{op:eG(n.op),filters:r}}}(e):Qe(54877,{filter:e})}function tG(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function qN(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(t,n,r,i,o=rt.min(),a=rt.min(),s=or.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=s,this.expectedCount=l}withSequenceNumber(t){return new Wa(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Wa(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Wa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Wa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nG{constructor(t){this.wt=t}}function rG(e){const t=XH({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Vm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iG{constructor(){this.Cn=new oG}addToCollectionParentIndex(t,n){return this.Cn.add(n),ue.resolve()}getCollectionParents(t,n){return ue.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return ue.resolve()}deleteFieldIndex(t,n){return ue.resolve()}deleteAllFieldIndexes(t){return ue.resolve()}createTargetIndexes(t,n){return ue.resolve()}getDocumentsMatchingTarget(t,n){return ue.resolve(null)}getIndexType(t,n){return ue.resolve(0)}getFieldIndexes(t,n){return ue.resolve([])}getNextCollectionGroupToUpdate(t){return ue.resolve(null)}getMinOffset(t,n){return ue.resolve(ps.min())}getMinOffsetFromCollectionGroup(t,n){return ue.resolve(ps.min())}updateCollectionGroup(t,n,r){return ue.resolve()}updateIndexEntries(t,n){return ue.resolve()}}class oG{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Mn(Qt.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Mn(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WN=41943040;class Lr{static withCacheSize(t){return new Lr(t,Lr.DEFAULT_COLLECTION_PERCENTILE,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lr.DEFAULT_COLLECTION_PERCENTILE=10,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lr.DEFAULT=new Lr(WN,Lr.DEFAULT_COLLECTION_PERCENTILE,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lr.DISABLED=new Lr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new Bc(0)}static lr(){return new Bc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="LruGarbageCollector",aG=1048576;function bE([e,t],[n,r]){const i=dt(e,n);return i===0?dt(t,r):i}class sG{constructor(t){this.Er=t,this.buffer=new Mn(bE),this.dr=0}Ar(){return++this.dr}Rr(t){const n=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();bE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class lG{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){Re(yE,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){uu(n)?Re(yE,"Ignoring IndexedDB error during garbage collection: ",n):await cu(n)}await this.mr(3e5)})}}class cG{constructor(t,n){this.gr=t,this.params=n}calculateTargetCount(t,n){return this.gr.pr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return ue.resolve(iv.le);const r=new sG(n);return this.gr.forEachTarget(t,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(t,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.gr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.gr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(xE)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xE):this.wr(t,n))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,n){let r,i,o,a,s,l,c;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,a=Date.now(),this.nthSequenceNumber(t,i))).next(p=>(r=p,s=Date.now(),this.removeTargets(t,r,n))).next(p=>(o=p,l=Date.now(),this.removeOrphanedDocuments(t,r))).next(p=>(c=Date.now(),ql()<=vt.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${i} in `+(s-a)+`ms
	Removed ${o} targets in `+(l-s)+`ms
	Removed ${p} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}}function uG(e,t){return new cG(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dG{constructor(){this.changes=new _l(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,mr.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ue.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pG{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hG{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&Bd(r.mutation,i,ti.empty(),Nn.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,xt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=xt()){const i=Js();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(o=>{let a=vd();return o.forEach((s,l)=>{a=a.insert(s,l.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const r=Js();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,xt()))}populateOverlays(t,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(t,i).next(o=>{o.forEach((a,s)=>{n.set(a,s)})})}computeViews(t,n,r,i){let o=ia();const a=Fd(),s=function(){return Fd()}();return n.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof Ps)?o=o.insert(c.key,c):d!==void 0?(a.set(c.key,d.mutation.getFieldMask()),Bd(d.mutation,c,d.mutation.getFieldMask(),Nn.now())):a.set(c.key,ti.empty())}),this.recalculateAndSaveOverlays(t,o).next(l=>(l.forEach((c,d)=>a.set(c,d)),n.forEach((c,d)=>{var p;return s.set(c,new pG(d,(p=a.get(c))!==null&&p!==void 0?p:null))}),s))}recalculateAndSaveOverlays(t,n){const r=Fd();let i=new sn((a,s)=>a-s),o=xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const s of a)s.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||ti.empty();d=s.applyToLocalView(c,d),r.set(l,d);const p=(i.get(s.batchId)||xt()).add(l);i=i.insert(s.batchId,p)})}).next(()=>{const a=[],s=i.getReverseIterator();for(;s.hasNext();){const l=s.getNext(),c=l.key,d=l.value,p=kN();d.forEach(f=>{if(!o.has(f)){const h=NN(n.get(f),r.get(f));h!==null&&p.set(f,h),o=o.add(f)}}),a.push(this.documentOverlayCache.saveOverlays(t,c,p))}return ue.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(a){return Ge.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):bN(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(o=>{const a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-o.size):ue.resolve(Js());let s=Sp,l=o;return a.next(c=>ue.forEach(c,(d,p)=>(s<p.largestBatchId&&(s=p.largestBatchId),o.get(d)?ue.resolve():this.remoteDocumentCache.getEntry(t,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(t,c,o)).next(()=>this.computeViews(t,l,c,xt())).next(d=>({batchId:s,changes:_N(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Ge(n)).next(r=>{let i=vd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const o=n.collectionGroup;let a=vd();return this.indexManager.getCollectionParents(t,o).next(s=>ue.forEach(s,l=>{const c=function(p,f){return new du(f,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(t,c,r,i).next(d=>{d.forEach((p,f)=>{a=a.insert(p,f)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,o,i))).next(a=>{o.forEach((l,c)=>{const d=c.getKey();a.get(d)===null&&(a=a.insert(d,mr.newInvalidDocument(d)))});let s=vd();return a.forEach((l,c)=>{const d=o.get(l);d!==void 0&&Bd(d.mutation,c,ti.empty(),Nn.now()),cv(n,c)&&(s=s.insert(l,c))}),s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fG{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,n){return ue.resolve(this.kr.get(n))}saveBundleMetadata(t,n){return this.kr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:wo(i.createTime)}}(n)),ue.resolve()}getNamedQuery(t,n){return ue.resolve(this.qr.get(n))}saveNamedQuery(t,n){return this.qr.set(n.name,function(i){return{name:i.name,query:rG(i.bundledQuery),readTime:wo(i.readTime)}}(n)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gG{constructor(){this.overlays=new sn(Ge.comparator),this.Qr=new Map}getOverlay(t,n){return ue.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Js();return ue.forEach(n,i=>this.getOverlay(t,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,o)=>{this.bt(t,n,o)}),ue.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.Qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),ue.resolve()}getOverlaysForCollection(t,n,r){const i=Js(),o=n.length+1,a=new Ge(n.child("")),s=this.overlays.getIteratorFrom(a);for(;s.hasNext();){const l=s.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return ue.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let o=new sn((c,d)=>c-d);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=o.get(c.largestBatchId);d===null&&(d=Js(),o=o.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const s=Js(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>s.set(c,d)),!(s.size()>=i)););return ue.resolve(s)}bt(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new MH(n,r));let o=this.Qr.get(n);o===void 0&&(o=xt(),this.Qr.set(n,o)),this.Qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mG{constructor(){this.sessionToken=or.EMPTY_BYTE_STRING}getSessionToken(t){return ue.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(){this.$r=new Mn(Fn.Ur),this.Kr=new Mn(Fn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,n){const r=new Fn(t,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.zr(new Fn(t,n))}jr(t,n){t.forEach(r=>this.removeReference(r,n))}Hr(t){const n=new Ge(new Qt([])),r=new Fn(n,t),i=new Fn(n,t+1),o=[];return this.Kr.forEachInRange([r,i],a=>{this.zr(a),o.push(a.key)}),o}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const n=new Ge(new Qt([])),r=new Fn(n,t),i=new Fn(n,t+1);let o=xt();return this.Kr.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(t){const n=new Fn(t,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Fn{constructor(t,n){this.key=t,this.Zr=n}static Ur(t,n){return Ge.comparator(t.key,n.key)||dt(t.Zr,n.Zr)}static Wr(t,n){return dt(t.Zr,n.Zr)||Ge.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vG{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Mn(Fn.Ur)}checkEmpty(t){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new NH(o,n,r,i);this.mutationQueue.push(a);for(const s of i)this.Xr=this.Xr.add(new Fn(s.key,o)),this.indexManager.addToCollectionParentIndex(t,s.key.path.popLast());return ue.resolve(a)}lookupMutationBatch(t,n){return ue.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.ti(r),o=i<0?0:i;return ue.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?$5:this.nr-1)}getAllMutationBatches(t){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Fn(n,0),i=new Fn(n,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,i],a=>{const s=this.ei(a.Zr);o.push(s)}),ue.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Mn(dt);return n.forEach(i=>{const o=new Fn(i,0),a=new Fn(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,a],s=>{r=r.add(s.Zr)})}),ue.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let o=r;Ge.isDocumentKey(o)||(o=o.child(""));const a=new Fn(new Ge(o),0);let s=new Mn(dt);return this.Xr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(s=s.add(l.Zr)),!0)},a),ue.resolve(this.ni(s))}ni(t){const n=[];return t.forEach(r=>{const i=this.ei(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Nt(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return ue.forEach(n.mutations,i=>{const o=new Fn(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Xr=r})}sr(t){}containsKey(t,n){const r=new Fn(n,0),i=this.Xr.firstAfterOrEqual(r);return ue.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,ue.resolve()}ri(t,n){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const n=this.ti(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xG{constructor(t){this.ii=t,this.docs=function(){return new sn(Ge.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,a=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return ue.resolve(r?r.document.mutableCopy():mr.newInvalidDocument(n))}getEntries(t,n){let r=ia();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():mr.newInvalidDocument(i))}),ue.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let o=ia();const a=n.path,s=new Ge(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(s);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||KW(YW(d),r)<=0||(i.has(d.key)||cv(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return ue.resolve(o)}getAllFromCollectionGroup(t,n,r,i){Qe(9500)}si(t,n){return ue.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new yG(this)}getSize(t){return ue.resolve(this.size)}}class yG extends dG{constructor(t){super(),this.Br=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Br.addEntry(t,i)):this.Br.removeEntry(r)}),ue.waitFor(n)}getFromCache(t,n){return this.Br.getEntry(t,n)}getAllFromCache(t,n){return this.Br.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bG{constructor(t){this.persistence=t,this.oi=new _l(n=>B5(n),z5),this.lastRemoteSnapshotVersion=rt.min(),this.highestTargetId=0,this._i=0,this.ai=new W5,this.targetCount=0,this.ui=Bc.cr()}forEachTarget(t,n){return this.oi.forEach((r,i)=>n(i)),ue.resolve()}getLastRemoteSnapshotVersion(t){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ue.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),ue.resolve()}Tr(t){this.oi.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ui=new Bc(n),this.highestTargetId=n),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,n){return this.Tr(n),this.targetCount+=1,ue.resolve()}updateTargetData(t,n){return this.Tr(n),ue.resolve()}removeTargetData(t,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,ue.resolve()}removeTargets(t,n,r){let i=0;const o=[];return this.oi.forEach((a,s)=>{s.sequenceNumber<=n&&r.get(s.targetId)===null&&(this.oi.delete(a),o.push(this.removeMatchingKeysForTargetId(t,s.targetId)),i++)}),ue.waitFor(o).next(()=>i)}getTargetCount(t){return ue.resolve(this.targetCount)}getTargetData(t,n){const r=this.oi.get(n)||null;return ue.resolve(r)}addMatchingKeys(t,n,r){return this.ai.Gr(n,r),ue.resolve()}removeMatchingKeys(t,n,r){this.ai.jr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(a=>{o.push(i.markPotentiallyOrphaned(t,a))}),ue.waitFor(o)}removeMatchingKeysForTargetId(t,n){return this.ai.Hr(n),ue.resolve()}getMatchingKeysForTargetId(t,n){const r=this.ai.Yr(n);return ue.resolve(r)}containsKey(t,n){return ue.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(t,n){this.ci={},this.overlays={},this.li=new iv(0),this.hi=!1,this.hi=!0,this.Pi=new mG,this.referenceDelegate=t(this),this.Ti=new bG(this),this.indexManager=new iG,this.remoteDocumentCache=function(i){return new xG(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new nG(n),this.Ei=new fG(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new gG,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ci[t.toKey()];return r||(r=new vG(n,this.referenceDelegate),this.ci[t.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,n,r){Re("MemoryPersistence","Starting transaction:",t);const i=new wG(this.li.next());return this.referenceDelegate.di(),r(i).next(o=>this.referenceDelegate.Ai(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ri(t,n){return ue.or(Object.values(this.ci).map(r=>()=>r.containsKey(t,n)))}}class wG extends QW{constructor(t){super(),this.currentSequenceNumber=t}}class H5{constructor(t){this.persistence=t,this.Vi=new W5,this.mi=null}static fi(t){return new H5(t)}get gi(){if(this.mi)return this.mi;throw Qe(60996)}addReference(t,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),ue.resolve()}removeReference(t,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(t,n){return this.gi.add(n.toString()),ue.resolve()}removeTarget(t,n){this.Vi.Hr(n.targetId).forEach(i=>this.gi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(t,n))}di(){this.mi=new Set}Ai(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.gi,r=>{const i=Ge.fromPath(r);return this.pi(t,i).next(o=>{o||n.removeEntry(i,rt.min())})}).next(()=>(this.mi=null,n.apply(t)))}updateLimboDocument(t,n){return this.pi(t,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(t){return 0}pi(t,n){return ue.or([()=>ue.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ri(t,n)])}}class Um{constructor(t,n){this.persistence=t,this.yi=new _l(r=>eH(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=uG(this,n)}static fi(t,n){return new Um(t,n)}di(){}Ai(t){return ue.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}pr(t){const n=this.Sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(i=>r+i))}Sr(t){let n=0;return this.yr(t,r=>{n++}).next(()=>n)}yr(t,n){return ue.forEach(this.yi,(r,i)=>this.Dr(t,r,i).next(o=>o?ue.resolve():n(i)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.si(t,a=>this.Dr(t,a,n).next(s=>{s||(r++,o.removeEntry(a,rt.min()))})).next(()=>o.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.yi.set(n,t.currentSequenceNumber),ue.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),ue.resolve()}removeReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),ue.resolve()}updateLimboDocument(t,n){return this.yi.set(n,t.currentSequenceNumber),ue.resolve()}Ii(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Ug(t.data.value)),n}Dr(t,n,r){return ue.or([()=>this.persistence.Ri(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.yi.get(n);return ue.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.ds=r,this.As=i}static Rs(t,n){let r=xt(),i=xt();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new G5(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SG{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CG{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return aj()?8:JW(br())>0?6:4}()}initialize(t,n){this.ys=t,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(t,n,r,i){const o={result:null};return this.ws(t,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Ss(t,n,i,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new SG;return this.bs(t,n,a).next(s=>{if(o.result=s,this.fs)return this.Ds(t,n,a,s.size)})}).next(()=>o.result)}Ds(t,n,r,i){return r.documentReadCount<this.gs?(ql()<=vt.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",Wl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ue.resolve()):(ql()<=vt.DEBUG&&Re("QueryEngine","Query:",Wl(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(ql()<=vt.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",Wl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,bo(n))):ue.resolve())}ws(t,n){if(lE(n))return ue.resolve(null);let r=bo(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Vm(n,null,"F"),r=bo(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(o=>{const a=xt(...o);return this.ys.getDocuments(t,a).next(s=>this.indexManager.getMinOffset(t,r).next(l=>{const c=this.vs(n,s);return this.Cs(n,c,a,l.readTime)?this.ws(t,Vm(n,null,"F")):this.Fs(t,c,n,l)}))})))}Ss(t,n,r,i){return lE(n)||i.isEqual(rt.min())?ue.resolve(null):this.ys.getDocuments(t,r).next(o=>{const a=this.vs(n,o);return this.Cs(n,a,r,i)?ue.resolve(null):(ql()<=vt.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Wl(n)),this.Fs(t,a,n,GW(i,Sp)).next(s=>s))})}vs(t,n){let r=new Mn(SN(t));return n.forEach((i,o)=>{cv(t,o)&&(r=r.add(o))}),r}Cs(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const o=t.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}bs(t,n,r){return ql()<=vt.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",Wl(n)),this.ys.getDocumentsMatchingQuery(t,n,ps.min(),r)}Fs(t,n,r,i){return this.ys.getDocumentsMatchingQuery(t,r,i).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5="LocalStore",_G=3e8;class kG{constructor(t,n,r,i){this.persistence=t,this.Ms=n,this.serializer=i,this.xs=new sn(dt),this.Os=new _l(o=>B5(o),z5),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(r)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new hG(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.xs))}}function EG(e,t,n,r){return new kG(e,t,n,r)}async function GN(e,t){const n=ot(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ls(t),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const a=[],s=[];let l=xt();for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of o){s.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({ks:c,removedBatchIds:a,addedBatchIds:s}))})})}function TG(e,t){const n=ot(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),o=n.Bs.newChangeBuffer({trackRemovals:!0});return function(s,l,c,d){const p=c.batch,f=p.keys();let h=ue.resolve();return f.forEach(g=>{h=h.next(()=>d.getEntry(l,g)).next(m=>{const v=c.docVersions.get(g);Nt(v!==null,48541),m.version.compareTo(v)<0&&(p.applyToRemoteDocument(m,c),m.isValidDocument()&&(m.setReadTime(c.commitVersion),d.addEntry(m)))})}),h.next(()=>s.mutationQueue.removeMutationBatch(l,p))}(n,r,t,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(s){let l=xt();for(let c=0;c<s.mutationResults.length;++c)s.mutationResults[c].transformResults.length>0&&(l=l.add(s.batch.mutations[c].key));return l}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function YN(e){const t=ot(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ti.getLastRemoteSnapshotVersion(n))}function IG(e,t){const n=ot(e),r=t.snapshotVersion;let i=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.xs;const s=[];t.targetChanges.forEach((d,p)=>{const f=i.get(p);if(!f)return;s.push(n.Ti.removeMatchingKeys(o,d.removedDocuments,p).next(()=>n.Ti.addMatchingKeys(o,d.addedDocuments,p)));let h=f.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(p)!==null?h=h.withResumeToken(or.EMPTY_BYTE_STRING,rt.min()).withLastLimboFreeSnapshotVersion(rt.min()):d.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(d.resumeToken,r)),i=i.insert(p,h),function(m,v,w){return m.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=_G?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,h,d)&&s.push(n.Ti.updateTargetData(o,h))});let l=ia(),c=xt();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),s.push(AG(o,a,t.documentUpdates).next(d=>{l=d.qs,c=d.Qs})),!r.isEqual(rt.min())){const d=n.Ti.getLastRemoteSnapshotVersion(o).next(p=>n.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));s.push(d)}return ue.waitFor(s).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(n.xs=i,o))}function AG(e,t,n){let r=xt(),i=xt();return n.forEach(o=>r=r.add(o)),t.getEntries(e,r).next(o=>{let a=ia();return n.forEach((s,l)=>{const c=o.get(s);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(s)),l.isNoDocument()&&l.version.isEqual(rt.min())?(t.removeEntry(s,l.readTime),a=a.insert(s,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),a=a.insert(s,l)):Re(Y5,"Ignoring outdated watch update for ",s,". Current version:",c.version," Watch version:",l.version)}),{qs:a,Qs:i}})}function PG(e,t){const n=ot(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=$5),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function DG(e,t){const n=ot(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ti.getTargetData(r,t).next(o=>o?(i=o,ue.resolve(i)):n.Ti.allocateTargetId(r).next(a=>(i=new Wa(t,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(t,r.targetId)),r})}async function y2(e,t,n){const r=ot(e),i=r.xs.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!uu(a))throw a;Re(Y5,`Failed to update sequence numbers for target ${t}: ${a}`)}r.xs=r.xs.remove(t),r.Os.delete(i.target)}function wE(e,t,n){const r=ot(e);let i=rt.min(),o=xt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,d){const p=ot(l),f=p.Os.get(d);return f!==void 0?ue.resolve(p.xs.get(f)):p.Ti.getTargetData(c,d)}(r,a,bo(t)).next(s=>{if(s)return i=s.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(a,s.targetId).next(l=>{o=l})}).next(()=>r.Ms.getDocumentsMatchingQuery(a,t,n?i:rt.min(),n?o:xt())).next(s=>(RG(r,yH(t),s),{documents:s,$s:o})))}function RG(e,t,n){let r=e.Ns.get(t)||rt.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),e.Ns.set(t,r)}class SE{constructor(){this.activeTargetIds=kH()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class NG{constructor(){this.xo=new SE,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,n,r){this.Oo[t]=n}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new SE,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MG{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="ConnectivityMonitor";class _E{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Re(CE,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){Re(CE,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _f=null;function b2(){return _f===null?_f=function(){return 268435456+Math.round(2147483648*Math.random())}():_f++,"0x"+_f.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="RestConnection",OG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $G{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+t.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===Fm?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(t,n,r,i,o){const a=b2(),s=this.jo(t,n.toUriEncodedString());Re(Yx,`Sending RPC '${t}' ${a}:`,s,r);const l={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(l,i,o);const{host:c}=new URL(s),d=Es(c);return this.Jo(t,s,l,r,d).then(p=>(Re(Yx,`Received RPC '${t}' ${a}: `,p),p),p=>{throw Oc(Yx,`RPC '${t}' ${a} failed with error: `,p,"url: ",s,"request:",r),p})}Yo(t,n,r,i,o,a){return this.zo(t,n,r,i,o)}Ho(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+lu}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>t[o]=i),r&&r.headers.forEach((i,o)=>t[o]=i)}jo(t,n){const r=OG[t];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LG{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur="WebChannelConnection";class FG extends $G{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,i,o){const a=b2();return new Promise((s,l)=>{const c=new K8;c.setWithCredentials(!0),c.listenOnce(X8.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case jg.NO_ERROR:const p=c.getResponseJson();Re(ur,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(p)),s(p);break;case jg.TIMEOUT:Re(ur,`RPC '${t}' ${a} timed out`),l(new Ae(le.DEADLINE_EXCEEDED,"Request time out"));break;case jg.HTTP_ERROR:const f=c.getStatus();if(Re(ur,`RPC '${t}' ${a} failed with status:`,f,"response text:",c.getResponseText()),f>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);const g=h==null?void 0:h.error;if(g&&g.status&&g.message){const m=function(w){const S=w.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(S)>=0?S:le.UNKNOWN}(g.status);l(new Ae(m,g.message))}else l(new Ae(le.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Ae(le.UNAVAILABLE,"Connection failed."));break;default:Qe(9055,{l_:t,streamId:a,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Re(ur,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(i);Re(ur,`RPC '${t}' ${a} sending request:`,i),c.send(n,"POST",d,r,15)})}T_(t,n,r){const i=b2(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=Z8(),s=J8(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Ho(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=o.join("");Re(ur,`Creating RPC '${t}' stream ${i}: ${d}`,l);const p=a.createWebChannel(d,l);let f=!1,h=!1;const g=new LG({Zo:v=>{h?Re(ur,`Not sending because RPC '${t}' stream ${i} is closed:`,v):(f||(Re(ur,`Opening RPC '${t}' stream ${i} transport.`),p.open(),f=!0),Re(ur,`RPC '${t}' stream ${i} sending:`,v),p.send(v))},Xo:()=>p.close()}),m=(v,w,S)=>{v.listen(w,C=>{try{S(C)}catch(A){setTimeout(()=>{throw A},0)}})};return m(p,md.EventType.OPEN,()=>{h||(Re(ur,`RPC '${t}' stream ${i} transport opened.`),g.__())}),m(p,md.EventType.CLOSE,()=>{h||(h=!0,Re(ur,`RPC '${t}' stream ${i} transport closed`),g.u_())}),m(p,md.EventType.ERROR,v=>{h||(h=!0,Oc(ur,`RPC '${t}' stream ${i} transport errored. Name:`,v.name,"Message:",v.message),g.u_(new Ae(le.UNAVAILABLE,"The operation could not be completed")))}),m(p,md.EventType.MESSAGE,v=>{var w;if(!h){const S=v.data[0];Nt(!!S,16349);const C=S,A=(C==null?void 0:C.error)||((w=C[0])===null||w===void 0?void 0:w.error);if(A){Re(ur,`RPC '${t}' stream ${i} received error:`,A);const _=A.status;let I=function(T){const P=Cn[T];if(P!==void 0)return ON(P)}(_),E=A.message;I===void 0&&(I=le.INTERNAL,E="Unknown error status: "+_+" with message "+A.message),h=!0,g.u_(new Ae(I,E)),p.close()}else Re(ur,`RPC '${t}' stream ${i} received:`,S),g.c_(S)}}),m(s,Q8.STAT_EVENT,v=>{v.stat===l2.PROXY?Re(ur,`RPC '${t}' stream ${i} detected buffering proxy`):v.stat===l2.NOPROXY&&Re(ur,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.a_()},0),g}}function Kx(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(e){return new jH(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(t,n,r=1e3,i=1.5,o=6e4){this.xi=t,this.timerId=n,this.I_=r,this.E_=i,this.d_=o,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(t){this.cancel();const n=Math.floor(this.A_+this.g_()),r=Math.max(0,Date.now()-this.V_),i=Math.max(0,n-r);i>0&&Re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.A_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.V_=Date.now(),t())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE="PersistentStream";class XN{constructor(t,n,r,i,o,a,s,l){this.xi=t,this.y_=r,this.w_=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=s,this.listener=l,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new KN(t,n)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(t){this.k_(),this.stream.send(t)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(t,n){this.k_(),this.q_(),this.C_.cancel(),this.S_++,t!==4?this.C_.reset():n&&n.code===le.RESOURCE_EXHAUSTED?(ra(n.toString()),ra("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):n&&n.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(n)}Q_(){}auth(){this.state=1;const t=this.U_(this.S_),n=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.S_===n&&this.K_(r,i)},r=>{t(()=>{const i=new Ae(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.W_(i)})})}K_(t,n){const r=this.U_(this.S_);this.stream=this.G_(t,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.W_(i))}),this.stream.onMessage(i=>{r(()=>++this.v_==1?this.z_(i):this.onNext(i))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(t){return Re(kE,`close with error: ${t}`),this.stream=null,this.close(4,t)}U_(t){return n=>{this.xi.enqueueAndForget(()=>this.S_===t?n():(Re(kE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BG extends XN{constructor(t,n,r,i,o,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=o}G_(t,n){return this.connection.T_("Listen",t,n)}z_(t){return this.onNext(t)}onNext(t){this.C_.reset();const n=WH(this.serializer,t),r=function(o){if(!("targetChange"in o))return rt.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?rt.min():a.readTime?wo(a.readTime):rt.min()}(t);return this.listener.j_(n,r)}H_(t){const n={};n.database=x2(this.serializer),n.addTarget=function(o,a){let s;const l=a.target;if(s=h2(l)?{documents:YH(o,l)}:{query:KH(o,l).gt},s.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){s.resumeToken=FN(o,a.resumeToken);const c=g2(o,a.expectedCount);c!==null&&(s.expectedCount=c)}else if(a.snapshotVersion.compareTo(rt.min())>0){s.readTime=jm(o,a.snapshotVersion.toTimestamp());const c=g2(o,a.expectedCount);c!==null&&(s.expectedCount=c)}return s}(this.serializer,t);const r=QH(this.serializer,t);r&&(n.labels=r),this.L_(n)}J_(t){const n={};n.database=x2(this.serializer),n.removeTarget=t,this.L_(n)}}class zG extends XN{constructor(t,n,r,i,o,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=o}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(t,n){return this.connection.T_("Write",t,n)}z_(t){return Nt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Nt(!t.writeResults||t.writeResults.length===0,55816),this.listener.X_()}onNext(t){Nt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.C_.reset();const n=GH(t.writeResults,t.commitTime),r=wo(t.commitTime);return this.listener.ea(r,n)}ta(){const t={};t.database=x2(this.serializer),this.L_(t)}Z_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>HH(this.serializer,r))};this.L_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VG{}class jG extends VG{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.na=!1}ra(){if(this.na)throw new Ae(le.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,n,r,i){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.zo(t,m2(n,r),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(le.UNKNOWN,o.toString())})}Yo(t,n,r,i,o){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.Yo(t,m2(n,r),i,a,s,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ae(le.UNKNOWN,a.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class UG{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(t){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.aa("Offline")))}set(t){this.la(),this.ia=0,t==="Online"&&(this.oa=!1),this.aa(t)}aa(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ua(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(ra(n),this.oa=!1):Re("OnlineStateTracker",n)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl="RemoteStore";class qG{constructor(t,n,r,i,o){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=o,this.Ea.No(a=>{r.enqueueAndForget(async()=>{kl(this)&&(Re(vl,"Restarting streams for network reachability change."),await async function(l){const c=ot(l);c.Ta.add(4),await uh(c),c.da.set("Unknown"),c.Ta.delete(4),await gv(c)}(this))})}),this.da=new UG(r,i)}}async function gv(e){if(kl(e))for(const t of e.Ia)await t(!0)}async function uh(e){for(const t of e.Ia)await t(!1)}function QN(e,t){const n=ot(e);n.Pa.has(t.targetId)||(n.Pa.set(t.targetId,t),J5(n)?Q5(n):pu(n).M_()&&X5(n,t))}function K5(e,t){const n=ot(e),r=pu(n);n.Pa.delete(t),r.M_()&&JN(n,t),n.Pa.size===0&&(r.M_()?r.N_():kl(n)&&n.da.set("Unknown"))}function X5(e,t){if(e.Aa.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(rt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}pu(e).H_(t)}function JN(e,t){e.Aa.Ke(t),pu(e).J_(t)}function Q5(e){e.Aa=new FH({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Pa.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),pu(e).start(),e.da._a()}function J5(e){return kl(e)&&!pu(e).F_()&&e.Pa.size>0}function kl(e){return ot(e).Ta.size===0}function ZN(e){e.Aa=void 0}async function WG(e){e.da.set("Online")}async function HG(e){e.Pa.forEach((t,n)=>{X5(e,t)})}async function GG(e,t){ZN(e),J5(e)?(e.da.ca(t),Q5(e)):e.da.set("Unknown")}async function YG(e,t,n){if(e.da.set("Online"),t instanceof LN&&t.state===2&&t.cause)try{await async function(i,o){const a=o.cause;for(const s of o.targetIds)i.Pa.has(s)&&(await i.remoteSyncer.rejectListen(s,a),i.Pa.delete(s),i.Aa.removeTarget(s))}(e,t)}catch(r){Re(vl,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await qm(e,r)}else if(t instanceof Hg?e.Aa.Xe(t):t instanceof $N?e.Aa.ot(t):e.Aa.nt(t),!n.isEqual(rt.min()))try{const r=await YN(e.localStore);n.compareTo(r)>=0&&await function(o,a){const s=o.Aa.It(a);return s.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=o.Pa.get(c);d&&o.Pa.set(c,d.withResumeToken(l.resumeToken,a))}}),s.targetMismatches.forEach((l,c)=>{const d=o.Pa.get(l);if(!d)return;o.Pa.set(l,d.withResumeToken(or.EMPTY_BYTE_STRING,d.snapshotVersion)),JN(o,l);const p=new Wa(d.target,l,c,d.sequenceNumber);X5(o,p)}),o.remoteSyncer.applyRemoteEvent(s)}(e,n)}catch(r){Re(vl,"Failed to raise snapshot:",r),await qm(e,r)}}async function qm(e,t,n){if(!uu(t))throw t;e.Ta.add(1),await uh(e),e.da.set("Offline"),n||(n=()=>YN(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Re(vl,"Retrying IndexedDB access"),await n(),e.Ta.delete(1),await gv(e)})}function eM(e,t){return t().catch(n=>qm(e,n,t))}async function mv(e){const t=ot(e),n=ms(t);let r=t.ha.length>0?t.ha[t.ha.length-1].batchId:$5;for(;KG(t);)try{const i=await PG(t.localStore,r);if(i===null){t.ha.length===0&&n.N_();break}r=i.batchId,XG(t,i)}catch(i){await qm(t,i)}tM(t)&&nM(t)}function KG(e){return kl(e)&&e.ha.length<10}function XG(e,t){e.ha.push(t);const n=ms(e);n.M_()&&n.Y_&&n.Z_(t.mutations)}function tM(e){return kl(e)&&!ms(e).F_()&&e.ha.length>0}function nM(e){ms(e).start()}async function QG(e){ms(e).ta()}async function JG(e){const t=ms(e);for(const n of e.ha)t.Z_(n.mutations)}async function ZG(e,t,n){const r=e.ha.shift(),i=j5.from(r,t,n);await eM(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await mv(e)}async function eY(e,t){t&&ms(e).Y_&&await async function(r,i){if(function(a){return $H(a)&&a!==le.ABORTED}(i.code)){const o=r.ha.shift();ms(r).O_(),await eM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await mv(r)}}(e,t),tM(e)&&nM(e)}async function EE(e,t){const n=ot(e);n.asyncQueue.verifyOperationInProgress(),Re(vl,"RemoteStore received new credentials");const r=kl(n);n.Ta.add(3),await uh(n),r&&n.da.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ta.delete(3),await gv(n)}async function tY(e,t){const n=ot(e);t?(n.Ta.delete(2),await gv(n)):t||(n.Ta.add(2),await uh(n),n.da.set("Unknown"))}function pu(e){return e.Ra||(e.Ra=function(n,r,i){const o=ot(n);return o.ra(),new BG(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(e.datastore,e.asyncQueue,{e_:WG.bind(null,e),n_:HG.bind(null,e),i_:GG.bind(null,e),j_:YG.bind(null,e)}),e.Ia.push(async t=>{t?(e.Ra.O_(),J5(e)?Q5(e):e.da.set("Unknown")):(await e.Ra.stop(),ZN(e))})),e.Ra}function ms(e){return e.Va||(e.Va=function(n,r,i){const o=ot(n);return o.ra(),new zG(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:QG.bind(null,e),i_:eY.bind(null,e),X_:JG.bind(null,e),ea:ZG.bind(null,e)}),e.Ia.push(async t=>{t?(e.Va.O_(),await mv(e)):(await e.Va.stop(),e.ha.length>0&&(Re(vl,`Stopping write stream with ${e.ha.length} pending writes`),e.ha=[]))})),e.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(t,n,r,i,o){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Yo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,o){const a=Date.now()+r,s=new Z5(t,n,a,i,o);return s.start(r),s}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(le.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eS(e,t){if(ra("AsyncQueue",`${t}: ${e}`),uu(e))return new Ae(le.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{static emptySet(t){return new kc(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||Ge.comparator(n.key,r.key):(n,r)=>Ge.comparator(n.key,r.key),this.keyedMap=vd(),this.sortedSet=new sn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof kc)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new kc;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(){this.ma=new sn(Ge.comparator)}track(t){const n=t.doc.key,r=this.ma.get(n);r?t.type!==0&&r.type===3?this.ma=this.ma.insert(n,t):t.type===3&&r.type!==1?this.ma=this.ma.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ma=this.ma.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ma=this.ma.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ma=this.ma.remove(n):t.type===1&&r.type===2?this.ma=this.ma.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ma=this.ma.insert(n,{type:2,doc:t.doc}):Qe(63341,{Vt:t,fa:r}):this.ma=this.ma.insert(n,t)}ga(){const t=[];return this.ma.inorderTraversal((n,r)=>{t.push(r)}),t}}class zc{constructor(t,n,r,i,o,a,s,l,c){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=s,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,i,o){const a=[];return n.forEach(s=>{a.push({type:0,doc:s})}),new zc(t,n,kc.emptySet(n),a,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&lv(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nY{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(t=>t.Sa())}}class rY{constructor(){this.queries=IE(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(n,r){const i=ot(n),o=i.queries;i.queries=IE(),o.forEach((a,s)=>{for(const l of s.ya)l.onError(r)})})(this,new Ae(le.ABORTED,"Firestore shutting down"))}}function IE(){return new _l(e=>wN(e),lv)}async function tS(e,t){const n=ot(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.wa()&&t.Sa()&&(r=2):(o=new nY,r=t.Sa()?0:1);try{switch(r){case 0:o.pa=await n.onListen(i,!0);break;case 1:o.pa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const s=eS(a,`Initialization of query '${Wl(t.query)}' failed`);return void t.onError(s)}n.queries.set(i,o),o.ya.push(t),t.Da(n.onlineState),o.pa&&t.va(o.pa)&&rS(n)}async function nS(e,t){const n=ot(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const a=o.ya.indexOf(t);a>=0&&(o.ya.splice(a,1),o.ya.length===0?i=t.Sa()?0:1:!o.wa()&&t.Sa()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function iY(e,t){const n=ot(e);let r=!1;for(const i of t){const o=i.query,a=n.queries.get(o);if(a){for(const s of a.ya)s.va(i)&&(r=!0);a.pa=i}}r&&rS(n)}function oY(e,t,n){const r=ot(e),i=r.queries.get(t);if(i)for(const o of i.ya)o.onError(n);r.queries.delete(t)}function rS(e){e.ba.forEach(t=>{t.next()})}var w2,AE;(AE=w2||(w2={})).Ca="default",AE.Cache="cache";class iS{constructor(t,n,r){this.query=t,this.Fa=n,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=r||{}}va(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new zc(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Ma?this.Oa(t)&&(this.Fa.next(t),n=!0):this.Na(t,this.onlineState)&&(this.Ba(t),n=!0),this.xa=t,n}onError(t){this.Fa.error(t)}Da(t){this.onlineState=t;let n=!1;return this.xa&&!this.Ma&&this.Na(this.xa,t)&&(this.Ba(this.xa),n=!0),n}Na(t,n){if(!t.fromCache||!this.Sa())return!0;const r=n!=="Offline";return(!this.options.La||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Oa(t){if(t.docChanges.length>0)return!0;const n=this.xa&&this.xa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ba(t){t=zc.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Ma=!0,this.Fa.next(t)}Sa(){return this.options.source!==w2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(t){this.key=t}}class iM{constructor(t){this.key=t}}class aY{constructor(t,n){this.query=t,this.Ga=n,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=xt(),this.mutatedKeys=xt(),this.Ha=SN(t),this.Ja=new kc(this.Ha)}get Ya(){return this.Ga}Za(t,n){const r=n?n.Xa:new TE,i=n?n.Ja:this.Ja;let o=n?n.mutatedKeys:this.mutatedKeys,a=i,s=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((d,p)=>{const f=i.get(d),h=cv(this.query,p)?p:null,g=!!f&&this.mutatedKeys.has(f.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let v=!1;f&&h?f.data.isEqual(h.data)?g!==m&&(r.track({type:3,doc:h}),v=!0):this.eu(f,h)||(r.track({type:2,doc:h}),v=!0,(l&&this.Ha(h,l)>0||c&&this.Ha(h,c)<0)&&(s=!0)):!f&&h?(r.track({type:0,doc:h}),v=!0):f&&!h&&(r.track({type:1,doc:f}),v=!0,(l||c)&&(s=!0)),v&&(h?(a=a.add(h),o=m?o.add(d):o.delete(d)):(a=a.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ja:a,Xa:r,Cs:s,mutatedKeys:o}}eu(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const o=this.Ja;this.Ja=t.Ja,this.mutatedKeys=t.mutatedKeys;const a=t.Xa.ga();a.sort((d,p)=>function(h,g){const m=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe(20277,{Vt:v})}};return m(h)-m(g)}(d.type,p.type)||this.Ha(d.doc,p.doc)),this.tu(r),i=i!=null&&i;const s=n&&!i?this.nu():[],l=this.ja.size===0&&this.current&&!i?1:0,c=l!==this.za;return this.za=l,a.length!==0||c?{snapshot:new zc(this.query,t.Ja,o,a,t.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ru:s}:{ru:s}}Da(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new TE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(t){return!this.Ga.has(t)&&!!this.Ja.has(t)&&!this.Ja.get(t).hasLocalMutations}tu(t){t&&(t.addedDocuments.forEach(n=>this.Ga=this.Ga.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ga=this.Ga.delete(n)),this.current=t.current)}nu(){if(!this.current)return[];const t=this.ja;this.ja=xt(),this.Ja.forEach(r=>{this.iu(r.key)&&(this.ja=this.ja.add(r.key))});const n=[];return t.forEach(r=>{this.ja.has(r)||n.push(new iM(r))}),this.ja.forEach(r=>{t.has(r)||n.push(new rM(r))}),n}su(t){this.Ga=t.$s,this.ja=xt();const n=this.Za(t.documents);return this.applyChanges(n,!0)}ou(){return zc.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const oS="SyncEngine";class sY{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class lY{constructor(t){this.key=t,this._u=!1}}class cY{constructor(t,n,r,i,o,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.au={},this.uu=new _l(s=>wN(s),lv),this.cu=new Map,this.lu=new Set,this.hu=new sn(Ge.comparator),this.Pu=new Map,this.Tu=new W5,this.Iu={},this.Eu=new Map,this.du=Bc.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function uY(e,t,n=!0){const r=uM(e);let i;const o=r.uu.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ou()):i=await oM(r,t,n,!0),i}async function dY(e,t){const n=uM(e);await oM(n,t,!0,!1)}async function oM(e,t,n,r){const i=await DG(e.localStore,bo(t)),o=i.targetId,a=e.sharedClientState.addLocalQueryTarget(o,n);let s;return r&&(s=await pY(e,t,o,a==="current",i.resumeToken)),e.isPrimaryClient&&n&&QN(e.remoteStore,i),s}async function pY(e,t,n,r,i){e.Ru=(p,f,h)=>async function(m,v,w,S){let C=v.view.Za(w);C.Cs&&(C=await wE(m.localStore,v.query,!1).then(({documents:E})=>v.view.Za(E,C)));const A=S&&S.targetChanges.get(v.targetId),_=S&&S.targetMismatches.get(v.targetId)!=null,I=v.view.applyChanges(C,m.isPrimaryClient,A,_);return DE(m,v.targetId,I.ru),I.snapshot}(e,p,f,h);const o=await wE(e.localStore,t,!0),a=new aY(t,o.$s),s=a.Za(o.documents),l=ch.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),c=a.applyChanges(s,e.isPrimaryClient,l);DE(e,n,c.ru);const d=new sY(t,n,a);return e.uu.set(t,d),e.cu.has(n)?e.cu.get(n).push(t):e.cu.set(n,[t]),c.snapshot}async function hY(e,t,n){const r=ot(e),i=r.uu.get(t),o=r.cu.get(i.targetId);if(o.length>1)return r.cu.set(i.targetId,o.filter(a=>!lv(a,t))),void r.uu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await y2(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&K5(r.remoteStore,i.targetId),S2(r,i.targetId)}).catch(cu)):(S2(r,i.targetId),await y2(r.localStore,i.targetId,!0))}async function fY(e,t){const n=ot(e),r=n.uu.get(t),i=n.cu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),K5(n.remoteStore,r.targetId))}async function gY(e,t,n){const r=SY(e);try{const i=await function(a,s){const l=ot(a),c=Nn.now(),d=s.reduce((h,g)=>h.add(g.key),xt());let p,f;return l.persistence.runTransaction("Locally write mutations","readwrite",h=>{let g=ia(),m=xt();return l.Bs.getEntries(h,d).next(v=>{g=v,g.forEach((w,S)=>{S.isValidDocument()||(m=m.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(h,g)).next(v=>{p=v;const w=[];for(const S of s){const C=DH(S,p.get(S.key).overlayedDocument);C!=null&&w.push(new Ps(S.key,C,hN(C.value.mapValue),Ar.exists(!0)))}return l.mutationQueue.addMutationBatch(h,c,w,s)}).next(v=>{f=v;const w=v.applyToLocalDocumentSet(p,m);return l.documentOverlayCache.saveOverlays(h,v.batchId,w)})}).then(()=>({batchId:f.batchId,changes:_N(p)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(a,s,l){let c=a.Iu[a.currentUser.toKey()];c||(c=new sn(dt)),c=c.insert(s,l),a.Iu[a.currentUser.toKey()]=c}(r,i.batchId,n),await dh(r,i.changes),await mv(r.remoteStore)}catch(i){const o=eS(i,"Failed to persist write");n.reject(o)}}async function aM(e,t){const n=ot(e);try{const r=await IG(n.localStore,t);t.targetChanges.forEach((i,o)=>{const a=n.Pu.get(o);a&&(Nt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a._u=!0:i.modifiedDocuments.size>0?Nt(a._u,14607):i.removedDocuments.size>0&&(Nt(a._u,42227),a._u=!1))}),await dh(n,r,t)}catch(r){await cu(r)}}function PE(e,t,n){const r=ot(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.uu.forEach((o,a)=>{const s=a.view.Da(t);s.snapshot&&i.push(s.snapshot)}),function(a,s){const l=ot(a);l.onlineState=s;let c=!1;l.queries.forEach((d,p)=>{for(const f of p.ya)f.Da(s)&&(c=!0)}),c&&rS(l)}(r.eventManager,t),i.length&&r.au.j_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function mY(e,t,n){const r=ot(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Pu.get(t),o=i&&i.key;if(o){let a=new sn(Ge.comparator);a=a.insert(o,mr.newNoDocument(o,rt.min()));const s=xt().add(o),l=new hv(rt.min(),new Map,new sn(dt),a,s);await aM(r,l),r.hu=r.hu.remove(o),r.Pu.delete(t),aS(r)}else await y2(r.localStore,t,!1).then(()=>S2(r,t,n)).catch(cu)}async function vY(e,t){const n=ot(e),r=t.batch.batchId;try{const i=await TG(n.localStore,t);lM(n,r,null),sM(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await dh(n,i)}catch(i){await cu(i)}}async function xY(e,t,n){const r=ot(e);try{const i=await function(a,s){const l=ot(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,s).next(p=>(Nt(p!==null,37113),d=p.keys(),l.mutationQueue.removeMutationBatch(c,p))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,s)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,t);lM(r,t,n),sM(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await dh(r,i)}catch(i){await cu(i)}}function sM(e,t){(e.Eu.get(t)||[]).forEach(n=>{n.resolve()}),e.Eu.delete(t)}function lM(e,t,n){const r=ot(e);let i=r.Iu[r.currentUser.toKey()];if(i){const o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.Iu[r.currentUser.toKey()]=i}}function S2(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.cu.get(t))e.uu.delete(r),n&&e.au.Vu(r,n);e.cu.delete(t),e.isPrimaryClient&&e.Tu.Hr(t).forEach(r=>{e.Tu.containsKey(r)||cM(e,r)})}function cM(e,t){e.lu.delete(t.path.canonicalString());const n=e.hu.get(t);n!==null&&(K5(e.remoteStore,n),e.hu=e.hu.remove(t),e.Pu.delete(n),aS(e))}function DE(e,t,n){for(const r of n)r instanceof rM?(e.Tu.addReference(r.key,t),yY(e,r)):r instanceof iM?(Re(oS,"Document no longer in limbo: "+r.key),e.Tu.removeReference(r.key,t),e.Tu.containsKey(r.key)||cM(e,r.key)):Qe(19791,{mu:r})}function yY(e,t){const n=t.key,r=n.path.canonicalString();e.hu.get(n)||e.lu.has(r)||(Re(oS,"New document in limbo: "+n),e.lu.add(r),aS(e))}function aS(e){for(;e.lu.size>0&&e.hu.size<e.maxConcurrentLimboResolutions;){const t=e.lu.values().next().value;e.lu.delete(t);const n=new Ge(Qt.fromString(t)),r=e.du.next();e.Pu.set(r,new lY(n)),e.hu=e.hu.insert(n,r),QN(e.remoteStore,new Wa(bo(sv(n.path)),r,"TargetPurposeLimboResolution",iv.le))}}async function dh(e,t,n){const r=ot(e),i=[],o=[],a=[];r.uu.isEmpty()||(r.uu.forEach((s,l)=>{a.push(r.Ru(l,t,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const p=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(c){i.push(c);const p=G5.Rs(l.targetId,c);o.push(p)}}))}),await Promise.all(a),r.au.j_(i),await async function(l,c){const d=ot(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>ue.forEach(c,f=>ue.forEach(f.ds,h=>d.persistence.referenceDelegate.addReference(p,f.targetId,h)).next(()=>ue.forEach(f.As,h=>d.persistence.referenceDelegate.removeReference(p,f.targetId,h)))))}catch(p){if(!uu(p))throw p;Re(Y5,"Failed to update sequence numbers: "+p)}for(const p of c){const f=p.targetId;if(!p.fromCache){const h=d.xs.get(f),g=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(g);d.xs=d.xs.insert(f,m)}}}(r.localStore,o))}async function bY(e,t){const n=ot(e);if(!n.currentUser.isEqual(t)){Re(oS,"User change. New user:",t.toKey());const r=await GN(n.localStore,t);n.currentUser=t,function(o,a){o.Eu.forEach(s=>{s.forEach(l=>{l.reject(new Ae(le.CANCELLED,a))})}),o.Eu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await dh(n,r.ks)}}function wY(e,t){const n=ot(e),r=n.Pu.get(t);if(r&&r._u)return xt().add(r.key);{let i=xt();const o=n.cu.get(t);if(!o)return i;for(const a of o){const s=n.uu.get(a);i=i.unionWith(s.view.Ya)}return i}}function uM(e){const t=ot(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=aM.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=wY.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=mY.bind(null,t),t.au.j_=iY.bind(null,t.eventManager),t.au.Vu=oY.bind(null,t.eventManager),t}function SY(e){const t=ot(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=vY.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=xY.bind(null,t),t}class Wm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=fv(t.databaseInfo.databaseId),this.sharedClientState=this.pu(t),this.persistence=this.yu(t),await this.persistence.start(),this.localStore=this.wu(t),this.gcScheduler=this.Su(t,this.localStore),this.indexBackfillerScheduler=this.bu(t,this.localStore)}Su(t,n){return null}bu(t,n){return null}wu(t){return EG(this.persistence,new CG,t.initialUser,this.serializer)}yu(t){return new HN(H5.fi,this.serializer)}pu(t){return new NG}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wm.provider={build:()=>new Wm};class CY extends Wm{constructor(t){super(),this.cacheSizeBytes=t}Su(t,n){Nt(this.persistence.referenceDelegate instanceof Um,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new lG(r,t.asyncQueue,n)}yu(t){const n=this.cacheSizeBytes!==void 0?Lr.withCacheSize(this.cacheSizeBytes):Lr.DEFAULT;return new HN(r=>Um.fi(r,n),this.serializer)}}class C2{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>PE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=bY.bind(null,this.syncEngine),await tY(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new rY}()}createDatastore(t){const n=fv(t.databaseInfo.databaseId),r=function(o){return new FG(o)}(t.databaseInfo);return function(o,a,s,l){return new jG(o,a,s,l)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,o,a,s){return new qG(r,i,o,a,s)}(this.localStore,this.datastore,t.asyncQueue,n=>PE(this.syncEngine,n,0),function(){return _E.C()?new _E:new MG}())}createSyncEngine(t,n){return function(i,o,a,s,l,c,d){const p=new cY(i,o,a,s,l,c);return d&&(p.Au=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(i){const o=ot(i);Re(vl,"RemoteStore shutting down."),o.Ta.add(5),await uh(o),o.Ea.shutdown(),o.da.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}C2.provider={build:()=>new C2};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.vu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.vu(this.observer.error,t):ra("Uncaught Error in snapshot listener:",t.toString()))}Cu(){this.muted=!0}vu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="FirestoreClient";class _Y{constructor(t,n,r,i,o){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=fr.UNAUTHENTICATED,this.clientId=rN.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async a=>{Re(vs,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Re(vs,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Yo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=eS(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Xx(e,t){e.asyncQueue.verifyOperationInProgress(),Re(vs,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await GN(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function RE(e,t){e.asyncQueue.verifyOperationInProgress();const n=await kY(e);Re(vs,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>EE(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>EE(t.remoteStore,i)),e._onlineComponents=t}async function kY(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Re(vs,"Using user provided OfflineComponentProvider");try{await Xx(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(i){return i.name==="FirebaseError"?i.code===le.FAILED_PRECONDITION||i.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Oc("Error using user provided cache. Falling back to memory cache: "+n),await Xx(e,new Wm)}}else Re(vs,"Using default OfflineComponentProvider"),await Xx(e,new CY(void 0));return e._offlineComponents}async function dM(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Re(vs,"Using user provided OnlineComponentProvider"),await RE(e,e._uninitializedComponentsProvider._online)):(Re(vs,"Using default OnlineComponentProvider"),await RE(e,new C2))),e._onlineComponents}function EY(e){return dM(e).then(t=>t.syncEngine)}async function Hm(e){const t=await dM(e),n=t.eventManager;return n.onListen=uY.bind(null,t.syncEngine),n.onUnlisten=hY.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=dY.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=fY.bind(null,t.syncEngine),n}function TY(e,t,n={}){const r=new Yo;return e.asyncQueue.enqueueAndForget(async()=>function(o,a,s,l,c){const d=new sS({next:f=>{d.Cu(),a.enqueueAndForget(()=>nS(o,p));const h=f.docs.has(s);!h&&f.fromCache?c.reject(new Ae(le.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&f.fromCache&&l&&l.source==="server"?c.reject(new Ae(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),p=new iS(sv(s.path),d,{includeMetadataChanges:!0,La:!0});return tS(o,p)}(await Hm(e),e.asyncQueue,t,n,r)),r.promise}function IY(e,t,n={}){const r=new Yo;return e.asyncQueue.enqueueAndForget(async()=>function(o,a,s,l,c){const d=new sS({next:f=>{d.Cu(),a.enqueueAndForget(()=>nS(o,p)),f.fromCache&&l.source==="server"?c.reject(new Ae(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),p=new iS(s,d,{includeMetadataChanges:!0,La:!0});return tS(o,p)}(await Hm(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hM(e,t,n){if(!n)throw new Ae(le.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function AY(e,t,n,r){if(t===!0&&r===!0)throw new Ae(le.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function ME(e){if(!Ge.isDocumentKey(e))throw new Ae(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function OE(e){if(Ge.isDocumentKey(e))throw new Ae(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function vv(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Qe(12329,{type:typeof e})}function Pr(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ae(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vv(e);throw new Ae(le.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function PY(e,t){if(t<=0)throw new Ae(le.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM="firestore.googleapis.com",$E=!0;class LE{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Ae(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fM,this.ssl=$E}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:$E;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=WN;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<aG)throw new Ae(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}AY("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pM((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Ae(le.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ae(le.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ae(le.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class xv{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new LE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ae(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new LE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new FW;switch(r.type){case"firstParty":return new jW(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ae(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=NE.get(n);r&&(Re("ComponentProvider","Removing Datastore"),NE.delete(n),r.terminate())}(this),Promise.resolve()}}function DY(e,t,n,r={}){var i;e=Pr(e,xv);const o=Es(t),a=e._getSettings(),s=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),l=`${t}:${n}`;o&&(J0(`https://${l}`),Z0("Firestore",!0)),a.host!==fM&&a.host!==l&&Oc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},a),{host:l,ssl:o,emulatorOptions:r});if(!hl(c,s)&&(e._setSettings(c),r.mockUserToken)){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=fr.MOCK_USER;else{d=a8(r.mockUserToken,(i=e._app)===null||i===void 0?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Ae(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new fr(f)}e._authCredentials=new BW(new tN(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new ua(this.firestore,t,this._query)}}class xr{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new is(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new xr(this.firestore,t,this._key)}}class is extends ua{constructor(t,n,r){super(t,n,sv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new xr(this.firestore,null,new Ge(t))}withConverter(t){return new is(this.firestore,t,this._path)}}function se(e,t,...n){if(e=Vt(e),hM("collection","path",t),e instanceof xv){const r=Qt.fromString(t,...n);return OE(r),new is(e,null,r)}{if(!(e instanceof xr||e instanceof is))throw new Ae(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Qt.fromString(t,...n));return OE(r),new is(e.firestore,null,r)}}function Ie(e,t,...n){if(e=Vt(e),arguments.length===1&&(t=rN.newId()),hM("doc","path",t),e instanceof xv){const r=Qt.fromString(t,...n);return ME(r),new xr(e,null,new Ge(r))}{if(!(e instanceof xr||e instanceof is))throw new Ae(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Qt.fromString(t,...n));return ME(r),new xr(e.firestore,e instanceof is?e.converter:null,new Ge(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="AsyncQueue";class BE{constructor(t=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new KN(this,"async_queue_retry"),this.ec=()=>{const r=Kx();r&&Re(FE,"Visibility state changed to "+r.visibilityState),this.C_.p_()},this.tc=t;const n=Kx();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.nc(),this.rc(t)}enterRestrictedMode(t){if(!this.ju){this.ju=!0,this.Zu=t||!1;const n=Kx();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ec)}}enqueue(t){if(this.nc(),this.ju)return new Promise(()=>{});const n=new Yo;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.zu.push(t),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(t){if(!uu(t))throw t;Re(FE,"Operation failed with retryable error: "+t)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(t){const n=this.tc.then(()=>(this.Yu=!0,t().catch(r=>{throw this.Ju=r,this.Yu=!1,ra("INTERNAL UNHANDLED ERROR: ",zE(r)),r}).then(r=>(this.Yu=!1,r))));return this.tc=n,n}enqueueAfterDelay(t,n,r){this.nc(),this.Xu.indexOf(t)>-1&&(n=0);const i=Z5.createAndSchedule(this,t,n,r,o=>this.oc(o));return this.Hu.push(i),i}nc(){this.Ju&&Qe(47125,{_c:zE(this.Ju)})}verifyOperationInProgress(){}async ac(){let t;do t=this.tc,await t;while(t!==this.tc)}uc(t){for(const n of this.Hu)if(n.timerId===t)return!0;return!1}cc(t){return this.ac().then(()=>{this.Hu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Hu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.ac()})}lc(t){this.Xu.push(t)}oc(t){const n=this.Hu.indexOf(t);this.Hu.splice(n,1)}}function zE(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(e){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(e,["next","error","complete"])}class To extends xv{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=new BE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new BE(t),this._firestoreClient=void 0,await t}}}function RY(e,t){const n=typeof e=="object"?e:ev(),r=typeof e=="string"?e:Fm,i=rh(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=S5("firestore");o&&DY(i,...o)}return i}function ph(e){if(e._terminated)throw new Ae(le.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||NY(e),e._firestoreClient}function NY(e){var t,n,r;const i=e._freezeSettings(),o=function(s,l,c,d){return new rH(s,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,pM(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new _Y(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(s){const l=s==null?void 0:s._online.build();return{_offline:s==null?void 0:s._offline.build(l),_online:l}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Vc(or.fromBase64String(t))}catch(n){throw new Ae(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Vc(or.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Ae(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new er(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Ae(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Ae(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return dt(this._lat,t._lat)||dt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MY=/^__.*__$/;class OY{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Ps(t,this.data,this.fieldMask,n,this.fieldTransforms):new lh(t,this.data,n,this.fieldTransforms)}}class gM{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Ps(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function mM(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe(40011,{hc:e})}}class uS{constructor(t,n,r,i,o,a){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Pc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(t){return new uS(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Tc({path:r,Ec:!1});return i.dc(t),i}Ac(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Tc({path:r,Ec:!1});return i.Pc(),i}Rc(t){return this.Tc({path:void 0,Ec:!0})}Vc(t){return Gm(t,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Pc(){if(this.path)for(let t=0;t<this.path.length;t++)this.dc(this.path.get(t))}dc(t){if(t.length===0)throw this.Vc("Document fields must not be empty");if(mM(this.hc)&&MY.test(t))throw this.Vc('Document fields cannot begin and end with "__"')}}class $Y{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||fv(t)}gc(t,n,r,i=!1){return new uS({hc:t,methodName:n,fc:r,path:er.emptyPath(),Ec:!1,mc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gh(e){const t=e._freezeSettings(),n=fv(e._databaseId);return new $Y(e._databaseId,!!t.ignoreUndefinedProperties,n)}function dS(e,t,n,r,i,o={}){const a=e.gc(o.merge||o.mergeFields?2:0,t,n,i);fS("Data must be an object, but it was:",a,r);const s=yM(r,a);let l,c;if(o.merge)l=new ti(a.fieldMask),c=a.fieldTransforms;else if(o.mergeFields){const d=[];for(const p of o.mergeFields){const f=_2(t,p,n);if(!a.contains(f))throw new Ae(le.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);wM(d,f)||d.push(f)}l=new ti(d),c=a.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,c=a.fieldTransforms;return new OY(new zr(s),l,c)}class yv extends fh{_toFieldTransform(t){if(t.hc!==2)throw t.hc===1?t.Vc(`${this._methodName}() can only appear at the top level of your update data`):t.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof yv}}class pS extends fh{_toFieldTransform(t){return new RN(t.path,new Tp)}isEqual(t){return t instanceof pS}}class hS extends fh{constructor(t,n){super(t),this.wc=n}_toFieldTransform(t){const n=new Pp(t.serializer,TN(t.serializer,this.wc));return new RN(t.path,n)}isEqual(t){return t instanceof hS&&this.wc===t.wc}}function vM(e,t,n,r){const i=e.gc(1,t,n);fS("Data must be an object, but it was:",i,r);const o=[],a=zr.empty();As(r,(l,c)=>{const d=gS(t,l,n);c=Vt(c);const p=i.Ac(d);if(c instanceof yv)o.push(d);else{const f=mh(c,p);f!=null&&(o.push(d),a.set(d,f))}});const s=new ti(o);return new gM(a,s,i.fieldTransforms)}function xM(e,t,n,r,i,o){const a=e.gc(1,t,n),s=[_2(t,r,n)],l=[i];if(o.length%2!=0)throw new Ae(le.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<o.length;f+=2)s.push(_2(t,o[f])),l.push(o[f+1]);const c=[],d=zr.empty();for(let f=s.length-1;f>=0;--f)if(!wM(c,s[f])){const h=s[f];let g=l[f];g=Vt(g);const m=a.Ac(h);if(g instanceof yv)c.push(h);else{const v=mh(g,m);v!=null&&(c.push(h),d.set(h,v))}}const p=new ti(c);return new gM(d,p,a.fieldTransforms)}function LY(e,t,n,r=!1){return mh(n,e.gc(r?4:3,t))}function mh(e,t){if(bM(e=Vt(e)))return fS("Unsupported field value:",t,e),yM(e,t);if(e instanceof fh)return function(r,i){if(!mM(i.hc))throw i.Vc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Vc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Ec&&t.hc!==4)throw t.Vc("Nested arrays are not supported");return function(r,i){const o=[];let a=0;for(const s of r){let l=mh(s,i.Rc(a));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),a++}return{arrayValue:{values:o}}}(e,t)}return function(r,i){if((r=Vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TN(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Nn.fromDate(r);return{timestampValue:jm(i.serializer,o)}}if(r instanceof Nn){const o=new Nn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jm(i.serializer,o)}}if(r instanceof lS)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vc)return{bytesValue:FN(i.serializer,r._byteString)};if(r instanceof xr){const o=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw i.Vc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:q5(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof cS)return function(a,s){return{mapValue:{fields:{[dN]:{stringValue:pN},[Bm]:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw s.Vc("VectorValues must only contain numeric values.");return V5(s.serializer,c)})}}}}}}(r,i);throw i.Vc(`Unsupported field value: ${vv(r)}`)}(e,t)}function yM(e,t){const n={};return oN(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):As(e,(r,i)=>{const o=mh(i,t.Ic(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function bM(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Nn||e instanceof lS||e instanceof Vc||e instanceof xr||e instanceof fh||e instanceof cS)}function fS(e,t,n){if(!bM(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=vv(n);throw r==="an object"?t.Vc(e+" a custom object"):t.Vc(e+" "+r)}}function _2(e,t,n){if((t=Vt(t))instanceof hh)return t._internalPath;if(typeof t=="string")return gS(e,t);throw Gm("Field path arguments must be of type string or ",e,!1,void 0,n)}const FY=new RegExp("[~\\*/\\[\\]]");function gS(e,t,n){if(t.search(FY)>=0)throw Gm(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new hh(...t.split("."))._internalPath}catch{throw Gm(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Gm(e,t,n,r,i){const o=r&&!r.isEmpty(),a=i!==void 0;let s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new Ae(le.INVALID_ARGUMENT,s+e+l)}function wM(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(t,n,r,i,o){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new xr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new BY(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(bv("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class BY extends SM{data(){return super.data()}}function bv(e,t){return typeof t=="string"?gS(e,t):t instanceof hh?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Ae(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mS{}class vS extends mS{}function tt(e,t,...n){let r=[];t instanceof mS&&r.push(t),r=r.concat(n),function(o){const a=o.filter(l=>l instanceof xS).length,s=o.filter(l=>l instanceof wv).length;if(a>1||a>0&&s>0)throw new Ae(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class wv extends vS{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new wv(t,n,r)}_apply(t){const n=this._parse(t);return _M(t._query,n),new ua(t.firestore,t.converter,f2(t._query,n))}_parse(t){const n=gh(t.firestore);return function(o,a,s,l,c,d,p){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Ae(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){UE(p,d);const g=[];for(const m of p)g.push(jE(l,o,m));f={arrayValue:{values:g}}}else f=jE(l,o,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||UE(p,d),f=LY(s,a,p,d==="in"||d==="not-in");return Tn.create(c,d,f)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function tn(e,t,n){const r=t,i=bv("where",e);return wv._create(i,r,n)}class xS extends mS{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new xS(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:eo.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,o){let a=i;const s=o.getFlattenedFilters();for(const l of s)_M(a,l),a=f2(a,l)}(t._query,n),new ua(t.firestore,t.converter,f2(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class yS extends vS{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new yS(t,n)}_apply(t){const n=function(i,o,a){if(i.startAt!==null)throw new Ae(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ae(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ep(o,a)}(t._query,this._field,this._direction);return new ua(t.firestore,t.converter,function(i,o){const a=i.explicitOrderBy.concat([o]);return new du(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function Ot(e,t="asc"){const n=t,r=bv("orderBy",e);return yS._create(r,n)}class bS extends vS{constructor(t,n,r){super(),this.type=t,this._limit=n,this._limitType=r}static _create(t,n,r){return new bS(t,n,r)}_apply(t){return new ua(t.firestore,t.converter,Vm(t._query,this._limit,this._limitType))}}function wS(e){return PY("limit",e),bS._create("limit",e,"F")}function jE(e,t,n){if(typeof(n=Vt(n))=="string"){if(n==="")throw new Ae(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bN(t)&&n.indexOf("/")!==-1)throw new Ae(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Qt.fromString(n));if(!Ge.isDocumentKey(r))throw new Ae(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return nE(e,new Ge(r))}if(n instanceof xr)return nE(e,n._key);throw new Ae(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vv(n)}.`)}function UE(e,t){if(!Array.isArray(e)||e.length===0)throw new Ae(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function _M(e,t){const n=function(i,o){for(const a of i)for(const s of a.getFlattenedFilters())if(o.indexOf(s.op)>=0)return s.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Ae(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ae(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class zY{convertValue(t,n="none"){switch(gs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return bn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(fs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Qe(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return As(t,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(t){var n,r,i;const o=(i=(r=(n=t.fields)===null||n===void 0?void 0:n[Bm].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>bn(a.doubleValue));return new cS(o)}convertGeoPoint(t){return new lS(bn(t.latitude),bn(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=av(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Cp(t));default:return null}}convertTimestamp(t){const n=hs(t);return new Nn(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Qt.fromString(t);Nt(qN(r),9688,{name:t});const i=new _p(r.get(1),r.get(3)),o=new Ge(r.popFirst(5));return i.isEqual(n)||ra(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class kM extends SM{constructor(t,n,r,i,o,a){super(t,n,r,i,a),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Gg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(bv("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Gg extends kM{data(t={}){return super.data(t)}}class EM{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new yd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new Gg(this._firestore,this._userDataWriter,r.key,r,new yd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ae(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(s=>{const l=new Gg(i._firestore,i._userDataWriter,s.doc.key,s.doc,new yd(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);return s.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(s=>o||s.type!==3).map(s=>{const l=new Gg(i._firestore,i._userDataWriter,s.doc.key,s.doc,new yd(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return s.type!==0&&(c=a.indexOf(s.doc.key),a=a.delete(s.doc.key)),s.type!==1&&(a=a.add(s.doc),d=a.indexOf(s.doc.key)),{type:VY(s.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function VY(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qe(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(e){e=Pr(e,xr);const t=Pr(e.firestore,To);return TY(ph(t),e._key).then(n=>IM(t,e,n))}class CS extends zY{constructor(t){super(),this.firestore=t}convertBytes(t){return new Vc(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new xr(this.firestore,null,n)}}function be(e){e=Pr(e,ua);const t=Pr(e.firestore,To),n=ph(t),r=new CS(t);return CM(e._query),IY(n,e._query).then(i=>new EM(t,r,e,i))}function zt(e,t,n){e=Pr(e,xr);const r=Pr(e.firestore,To),i=SS(e.converter,t,n);return vh(r,[dS(gh(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Ar.none())])}function fn(e,t,n,...r){e=Pr(e,xr);const i=Pr(e.firestore,To),o=gh(i);let a;return a=typeof(t=Vt(t))=="string"||t instanceof hh?xM(o,"updateDoc",e._key,t,n,r):vM(o,"updateDoc",e._key,t),vh(i,[a.toMutation(e._key,Ar.exists(!0))])}function si(e){return vh(Pr(e.firestore,To),[new pv(e._key,Ar.none())])}function tr(e,t){const n=Pr(e.firestore,To),r=Ie(e),i=SS(e.converter,t);return vh(n,[dS(gh(e.firestore),"addDoc",r._key,i,e.converter!==null,{}).toMutation(r._key,Ar.exists(!1))]).then(()=>r)}function TM(e,...t){var n,r,i;e=Vt(e);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof t[a]!="object"||VE(t[a])||(o=t[a],a++);const s={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(VE(t[a])){const p=t[a];t[a]=(n=p.next)===null||n===void 0?void 0:n.bind(p),t[a+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),t[a+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let l,c,d;if(e instanceof xr)c=Pr(e.firestore,To),d=sv(e._key.path),l={next:p=>{t[a]&&t[a](IM(c,e,p))},error:t[a+1],complete:t[a+2]};else{const p=Pr(e,ua);c=Pr(p.firestore,To),d=p._query;const f=new CS(c);l={next:h=>{t[a]&&t[a](new EM(c,f,p,h))},error:t[a+1],complete:t[a+2]},CM(e._query)}return function(f,h,g,m){const v=new sS(m),w=new iS(h,v,g);return f.asyncQueue.enqueueAndForget(async()=>tS(await Hm(f),w)),()=>{v.Cu(),f.asyncQueue.enqueueAndForget(async()=>nS(await Hm(f),w))}}(ph(c),d,s,l)}function vh(e,t){return function(r,i){const o=new Yo;return r.asyncQueue.enqueueAndForget(async()=>gY(await EY(r),i,o)),o.promise}(ph(e),t)}function IM(e,t,n){const r=n.docs.get(t._key),i=new CS(e);return new kM(e,i,t._key,r,new yd(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jY{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=gh(t)}set(t,n,r){this._verifyNotCommitted();const i=Qx(t,this._firestore),o=SS(i.converter,n,r),a=dS(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,Ar.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const o=Qx(t,this._firestore);let a;return a=typeof(n=Vt(n))=="string"||n instanceof hh?xM(this._dataReader,"WriteBatch.update",o._key,n,r,i):vM(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(a.toMutation(o._key,Ar.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=Qx(t,this._firestore);return this._mutations=this._mutations.concat(new pv(n._key,Ar.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qx(e,t){if((e=Vt(e)).firestore!==t)throw new Ae(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function At(){return new pS("serverTimestamp")}function Ym(e){return new hS("increment",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(e){return ph(e=Pr(e,To)),new jY(e,t=>vh(e,t))}(function(t,n=!0){(function(i){lu=i})(Sl),ds(new ea("firestore",(r,{instanceIdentifier:i,options:o})=>{const a=r.getProvider("app").getImmediate(),s=new To(new zW(r.getProvider("auth-internal")),new UW(a,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ae(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _p(c.options.projectId,d)}(a,i),a);return o=Object.assign({useFetchStreams:n},o),s._setSettings(o),s},"PUBLIC").setMultipleInstances(!0)),Ni(qk,Wk,t),Ni(qk,Wk,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM="firebasestorage.googleapis.com",PM="storageBucket",UY=2*60*1e3,qY=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn extends to{constructor(t,n,r=0){super(Jx(t),`Firebase Storage: ${n} (${Jx(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mn.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Jx(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var gn;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(gn||(gn={}));function Jx(e){return"storage/"+e}function _S(){const e="An unknown error occurred, please check the error payload for server response.";return new mn(gn.UNKNOWN,e)}function WY(e){return new mn(gn.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function HY(e){return new mn(gn.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function GY(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new mn(gn.UNAUTHENTICATED,e)}function YY(){return new mn(gn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function KY(e){return new mn(gn.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function XY(){return new mn(gn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function QY(){return new mn(gn.CANCELED,"User canceled the upload/download.")}function JY(e){return new mn(gn.INVALID_URL,"Invalid URL '"+e+"'.")}function ZY(e){return new mn(gn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function eK(){return new mn(gn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+PM+"' property when initializing the app?")}function tK(){return new mn(gn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function nK(){return new mn(gn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function rK(e){return new mn(gn.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function k2(e){return new mn(gn.INVALID_ARGUMENT,e)}function DM(){return new mn(gn.APP_DELETED,"The Firebase app was deleted.")}function iK(e){return new mn(gn.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function zd(e,t){return new mn(gn.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Lu(e){throw new mn(gn.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=ni.makeFromUrl(t,n)}catch{return new ni(t,"")}if(r.path==="")return r;throw ZY(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(A){A.path.charAt(A.path.length-1)==="/"&&(A.path_=A.path_.slice(0,-1))}const a="(/(.*))?$",s=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function c(A){A.path_=decodeURIComponent(A.path)}const d="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",h=new RegExp(`^https?://${p}/${d}/b/${i}/o${f}`,"i"),g={bucket:1,path:3},m=n===AM?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",w=new RegExp(`^https?://${m}/${i}/${v}`,"i"),C=[{regex:s,indices:l,postModify:o},{regex:h,indices:g,postModify:c},{regex:w,indices:{bucket:1,path:2},postModify:c}];for(let A=0;A<C.length;A++){const _=C[A],I=_.regex.exec(t);if(I){const E=I[_.indices.bucket];let k=I[_.indices.path];k||(k=""),r=new ni(E,k),_.postModify(r);break}}if(r==null)throw JY(t);return r}}class oK{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aK(e,t,n){let r=1,i=null,o=null,a=!1,s=0;function l(){return s===2}let c=!1;function d(...v){c||(c=!0,t.apply(null,v))}function p(v){i=setTimeout(()=>{i=null,e(h,l())},v)}function f(){o&&clearTimeout(o)}function h(v,...w){if(c){f();return}if(v){f(),d.call(null,v,...w);return}if(l()||a){f(),d.call(null,v,...w);return}r<64&&(r*=2);let C;s===1?(s=2,C=0):C=(r+Math.random())*1e3,p(C)}let g=!1;function m(v){g||(g=!0,f(),!c&&(i!==null?(v||(s=2),clearTimeout(i),p(0)):v||(s=1)))}return p(0),o=setTimeout(()=>{a=!0,m(!0)},n),m}function sK(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lK(e){return e!==void 0}function cK(e){return typeof e=="object"&&!Array.isArray(e)}function kS(e){return typeof e=="string"||e instanceof String}function qE(e){return ES()&&e instanceof Blob}function ES(){return typeof Blob<"u"}function WE(e,t,n,r){if(r<t)throw k2(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw k2(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function RM(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var rl;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(rl||(rl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uK(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,o=t.indexOf(e)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dK{constructor(t,n,r,i,o,a,s,l,c,d,p,f=!0,h=!1){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=s,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=p,this.retry=f,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,m)=>{this.resolve_=g,this.reject_=m,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new kf(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const a=s=>{const l=s.loaded,c=s.lengthComputable?s.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;const s=o.getErrorCode()===rl.NO_ERROR,l=o.getStatus();if(!s||uK(l,this.additionalRetryCodes_)&&this.retry){const d=o.getErrorCode()===rl.ABORT;r(!1,new kf(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new kf(c,o))})},n=(r,i)=>{const o=this.resolve_,a=this.reject_,s=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(s,s.getResponse());lK(l)?o(l):o()}catch(l){a(l)}else if(s!==null){const l=_S();l.serverResponse=s.getErrorText(),this.errorCallback_?a(this.errorCallback_(s,l)):a(l)}else if(i.canceled){const l=this.appDelete_?DM():QY();a(l)}else{const l=XY();a(l)}};this.canceled_?n(!1,new kf(!1,null,!0)):this.backoffId_=aK(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&sK(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class kf{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function pK(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function hK(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function fK(e,t){t&&(e["X-Firebase-GMPID"]=t)}function gK(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function mK(e,t,n,r,i,o,a=!0,s=!1){const l=RM(e.urlParams),c=e.url+l,d=Object.assign({},e.headers);return fK(d,t),pK(d,n),hK(d,o),gK(d,r),new dK(c,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,a,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vK(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function xK(...e){const t=vK();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(ES())return new Blob(e);throw new mn(gn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function yK(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bK(e){if(typeof atob>"u")throw rK("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Zx{constructor(t,n){this.data=t,this.contentType=n||null}}function wK(e,t){switch(e){case ho.RAW:return new Zx(NM(t));case ho.BASE64:case ho.BASE64URL:return new Zx(MM(e,t));case ho.DATA_URL:return new Zx(CK(t),_K(t))}throw _S()}function NM(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const o=r,a=e.charCodeAt(++n);r=65536|(o&1023)<<10|a&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function SK(e){let t;try{t=decodeURIComponent(e)}catch{throw zd(ho.DATA_URL,"Malformed data URL.")}return NM(t)}function MM(e,t){switch(e){case ho.BASE64:{const i=t.indexOf("-")!==-1,o=t.indexOf("_")!==-1;if(i||o)throw zd(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ho.BASE64URL:{const i=t.indexOf("+")!==-1,o=t.indexOf("/")!==-1;if(i||o)throw zd(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=bK(t)}catch(i){throw i.message.includes("polyfill")?i:zd(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class OM{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw zd(ho.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=kK(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function CK(e){const t=new OM(e);return t.base64?MM(ho.BASE64,t.rest):SK(t.rest)}function _K(e){return new OM(e).contentType}function kK(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(t,n){let r=0,i="";qE(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(qE(this.data_)){const r=this.data_,i=yK(r,t,n);return i===null?null:new Va(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Va(r,!0)}}static getBlob(...t){if(ES()){const n=t.map(r=>r instanceof Va?r.data_:r);return new Va(xK.apply(null,n))}else{const n=t.map(a=>kS(a)?wK(ho.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(a=>{for(let s=0;s<a.length;s++)i[o++]=a[s]}),new Va(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(e){let t;try{t=JSON.parse(e)}catch{return null}return cK(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EK(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function TK(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function LM(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IK(e,t){return t}class Sr{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||IK}}let Ef=null;function AK(e){return!kS(e)||e.length<2?e:LM(e)}function FM(){if(Ef)return Ef;const e=[];e.push(new Sr("bucket")),e.push(new Sr("generation")),e.push(new Sr("metageneration")),e.push(new Sr("name","fullPath",!0));function t(o,a){return AK(a)}const n=new Sr("name");n.xform=t,e.push(n);function r(o,a){return a!==void 0?Number(a):a}const i=new Sr("size");return i.xform=r,e.push(i),e.push(new Sr("timeCreated")),e.push(new Sr("updated")),e.push(new Sr("md5Hash",null,!0)),e.push(new Sr("cacheControl",null,!0)),e.push(new Sr("contentDisposition",null,!0)),e.push(new Sr("contentEncoding",null,!0)),e.push(new Sr("contentLanguage",null,!0)),e.push(new Sr("contentType",null,!0)),e.push(new Sr("metadata","customMetadata",!0)),Ef=e,Ef}function PK(e,t){function n(){const r=e.bucket,i=e.fullPath,o=new ni(r,i);return t._makeStorageReference(o)}Object.defineProperty(e,"ref",{get:n})}function DK(e,t,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const a=n[o];r[a.local]=a.xform(r,t[a.server])}return PK(r,e),r}function BM(e,t,n){const r=$M(t);return r===null?null:DK(e,r,n)}function RK(e,t,n,r){const i=$M(t);if(i===null||!kS(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const a=encodeURIComponent;return o.split(",").map(c=>{const d=e.bucket,p=e.fullPath,f="/b/"+a(d)+"/o/"+a(p),h=TS(f,n,r),g=RM({alt:"media",token:c});return h+g})[0]}function NK(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}class zM{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(e){if(!e)throw _S()}function MK(e,t){function n(r,i){const o=BM(e,i,t);return VM(o!==null),o}return n}function OK(e,t){function n(r,i){const o=BM(e,i,t);return VM(o!==null),RK(o,i,e.host,e._protocol)}return n}function jM(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=YY():i=GY():n.getStatus()===402?i=HY(e.bucket):n.getStatus()===403?i=KY(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function $K(e){const t=jM(e);function n(r,i){let o=t(r,i);return r.getStatus()===404&&(o=WY(e.path)),o.serverResponse=i.serverResponse,o}return n}function LK(e,t,n){const r=t.fullServerUrl(),i=TS(r,e.host,e._protocol),o="GET",a=e.maxOperationRetryTime,s=new zM(i,o,OK(e,n),a);return s.errorHandler=$K(t),s}function FK(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function BK(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=FK(null,t)),r}function zK(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function s(){let C="";for(let A=0;A<2;A++)C=C+Math.random().toString().slice(2);return C}const l=s();a["Content-Type"]="multipart/related; boundary="+l;const c=BK(t,r,i),d=NK(c,n),p="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",h=Va.getBlob(p,r,f);if(h===null)throw tK();const g={name:c.fullPath},m=TS(o,e.host,e._protocol),v="POST",w=e.maxUploadRetryTime,S=new zM(m,v,MK(e,n),w);return S.urlParams=g,S.headers=a,S.body=h.uploadData(),S.errorHandler=jM(t),S}class VK{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=rl.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=rl.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=rl.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i,o){if(this.sent_)throw Lu("cannot .send() more than once");if(Es(t)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,t,!0),o!==void 0)for(const a in o)o.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,o[a].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Lu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Lu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Lu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Lu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class jK extends VK{initXhr(){this.xhr_.responseType="text"}}function UM(){return new jK}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(t,n){this._service=t,n instanceof ni?this._location=n:this._location=ni.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new xl(t,n)}get root(){const t=new ni(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return LM(this._location.path)}get storage(){return this._service}get parent(){const t=EK(this._location.path);if(t===null)return null;const n=new ni(this._location.bucket,t);return new xl(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw iK(t)}}function UK(e,t,n){e._throwIfRoot("uploadBytes");const r=zK(e.storage,e._location,FM(),new Va(t,!0),n);return e.storage.makeRequestWithTokens(r,UM).then(i=>({metadata:i,ref:e}))}function qK(e){e._throwIfRoot("getDownloadURL");const t=LK(e.storage,e._location,FM());return e.storage.makeRequestWithTokens(t,UM).then(n=>{if(n===null)throw nK();return n})}function WK(e,t){const n=TK(e._location.path,t),r=new ni(e._location.bucket,n);return new xl(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HK(e){return/^[A-Za-z]+:\/\//.test(e)}function GK(e,t){return new xl(e,t)}function qM(e,t){if(e instanceof IS){const n=e;if(n._bucket==null)throw eK();const r=new xl(n,n._bucket);return t!=null?qM(r,t):r}else return t!==void 0?WK(e,t):e}function YK(e,t){if(t&&HK(t)){if(e instanceof IS)return GK(e,t);throw k2("To use ref(service, url), the first argument must be a Storage instance.")}else return qM(e,t)}function HE(e,t){const n=t==null?void 0:t[PM];return n==null?null:ni.makeFromBucketSpec(n,e)}function KK(e,t,n,r={}){e.host=`${t}:${n}`;const i=Es(t);i&&(J0(`https://${e.host}`),Z0("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(e._overrideAuthToken=typeof o=="string"?o:a8(o,e.app.options.projectId))}class IS{constructor(t,n,r,i,o,a=!1){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=a,this._bucket=null,this._host=AM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=UY,this._maxUploadRetryTime=qY,this._requests=new Set,i!=null?this._bucket=ni.makeFromBucketSpec(i,this._host):this._bucket=HE(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=ni.makeFromBucketSpec(this._url,t):this._bucket=HE(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){WE("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){WE("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Br(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new xl(this,t)}_makeRequest(t,n,r,i,o=!0){if(this._deleted)return new oK(DM());{const a=mK(t,this._appId,r,i,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const GE="@firebase/storage",YE="0.13.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM="storage";function HM(e,t,n){return e=Vt(e),UK(e,t,n)}function GM(e){return e=Vt(e),qK(e)}function YM(e,t){return e=Vt(e),YK(e,t)}function XK(e=ev(),t){e=Vt(e);const r=rh(e,WM).getImmediate({identifier:t}),i=S5("storage");return i&&QK(r,...i),r}function QK(e,t,n,r={}){KK(e,t,n,r)}function JK(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new IS(n,r,i,t,Sl)}function ZK(){ds(new ea(WM,JK,"PUBLIC").setMultipleInstances(!0)),Ni(GE,YE,""),Ni(GE,YE,"esm2017")}ZK();const eX={apiKey:"AIzaSyADkfhMIRl1_Gq7XA7o6Zr04qwclSqc48A",authDomain:"liquidms-5018a.firebaseapp.com",projectId:"liquidms-5018a",storageBucket:"liquidms-5018a.appspot.com",messagingSenderId:"250188251229",appId:"1:250188251229:web:d05cfe2139641b9bdb4db4",measurementId:"G-LLKLTNG998"},AS=c8(eX),Fi=MW(AS),U=RY(AS),KM=XK(AS),XM=D.createContext(),gi=()=>{const e=D.useContext(XM);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},tX=({children:e})=>{const[t,n]=D.useState(null),[r,i]=D.useState(!0);D.useEffect(()=>$8(Fi,l=>{n(l),i(!1)}),[]);const a={currentUser:t,logout:async()=>{try{await L8(Fi)}catch(s){throw console.error("登出失敗:",s),s}}};return u(XM.Provider,{value:a,children:!r&&e})},QM=D.createContext(),Bi=()=>{const e=D.useContext(QM);if(!e)throw new Error("useUser must be used within a UserProvider");return e},nX=({children:e})=>{const{currentUser:t}=gi(),[n,r]=D.useState(null),[i,o]=D.useState(null),[a,s]=D.useState(!0),l=async()=>{if(!t){r(null),o(null),s(!1);return}try{const p=await In(Ie(U,"users",t.uid));if(p.exists()){const f=p.data();r(f.role),o(f)}else r(null),o(null)}catch(p){console.error("Error fetching user data:",p),r(null),o(null)}finally{s(!1)}},c=async()=>(s(!0),await l(),i);D.useEffect(()=>{l()},[t]);const d={userRole:n,userData:i,loading:a,refreshUserData:c};return u(QM.Provider,{value:d,children:!a&&e})},rX={primary:"#3A5199",primaryLight:"#5B71B9",secondary:"#61B8C2",dark:"#252A34",light:"#F6F9FC",gray:"#e0e0e0",grayLight:"#f5f5f5",text:"#333333",success:"#4CAF50",warning:"#FFC107",danger:"#F44336",backgroundColor:"#F6F9FC",cardBg:"white",cardBorder:"#f5f5f5",textColor:"#333333",textSecondary:"#666",iconBg:"#f5f5f5",inputBg:"white",headerBg:"#3A5199",shadowColor:"rgba(0, 0, 0, 0.1)",darkTheme:!1},iX={primary:"#4B67BB",primaryLight:"#6A81C9",secondary:"#61B8C2",dark:"#252A34",light:"#121212",gray:"#444",grayLight:"#2A2A2A",text:"#E0E0E0",success:"#4CAF50",warning:"#FFC107",danger:"#F44336",backgroundColor:"#121212",cardBg:"#1E1E1E",cardBorder:"#333",textColor:"#E0E0E0",textSecondary:"#AAAAAA",iconBg:"#333",inputBg:"#2A2A2A",headerBg:"#252A34",shadowColor:"rgba(0, 0, 0, 0.3)",darkTheme:!0,glassBg:"linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(124, 58, 237, 0.08))",glassBorder:"rgba(255, 255, 255, 0.08)",glassBoxShadow:"0 4px 24px rgba(0, 0, 0, 0.4), inset 0 0 1px 1px rgba(255, 255, 255, 0.05)",glassBlur:"20px",gradientPrimary:"linear-gradient(135deg, #7C3AED, #3B82F6)",gradientSecondary:"linear-gradient(135deg, #3B82F6, #60A5FA)",gradientText:"linear-gradient(to right, #fff, #ccc)",glowPrimary:"0 0 15px rgba(124, 58, 237, 0.6)",glowSecondary:"0 0 15px rgba(59, 130, 246, 0.6)",radialGradient:`
    radial-gradient(circle at 20% 20%, rgba(124, 58, 237, 0.15) 0%, transparent 50%),
    radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.15) 0%, transparent 50%)
  `,textShadow:"0 2px 4px rgba(0, 0, 0, 0.3)",animationDuration:"15s"},JM=D.createContext(),El=()=>D.useContext(JM),oX=({children:e})=>{const[t,n]=D.useState(()=>localStorage.getItem("darkMode")==="true"),r=()=>{n(o=>!o)};D.useEffect(()=>{localStorage.setItem("darkMode",t),t?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")},[t]);const i=t?iX:rX;return u(JM.Provider,{value:{darkMode:t,toggleDarkMode:r,theme:i},children:u(MB,{theme:i,children:e})})},aX={name:"15diqo",styles:":root{font-family:'Noto Sans TC',sans-serif;--primary:#3A5199;--primary-light:#5B71B9;--secondary:#61B8C2;--dark:#252A34;--light:#F6F9FC;--gray:#e0e0e0;--gray-light:#f5f5f5;--text:#333333;--success:#4CAF50;--warning:#FFC107;--danger:#F44336;--background-color:#F6F9FC;--card-bg:white;--card-border:#f5f5f5;--text-color:#333333;--text-secondary:#666;--icon-bg:#f5f5f5;--input-bg:white;--header-bg:#3A5199;--shadow-color:rgba(0,0,0,0.1);}body.dark-mode{--primary:#4B67BB;--primary-light:#6A81C9;--background-color:#121212;--card-bg:#1E1E1E;--card-border:#333;--text-color:#E0E0E0;--text-secondary:#AAAAAA;--icon-bg:#333;--gray-light:#2A2A2A;--gray:#444;--input-bg:#2A2A2A;--header-bg:#252A34;--shadow-color:rgba(0,0,0,0.3);}html,body{margin:0;padding:0;font-family:'Noto Sans TC',sans-serif;background:var(--background-color);color:var(--text-color);line-height:1.6;-webkit-font-smoothing:antialiased;min-height:100vh;transition:background-color 0.3s,color 0.3s;}*,*::before,*::after{box-sizing:border-box;}a{color:var(--primary);text-decoration:none;transition:color 0.2s;}a:hover{text-decoration:underline;}button,input,select,textarea{font-family:inherit;font-size:inherit;outline:none;}.container{width:100%;padding:0 20px;margin:0 auto;max-width:430px;}.theme-transition{transition:background-color 0.3s,color 0.3s,border-color 0.3s,box-shadow 0.3s;}@media (max-width: 768px){.container{padding:0 15px;}}::-webkit-scrollbar{width:8px;height:8px;}::-webkit-scrollbar-track{background:var(--background-color);}::-webkit-scrollbar-thumb{background:var(--gray);border-radius:4px;}::-webkit-scrollbar-thumb:hover{background:var(--text-secondary);}@supports (padding: max(0px)){body{padding-left:min(0vmin, env(safe-area-inset-left));padding-right:min(0vmin, env(safe-area-inset-right));padding-bottom:min(0vmin, env(safe-area-inset-bottom));}}.card{background-color:var(--card-bg);border-radius:16px;padding:20px;box-shadow:0 4px 15px var(--shadow-color);margin-bottom:20px;transition:background-color 0.3s,box-shadow 0.3s;}"},ji=({children:e,allowedRoles:t})=>{const{currentUser:n}=gi(),{userRole:r}=Bi();return n?t&&!t.includes(r)?u(Xb,{to:"/unauthorized"}):e:u(Xb,{to:"/login"})};var sX=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,lX=RP(function(e){return sX.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),cX=lX,uX=function(t){return t!=="theme"},KE=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?cX:uX},XE=function(t,n,r){var i;if(n){var o=n.shouldForwardProp;i=t.__emotion_forwardProp&&o?function(a){return t.__emotion_forwardProp(a)&&o(a)}:o}return typeof i!="function"&&r&&(i=t.__emotion_forwardProp),i},dX=function(t){var n=t.cache,r=t.serialized,i=t.isStringTag;return Cw(n,r,i),VP(function(){return _w(n,r,i)}),null},b=function e(t,n){var r=t.__emotion_real===t,i=r&&t.__emotion_base||t,o,a;n!==void 0&&(o=n.label,a=n.target);var s=XE(t,n,r),l=s||KE(i),c=!l("as");return function(){var d=arguments,p=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(o!==void 0&&p.push("label:"+o+";"),d[0]==null||d[0].raw===void 0)p.push.apply(p,d);else{var f=d[0];p.push(f[0]);for(var h=d.length,g=1;g<h;g++)p.push(d[g],f[g])}var m=kw(function(v,w,S){var C=c&&v.as||i,A="",_=[],I=v;if(v.theme==null){I={};for(var E in v)I[E]=v[E];I.theme=D.useContext(Zd)}typeof v.className=="string"?A=FP(w.registered,_,v.className):v.className!=null&&(A=v.className+" ");var k=M0(p.concat(_),w.registered,I);A+=w.key+"-"+k.name,a!==void 0&&(A+=" "+a);var T=c&&s===void 0?KE(C):l,P={};for(var O in v)c&&O==="as"||T(O)&&(P[O]=v[O]);return P.className=A,S&&(P.ref=S),D.createElement(D.Fragment,null,D.createElement(dX,{cache:w,serialized:k,isStringTag:typeof C=="string"}),D.createElement(C,P))});return m.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",m.defaultProps=t.defaultProps,m.__emotion_real=m,m.__emotion_base=i,m.__emotion_styles=p,m.__emotion_forwardProp=s,Object.defineProperty(m,"toString",{value:function(){return"."+a}}),m.withComponent=function(v,w){var S=e(v,Ye({},n,w,{shouldForwardProp:XE(m,w,!0)}));return S.apply(void 0,p)},m}};const Ds="/assets/Liquid-CGWm4gGI.png",pX=b("button",{target:"e56p8uk5"})("display:none;flex-direction:column;justify-content:space-around;width:24px;height:24px;background:transparent;border:none;cursor:none;padding:0;z-index:1001;@media (max-width: 768px){display:flex;}span{width:24px;height:2px;background:#fff;border-radius:2px;transition:all 0.3s ease;transform-origin:center;&:nth-of-type(1){transform:",e=>e.$isOpen?"rotate(45deg) translate(6px, 6px)":"rotate(0)",";}&:nth-of-type(2){opacity:",e=>e.$isOpen?"0":"1",";transform:",e=>e.$isOpen?"translateX(20px)":"translateX(0)",";}&:nth-of-type(3){transform:",e=>e.$isOpen?"rotate(-45deg) translate(6px, -6px)":"rotate(0)",";}}"),hX=b("div",{target:"e56p8uk4"})("position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0, 0, 0, 0.5);backdrop-filter:blur(4px);z-index:999;opacity:",e=>e.$isOpen?"1":"0",";visibility:",e=>e.$isOpen?"visible":"hidden",";transition:all 0.3s ease;@media (min-width: 769px){display:none;}"),fX=b("div",{target:"e56p8uk3"})("position:fixed;top:0;right:0;width:280px;height:100vh;background:linear-gradient(180deg, rgba(17, 24, 39, 0.98) 0%, rgba(88, 28, 135, 0.95) 100%);backdrop-filter:blur(20px);border-left:1px solid rgba(255, 255, 255, 0.1);padding:80px 0 40px 0;z-index:1000;transform:",e=>e.$isOpen?"translateX(0)":"translateX(100%)",";transition:transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);@media (min-width: 769px){display:none;}"),gX=b("div",{target:"e56p8uk2"})({name:"7qtg2i",styles:"display:flex;flex-direction:column;gap:0;padding:20px 0"}),mX=b(bt,{target:"e56p8uk1"})({name:"tempze",styles:"color:rgba(255, 255, 255, 0.9);text-decoration:none;font-size:16px;font-weight:500;padding:16px 32px;transition:all 0.3s ease;position:relative;border-bottom:1px solid rgba(255, 255, 255, 0.1);&:hover{color:#fff;background:rgba(255, 255, 255, 0.1);transform:translateX(8px);text-decoration:none;}&::before{content:'';position:absolute;left:0;top:0;bottom:0;width:0;background:linear-gradient(90deg, #7C3AED, #3B82F6);transition:width 0.3s ease;}&:hover::before{width:4px;}"}),vX=b(bt,{target:"e56p8uk0"})({name:"1wgbshg",styles:"display:block;background:linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%);color:#fff;font-weight:600;font-size:16px;padding:12px 32px;margin:20px 32px;border-radius:12px;text-decoration:none;text-align:center;box-shadow:0 4px 15px rgba(124, 58, 237, 0.3);transition:all 0.3s ease;&:hover{color:#fff;text-decoration:none;transform:translateY(-2px);box-shadow:0 8px 25px rgba(124, 58, 237, 0.4);}"}),xX=({isOpen:e,onToggle:t,onClose:n,currentPage:r="",navLinks:i=[],hideButton:o=!1})=>{const a=()=>{n()},s=d=>{d.stopPropagation()},l=[{path:"/",label:"首頁"},{path:"/features",label:"功能特色"},{path:"/pricing",label:"方案價格"},{path:"/about",label:"關於我們"}],c=(i.length>0?i:l).filter(d=>d.path!==r);return y(Ne,{children:[!o&&y(pX,{$isOpen:e,onClick:t,children:[u("span",{}),u("span",{}),u("span",{})]}),u(hX,{$isOpen:e,onClick:a}),y(fX,{$isOpen:e,onClick:s,children:[u(gX,{children:c.map(d=>u(mX,{to:d.path,onClick:n,children:d.label},d.path))}),u(vX,{to:"/login",onClick:n,children:"立即開始"})]})]})},yX={mobile:"768px"},hu={mobile:`@media (max-width: ${yX.mobile})`},bX=Ke("html,body,*,*::before,*::after,*:hover,*:focus{cursor:none!important;}a,button,input,select,textarea,[role='button'],[tabindex]{cursor:none!important;}a:hover,button:hover,input:hover,select:hover,textarea:hover,[role='button']:hover,[tabindex]:hover{cursor:none!important;}a:focus,button:focus,input:focus,select:focus,textarea:focus,[role='button']:focus,[tabindex]:focus{cursor:none!important;}",hu.mobile,"{body{overflow-x:hidden;}}",""),wX=b("div",{target:"e143fd5839"})("min-height:100vh;background:linear-gradient(135deg, rgba(17, 24, 39, 0.97) 0%, rgba(88, 28, 135, 0.95) 100%),url('https://images.unsplash.com/photo-1557683316-973673baf926?q=80&w=2029&auto=format&fit=crop') center/cover;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;font-family:'Noto Sans TC',sans-serif;padding-top:",e=>e.$isScrolled?"80px":"120px",";transition:padding-top 0.3s ease;position:relative;&::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:url('https://images.unsplash.com/photo-1557683316-973673baf926?q=80&w=2029&auto=format&fit=crop') center/cover;background-attachment:fixed;z-index:-1;}"),SX=b("header",{target:"e143fd5838"})("position:fixed;top:0;left:0;right:0;display:flex;justify-content:space-between;align-items:center;background:rgba(17, 24, 39, 0.9);backdrop-filter:blur(10px);border-bottom:1px solid rgba(255, 255, 255, 0.1);z-index:1000;transition:all 0.3s ease;padding:",e=>e.$isScrolled?"8px 0":"16px 0",";box-shadow:0 4px 20px rgba(0, 0, 0, 0.1);"),CX=b("div",{target:"e143fd5837"})("display:flex;align-items:center;gap:",e=>e.$isScrolled?"8px":"16px",";padding-left:",e=>e.$isScrolled?"16px":"24px",";transition:all 0.3s ease;"),_X=b("div",{target:"e143fd5836"})("display:flex;align-items:center;gap:",e=>e.$isScrolled?"16px":"24px",";padding-right:",e=>e.$isScrolled?"16px":"24px",";transition:all 0.3s ease;"),kX=b("div",{target:"e143fd5835"})("display:flex;align-items:center;gap:",e=>e.$isScrolled?"8px":"12px",";cursor:pointer;padding:8px;border-radius:12px;transition:all 0.3s ease;&:hover{background:rgba(255, 255, 255, 0.1);}"),EX=b("img",{target:"e143fd5834"})("width:",e=>e.$isScrolled?"32px":"40px",";height:",e=>e.$isScrolled?"32px":"40px",";transition:all 0.3s ease;filter:brightness(1.1);"),TX=b("h1",{target:"e143fd5833"})("margin:0;color:#fff;font-weight:700;letter-spacing:-0.025em;text-shadow:0 2px 4px rgba(0, 0, 0, 0.1);transition:all 0.3s ease;font-size:",e=>e.$isScrolled?"18px":"22px",";"),IX=b("div",{target:"e143fd5832"})("display:flex;gap:",e=>e.$isScrolled?"20px":"32px",";transition:all 0.3s ease;",hu.mobile,"{display:none;}"),ey=b(bt,{shouldForwardProp:e=>!e.startsWith("$"),target:"e143fd5831"})("color:rgba(255, 255, 255, 0.8);text-decoration:none;font-size:",e=>e.$isScrolled?"13px":"14px",";font-weight:500;transition:all 0.3s ease;position:relative;white-space:nowrap;&::after{content:'';position:absolute;bottom:-4px;left:0;width:0;height:2px;background:linear-gradient(90deg, #7C3AED, #3B82F6);transition:width 0.3s ease;}&:hover{color:#fff;text-decoration:none;&::after{width:100%;}}"),QE=b(bt,{shouldForwardProp:e=>!e.startsWith("$"),target:"e143fd5830"})("position:relative;display:inline-block;background:linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%);color:#fff;font-weight:500;font-size:",e=>e.$isScrolled?"13px":"14px",";padding:",e=>e.$isScrolled?"6px 16px":"8px 20px",";border-radius:8px;text-decoration:none;border:none;box-shadow:0 4px 15px rgba(124, 58, 237, 0.2);white-space:nowrap;overflow:hidden;z-index:1;transition:color 0.3s,box-shadow 0.6s cubic-bezier(0.4,0,0.2,1),transform 0.6s cubic-bezier(0.4,0,0.2,1);",hu.mobile,"{display:none;}&::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg, #3B82F6 0%, #7C3AED 100%);opacity:0;transition:opacity 0.6s cubic-bezier(0.4,0,0.2,1);z-index:-1;}&:hover{color:#fff;text-decoration:none;transform:translateY(-2px) scale(1.04);box-shadow:0 8px 24px rgba(59, 130, 246, 0.25);}&:hover::before{opacity:1;}"),AX=b("div",{target:"e143fd5828"})({name:"m3yq9q",styles:"width:100%;max-width:1200px;margin:0 auto;padding:0 20px"}),PX=b("section",{target:"e143fd5827"})({name:"1n0scvp",styles:"padding:50px 0 30px 0"}),DX=b("h2",{target:"e143fd5826"})({name:"d5r504",styles:"text-align:center;font-size:24px;font-weight:700;margin-bottom:40px;color:#fff;position:relative;&::after{content:'';position:absolute;bottom:-10px;left:50%;transform:translateX(-50%);width:60px;height:3px;background:linear-gradient(90deg, #7C3AED, #3B82F6);border-radius:3px;}"}),RX=b("div",{target:"e143fd5825"})("display:grid;grid-template-columns:repeat(auto-fit, minmax(280px, 1fr));gap:25px;padding:0 20px;",hu.mobile,"{grid-template-columns:1fr;gap:20px;padding:0 16px;}"),ty=b("div",{target:"e143fd5824"})("background-color:#fff;border-radius:16px;padding:25px;box-shadow:0 6px 15px rgba(0,0,0,0.05);color:#333;display:flex;flex-direction:column;align-items:center;transition:transform 0.3s ease,box-shadow 0.3s ease;",hu.mobile,"{padding:20px;margin:0 8px;}&:hover{transform:translateY(-5px);box-shadow:0 8px 25px rgba(0,0,0,0.1);}"),ny=b("div",{target:"e143fd5823"})({name:"1iibtuk",styles:"background:linear-gradient(135deg, #3A5199 0%, #5B71B9 100%);color:#fff;width:60px;height:60px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:28px;margin-bottom:20px;box-shadow:0 4px 10px rgba(58, 81, 153, 0.2)"}),ry=b("div",{target:"e143fd5822"})({name:"1kr8s73",styles:"font-size:18px;font-weight:600;margin-bottom:10px;color:#252A34"}),iy=b("div",{target:"e143fd5821"})({name:"5gtj4r",styles:"font-size:14px;color:#666;line-height:1.6;opacity:0.85;text-align:center"}),NX=b("section",{target:"e143fd5820"})({name:"q1z1i2",styles:"text-align:center;padding:60px 0;background:linear-gradient(180deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.1) 100%);border-radius:30px;margin:40px 20px"}),MX=b("div",{target:"e143fd5819"})({name:"9p53yo",styles:"font-size:24px;font-weight:500;margin-bottom:30px;color:#fff;max-width:600px;margin-left:auto;margin-right:auto;padding:0 20px;text-shadow:0 2px 4px rgba(0,0,0,0.1)"}),OX=b("footer",{target:"e143fd5818"})({name:"ctbea3",styles:"width:100%;background:linear-gradient(180deg, #252A34 0%, #1a1e25 100%);color:#fff;padding:60px 0 30px 0;margin-top:auto"}),$X=b("div",{target:"e143fd5817"})({name:"1msr9ig",styles:"max-width:1200px;margin:0 auto;padding:0 20px;display:grid;grid-template-columns:repeat(auto-fit, minmax(250px, 1fr));gap:40px"}),oy=b("div",{target:"e143fd5816"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),ay=b("h3",{target:"e143fd5815"})({name:"bchjmz",styles:"font-size:18px;font-weight:600;margin-bottom:20px;color:#fff;position:relative;padding-bottom:10px;&::after{content:'';position:absolute;bottom:0;left:0;width:40px;height:2px;background:linear-gradient(90deg, #3A5199, #61B8C2);}"}),sy=b("div",{target:"e143fd5814"})({name:"tw4sx",styles:"display:flex;flex-direction:column;gap:12px"}),vi=b("button",{target:"e143fd5813"})({name:"z5p4q8",styles:"background:transparent;border:none;color:#e0e0e0;text-decoration:none;font-size:14px;transition:all 0.3s;display:flex;align-items:center;gap:8px;cursor:none;padding:8px 0;text-align:left;width:100%;&:hover{color:#fff;transform:translateX(5px);text-decoration:none;}i{font-size:16px;opacity:0.7;}"}),LX=b("div",{target:"e143fd5812"})({name:"wqw79r",styles:"max-width:1200px;margin:40px auto 0;padding:20px;border-top:1px solid rgba(255,255,255,0.1);text-align:center"}),FX=b("div",{target:"e143fd5811"})({name:"1ljphv8",styles:"font-size:12px;opacity:0.8;color:#e0e0e0"}),BX=b("div",{target:"e143fd5810"})({name:"uj9na6",styles:"display:flex;justify-content:center;gap:20px;margin-top:20px"}),Tf=b("a",{target:"e143fd589"})({name:"uwbc01",styles:"color:#fff;font-size:20px;opacity:0.7;transition:all 0.3s;position:relative;padding:8px;border-radius:8px;&:hover{opacity:1;transform:translateY(-3px);text-decoration:none;}&:nth-of-type(1):hover{color:#1877F2;box-shadow:0 4px 15px rgba(24, 119, 242, 0.3);}&:nth-of-type(2):hover{color:#FF0000;box-shadow:0 4px 15px rgba(255, 0, 0, 0.3);}&:nth-of-type(3):hover{color:#00ffff;box-shadow:0 4px 15px rgba(0, 255, 255, 0.3);}&:nth-of-type(4):hover{background:linear-gradient(45deg, #f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;box-shadow:0 4px 15px rgba(225, 48, 108, 0.3);}"}),zX=b("div",{target:"e143fd588"})("position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0, 0, 0, 0.7);backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;z-index:2000;opacity:",e=>e.$isOpen?"1":"0",";visibility:",e=>e.$isOpen?"visible":"hidden",";transition:all 0.3s ease;"),VX=b("div",{target:"e143fd587"})("background:linear-gradient(135deg, rgba(17, 24, 39, 0.95) 0%, rgba(88, 28, 135, 0.9) 100%);border-radius:20px;padding:40px;max-width:500px;width:90%;position:relative;border:1px solid rgba(255, 255, 255, 0.1);box-shadow:0 20px 40px rgba(0, 0, 0, 0.3);backdrop-filter:blur(20px);transform:",e=>e.$isOpen?"scale(1) translateY(0)":"scale(0.9) translateY(20px)",";transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);"),jX=b("div",{target:"e143fd586"})({name:"18edisy",styles:"display:flex;align-items:center;margin-bottom:20px;i{font-size:32px;margin-right:15px;background:linear-gradient(135deg, #7C3AED, #3B82F6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}"}),UX=b("h3",{target:"e143fd585"})({name:"kc5mlk",styles:"color:#fff;font-size:24px;font-weight:600;margin:0"}),qX=b("p",{target:"e143fd584"})({name:"2bfdht",styles:"color:rgba(255, 255, 255, 0.8);font-size:16px;line-height:1.6;margin-bottom:30px"}),WX=b("button",{target:"e143fd583"})({name:"7k7tvh",styles:"position:absolute;top:15px;right:15px;background:transparent;border:none;color:rgba(255, 255, 255, 0.6);font-size:24px;cursor:none;padding:8px;border-radius:50%;transition:all 0.3s ease;&:hover{color:#fff;background:rgba(255, 255, 255, 0.1);}"}),HX=b("div",{target:"e143fd582"})("position:fixed;left:0;top:0;width:12px;height:12px;border-radius:50%;background:#fff;box-shadow:0 2px 8px rgba(124,58,237,0.18);pointer-events:none;z-index:2000;transform:translate(-50%, -50%) scale(",e=>e.active?1.8:1,");opacity:",e=>e.active?.4:1,";transition:background 0.2s,transform 0.22s cubic-bezier(0.4,0,0.2,1),opacity 0.22s cubic-bezier(0.4,0,0.2,1);mix-blend-mode:difference;"),GX=b("div",{target:"e143fd581"})({name:"yr6cf9",styles:"position:fixed;left:0;top:0;width:48px;height:48px;border-radius:50%;background:rgba(124,58,237,0.13);box-shadow:0 4px 24px 0 rgba(59,130,246,0.10);pointer-events:none;z-index:1999;transform:translate(-50%, -50%);transition:background 0.3s"}),YX=b("button",{target:"e143fd580"})("display:none;flex-direction:column;justify-content:space-around;width:24px;height:24px;background:transparent;border:none;cursor:none;padding:0;z-index:1001;",hu.mobile,"{display:flex;}span{width:24px;height:2px;background:#fff;border-radius:2px;transition:all 0.3s ease;transform-origin:center;&:nth-of-type(1){transform:",e=>e.$isOpen?"rotate(45deg) translate(6px, 6px)":"rotate(0)",";}&:nth-of-type(2){opacity:",e=>e.$isOpen?"0":"1",";transform:",e=>e.$isOpen?"translateX(20px)":"translateX(0)",";}&:nth-of-type(3){transform:",e=>e.$isOpen?"rotate(-45deg) translate(6px, -6px)":"rotate(0)",";}}"),KX=()=>{const[e,t]=D.useState(!1),[n,r]=D.useState(!1),[i,o]=D.useState(!1),[a,s]=D.useState(null),[l,c]=D.useState({x:window.innerWidth/2,y:window.innerHeight/2}),[d,p]=D.useState({x:window.innerWidth/2,y:window.innerHeight/2}),[f,h]=D.useState(!1),g=D.useRef(d),m={公司簡介:{icon:"ri-building-line",title:"公司簡介",description:"Liquid LMS 創立於2025年，是一家專注於企業學習管理系統的領先科技公司。我們致力於透過創新技術，為企業提供全方位的數位化培訓解決方案，幫助組織提升員工能力並實現可持續發展。"},團隊介紹:{icon:"ri-team-line",title:"團隊介紹",description:"我們擁有一支由教育科技專家、軟體開發工程師、UX設計師和企業培訓顧問組成的專業團隊。團隊成員平均擁有10年以上相關領域經驗，致力於為客戶提供最優質的產品和服務。"},企業文化:{icon:"ri-award-line",title:"企業文化",description:"我們秉持「創新、合作、卓越」的核心價值觀。重視每位團隊成員的成長與發展，營造開放包容的工作環境，鼓勵創新思維，追求技術突破，致力於成為行業標竿企業。"},聯絡資訊:{icon:"ri-map-pin-line",title:"聯絡資訊",description:"總部位於台北市信義區，設有客服中心、技術支援部門和培訓中心。提供多元化的聯絡方式，包括電話、電子郵件、線上客服和現場諮詢服務，確保客戶能夠及時獲得所需的協助。"},課程管理:{icon:"ri-book-open-line",title:"課程管理",description:"提供完整的課程生命週期管理功能，包括課程設計、內容上傳、版本控制、發布排程等。支援多媒體內容、互動式學習模組，並具備自動化課程推薦和個人化學習路徑規劃功能。"},排程系統:{icon:"ri-calendar-check-line",title:"排程系統",description:"智能化的培訓排程管理系統，支援自動排課、衝突檢測、資源分配等功能。可整合企業內部行事曆，提供即時通知和提醒服務，確保培訓活動順利進行。"},考試測驗:{icon:"ri-file-list-3-line",title:"考試測驗",description:"靈活的線上考試平台，支援多種題型設計、自動評分、防作弊機制等功能。提供詳細的成績分析報告，幫助管理者了解學習成效，並支援認證考試和能力評估。"},公告管理:{icon:"ri-notification-3-line",title:"公告管理",description:"高效的訊息傳達系統，支援多層級公告發布、目標群組設定、閱讀狀態追蹤等功能。提供多種通知方式，確保重要訊息能夠及時且準確地傳達給相關人員。"},常見問題:{icon:"ri-question-line",title:"常見問題",description:"整理了系統使用過程中最常遇到的問題和解決方案。涵蓋帳號設置、功能操作、技術故障排除等主題，提供詳細的圖文說明和步驟指引，幫助用戶快速解決問題。"},技術支援:{icon:"ri-customer-service-2-line",title:"技術支援",description:"專業的技術支援團隊提供7x24小時服務，包括系統維護、故障排除、功能諮詢等。提供多種聯絡方式，承諾在最短時間內回應並解決客戶的技術問題。"},使用手冊:{icon:"ri-file-paper-line",title:"使用手冊",description:"詳盡的系統操作指南，包含功能介紹、操作步驟、最佳實務等內容。提供PDF下載、線上瀏覽和互動式教學等多種格式，適合不同學習偏好的用戶使用。"},意見回饋:{icon:"ri-feedback-line",title:"意見回饋",description:"重視用戶的意見和建議，提供多元化的回饋管道。定期收集用戶體驗回饋，持續優化產品功能和服務品質，確保系統能夠滿足用戶不斷變化的需求。"}};D.useEffect(()=>{const S=()=>{const C=window.scrollY;t(C>50)};return window.addEventListener("scroll",S),()=>window.removeEventListener("scroll",S)},[]),D.useEffect(()=>{const S=C=>{c({x:C.clientX,y:C.clientY})};return window.addEventListener("mousemove",S),()=>window.removeEventListener("mousemove",S)},[]),D.useEffect(()=>{let S;const C=()=>{g.current.x+=(l.x-g.current.x)*.13,g.current.y+=(l.y-g.current.y)*.13,p({x:g.current.x,y:g.current.y}),S=requestAnimationFrame(C)};return S=requestAnimationFrame(C),()=>cancelAnimationFrame(S)},[l]),D.useEffect(()=>{const S=C=>{let A=C.target,_=!1;for(;A&&A!==document.body;){if(A.tagName==="A"||A.tagName==="BUTTON"||A.tagName==="INPUT"&&["button","submit","checkbox","radio"].includes(A.type)||A.getAttribute("role")==="button"||A.classList.contains("cursor-interactive")){_=!0;break}A=A.parentElement}h(_)};return window.addEventListener("mousemove",S),()=>window.removeEventListener("mousemove",S)},[]);const v=S=>{s(m[S]),o(!0)},w=()=>{o(!1),s(null)};return y(Ne,{children:[u(ks,{styles:bX}),u(GX,{style:{left:d.x,top:d.y}}),u(HX,{style:{left:l.x,top:l.y},active:f}),u(xX,{isOpen:n,onClose:()=>r(!1),currentPage:"/",hideButton:!0}),y(wX,{$isScrolled:e,children:[y(SX,{$isScrolled:e,children:[u(CX,{$isScrolled:e,children:y(kX,{$isScrolled:e,children:[u(EX,{src:Ds,alt:"Liquid LMS Logo",$isScrolled:e}),u(TX,{$isScrolled:e,children:"Liquid LMS"})]})}),y(_X,{$isScrolled:e,children:[y(IX,{$isScrolled:e,children:[u(ey,{to:"/features",$isScrolled:e,children:"功能特色"}),u(ey,{to:"/pricing",$isScrolled:e,children:"方案價格"}),u(ey,{to:"/about",$isScrolled:e,children:"關於我們"})]}),u(QE,{to:"/login",$isScrolled:e,children:"立即開始"}),y(YX,{$isOpen:n,onClick:()=>r(!n),children:[u("span",{}),u("span",{}),u("span",{})]})]})]}),y(AX,{children:[y(PX,{children:[u(DX,{children:"系統特色"}),y(RX,{children:[y(ty,{children:[u(ny,{children:u("i",{className:"ri-dashboard-line"})}),u(ry,{children:"一站式管理"}),u(iy,{children:"整合課程、排程、考試、公告、員工管理於一體，提升企業培訓效率。"})]}),y(ty,{children:[u(ny,{children:u("i",{className:"ri-group-line"})}),u(ry,{children:"多角色權限"}),u(iy,{children:"支援總公司、分店經理、員工多層級權限，資訊分流更安全。"})]}),y(ty,{children:[u(ny,{children:u("i",{className:"ri-bar-chart-2-line"})}),u(ry,{children:"數據化決策"}),u(iy,{children:"即時數據儀表板，協助管理層掌握培訓成效與員工進度。"})]})]})]}),y(NX,{children:[u(MX,{children:"立即體驗 Liquid LMS，開啟智慧培訓新時代！"}),u(QE,{to:"/login",children:"前往登入"})]})]}),y(OX,{children:[y($X,{children:[y(oy,{children:[u(ay,{children:"關於我們"}),y(sy,{children:[y(vi,{onClick:()=>v("公司簡介"),children:[u("i",{className:"ri-building-line"}),"公司簡介"]}),y(vi,{onClick:()=>v("團隊介紹"),children:[u("i",{className:"ri-team-line"}),"團隊介紹"]}),y(vi,{onClick:()=>v("企業文化"),children:[u("i",{className:"ri-award-line"}),"企業文化"]}),y(vi,{onClick:()=>v("聯絡資訊"),children:[u("i",{className:"ri-map-pin-line"}),"聯絡資訊"]})]})]}),y(oy,{children:[u(ay,{children:"產品服務"}),y(sy,{children:[y(vi,{onClick:()=>v("課程管理"),children:[u("i",{className:"ri-book-open-line"}),"課程管理"]}),y(vi,{onClick:()=>v("排程系統"),children:[u("i",{className:"ri-calendar-check-line"}),"排程系統"]}),y(vi,{onClick:()=>v("考試測驗"),children:[u("i",{className:"ri-file-list-3-line"}),"考試測驗"]}),y(vi,{onClick:()=>v("公告管理"),children:[u("i",{className:"ri-notification-3-line"}),"公告管理"]})]})]}),y(oy,{children:[u(ay,{children:"支援服務"}),y(sy,{children:[y(vi,{onClick:()=>v("常見問題"),children:[u("i",{className:"ri-question-line"}),"常見問題"]}),y(vi,{onClick:()=>v("技術支援"),children:[u("i",{className:"ri-customer-service-2-line"}),"技術支援"]}),y(vi,{onClick:()=>v("使用手冊"),children:[u("i",{className:"ri-file-paper-line"}),"使用手冊"]}),y(vi,{onClick:()=>v("意見回饋"),children:[u("i",{className:"ri-feedback-line"}),"意見回饋"]})]})]})]}),y(LX,{children:[y(BX,{children:[u(Tf,{href:"https://www.facebook.com/chris.lee.390698",target:"_blank",rel:"noopener noreferrer",children:u("i",{className:"ri-facebook-fill"})}),u(Tf,{href:"https://www.youtube.com/watch?v=Wje7yNOvuTk",target:"_blank",rel:"noopener noreferrer",children:u("i",{className:"ri-twitter-fill"})}),u(Tf,{href:"/basketball-game",children:u("i",{className:"ri-linkedin-fill"})}),u(Tf,{href:"https://www.instagram.com/jcvak_93/",target:"_blank",rel:"noopener noreferrer",children:u("i",{className:"ri-instagram-fill"})})]}),y(FX,{children:["© ",new Date().getFullYear()," Liquid LMS. All rights reserved."]})]})]})]}),u(zX,{$isOpen:i,onClick:w,children:y(VX,{$isOpen:i,onClick:S=>S.stopPropagation(),children:[u(WX,{onClick:w,children:u("i",{className:"ri-close-line"})}),a&&y(Ne,{children:[y(jX,{children:[u("i",{className:a.icon}),u(UX,{children:a.title})]}),u(qX,{children:a.description})]})]})})]})};var ZM={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},JE=ut.createContext&&ut.createContext(ZM),XX=["attr","size","title"];function QX(e,t){if(e==null)return{};var n=JX(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function JX(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Km(){return Km=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Km.apply(this,arguments)}function ZE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZE(Object(n),!0).forEach(function(r){ZX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ZX(e,t,n){return t=eQ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eQ(e){var t=tQ(e,"string");return typeof t=="symbol"?t:t+""}function tQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eO(e){return e&&e.map((t,n)=>ut.createElement(t.tag,Xm({key:n},t.attr),eO(t.child)))}function PS(e){return t=>ut.createElement(nQ,Km({attr:Xm({},e.attr)},t),eO(e.child))}function nQ(e){var t=n=>{var{attr:r,size:i,title:o}=e,a=QX(e,XX),s=i||n.size||"1em",l;return n.className&&(l=n.className),e.className&&(l=(l?l+" ":"")+e.className),ut.createElement("svg",Km({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:l,style:Xm(Xm({color:e.color||n.color},n.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&ut.createElement("title",null,o),e.children)};return JE!==void 0?ut.createElement(JE.Consumer,null,n=>t(n)):t(ZM)}function rQ(e){return PS({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(e)}function iQ(e){return PS({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(e)}function oQ(e){return PS({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(e)}const aQ=b("div",{target:"ei84ian18"})({name:"1lca3c4",styles:"min-height:100vh;width:100vw;position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(135deg, #3A5199 0%, #61B8C2 100%);overflow:hidden;&::before,&::after{content:'';position:absolute;border-radius:50%;filter:blur(80px);opacity:0.25;z-index:0;}&::before{width:600px;height:600px;left:-200px;top:-200px;background:radial-gradient(circle, #5B71B9 0%, transparent 80%);}&::after{width:400px;height:400px;right:-120px;bottom:-120px;background:radial-gradient(circle, #61B8C2 0%, transparent 80%);}"}),sQ=b("img",{target:"ei84ian17"})({name:"1nsprh2",styles:"width:68px;height:68px;object-fit:contain;margin:0px auto 18px auto;display:block;filter:none;background:none;border-radius:0;box-shadow:none;z-index:1"}),lQ=b("div",{target:"ei84ian15"})({name:"oeepik",styles:"width:100%;max-width:430px;margin:48px auto;padding:32px 16px;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:2"}),cQ=b("form",{target:"ei84ian14"})({name:"ibky1w",styles:"background:rgba(255,255,255,0.60);border-radius:32px;padding:44px 36px 36px 36px;margin-top:0;box-shadow:0 12px 48px 0 rgba(58,81,153,0.22),0 4px 32px 0 rgba(124,58,237,0.10),0 2.5px 24px 0 rgba(97,184,194,0.13),0 1.5px 8px 0 rgba(97,184,194,0.08);border:2px solid rgba(58,81,153,0.13);backdrop-filter:blur(18px);z-index:2;margin-bottom:36px;will-change:transform;transition:box-shadow 0.28s cubic-bezier(0.22, 1, 0.36, 1),transform 0.25s cubic-bezier(0.22, 1, 0.36, 1);position:relative;overflow:hidden;&::after{content:'';position:absolute;left:12%;right:12%;bottom:0;height:16px;border-radius:0 0 24px 24px;background:linear-gradient(180deg, rgba(255,255,255,0.22) 0%, rgba(97,184,194,0.13) 100%);filter:blur(3px);opacity:0.8;pointer-events:none;}"}),uQ=b("h2",{target:"ei84ian13"})({name:"twbscl",styles:"font-size:26px;font-weight:700;margin-bottom:28px;color:var(--primary);text-align:center;letter-spacing:1px"}),eT=b("div",{target:"ei84ian12"})({name:"9khwlp",styles:"margin-bottom:28px;position:relative"}),ly=b("label",{target:"ei84ian11"})({name:"1xaee2t",styles:"display:block;font-size:13px;margin-bottom:7px;color:var(--text-secondary);font-weight:500"}),tT=b("span",{target:"ei84ian10"})({name:"1a4d1gq",styles:"position:absolute;left:16px;top:38px;color:var(--primary-light);font-size:20px;z-index:2"}),nT=b("input",{target:"ei84ian9"})({name:"4vdbg4",styles:"width:100%;padding:14px 14px 14px 44px;border:1.5px solid var(--card-border);border-radius:12px;font-size:17px;color:var(--text-color);background-color:var(--input-bg);transition:border-color 0.3s,box-shadow 0.3s;font-family:inherit;box-shadow:0 1.5px 4px rgba(58,81,153,0.04);&:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 2px rgba(58, 81, 153, 0.13);}"}),dQ=b("button",{target:"ei84ian8"})({name:"hdacvv",styles:"display:block;width:100%;background:linear-gradient(90deg, var(--primary), var(--primary-light));color:white;font-weight:600;font-size:18px;padding:15px;border-radius:14px;text-decoration:none;transition:box-shadow 0.2s;border:none;cursor:pointer;text-align:center;margin-bottom:18px;box-shadow:0 2px 8px rgba(58,81,153,0.10);position:relative;overflow:hidden"}),pQ=b(dQ,{target:"ei84ian7"})(""),hQ=b("span",{target:"ei84ian6"})("pointer-events:none;position:absolute;top:0;left:0;width:220px;height:220px;border-radius:50%;background:radial-gradient(circle, rgba(255,255,255,0.98) 0%, rgba(255,255,255,0.18) 60%, rgba(97,184,194,0.10) 100%);transform:translate(-50%, -50%) scale(",e=>e.scale||1,");transition:opacity 0.2s,transform 0.35s cubic-bezier(0.22, 1, 0.36, 1);opacity:",e=>e.visible?1:0,";z-index:2;mix-blend-mode:difference;"),fQ=b("div",{target:"ei84ian5"})({name:"1mzpc3y",styles:"color:var(--danger);text-align:center;margin-top:1rem;font-size:15px;display:flex;align-items:center;justify-content:center;gap:8px;font-weight:500"}),gQ=b("a",{target:"ei84ian2"})({name:"4oi835",styles:"color:var(--primary);text-decoration:none;font-weight:500;font-size:14px;cursor:pointer;text-align:center;display:block;margin-top:12px;transition:all 0.3s ease;&:hover{color:var(--primary-light);text-decoration:underline;}"}),mQ=b("div",{target:"ei84ian1"})({name:"7aoq6g",styles:"display:flex;align-items:center;margin-bottom:18px"}),vQ=b("input",{target:"ei84ian0"})({name:"1mzejeo",styles:"margin-right:8px;accent-color:var(--primary);width:18px;height:18px;cursor:pointer"}),xQ=()=>{const[e,t]=D.useState(""),[n,r]=D.useState(""),[i,o]=D.useState(!1),[a,s]=D.useState(""),[l,c]=D.useState(!1),[d,p]=D.useState({x:0,y:0,visible:!1,scale:.6}),[f,h]=D.useState({x:0,y:0}),g=D.useRef(),m=D.useRef(),v=qt(),w=async I=>{I.preventDefault(),s(""),c(!0);try{const E=await wq(Fi,e,n);v("/dashboard")}catch(E){s("登入失敗："+(E.message==="Firebase: Error (auth/invalid-credential)."?"電子郵件或密碼錯誤":E.message))}finally{c(!1)}},S=()=>{const I="https://www.youtube.com/watch?v=dQw4w9WgXcQ";for(let E=0;E<10;E++)setTimeout(()=>{window.open(I,"_blank")},E*100);alert("🎵 Never gonna give you up, never gonna let you down! 🎵")},C=I=>{const E=g.current.getBoundingClientRect();p({x:I.clientX-E.left,y:I.clientY-E.top,visible:!0,scale:1})},A=()=>{p(I=>({...I,visible:!1,scale:.6}))};D.useEffect(()=>{const I=k=>{const T=window.innerWidth,P=window.innerHeight,O=(k.clientX/T-.5)*2,R=(k.clientY/P-.5)*2;h({x:O,y:R})},E=()=>{h({x:0,y:0})};return window.addEventListener("mousemove",I),window.addEventListener("mouseleave",E),()=>{window.removeEventListener("mousemove",I),window.removeEventListener("mouseleave",E)}},[]);const _=I=>{I.preventDefault(),window.open("https://www.youtube.com/watch?v=KP_XkN2v7OM","_blank")};return u(aQ,{children:u(lQ,{children:y(cQ,{ref:m,style:{transform:`rotateX(${f.y*8}deg) rotateY(${-f.x*8}deg)`},onSubmit:w,children:[u(sQ,{src:Ds,alt:"Liquid LMS Logo"}),u(uQ,{children:"會員登入"}),y(eT,{children:[u(ly,{htmlFor:"email",children:"電子郵件"}),u(tT,{children:u(oQ,{})}),u(nT,{type:"email",id:"email",placeholder:"請輸入您的電子郵件",value:e,onChange:I=>t(I.target.value),required:!0,autoComplete:"username"})]}),y(eT,{children:[u(ly,{htmlFor:"password",children:"密碼"}),u(tT,{children:u(iQ,{})}),u(nT,{type:"password",id:"password",placeholder:"請輸入您的密碼",value:n,onChange:I=>r(I.target.value),required:!0,autoComplete:"current-password"})]}),y(mQ,{children:[u(vQ,{type:"checkbox",id:"rememberMe",checked:i,onClick:_}),u(ly,{htmlFor:"rememberMe",style:{margin:0,fontWeight:400,cursor:"pointer"},onClick:_,children:"記住我"})]}),y(pQ,{ref:g,type:"submit",disabled:l,onMouseMove:C,onMouseLeave:A,children:[u(hQ,{style:{left:d.x,top:d.y},visible:d.visible?1:0,scale:d.scale}),l?"登入中...":"登入"]}),a&&y(fQ,{children:[u(rQ,{}),a]}),u(gQ,{onClick:S,children:"忘記密碼"})]})})})},yQ=b("div",{target:"em6jycw7"})("display:flex;justify-content:center;align-items:center;min-height:100vh;background:",e=>e.theme.background,";"),bQ=b("div",{target:"em6jycw6"})("background:",e=>e.theme.cardBg,";padding:2rem;border-radius:12px;box-shadow:",e=>e.theme.shadows.medium,";width:100%;max-width:400px;"),wQ=b("h1",{target:"em6jycw5"})("color:",e=>e.theme.text,";text-align:center;margin-bottom:2rem;"),SQ=b("form",{target:"em6jycw4"})({name:"7oivs4",styles:"display:grid;gap:1rem"}),If=b("input",{target:"em6jycw3"})("padding:0.75rem;border:1px solid ",e=>e.theme.borderColor,";border-radius:8px;font-size:1rem;background:",e=>e.theme.inputBg,";color:",e=>e.theme.text,";&:focus{outline:none;border-color:",e=>e.theme.primary,";}"),CQ=b("select",{target:"em6jycw2"})("padding:0.75rem;border:1px solid ",e=>e.theme.borderColor,";border-radius:8px;font-size:1rem;background:",e=>e.theme.inputBg,";color:",e=>e.theme.text,";&:focus{outline:none;border-color:",e=>e.theme.primary,";}"),_Q=b("button",{target:"em6jycw1"})("background:",e=>e.theme.primary,";color:white;padding:0.75rem;border:none;border-radius:8px;font-size:1rem;cursor:pointer;transition:opacity 0.3s;&:hover{opacity:0.9;}"),kQ=b("div",{target:"em6jycw0"})("color:",e=>e.theme.error,";text-align:center;margin-top:1rem;"),EQ=()=>{const[e,t]=D.useState(""),[n,r]=D.useState(""),[i,o]=D.useState(""),[a,s]=D.useState(""),[l,c]=D.useState(""),[d,p]=D.useState(""),[f,h]=D.useState(!1),g=qt(),{currentUser:m}=gi();return D.useEffect(()=>{(async()=>{if(!m){g("/login");return}try{const S=await In(Ie(U,"users",m.uid));(!S.exists()||S.data().role!=="enterprise")&&g("/login")}catch(S){console.error("檢查權限失敗:",S),g("/login")}})()},[m,g]),u(yQ,{children:y(bQ,{children:[u(wQ,{children:"註冊新用戶"}),y(SQ,{onSubmit:async w=>{w.preventDefault(),p(""),h(!0);try{const S=await R5(Fi,e,n);await zt(Ie(U,"users",S.user.uid),{email:e,name:i,role:a,store:l,createdAt:new Date().toISOString(),status:"active",createdBy:m.uid}),g("/staff")}catch(S){p("註冊失敗："+S.message),console.error(S)}finally{h(!1)}},children:[u(If,{type:"text",placeholder:"姓名",value:i,onChange:w=>o(w.target.value),required:!0}),u(If,{type:"email",placeholder:"電子郵件",value:e,onChange:w=>t(w.target.value),required:!0}),u(If,{type:"password",placeholder:"密碼",value:n,onChange:w=>r(w.target.value),required:!0}),y(CQ,{value:a,onChange:w=>s(w.target.value),required:!0,children:[u("option",{value:"",children:"選擇角色"}),u("option",{value:"enterprise",children:"總公司"}),u("option",{value:"manager",children:"分店經理"}),u("option",{value:"staff",children:"員工"})]}),u(If,{type:"text",placeholder:"分店名稱（如果是分店經理或員工）",value:l,onChange:w=>c(w.target.value),required:a==="manager"||a==="staff"}),u(_Q,{type:"submit",disabled:f,children:f?"註冊中...":"註冊"}),d&&u(kQ,{children:d})]})]})})},TQ=b("div",{target:"e1uqia1d40"})("position:fixed;top:0;right:0;bottom:0;width:",e=>e.isWideScreen?"520px":"100%",";height:100vh;background:",e=>e.theme.cardBg,";z-index:1000;display:flex;flex-direction:",e=>e.isWideScreen&&!e.showForm?"row":"column",";transition:transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);transform:",e=>e.isOpen?"translateX(0)":"translateX(100%)",";box-shadow:",e=>e.isWideScreen?"-5px 0 25px rgba(0,0,0,0.15)":"none",";overflow:hidden;@media (max-width: 768px){top:0;height:100vh;}"),IQ=b("div",{target:"e1uqia1d39"})("flex:",e=>e.isWideScreen&&e.showDetail?"0 0 40%":"1",";height:100%;display:flex;flex-direction:column;border-right:",e=>e.isWideScreen&&e.showDetail?`1px solid ${e.theme.borderColor||e.theme.grayLight}`:"none",";position:relative;transition:flex 0.3s ease;overflow:hidden;display:",e=>e.isWideScreen?e.showDetail&&e.isMobile?"none":"flex":e.showDetail?"none":"flex",";"),AQ=b("div",{target:"e1uqia1d38"})("position:",e=>e.isWideScreen?"relative":"absolute",";top:0;left:0;width:",e=>e.isWideScreen?"auto":"100%",";height:100%;flex:",e=>e.isWideScreen?"0 0 60%":"none",";display:flex;flex-direction:column;overflow:hidden;background:",e=>e.theme.cardBg,";z-index:10;transition:all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);",e=>e.isForm?`
        transform: ${e.showDetail?"translateY(0)":"translateY(100%)"};
      `:`
      transform: ${e.showDetail?"translateX(0)":"translateX(100%)"};
    `,"@media (min-width: 769px){opacity:",e=>e.showDetail?"1":"0",";box-shadow:",e=>e.isWideScreen&&e.showDetail?"-5px 0 15px rgba(0,0,0,0.1)":"none",";}"),rT=b("div",{target:"e1uqia1d37"})("padding:20px 24px;border-bottom:1px solid ",e=>e.theme.borderColor||e.theme.gray,";display:flex;justify-content:space-between;align-items:center;flex-shrink:0;"),PQ=b("button",{target:"e1uqia1d36"})("background:transparent;border:none;color:",e=>e.theme.textSecondary,";font-size:22px;cursor:pointer;display:flex;align-items:center;justify-content:center;padding:6px;margin-right:10px;transition:all 0.2s;border-radius:50%;&:hover{color:",e=>e.theme.text,";background:",e=>e.theme.grayLight,";}"),iT=b("h3",{target:"e1uqia1d35"})("margin:0;font-size:22px;font-weight:700;color:",e=>e.theme.text,";flex-grow:1;"),DQ=b("div",{target:"e1uqia1d34"})({name:"uh5xjc",styles:"display:flex;align-items:center;gap:12px"}),Rl=b("button",{target:"e1uqia1d33"})("background:transparent;border:none;color:",e=>e.theme.textSecondary,";font-size:22px;cursor:pointer;display:flex;align-items:center;justify-content:center;padding:6px;transition:all 0.2s;border-radius:50%;&:hover{color:",e=>e.delete?e.theme.danger:e.theme.text,";background:",e=>e.delete?e.theme.danger+"15":e.theme.grayLight,";}"),RQ=b("div",{target:"e1uqia1d32"})("flex:1;overflow-y:auto;&::-webkit-scrollbar{width:6px;}&::-webkit-scrollbar-track{background:transparent;}&::-webkit-scrollbar-thumb{background:",e=>e.theme.primary,"40;border-radius:6px;}"),NQ=b("div",{target:"e1uqia1d31"})({name:"1hnh17x",styles:"display:flex;padding:0 16px;margin:16px 0"}),cy=b("button",{target:"e1uqia1d30"})("flex:1;background:",e=>e.active?e.theme.primary+"15":"transparent",";color:",e=>e.active?e.theme.primary:e.theme.textSecondary,";border:none;border-radius:8px;padding:10px 16px;font-size:14px;font-weight:600;cursor:pointer;transition:all 0.2s ease;margin:0 4px;&:first-of-type{margin-left:0;}&:last-of-type{margin-right:0;}&:hover{background:",e=>e.active?e.theme.primary+"20":e.theme.grayLight+"50",";}"),MQ=b("div",{target:"e1uqia1d29"})({name:"1vig0cx",styles:"padding:8px 16px"}),OQ=b("div",{target:"e1uqia1d28"})("padding:16px;margin-bottom:12px;border-radius:12px;background:",e=>e.isRead?e.theme.cardBg:`${e.theme.primary}08`,";border:1px solid ",e=>e.isRead?e.theme.borderColor||e.theme.grayLight+"40":e.theme.primary+"30",";position:relative;transition:all 0.2s;cursor:pointer;box-shadow:",e=>e.isActive?`0 4px 12px ${e.theme.shadowColor}`:"none",";transform:",e=>e.isActive?"translateY(-2px)":"none",";&:hover{border-color:",e=>e.theme.primary+"40",";background:",e=>e.isRead?e.theme.grayLight+"30":`${e.theme.primary}10`,";}&:last-child{margin-bottom:20px;}"),$Q=b("div",{target:"e1uqia1d27"})("position:absolute;left:4px;top:50%;transform:translateY(-50%);width:4px;height:48px;border-radius:4px;background:",e=>e.isRead?"transparent":e.theme.primary,";"),LQ=b("div",{target:"e1uqia1d26"})("margin-left:",e=>e.isRead?"0":"8px",";opacity:",e=>e.isRead?"0.85":"1",";"),FQ=b("div",{target:"e1uqia1d25"})({name:"4bl220",styles:"display:flex;align-items:center;justify-content:space-between;margin-bottom:8px"}),BQ=b("h4",{target:"e1uqia1d24"})("font-size:16px;font-weight:600;margin:0;color:",e=>e.theme.text,";flex:1;",e=>e.isRead&&`
    color: ${e.theme.textSecondary};
    font-weight: 500;
  `,";"),zQ=b("div",{target:"e1uqia1d23"})({name:"1q4vxyr",styles:"margin-left:8px"}),uy=b("span",{target:"e1uqia1d22"})("display:inline-flex;align-items:center;padding:4px 10px;font-size:12px;font-weight:600;border-radius:20px;margin-right:10px;background-color:",e=>{switch(e.scope){case"global":return`${e.theme.primary}15`;case"store":return`${e.theme.success}15`;default:return`${e.theme.gray}15`}},";color:",e=>{switch(e.scope){case"global":return e.theme.primary;case"store":return e.theme.success;default:return e.theme.textSecondary}},";i{margin-right:5px;font-size:14px;}"),VQ=b("p",{target:"e1uqia1d21"})("font-size:14px;margin:0 0 8px;color:",e=>e.theme.textSecondary,";line-height:1.5;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;"),jQ=b("div",{target:"e1uqia1d20"})("font-size:12px;color:",e=>e.theme.textSecondary,";"),UQ=b("div",{target:"e1uqia1d19"})({name:"13pnj1n",styles:"padding:24px;flex:1;overflow-y:auto;@media (min-width: 769px){padding:32px 40px;}"}),oT=b("div",{target:"e1uqia1d18"})("font-size:16px;line-height:1.6;margin:24px 0;color:",e=>e.theme.text,";white-space:pre-wrap;@media (min-width: 769px){font-size:17px;line-height:1.7;margin:32px 0;}"),aT=b("div",{target:"e1uqia1d17"})("margin-top:40px;padding-top:20px;border-top:1px solid ",e=>e.theme.grayLight,";display:flex;justify-content:space-between;font-size:13px;color:",e=>e.theme.textSecondary,";"),Af=b("div",{target:"e1uqia1d16"})({name:"42c0c2",styles:"display:flex;align-items:center;i{margin-right:6px;}"}),qQ=b("div",{target:"e1uqia1d15"})("display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 0;color:",e=>e.theme.textSecondary,";i{font-size:40px;margin-bottom:16px;animation:spin 1s linear infinite;}@keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}"),sT=b("div",{target:"e1uqia1d14"})("display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 0;color:",e=>e.theme.textSecondary,";text-align:center;i{font-size:48px;margin-bottom:16px;color:",e=>e.theme.gray,";}p{margin:0;font-size:16px;}"),lT=b("form",{target:"e1uqia1d13"})({name:"1nhqexb",styles:"padding:24px;flex:1;overflow-y:auto"}),cT=b("div",{target:"e1uqia1d12"})("flex:1;display:flex;flex-direction:column;transition:transform 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);transform:",e=>e.show?"translateY(0)":"translateY(20px)",";opacity:",e=>e.show?"1":"0",";"),Pf=b("div",{target:"e1uqia1d11"})({name:"1azpx8r",styles:"margin-bottom:20px"}),Df=b("label",{target:"e1uqia1d10"})("display:block;margin-bottom:8px;font-weight:600;font-size:14px;color:",e=>e.theme.text,";"),uT=b("input",{target:"e1uqia1d9"})("width:100%;padding:14px;border:1px solid ",e=>e.theme.borderColor||e.theme.gray,";border-radius:12px;background:",e=>e.theme.inputBg||e.theme.cardBg,";color:",e=>e.theme.text,";font-size:15px;transition:all 0.2s;&:focus{outline:none;border-color:",e=>e.theme.primary,";box-shadow:0 0 0 3px ",e=>e.theme.primary,"30;}"),dT=b("textarea",{target:"e1uqia1d8"})("width:100%;padding:14px;border:1px solid ",e=>e.theme.borderColor||e.theme.gray,";border-radius:12px;background:",e=>e.theme.inputBg||e.theme.cardBg,";color:",e=>e.theme.text,";resize:vertical;min-height:120px;font-size:15px;line-height:1.5;transition:all 0.2s;&:focus{outline:none;border-color:",e=>e.theme.primary,";box-shadow:0 0 0 3px ",e=>e.theme.primary,"30;}"),pT=b("div",{target:"e1uqia1d7"})({name:"xa0j6c",styles:"display:flex;gap:12px;margin-top:30px"}),Rf=b("button",{target:"e1uqia1d6"})("flex:1;padding:14px;border:none;border-radius:12px;font-weight:600;font-size:15px;cursor:pointer;transition:all 0.2s;background:",e=>e.primary?e.theme.primary:e.theme.grayLight,";color:",e=>e.primary?"white":e.theme.textSecondary,";&:hover{background:",e=>e.primary?e.theme.primaryLight:e.theme.gray,";transform:",e=>e.primary?"translateY(-2px)":"none",";box-shadow:",e=>e.primary?`0 4px 12px ${e.theme.primary}40`:"none",";}"),WQ=b("span",{target:"e1uqia1d5"})("display:inline-flex;align-items:center;justify-content:center;font-size:11px;font-weight:600;padding:3px 8px;border-radius:12px;margin-left:8px;background:",e=>e.isRead?`${e.theme.success}15`:`${e.theme.primary}15`,";color:",e=>e.isRead?e.theme.success:e.theme.primary,";i{font-size:12px;margin-right:4px;}"),dy=e=>{const t=new Date(e),r=Math.floor((new Date-t)/(1e3*60*60*24));return r===0?"今天 "+t.toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit"}):r===1?"昨天 "+t.toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit"}):r<7?`${r}天前`:t.toLocaleDateString("zh-TW")},HQ=()=>{const[e,t]=D.useState({width:typeof window<"u"?window.innerWidth:0,height:typeof window<"u"?window.innerHeight:0});return D.useEffect(()=>{const n=()=>{t({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),e},hT=b("div",{target:"e1uqia1d4"})("position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0, 0, 0, 0.4);backdrop-filter:blur(4px);z-index:1100;display:flex;justify-content:center;align-items:center;transition:opacity 0.3s ease;opacity:",e=>e.show?"1":"0",";pointer-events:",e=>e.show?"all":"none",";"),fT=b("div",{target:"e1uqia1d3"})("width:700px;max-width:90%;max-height:85vh;background:",e=>e.theme.cardBg,";border-radius:16px;box-shadow:0 10px 40px rgba(0, 0, 0, 0.2);display:flex;flex-direction:column;overflow:hidden;transform:",e=>e.show?"translateY(0)":"translateY(20px)",";transition:transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);"),gT=b("div",{target:"e1uqia1d2"})("padding:24px 28px;border-bottom:1px solid ",e=>e.theme.borderColor||e.theme.gray,";display:flex;justify-content:space-between;align-items:center;"),mT=b("h3",{target:"e1uqia1d1"})("margin:0;font-size:24px;font-weight:700;color:",e=>e.theme.text,";"),vT=b("div",{target:"e1uqia1d0"})({name:"jbgcl6",styles:"padding:32px 40px;overflow-y:auto;max-height:calc(85vh - 150px)"}),GQ=({isOpen:e,onClose:t,onRead:n})=>{const{userData:r,userRole:i,refreshUserData:o}=Bi(),[a,s]=D.useState([]),[l,c]=D.useState(!0),[d,p]=D.useState(!1),[f,h]=D.useState("all"),[g,m]=D.useState(null),[v,w]=D.useState(!1),[S,C]=D.useState(new Set),A=D.useRef(null),[_,I]=D.useState(!1),{width:E}=HQ(),k=E>=768,T=E<576,P=E>=992;D.useEffect(()=>{I(P)},[P]),D.useEffect(()=>{(()=>{const K=localStorage.getItem("readNotifications");let me=new Set;if(K)try{const ye=JSON.parse(K);Array.isArray(ye)&&(me=new Set(ye))}catch(ye){console.error("解析 localStorage 中的已讀狀態失敗",ye)}if(r!=null&&r.readAnnouncements&&Array.isArray(r.readAnnouncements)&&r.readAnnouncements.forEach(ye=>me.add(ye)),C(me),a.length>0&&n){const ye=a.filter(ee=>!me.has(ee.id)).length;n(ye)}})()},[r,a,n]),D.useEffect(()=>{e&&O()},[e,i]),D.useEffect(()=>{if(!e)return;const G=K=>{if(!(!A.current||!e)&&!A.current.contains(K.target)){if((v||d)&&(k||P))return;t()}};return document.body.style.overflow="hidden",document.addEventListener("mousedown",G),()=>{document.removeEventListener("mousedown",G),document.body.style.overflow=""}},[e,t,v,d,k,P]);const O=async()=>{if(!(!i||!r)){c(!0);try{const G=se(U,"announcements"),K=tt(G,Ot("createdAt","desc"),wS(50)),ye=(await be(K)).docs.map(oe=>({id:oe.id,...oe.data()}));let ee;if(i==="enterprise")ee=ye;else{const oe=r.store;ee=ye.filter(he=>!!(he.publisher==="enterprise"||he.scope==="global"||oe&&(he.publisher===oe||he.scope==="store"&&he.storeId===oe)||!he.publisher&&!he.scope))}if(s(ee),n){const oe=ee.filter(he=>!S.has(he.id)).length;n(oe)}if(g){const oe=ee.find(he=>he.id===g.id);oe&&m(oe)}}catch(G){console.error("獲取通知失敗:",G)}finally{c(!1)}}},R=G=>{if(S.has(G))return;const K=new Set(S);if(K.add(G),C(K),localStorage.setItem("readNotifications",JSON.stringify([...K])),r!=null&&r.uid)try{const me=Ie(U,"users",r.uid);fn(me,{readAnnouncements:[...K]}).then(()=>{console.log(`通知 ${G} 標記為已讀 (已保存到資料庫)`)}).catch(ye=>{console.error("更新資料庫失敗:",ye)})}catch(me){console.error("標記已讀失敗:",me)}if(n&&a.length>0){const me=a.filter(ye=>!K.has(ye.id)).length;n(me)}},N=G=>{m(G),w(!0),R(G.id)},L=async(G,K)=>{if(K&&K.stopPropagation(),window.confirm("確定要刪除此公告嗎？"))try{await si(Ie(U,"announcements",G)),s(me=>me.filter(ye=>ye.id!==G)),(g==null?void 0:g.id)===G&&(m(null),w(!1))}catch(me){console.error("刪除公告失敗:",me),alert("刪除失敗："+me.message)}},B=async G=>{var ee;G.preventDefault();const K=G.target,me=K.title.value.trim(),ye=K.content.value.trim();if(!me||!ye){alert("標題和內容不能為空");return}try{const oe={title:me,content:ye,createdAt:new Date().toISOString(),createdBy:(r==null?void 0:r.displayName)||"系統管理員"};if(i==="enterprise")oe.publisher="enterprise",oe.scope="global";else if(i==="manager"){const he=r.store||"unknown_store";oe.publisher=he,oe.scope="store",oe.storeId=he,oe.storeName=r.storeName||((ee=r.displayName)==null?void 0:ee.split(" ")[0])||"未知分店"}await tr(se(U,"announcements"),oe),await O(),p(!1),K.reset()}catch(oe){console.error("發布公告失敗:",oe),alert("發布失敗："+oe.message)}},V=G=>{G&&(G.stopPropagation(),G.preventDefault()),w(!1),m(null)},j=G=>{if(G&&G.stopPropagation(),(v||d)&&(k||P)){d?p(!1):v&&(w(!1),m(null));return}t()},z=G=>{G&&G.stopPropagation(),p(!1)},H=()=>f==="all"?a:a.filter(G=>f==="global"?G.publisher==="enterprise"||G.scope==="global":f==="store"?G.publisher!=="enterprise"&&G.publisher!==void 0||G.scope==="store"&&G.scope!==void 0:!0),J=i==="enterprise"||i==="manager",de=G=>{if(i==="enterprise")return!0;if(i==="manager"){const K=r==null?void 0:r.store;return K?G.publisher===K||G.scope==="store"&&G.storeId===K:!1}return!1},ae=i!=="enterprise",Ce=H(),te=G=>{const K=S.has(G.id),me=(g==null?void 0:g.id)===G.id,ye=G.publisher==="enterprise"||G.scope==="global";return y(OQ,{isRead:K,isActive:me,onClick:()=>N(G),children:[u($Q,{isRead:K}),y(LQ,{isRead:K,children:[y(FQ,{children:[u(uy,{scope:ye?"global":"store",children:ye?y(Ne,{children:[u("i",{className:"ri-global-line"}),"全體公告"]}):y(Ne,{children:[u("i",{className:"ri-store-2-line"}),"分店公告"]})}),u(WQ,{isRead:K,children:K?y(Ne,{children:[u("i",{className:"ri-check-double-line"}),"已讀"]}):y(Ne,{children:[u("i",{className:"ri-notification-badge-line"}),"未讀"]})}),u(BQ,{isRead:K,children:G.title}),de(G)&&u(zQ,{children:u(Rl,{delete:!0,onClick:ee=>L(G.id,ee),title:"刪除公告",children:u("i",{className:"ri-delete-bin-line"})})})]}),u(VQ,{children:G.content}),y(jQ,{children:[u("i",{className:"ri-time-line",style:{marginRight:"4px"}}),dy(G.createdAt),G.createdBy&&` · ${G.createdBy}`]})]})]},G.id)};return y(Ne,{children:[y(TQ,{ref:A,isOpen:e,isWideScreen:k,showForm:d,children:[y(IQ,{isWideScreen:k,showDetail:v&&!_,isMobile:T,children:[y(rT,{children:[u(iT,{children:"通知中心"}),y(DQ,{children:[J&&u(Rl,{onClick:G=>{G.stopPropagation(),p(!0)},title:"新增公告",children:u("i",{className:"ri-add-line"})}),u(Rl,{onClick:G=>j(G),title:"關閉",children:u("i",{className:"ri-close-line"})})]})]}),ae&&!d&&y(NQ,{children:[u(cy,{active:f==="all",onClick:()=>h("all"),children:"全部"}),u(cy,{active:f==="global",onClick:()=>h("global"),children:"全體公告"}),u(cy,{active:f==="store",onClick:()=>h("store"),children:"分店公告"})]}),u(RQ,{children:l?y(qQ,{children:[u("i",{className:"ri-loader-2-line"}),u("p",{children:"載入中..."})]}):Ce.length>0?u(MQ,{children:Ce.map(G=>te(G))}):y(sT,{children:[u("i",{className:"ri-notification-off-line"}),u("p",{children:"目前沒有公告"})]})})]}),!_&&y(AQ,{showDetail:v||d,isWideScreen:k,isForm:d,children:[y(rT,{children:[u(PQ,{onClick:G=>d?z(G):V(G),title:"返回列表",children:u("i",{className:"ri-arrow-left-line"})}),u(iT,{children:d?"發布新公告":(g==null?void 0:g.title)||"公告詳情"}),u(Rl,{onClick:G=>j(G),title:"關閉",children:u("i",{className:"ri-close-line"})})]}),d?u(cT,{show:d,children:y(lT,{onSubmit:B,children:[y(Pf,{children:[u(Df,{htmlFor:"title",children:"公告標題"}),u(uT,{id:"title",name:"title",placeholder:"請輸入標題",required:!0})]}),y(Pf,{children:[u(Df,{htmlFor:"content",children:"公告內容"}),u(dT,{id:"content",name:"content",placeholder:"請輸入內容",required:!0})]}),y(pT,{children:[u(Rf,{type:"submit",primary:!0,children:"發布公告"}),u(Rf,{type:"button",onClick:G=>z(G),children:"取消"})]})]})}):g?y(UQ,{children:[u(uy,{scope:g.publisher==="enterprise"||g.scope==="global"?"global":"store",children:g.publisher==="enterprise"||g.scope==="global"?y(Ne,{children:[u("i",{className:"ri-global-line"}),"全體公告"]}):y(Ne,{children:[u("i",{className:"ri-store-2-line"}),"分店公告"]})}),u(oT,{children:g.content}),y(aT,{children:[y(Af,{children:[u("i",{className:"ri-time-line"}),dy(g.createdAt)]}),y(Af,{children:[u("i",{className:"ri-user-line"}),g.createdBy||"系統"]})]})]}):u(sT,{children:u("p",{children:"未選擇任何公告"})})]})]}),P&&u(hT,{show:v&&g&&_,onClick:G=>G.stopPropagation(),children:y(fT,{show:v&&g,onClick:G=>G.stopPropagation(),children:[y(gT,{children:[u(mT,{children:(g==null?void 0:g.title)||"公告詳情"}),u(Rl,{onClick:G=>V(G),title:"返回列表",children:u("i",{className:"ri-close-line"})})]}),u(vT,{children:g&&y(Ne,{children:[u(uy,{scope:g.publisher==="enterprise"||g.scope==="global"?"global":"store",children:g.publisher==="enterprise"||g.scope==="global"?y(Ne,{children:[u("i",{className:"ri-global-line"}),"全體公告"]}):y(Ne,{children:[u("i",{className:"ri-store-2-line"}),"分店公告"]})}),u(oT,{children:g.content}),y(aT,{children:[y(Af,{children:[u("i",{className:"ri-time-line"}),dy(g.createdAt)]}),y(Af,{children:[u("i",{className:"ri-user-line"}),g.createdBy||"系統"]})]})]})})]})}),P&&u(hT,{show:d&&_,onClick:G=>G.stopPropagation(),children:y(fT,{show:d,onClick:G=>G.stopPropagation(),children:[y(gT,{children:[u(mT,{children:"發布新公告"}),u(Rl,{onClick:G=>z(G),title:"返回列表",children:u("i",{className:"ri-close-line"})})]}),u(vT,{children:u(cT,{show:d,children:y(lT,{onSubmit:B,children:[y(Pf,{children:[u(Df,{htmlFor:"title",children:"公告標題"}),u(uT,{id:"title",name:"title",placeholder:"請輸入標題",required:!0})]}),y(Pf,{children:[u(Df,{htmlFor:"content",children:"公告內容"}),u(dT,{id:"content",name:"content",placeholder:"請輸入內容",required:!0})]}),y(pT,{children:[u(Rf,{type:"submit",primary:!0,children:"發布公告"}),u(Rf,{type:"button",onClick:G=>z(G),children:"取消"})]})]})})})]})})]})},YQ=b("header",{target:"e19xmpzh8"})("background:",e=>e.theme.cardBg,";padding:1rem;box-shadow:0 2px 4px rgba(0,0,0,0.1);position:sticky;top:0;z-index:100;"),KQ=b("nav",{target:"e19xmpzh7"})({name:"16m7lez",styles:"display:flex;justify-content:space-between;align-items:center;max-width:1200px;margin:0 auto"}),XQ=b("h1",{target:"e19xmpzh6"})("color:",e=>e.theme.text,";margin:0;font-size:1.5rem;"),QQ=b("div",{target:"e19xmpzh4"})("display:inline-flex;align-items:center;justify-content:center;font-size:26px;color:",e=>e.theme.primary,";cursor:pointer;margin-left:14px;position:relative;width:40px;height:40px;border-radius:50%;background:",e=>e.active?e.theme.grayLight:"transparent",";transition:all 0.2s ease;&:hover{background:",e=>e.theme.grayLight,";transform:scale(1.05) translateY(-2px);}"),JQ=b("span",{target:"e19xmpzh3"})("position:absolute;top:0;right:0;background:",e=>e.theme.danger,";color:white;border-radius:50%;width:18px;height:18px;font-size:11px;display:flex;align-items:center;justify-content:center;font-weight:bold;"),Bt=({title:e})=>{qt();const{currentUser:t}=gi(),{userRole:n,userData:r}=Bi(),[i,o]=D.useState(!1),[a,s]=D.useState(0),[l,c]=D.useState([]);D.useEffect(()=>{if(!t||!n||!r)return;const f=async()=>{try{const g=se(U,"announcements"),m=tt(g,Ot("createdAt","desc"),wS(50)),w=(await be(m)).docs.map(_=>({id:_.id,..._.data()}));c(w);let S;if(n==="enterprise")S=w;else{const _=r.store;S=w.filter(I=>!!(I.publisher==="enterprise"||I.scope==="global"||_&&(I.publisher===_||I.scope==="store"&&I.storeId===_)||!I.publisher&&!I.scope))}const C=r.readAnnouncements||[],A=S.filter(_=>!C.includes(_.id));s(A.length)}catch(g){console.error("獲取未讀通知數量失敗:",g),s(0)}};f();const h=setInterval(f,6e4);return()=>clearInterval(h)},[t,n,r]);const d=()=>{o(!0)},p=f=>{s(f===void 0||f===0?0:f)};return u(YQ,{children:y(KQ,{children:[u(XQ,{children:e}),u("div",{style:{display:"flex",alignItems:"center"},children:t&&y(Ne,{children:[y(QQ,{onClick:d,active:i,"aria-label":"通知中心",children:[u("i",{className:"ri-notification-3-line"}),a>0&&u(JQ,{children:a>99?"99+":a})]}),u(GQ,{isOpen:i,onClose:()=>o(!1),onRead:p})]})})]})})},ZQ=b("div",{target:"e4d8xnk9"})({name:"1yjx7km",styles:"padding:20px"}),xT=b("section",{target:"e4d8xnk8"})("background:",e=>e.theme.cardBg,";border-radius:12px;padding:20px;margin-bottom:20px;box-shadow:0 2px 4px rgba(0,0,0,0.1);"),yT=b("h2",{target:"e4d8xnk7"})("color:",e=>e.theme.text,";margin-bottom:20px;"),eJ=b("form",{target:"e4d8xnk6"})({name:"od41o8",styles:"display:grid;gap:15px;max-width:500px"}),Nf=b("input",{target:"e4d8xnk5"})("padding:12px;border:1px solid ",e=>e.theme.borderColor,";border-radius:8px;font-size:16px;background:",e=>e.theme.inputBg,";color:",e=>e.theme.text,";&:focus{outline:none;border-color:",e=>e.theme.primary,";}"),bT=b("select",{target:"e4d8xnk4"})("padding:12px;border:1px solid ",e=>e.theme.borderColor,";border-radius:8px;font-size:16px;background:",e=>e.theme.inputBg,";color:",e=>e.theme.text,";&:focus{outline:none;border-color:",e=>e.theme.primary,";}"),wT=b("button",{target:"e4d8xnk3"})("background:",e=>e.theme.primary,";color:white;padding:12px;border:none;border-radius:8px;font-size:16px;cursor:pointer;transition:opacity 0.3s;&:hover{opacity:0.9;}"),tJ=b("table",{target:"e4d8xnk2"})({name:"gmwmne",styles:"width:100%;border-collapse:collapse;margin-top:20px"}),Fu=b("th",{target:"e4d8xnk1"})("text-align:left;padding:12px;border-bottom:2px solid ",e=>e.theme.borderColor,";color:",e=>e.theme.text,";"),Bu=b("td",{target:"e4d8xnk0"})("padding:12px;border-bottom:1px solid ",e=>e.theme.borderColor,";color:",e=>e.theme.text,";"),nJ=()=>{const[e,t]=D.useState([]),[n,r]=D.useState(!0),[i,o]=D.useState("");D.useEffect(()=>{a()},[]);const a=async()=>{try{const d=(await be(se(U,"users"))).docs.map(p=>({id:p.id,...p.data()}));t(d)}catch(c){o("獲取員工列表失敗"),console.error(c)}finally{r(!1)}},s=async c=>{c.preventDefault();const d=c.target.email.value,p=c.target.password.value,f=c.target.role.value,h=c.target.name.value,g=c.target.store.value;try{const m=await R5(Fi,d,p);await tr(se(U,"users"),{uid:m.user.uid,email:d,role:f,name:h,store:g,createdAt:new Date().toISOString()}),await a(),c.target.reset()}catch(m){o("創建員工帳號失敗"),console.error(m)}},l=async(c,d)=>{try{await fn(Ie(U,"users",c),{role:d}),await a()}catch(p){o("更新角色失敗"),console.error(p)}};return y(Ne,{children:[u(Bt,{title:"員工管理"}),y(ZQ,{children:[y(xT,{children:[u(yT,{children:"新增員工"}),y(eJ,{onSubmit:s,children:[u(Nf,{type:"text",name:"name",placeholder:"員工姓名",required:!0}),u(Nf,{type:"email",name:"email",placeholder:"電子郵件",required:!0}),u(Nf,{type:"password",name:"password",placeholder:"密碼",required:!0,minLength:"6"}),u(Nf,{type:"text",name:"store",placeholder:"所屬分店",required:!0}),y(bT,{name:"role",required:!0,children:[u("option",{value:"",children:"選擇角色"}),u("option",{value:"manager",children:"分店主管"}),u("option",{value:"staff",children:"基層員工"})]}),u(wT,{type:"submit",children:"新增員工"})]})]}),y(xT,{children:[u(yT,{children:"員工列表"}),i&&u("div",{style:{color:"red"},children:i}),y(tJ,{children:[u("thead",{children:y("tr",{children:[u(Fu,{children:"姓名"}),u(Fu,{children:"電子郵件"}),u(Fu,{children:"分店"}),u(Fu,{children:"角色"}),u(Fu,{children:"操作"})]})}),u("tbody",{children:e.map(c=>y("tr",{children:[u(Bu,{children:c.name}),u(Bu,{children:c.email}),u(Bu,{children:c.store}),u(Bu,{children:y(bT,{value:c.role,onChange:d=>l(c.id,d.target.value),children:[u("option",{value:"manager",children:"分店主管"}),u("option",{value:"staff",children:"基層員工"})]})}),u(Bu,{children:u(wT,{onClick:()=>l(c.id,"inactive"),children:"停用"})})]},c.id))})]})]})]})]})},rJ=b("div",{target:"e1ilmsf310"})({name:"1yjx7km",styles:"padding:20px"}),ST=b("section",{target:"e1ilmsf39"})("background:",e=>e.theme.cardBg,";border-radius:12px;padding:20px;margin-bottom:20px;box-shadow:0 2px 4px rgba(0,0,0,0.1);"),CT=b("h2",{target:"e1ilmsf38"})("color:",e=>e.theme.text,";margin-bottom:20px;"),iJ=b("form",{target:"e1ilmsf37"})({name:"od41o8",styles:"display:grid;gap:15px;max-width:500px"}),_T=b("input",{target:"e1ilmsf36"})("padding:12px;border:1px solid ",e=>e.theme.borderColor,";border-radius:8px;font-size:16px;background:",e=>e.theme.inputBg,";color:",e=>e.theme.text,";&:focus{outline:none;border-color:",e=>e.theme.primary,";}"),oJ=b("textarea",{target:"e1ilmsf35"})("padding:12px;border:1px solid ",e=>e.theme.borderColor,";border-radius:8px;font-size:16px;background:",e=>e.theme.inputBg,";color:",e=>e.theme.text,";min-height:100px;resize:vertical;&:focus{outline:none;border-color:",e=>e.theme.primary,";}"),py=b("select",{target:"e1ilmsf34"})("padding:12px;border:1px solid ",e=>e.theme.borderColor,";border-radius:8px;font-size:16px;background:",e=>e.theme.inputBg,";color:",e=>e.theme.text,";&:focus{outline:none;border-color:",e=>e.theme.primary,";}"),kT=b("button",{target:"e1ilmsf33"})("background:",e=>e.theme.primary,";color:white;padding:12px;border:none;border-radius:8px;font-size:16px;cursor:pointer;transition:opacity 0.3s;&:hover{opacity:0.9;}"),aJ=b("table",{target:"e1ilmsf32"})({name:"gmwmne",styles:"width:100%;border-collapse:collapse;margin-top:20px"}),Nl=b("th",{target:"e1ilmsf31"})("text-align:left;padding:12px;border-bottom:2px solid ",e=>e.theme.borderColor,";color:",e=>e.theme.text,";"),Ml=b("td",{target:"e1ilmsf30"})("padding:12px;border-bottom:1px solid ",e=>e.theme.borderColor,";color:",e=>e.theme.text,";"),sJ=()=>{const[e,t]=D.useState([]),[n,r]=D.useState(!0),[i,o]=D.useState("");D.useEffect(()=>{a()},[]);const a=async()=>{try{const p=(await be(se(U,"courses"))).docs.map(f=>({id:f.id,...f.data()}));t(p)}catch(d){o("獲取課程列表失敗"),console.error(d)}finally{r(!1)}},s=async d=>{d.preventDefault();const p=d.target.title.value,f=d.target.description.value,h=d.target.category.value,g=d.target.duration.value,m=d.target.level.value;try{await tr(se(U,"courses"),{title:p,description:f,category:h,duration:g,level:m,createdAt:new Date().toISOString(),status:"active"}),await a(),d.target.reset()}catch(v){o("創建課程失敗"),console.error(v)}},l=async(d,p)=>{try{await fn(Ie(U,"courses",d),{status:p}),await a()}catch(f){o("更新課程狀態失敗"),console.error(f)}},c=async d=>{if(window.confirm("確定要刪除此課程嗎？"))try{await si(Ie(U,"courses",d)),await a()}catch(p){o("刪除課程失敗"),console.error(p)}};return y(Ne,{children:[u(Bt,{title:"課程管理"}),y(rJ,{children:[y(ST,{children:[u(CT,{children:"新增課程"}),y(iJ,{onSubmit:s,children:[u(_T,{type:"text",name:"title",placeholder:"課程標題",required:!0}),u(oJ,{name:"description",placeholder:"課程描述",required:!0}),y(py,{name:"category",required:!0,children:[u("option",{value:"",children:"選擇類別"}),u("option",{value:"product",children:"產品知識"}),u("option",{value:"service",children:"服務流程"}),u("option",{value:"safety",children:"安全規範"}),u("option",{value:"management",children:"管理技能"})]}),u(_T,{type:"number",name:"duration",placeholder:"課程時長（分鐘）",required:!0,min:"1"}),y(py,{name:"level",required:!0,children:[u("option",{value:"",children:"選擇難度"}),u("option",{value:"beginner",children:"初級"}),u("option",{value:"intermediate",children:"中級"}),u("option",{value:"advanced",children:"高級"})]}),u(kT,{type:"submit",children:"新增課程"})]})]}),y(ST,{children:[u(CT,{children:"課程列表"}),i&&u("div",{style:{color:"red"},children:i}),y(aJ,{children:[u("thead",{children:y("tr",{children:[u(Nl,{children:"標題"}),u(Nl,{children:"類別"}),u(Nl,{children:"時長"}),u(Nl,{children:"難度"}),u(Nl,{children:"狀態"}),u(Nl,{children:"操作"})]})}),u("tbody",{children:e.map(d=>y("tr",{children:[u(Ml,{children:d.title}),u(Ml,{children:d.category}),y(Ml,{children:[d.duration," 分鐘"]}),u(Ml,{children:d.level}),u(Ml,{children:y(py,{value:d.status,onChange:p=>l(d.id,p.target.value),children:[u("option",{value:"active",children:"啟用"}),u("option",{value:"inactive",children:"停用"})]})}),u(Ml,{children:u(kT,{onClick:()=>c(d.id),children:"刪除"})})]},d.id))})]})]})]})]})},lJ=b("div",{target:"e12djb8q10"})({name:"1yjx7km",styles:"padding:20px"}),ET=b("section",{target:"e12djb8q9"})("background:",e=>e.theme.cardBg,";border-radius:12px;padding:20px;margin-bottom:20px;box-shadow:0 2px 4px rgba(0,0,0,0.1);"),TT=b("h2",{target:"e12djb8q8"})("color:",e=>e.theme.text,";margin-bottom:20px;"),cJ=b("form",{target:"e12djb8q7"})({name:"od41o8",styles:"display:grid;gap:15px;max-width:500px"}),IT=b("input",{target:"e12djb8q6"})("padding:12px;border:1px solid ",e=>e.theme.borderColor,";border-radius:8px;font-size:16px;background:",e=>e.theme.inputBg,";color:",e=>e.theme.text,";&:focus{outline:none;border-color:",e=>e.theme.primary,";}"),uJ=b("textarea",{target:"e12djb8q5"})("padding:12px;border:1px solid ",e=>e.theme.borderColor,";border-radius:8px;font-size:16px;background:",e=>e.theme.inputBg,";color:",e=>e.theme.text,";min-height:100px;resize:vertical;&:focus{outline:none;border-color:",e=>e.theme.primary,";}"),AT=b("select",{target:"e12djb8q4"})("padding:12px;border:1px solid ",e=>e.theme.borderColor,";border-radius:8px;font-size:16px;background:",e=>e.theme.inputBg,";color:",e=>e.theme.text,";&:focus{outline:none;border-color:",e=>e.theme.primary,";}"),PT=b("button",{target:"e12djb8q3"})("background:",e=>e.theme.primary,";color:white;padding:12px;border:none;border-radius:8px;font-size:16px;cursor:pointer;transition:opacity 0.3s;&:hover{opacity:0.9;}"),dJ=b("table",{target:"e12djb8q2"})({name:"gmwmne",styles:"width:100%;border-collapse:collapse;margin-top:20px"}),Ol=b("th",{target:"e12djb8q1"})("text-align:left;padding:12px;border-bottom:2px solid ",e=>e.theme.borderColor,";color:",e=>e.theme.text,";"),$l=b("td",{target:"e12djb8q0"})("padding:12px;border-bottom:1px solid ",e=>e.theme.borderColor,";color:",e=>e.theme.text,";"),pJ=()=>{const[e,t]=D.useState([]),[n,r]=D.useState(!0),[i,o]=D.useState("");D.useEffect(()=>{a()},[]);const a=async()=>{try{const p=(await be(se(U,"announcements"))).docs.map(f=>({id:f.id,...f.data()}));t(p)}catch(d){o("獲取公告列表失敗"),console.error(d)}finally{r(!1)}},s=async d=>{d.preventDefault();const p=d.target.title.value,f=d.target.content.value,h=d.target.type.value,g=d.target.targetStores.value.split(",").map(m=>m.trim());try{await tr(se(U,"announcements"),{title:p,content:f,type:h,targetStores:g,createdAt:new Date().toISOString(),status:"active",views:0}),await a(),d.target.reset()}catch(m){o("發布公告失敗"),console.error(m)}},l=async(d,p)=>{try{await fn(Ie(U,"announcements",d),{status:p}),await a()}catch(f){o("更新公告狀態失敗"),console.error(f)}},c=async d=>{if(window.confirm("確定要刪除此公告嗎？"))try{await si(Ie(U,"announcements",d)),await a()}catch(p){o("刪除公告失敗"),console.error(p)}};return y(Ne,{children:[u(Bt,{title:"公告管理"}),y(lJ,{children:[y(ET,{children:[u(TT,{children:"發布公告"}),y(cJ,{onSubmit:s,children:[u(IT,{type:"text",name:"title",placeholder:"公告標題",required:!0}),u(uJ,{name:"content",placeholder:"公告內容",required:!0}),y(AT,{name:"type",required:!0,children:[u("option",{value:"",children:"選擇類型"}),u("option",{value:"important",children:"重要通知"}),u("option",{value:"update",children:"系統更新"}),u("option",{value:"event",children:"活動公告"}),u("option",{value:"policy",children:"政策變更"})]}),u(IT,{type:"text",name:"targetStores",placeholder:"目標分店（用逗號分隔）",required:!0}),u(PT,{type:"submit",children:"發布公告"})]})]}),y(ET,{children:[u(TT,{children:"公告列表"}),i&&u("div",{style:{color:"red"},children:i}),y(dJ,{children:[u("thead",{children:y("tr",{children:[u(Ol,{children:"標題"}),u(Ol,{children:"類型"}),u(Ol,{children:"目標分店"}),u(Ol,{children:"發布時間"}),u(Ol,{children:"狀態"}),u(Ol,{children:"操作"})]})}),u("tbody",{children:e.map(d=>y("tr",{children:[u($l,{children:d.title}),u($l,{children:d.type}),u($l,{children:d.targetStores.join(", ")}),u($l,{children:new Date(d.createdAt).toLocaleString()}),u($l,{children:y(AT,{value:d.status,onChange:p=>l(d.id,p.target.value),children:[u("option",{value:"active",children:"啟用"}),u("option",{value:"inactive",children:"停用"})]})}),u($l,{children:u(PT,{onClick:()=>c(d.id),children:"刪除"})})]},d.id))})]})]})]})]})},hJ=b("div",{target:"e1xatbko2"})("display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;background:",e=>e.theme.background,";"),fJ=b("h1",{target:"e1xatbko1"})("color:",e=>e.theme.error,";margin-bottom:1rem;"),gJ=b("p",{target:"e1xatbko0"})("color:",e=>e.theme.text,";"),mJ=()=>y(hJ,{children:[u(fJ,{children:"權限不足"}),u(gJ,{children:"您沒有權限瀏覽此頁面。"})]}),vJ=b("nav",{target:"e1fpbkbp3"})("position:fixed;bottom:0;left:0;right:0;background-color:",e=>e.theme.cardBg,";padding:10px 20px;padding-bottom:calc(10px + env(safe-area-inset-bottom));box-shadow:0 -2px 10px ",e=>e.theme.shadowColor,";z-index:1000;"),xJ=b("ul",{target:"e1fpbkbp2"})({name:"e16o7o",styles:"display:flex;justify-content:space-around;list-style:none;margin:0;padding:0"}),yJ=b("li",{target:"e1fpbkbp1"})({name:"1azakc",styles:"text-align:center"}),bJ=b(bt,{target:"e1fpbkbp0"})("display:flex;flex-direction:column;align-items:center;text-decoration:none!important;color:",e=>e.active?e.theme.primary:e.theme.textSecondary,";font-size:12px;transition:all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);i{font-size:24px;margin-bottom:4px;}&:hover{color:",e=>e.theme.primary,";transform:translateY(-3px) scale(1.05);text-decoration:none!important;border-bottom:none!important;outline:none!important;}&:active,&:focus,&:visited{text-decoration:none!important;border-bottom:none!important;outline:none!important;}"),kn=()=>{const e=Io(),{userRole:t}=Bi(),r=[...[{path:"/dashboard",icon:"ri-dashboard-line",label:"儀表板"},{path:"/courses-internal",icon:"ri-book-open-line",label:"學習"},{path:"/exams",icon:"ri-file-list-3-line",label:"考試"},{path:"/schedule",icon:"ri-calendar-check-line",label:"排班"},{path:"/profile",icon:"ri-user-line",label:"個人"}]];return t==="admin"&&r.splice(4,0,{path:"/schedule-history",icon:"ri-history-line",label:"歷史記錄"}),u(vJ,{children:u(xJ,{children:r.map(i=>u(yJ,{children:y(bJ,{to:i.path,active:e.pathname===i.path?1:0,children:[u("i",{className:i.icon}),i.label]})},i.path))})})},tO=async(e,t,n,r,i=0,o=0)=>{try{const a=Ie(U,"users",e),s=await In(a),l=s.exists()?s.data():{},c=l.courseProgress||{},d=l.completedSubsections||{},p=l.learningStats||{totalCoursesStarted:0,totalCoursesCompleted:0,totalSectionsCompleted:0,totalExamsPassed:0,totalLearningTime:0,averageScore:0,lastActiveDate:null,streakDays:0};c[t]||(c[t]={},p.totalCoursesStarted+=1),c[t][n]||(c[t][n]={}),c[t][n][r]={completed:!0,completedAt:new Date().toISOString(),score:i,timeSpent:o};const f=`${t}_${n}_${r}`;d[f]=!0,p.totalSectionsCompleted+=1,p.totalLearningTime+=o,p.lastActiveDate=new Date().toISOString();const h=[];Object.values(c).forEach(v=>{Object.values(v).forEach(w=>{Object.values(w).forEach(S=>{S.score>0&&h.push(S.score)})})}),h.length>0&&(p.averageScore=Math.round(h.reduce((v,w)=>v+w,0)/h.length));const g=l.achievements||{badges:[],certificates:[],milestones:[]},m=CJ(p,g.badges);return await fn(a,{courseProgress:c,completedSubsections:d,learningStats:p,"achievements.badges":[...g.badges,...m],updatedAt:new Date}),{success:!0,newBadges:m,learningStats:p}}catch(a){throw console.error("完成小節時發生錯誤:",a),a}},wJ=async(e,t,n,r,i,o)=>{try{const a=Ie(U,"users",e),s=await In(a);if(!s.exists())throw new Error("用戶不存在");const l=s.data(),c=l.examRecords||{},d=l.learningStats||{};return c[t]||(c[t]=[]),c[t].push({attemptDate:new Date().toISOString(),score:r,answers:n,passed:i,timeSpent:o}),i&&(d.totalExamsPassed=(d.totalExamsPassed||0)+1),await fn(a,{examRecords:c,learningStats:d,updatedAt:new Date}),{success:!0}}catch(a){throw console.error("記錄考試結果時發生錯誤:",a),a}},Vd=async e=>{try{const t=Ie(U,"users",e),n=await In(t);if(!n.exists())return{courseProgress:{},learningStats:{totalCoursesStarted:0,totalCoursesCompleted:0,totalSectionsCompleted:0,totalExamsPassed:0,totalLearningTime:0,averageScore:0,lastActiveDate:null,streakDays:0},achievements:{badges:[],certificates:[],milestones:[]}};const r=n.data();return{courseProgress:r.courseProgress||{},learningStats:r.learningStats||{},achievements:r.achievements||{badges:[],certificates:[],milestones:[]},examRecords:r.examRecords||{}}}catch(t){throw console.error("獲取用戶進度時發生錯誤:",t),t}},SJ=(e,t,n,r)=>{var o,a,s;return((s=(a=(o=(e.courseProgress||{})[t])==null?void 0:o[n])==null?void 0:a[r])==null?void 0:s.completed)||!1},CJ=(e,t)=>{const n=[];return e.totalCoursesStarted>=1&&!t.includes("first_course")&&n.push("first_course"),e.averageScore>=95&&!t.includes("perfect_score")&&n.push("perfect_score"),e.totalLearningTime>=300&&!t.includes("study_time_5h")&&n.push("study_time_5h"),e.totalSectionsCompleted>=10&&!t.includes("sections_10")&&n.push("sections_10"),e.totalSectionsCompleted>=25&&!t.includes("sections_25")&&n.push("sections_25"),n},Dp=(e,t="",n=0)=>{switch(e){case"基礎訓練":return"ri-building-line";case"飲料製作":return"ri-cup-line";case"店面管理":return"ri-customer-service-line";case"衛生安全":return"ri-shield-check-line";case"行銷技巧":return"ri-medal-line";case"進階技能":return"ri-star-line";case"專業技能學習":return"ri-graduation-cap-line"}if(t){const i=t.toLowerCase();if(i.includes("基礎")||i.includes("認識")||i.includes("設備"))return"ri-building-line";if(i.includes("茶")||i.includes("煮茶"))return"ri-cup-line";if(i.includes("奶")||i.includes("調奶"))return"ri-drop-line";if(i.includes("加料")||i.includes("珍珠")||i.includes("波霸"))return"ri-shapes-line";if(i.includes("果")||i.includes("冰沙"))return"ri-seedling-line";if(i.includes("出杯")||i.includes("點單")||i.includes("流程"))return"ri-customer-service-line";if(i.includes("技巧")||i.includes("進階")||i.includes("職人"))return"ri-medal-line";if(i.includes("大師")||i.includes("專業"))return"ri-star-line";if(i.includes("限時")||i.includes("飲品"))return"ri-time-line"}const r=["ri-book-open-line","ri-cup-line","ri-drop-line","ri-shapes-line","ri-seedling-line","ri-customer-service-line","ri-medal-line","ri-star-line","ri-time-line","ri-graduation-cap-line"];return n&&n<=r.length?r[n-1]:r[Math.min(n-1,r.length-1)]||"ri-book-open-line"},Rp=(e,t="",n=0)=>{switch(e){case"基礎訓練":return"#7C3AED, #3B82F6";case"飲料製作":return"#EC4899, #F472B6";case"店面管理":return"#2563EB, #60A5FA";case"衛生安全":return"#10B981, #34D399";case"行銷技巧":return"#F59E0B, #FBBF24";case"進階技能":return"#EF4444, #F87171";case"專業技能學習":return"#8B5CF6, #C4B5FD"}if(t){const i=t.toLowerCase();if(i.includes("基礎")||i.includes("認識")||i.includes("設備"))return"#7C3AED, #3B82F6";if(i.includes("茶")||i.includes("煮茶"))return"#EC4899, #F472B6";if(i.includes("奶")||i.includes("調奶"))return"#2563EB, #60A5FA";if(i.includes("加料")||i.includes("珍珠")||i.includes("波霸"))return"#F59E0B, #FBBF24";if(i.includes("果")||i.includes("冰沙"))return"#10B981, #34D399";if(i.includes("出杯")||i.includes("點單")||i.includes("流程"))return"#8B5CF6, #C4B5FD";if(i.includes("技巧")||i.includes("進階")||i.includes("職人"))return"#EF4444, #F87171";if(i.includes("大師")||i.includes("專業"))return"#F59E0B, #FBBF24";if(i.includes("限時")||i.includes("飲品"))return"#EC4899, #F472B6"}const r=["#7C3AED, #3B82F6","#EC4899, #F472B6","#2563EB, #60A5FA","#F59E0B, #FBBF24","#10B981, #34D399","#8B5CF6, #C4B5FD","#EF4444, #F87171","#F59E0B, #FBBF24","#EC4899, #F472B6","#10B981, #34D399"];return n&&n<=r.length?r[n-1]:r[Math.min(n-1,r.length-1)]||"#7C3AED, #3B82F6"},DT=b("div",{target:"e7pa13w48"})("min-height:100vh;background:",e=>e.theme.darkTheme?"linear-gradient(135deg, #0F172A 0%, #1E293B 50%, #334155 100%)":"linear-gradient(135deg, #F8FAFC 0%, #E2E8F0 100%)",";position:relative;",e=>e.theme.darkTheme&&`
    &::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 20%, rgba(124, 58, 237, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.15) 0%, transparent 50%);
      pointer-events: none;
      z-index: 0;
    }
  `,";"),RT=b("div",{target:"e7pa13w47"})({name:"h618ng",styles:"padding:20px 0 120px;position:relative;z-index:1"}),NT=b("div",{target:"e7pa13w46"})({name:"17201e9",styles:"max-width:1400px;margin:0 auto;padding:0 20px;@media (min-width: 1600px){max-width:1600px;}"}),_J=b("section",{target:"e7pa13w45"})("margin-bottom:40px;background:",e=>e.theme.cardBg,";border-radius:24px;padding:32px;box-shadow:0 8px 32px ",e=>e.theme.shadowColor,";position:relative;overflow:hidden;",e=>e.theme.darkTheme&&`
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(124, 58, 237, 0.1));
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.1);
      
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 20%, rgba(124, 58, 237, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.15) 0%, transparent 50%);
      pointer-events: none;
      z-index: 1;
    }
  `,";"),kJ=b("div",{target:"e7pa13w44"})({name:"2fvvmx",styles:"position:relative;z-index:2;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:20px;@media (max-width: 768px){flex-direction:column;text-align:center;}"}),EJ=b("div",{target:"e7pa13w43"})({name:"82a6rk",styles:"flex:1"}),TJ=b("h2",{target:"e7pa13w42"})("font-size:32px;font-weight:700;margin-bottom:12px;color:",e=>e.theme.text,";",e=>e.theme.darkTheme&&`
    background: linear-gradient(to right, #fff, #e0e0e0);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  `,"@media (max-width: 768px){font-size:28px;}"),IJ=b("p",{target:"e7pa13w41"})("font-size:18px;color:",e=>e.theme.textSecondary,";margin-bottom:16px;",e=>e.theme.darkTheme&&`
    opacity: 0.9;
  `,"@media (max-width: 768px){font-size:16px;}"),AJ=b("div",{target:"e7pa13w40"})("font-size:16px;color:",e=>e.theme.primary,";font-weight:500;display:flex;align-items:center;gap:8px;i{font-size:18px;}"),PJ=b("div",{target:"e7pa13w39"})({name:"tprloc",styles:"display:flex;gap:12px;flex-wrap:wrap;@media (max-width: 768px){justify-content:center;}"}),MT=b(bt,{target:"e7pa13w38"})({name:"17cpghb",styles:"background:linear-gradient(135deg, #7C3AED, #3B82F6);color:white;border:none;border-radius:12px;padding:12px 20px;font-size:14px;font-weight:500;text-decoration:none;cursor:pointer;transition:all 0.3s ease;display:flex;align-items:center;gap:8px;&:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(124, 58, 237, 0.3);color:white;text-decoration:none;}i{font-size:16px;}"}),DJ=b("div",{target:"e7pa13w37"})({name:"1ew9s6f",styles:"display:grid;grid-template-columns:repeat(auto-fit, minmax(280px, 1fr));gap:24px;margin-bottom:40px;@media (max-width: 768px){grid-template-columns:repeat(auto-fit, minmax(250px, 1fr));gap:16px;}@media (max-width: 480px){grid-template-columns:1fr;}"}),xi=b("div",{target:"e7pa13w36"})("background:",e=>e.theme.cardBg,";border-radius:20px;padding:28px;box-shadow:0 8px 32px ",e=>e.theme.shadowColor,";position:relative;overflow:hidden;transition:all 0.3s ease;&:hover{transform:translateY(-4px);box-shadow:0 12px 40px ",e=>e.theme.shadowColor,";}",e=>e.theme.darkTheme&&`
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(124, 58, 237, 0.08));
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 20%, rgba(124, 58, 237, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.1) 0%, transparent 50%);
      pointer-events: none;
      z-index: 1;
    }
  `,";"),yi=b("div",{target:"e7pa13w35"})({name:"1audzwe",styles:"display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;position:relative;z-index:2"}),bi=b("div",{target:"e7pa13w34"})("width:56px;height:56px;border-radius:16px;background:linear-gradient(135deg, ",e=>e.gradient||"#7C3AED, #3B82F6",");display:flex;align-items:center;justify-content:center;color:white;font-size:24px;",e=>e.theme.darkTheme&&`
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
  `,";"),wi=b("div",{target:"e7pa13w33"})("font-size:36px;font-weight:700;color:",e=>e.theme.text,";position:relative;z-index:2;",e=>e.theme.darkTheme&&`
    background: linear-gradient(to right, #fff, #e0e0e0);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  `,";"),Si=b("div",{target:"e7pa13w32"})("font-size:16px;color:",e=>e.theme.textSecondary,";margin-bottom:8px;position:relative;z-index:2;",e=>e.theme.darkTheme&&`
    opacity: 0.9;
  `,";"),Ci=b("div",{target:"e7pa13w31"})("font-size:14px;color:",e=>e.theme.textSecondary,";position:relative;z-index:2;",e=>e.theme.darkTheme&&`
    opacity: 0.8;
  `,";"),hy=b("section",{target:"e7pa13w30"})({name:"qkomnt",styles:"margin-bottom:40px"}),fy=b("h3",{target:"e7pa13w29"})("font-size:24px;font-weight:700;margin-bottom:24px;color:",e=>e.theme.text,";display:flex;align-items:center;gap:12px;i{color:",e=>e.theme.primary,";font-size:28px;}",e=>e.theme.darkTheme&&`
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    
    i {
      text-shadow: 0 0 15px rgba(124, 58, 237, 0.6);
    }
  `,";"),gy=b("div",{target:"e7pa13w28"})({name:"1vu3wqj",styles:"display:grid;grid-template-columns:repeat(auto-fit, minmax(350px, 1fr));gap:24px;@media (max-width: 768px){grid-template-columns:1fr;gap:16px;}"}),va=b("div",{target:"e7pa13w27"})("background:",e=>e.theme.cardBg,";border-radius:20px;padding:24px;box-shadow:0 8px 32px ",e=>e.theme.shadowColor,";position:relative;overflow:hidden;cursor:pointer;transition:all 0.3s ease;&:hover{transform:translateY(-4px);box-shadow:0 12px 40px ",e=>e.theme.shadowColor,";}",e=>e.theme.darkTheme&&`
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(124, 58, 237, 0.08));
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 20%, rgba(124, 58, 237, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.1) 0%, transparent 50%);
      pointer-events: none;
      z-index: 1;
    }
  `,";"),xa=b("div",{target:"e7pa13w26"})({name:"1hztbd7",styles:"display:flex;align-items:flex-start;gap:16px;margin-bottom:16px;position:relative;z-index:2"}),ya=b("div",{target:"e7pa13w25"})("width:64px;height:64px;border-radius:16px;background:linear-gradient(135deg, ",e=>e.gradient||"#7C3AED, #3B82F6",");display:flex;align-items:center;justify-content:center;color:white;font-size:28px;flex-shrink:0;",e=>e.theme.darkTheme&&`
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
  `,";"),ba=b("div",{target:"e7pa13w24"})({name:"82a6rk",styles:"flex:1"}),wa=b("h4",{target:"e7pa13w23"})("font-size:18px;font-weight:600;margin-bottom:8px;color:",e=>e.theme.text,";",e=>e.theme.darkTheme&&`
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  `,";"),Sa=b("p",{target:"e7pa13w22"})("font-size:14px;color:",e=>e.theme.textSecondary,";margin-bottom:12px;line-height:1.5;",e=>e.theme.darkTheme&&`
    opacity: 0.9;
  `,";"),$n=b("div",{target:"e7pa13w21"})("display:flex;align-items:center;gap:16px;font-size:13px;color:",e=>e.theme.textSecondary,";position:relative;z-index:2;span{display:flex;align-items:center;gap:4px;i{font-size:14px;color:",e=>e.theme.primary,";}}"),RJ=b("div",{target:"e7pa13w20"})({name:"7wgp4p",styles:"margin-top:16px;position:relative;z-index:2"}),NJ=b("div",{target:"e7pa13w19"})("display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;font-size:14px;color:",e=>e.theme.textSecondary,";"),MJ=b("div",{target:"e7pa13w18"})("width:100%;height:8px;background:",e=>e.theme.gray,";border-radius:4px;overflow:hidden;",e=>e.theme.darkTheme&&`
    background: rgba(255, 255, 255, 0.1);
  `,";"),OJ=b("div",{target:"e7pa13w17"})("height:100%;background:linear-gradient(90deg, #10B981, #34D399);width:",e=>e.value,"%;transition:width 0.3s ease;border-radius:4px;",e=>e.theme.darkTheme&&`
    box-shadow: 0 0 8px rgba(16, 185, 129, 0.4);
  `,";"),$J=b("button",{target:"e7pa13w16"})({name:"1rvlxgy",styles:"background:linear-gradient(135deg, #7C3AED, #3B82F6);color:white;border:none;border-radius:12px;padding:12px 20px;font-size:14px;font-weight:500;cursor:pointer;transition:all 0.3s ease;margin-top:16px;display:flex;align-items:center;gap:8px;position:relative;z-index:2;&:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(124, 58, 237, 0.3);}i{font-size:16px;}"}),LJ=b("div",{target:"e7pa13w15"})("display:flex;justify-content:center;align-items:center;min-height:200px;color:",e=>e.theme.textSecondary,";i{font-size:32px;margin-right:12px;animation:spin 1s linear infinite;}@keyframes spin{from{transform:rotate(0deg);}to{transform:rotate(360deg);}}"),FJ=b("button",{target:"e7pa13w14"})({name:"hz2l5l",styles:"background:linear-gradient(135deg, #10B981, #34D399);color:white;border:none;border-radius:12px;padding:12px 20px;font-size:14px;font-weight:500;cursor:pointer;transition:all 0.3s ease;display:flex;align-items:center;gap:8px;&:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(16, 185, 129, 0.3);}i{font-size:16px;}"}),BJ=b("div",{target:"e7pa13w13"})({name:"3gc0nf",styles:"position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0, 0, 0, 0.5);display:flex;justify-content:center;align-items:center;z-index:1000;backdrop-filter:blur(5px)"}),zJ=b("div",{target:"e7pa13w12"})("background:",e=>e.theme.cardBg,";border-radius:20px;padding:32px;max-width:500px;width:90%;max-height:80vh;overflow-y:auto;box-shadow:0 20px 60px rgba(0, 0, 0, 0.3);position:relative;"),VJ=b("h2",{target:"e7pa13w11"})("font-size:24px;font-weight:700;margin-bottom:24px;color:",e=>e.theme.text,";text-align:center;"),jJ=b("div",{target:"e7pa13w10"})("display:flex;margin-bottom:24px;border-radius:12px;background:",e=>e.theme.background,";padding:4px;"),OT=b("button",{target:"e7pa13w9"})("flex:1;padding:12px 16px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all 0.3s ease;background:",e=>e.active?"linear-gradient(135deg, #7C3AED, #3B82F6)":"transparent",";color:",e=>e.active?"white":e.theme.textSecondary,";&:hover{background:",e=>e.active?"linear-gradient(135deg, #7C3AED, #3B82F6)":e.theme.cardBg,";}"),$T=b("div",{target:"e7pa13w8"})({name:"budh8k",styles:"display:flex;flex-direction:column;gap:16px"}),my=b("div",{target:"e7pa13w7"})({name:"3w0yoi",styles:"display:flex;flex-direction:column;gap:8px"}),vy=b("label",{target:"e7pa13w6"})("font-size:14px;font-weight:500;color:",e=>e.theme.text,";"),xy=b("input",{target:"e7pa13w5"})("padding:12px 16px;border:2px solid ",e=>e.theme.borderColor,";border-radius:12px;font-size:14px;background:",e=>e.theme.background,";color:",e=>e.theme.text,";transition:all 0.3s ease;&:focus{outline:none;border-color:#7C3AED;box-shadow:0 0 0 3px rgba(124, 58, 237, 0.1);}"),LT=b("div",{target:"e7pa13w4"})({name:"vr2dwv",styles:"display:flex;gap:12px;margin-top:24px"}),UJ=b("button",{target:"e7pa13w3"})({name:"1c3lknm",styles:"flex:1;padding:12px 20px;border:none;border-radius:12px;font-size:14px;font-weight:500;cursor:pointer;transition:all 0.3s ease;background:linear-gradient(135deg, #7C3AED, #3B82F6);color:white;&:hover{transform:translateY(-1px);box-shadow:0 4px 12px rgba(124, 58, 237, 0.3);}&:disabled{opacity:0.6;cursor:not-allowed;transform:none;}"}),FT=b("button",{target:"e7pa13w2"})("flex:1;padding:12px 20px;border:2px solid ",e=>e.theme.borderColor,";border-radius:12px;font-size:14px;font-weight:500;cursor:pointer;transition:all 0.3s ease;background:transparent;color:",e=>e.theme.textSecondary,";&:hover{background:",e=>e.theme.cardBg,";border-color:",e=>e.theme.text,";}"),qJ=b("button",{target:"e7pa13w1"})("position:absolute;top:16px;right:16px;width:32px;height:32px;border:none;border-radius:50%;background:",e=>e.theme.background,";color:",e=>e.theme.textSecondary,";cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.3s ease;&:hover{background:",e=>e.theme.borderColor,";}i{font-size:18px;}"),BT=b("div",{target:"e7pa13w0"})("padding:16px;border-radius:12px;margin-bottom:16px;font-size:14px;background:",e=>e.type==="error"?"rgba(239, 68, 68, 0.1)":"rgba(59, 130, 246, 0.1)",";color:",e=>e.type==="error"?"#ef4444":"#3b82f6",";border:1px solid ",e=>e.type==="error"?"rgba(239, 68, 68, 0.2)":"rgba(59, 130, 246, 0.2)",";"),WJ=()=>{const[e,t]=D.useState(!0),[n,r]=D.useState({totalCourses:0,completedCourses:0,inProgressCourses:0,totalExams:0,completedExams:0,overallProgress:0}),[i,o]=D.useState([]),[a,s]=D.useState(""),[l,c]=D.useState({totalEmployees:0,activeEmployees:0,courseCompletionRate:0,examPassRate:0,topPerformers:[],needAttention:[]}),[d,p]=D.useState({totalStores:0,totalStaff:0,overallCompletionRate:0,storeRankings:[],allStoreStats:[]}),[f,h]=D.useState(!1),[g,m]=D.useState("add"),[v,w]=D.useState({email:"",password:"",name:""}),[S,C]=D.useState(!1),[A,_]=D.useState({text:"",type:""}),{currentUser:I}=gi(),{userRole:E,userData:k}=Bi(),{darkMode:T}=El(),P=qt(),O={darkTheme:T,background:T?"#1E293B":"#F8FAFC",cardBg:T?"rgba(30, 41, 59, 0.8)":"#FFFFFF",text:T?"#F1F5F9":"#1E293B",textSecondary:T?"#94A3B8":"#64748B",borderColor:T?"#334155":"#E2E8F0",primary:"#7C3AED",shadowColor:T?"rgba(0, 0, 0, 0.3)":"rgba(0, 0, 0, 0.1)"},R=te=>{const{name:G,value:K}=te.target;w(me=>({...me,[G]:K}))},N=()=>{w({email:"",password:"",name:""}),_({text:"",type:""})},L=async()=>{if(!v.email||!v.password||!v.name){_({text:"請填寫所有必填欄位",type:"error"});return}if(v.password.length<6){_({text:"密碼至少需要6個字符",type:"error"});return}C(!0),_({text:"",type:""});try{const G=(await R5(Fi,v.email,v.password)).user,K=Ie(U,"users",G.uid);await zt(K,{name:v.name,email:v.email,role:"staff",store:(k==null?void 0:k.store)||"",createdAt:At(),createdBy:I.uid}),_({text:"人員新增成功！",type:"success"}),N(),H()}catch(te){console.error("新增人員失敗:",te);let G="新增人員失敗，請稍後再試";te.code==="auth/email-already-in-use"?G="此電子郵件已被使用":te.code==="auth/weak-password"?G="密碼強度不足":te.code==="auth/invalid-email"&&(G="電子郵件格式無效"),_({text:G,type:"error"})}finally{C(!1)}},B=()=>{h(!0),m("add"),N()},V=()=>{h(!1),N()},j=()=>{const te=new Date,G={year:"numeric",month:"long",day:"numeric",weekday:"long"};return te.toLocaleDateString("zh-TW",G)},z=async()=>{if(I!=null&&I.uid)try{const te=await In(Ie(U,"users",I.uid));if(te.exists()){const G=te.data();s(G.name||G.displayName||"同學")}}catch(te){console.error("獲取用戶姓名失敗:",te),s("同學")}},H=async()=>{if(!(E!=="manager"||!(k!=null&&k.store)))try{const te=k.store,K=(await be(tt(se(U,"users"),tn("store","==",te),tn("role","==","staff")))).docs.map(ce=>({id:ce.id,...ce.data()})),me=await be(tt(se(U,"course_summaries"),Ot("numeric_id","asc")));let ye=[];me.empty?ye=(await be(tt(se(U,"courses"),Ot("numeric_id","asc")))).docs.map(De=>({id:De.id,...De.data()})):ye=me.docs.map(ce=>({id:ce.id,...ce.data()}));const ee=[];let oe=0,he=0,we=0;for(const ce of K)try{const De=await Vd(ce.id);let He=0,Ue=0,et=0,pt=0;ye.forEach(Rt=>{let ln=0,gt=0,wt=0;Rt.chapters&&Array.isArray(Rt.chapters)&&Rt.chapters.forEach((at,_t)=>{at.subsections&&Array.isArray(at.subsections)&&at.subsections.forEach((Ht,q)=>{var ie,ne,Te,Me;gt++;const X=`${Rt.id}_${_t}_${q}`;(Me=(Te=(ne=(ie=De.courseProgress)==null?void 0:ie[Rt.id])==null?void 0:ne[_t])==null?void 0:Te[q])!=null&&Me.completed&&wt++})}),gt>0&&(ln=Math.round(wt/gt*100),Ue+=ln,ln===100&&(He++,et+=3),pt+=3)});const jt=ye.length>0?Math.round(Ue/ye.length):0;ee.push({id:ce.id,name:ce.name||ce.displayName||"員工",progress:jt,completedCourses:He,totalCourses:ye.length,examsPassed:et,examsTotal:pt}),oe+=jt,he+=et,we+=pt}catch(De){console.error(`獲取員工 ${ce.id} 學習進度失敗:`,De)}const W=K.length>0?Math.round(oe/K.length):0,ge=we>0?Math.round(he/we*100):0,fe=ee.filter(ce=>ce.progress>=80).sort((ce,De)=>De.progress-ce.progress).slice(0,3),ve=ee.filter(ce=>ce.progress<50).sort((ce,De)=>ce.progress-De.progress).slice(0,3);c({totalEmployees:K.length,activeEmployees:ee.filter(ce=>ce.progress>0).length,courseCompletionRate:W,examPassRate:ge,topPerformers:fe,needAttention:ve})}catch(te){console.error("獲取店面統計數據失敗:",te)}},J=async()=>{if(E==="enterprise")try{const G=(await be(se(U,"stores"))).docs.map(fe=>({id:fe.id,...fe.data()})),me=(await be(se(U,"users"))).docs.map(fe=>({id:fe.id,...fe.data()})),ye=await be(tt(se(U,"course_summaries"),Ot("numeric_id","asc")));let ee=[];ye.empty?ee=(await be(tt(se(U,"courses"),Ot("numeric_id","asc")))).docs.map(ve=>({id:ve.id,...ve.data()})):ee=ye.docs.map(fe=>({id:fe.id,...fe.data()}));const oe=[];let he=0,we=G.length,W=0;for(const fe of G){const ve=me.filter(pt=>pt.role==="staff"&&(pt.store===fe.id||pt.store===fe.name));let ce=0,De=0,He=0;for(const pt of ve)try{const jt=await Vd(pt.id);let Rt=0,ln=0,gt=0,wt=0;ee.forEach(_t=>{let Ht=0,q=0,X=0;_t.chapters&&Array.isArray(_t.chapters)&&_t.chapters.forEach((ie,ne)=>{ie.subsections&&Array.isArray(ie.subsections)&&ie.subsections.forEach((Te,Me)=>{var st,lt,Q,pe;q++,(pe=(Q=(lt=(st=jt.courseProgress)==null?void 0:st[_t.id])==null?void 0:lt[ne])==null?void 0:Q[Me])!=null&&pe.completed&&X++})}),q>0&&(Ht=Math.round(X/q*100),Rt+=Ht,Ht===100&&(ln++,gt+=3),wt+=3)});const at=ee.length>0?Math.round(Rt/ee.length):0;at>0&&He++,ce+=at,De+=wt>0?Math.round(gt/wt*100):0}catch(jt){console.error(`獲取員工 ${pt.id} 學習進度失敗:`,jt)}const Ue=ve.length>0?Math.round(ce/ve.length):0,et=ve.length>0?Math.round(De/ve.length):0;oe.push({storeId:fe.id,storeName:fe.name||fe.id,totalStaff:ve.length,activeStaff:He,completionRate:Ue,examPassRate:et}),he+=Ue,W+=ve.length}const ge=oe.sort((fe,ve)=>ve.completionRate-fe.completionRate).slice(0,5);p({totalStores:we,totalStaff:W,overallCompletionRate:we>0?Math.round(he/we):0,storeRankings:ge,allStoreStats:oe})}catch(te){console.error("獲取總公司統計數據失敗:",te)}},de=async()=>{try{t(!0);const te=await be(tt(se(U,"course_summaries"),Ot("numeric_id","asc")));let G=[];te.empty?G=(await be(tt(se(U,"courses"),Ot("numeric_id","asc")))).docs.map(ve=>({id:ve.id,...ve.data()})):G=te.docs.map(fe=>({id:fe.id,...fe.data()}));let K={},me={};if(I!=null&&I.uid)try{K=await Vd(I.uid),Object.entries(K.courseProgress||{}).forEach(([fe,ve])=>{Object.entries(ve).forEach(([ce,De])=>{Object.entries(De).forEach(([He,Ue])=>{if(Ue.completed){const et=`${fe}_${ce}_${He}`;me[et]=!0}})})})}catch(fe){console.error("獲取用戶進度失敗:",fe)}const ye=G.length;let ee=0,oe=0,he=0;const we=G.map(fe=>{let ve=0,ce=0,De=0;return fe.chapters&&Array.isArray(fe.chapters)&&fe.chapters.forEach((He,Ue)=>{He.subsections&&Array.isArray(He.subsections)&&He.subsections.forEach((et,pt)=>{ce++;const jt=`${fe.id}_${Ue}_${pt}`;me[jt]&&De++})}),ce>0&&(ve=Math.round(De/ce*100)),ve===100?ee++:ve>0&&oe++,he+=ve,{...fe,progress:ve,completedSections:De,totalSections:ce,icon:fe.icon||Dp(fe.category,fe.title,fe.numeric_id),gradient:fe.gradient||Rp(fe.category,fe.title,fe.numeric_id),duration:fe.duration||"2 小時",level:fe.level||"初級"}}),W=ye>0?Math.round(he/ye):0,ge=we.filter(fe=>fe.progress<100).sort((fe,ve)=>fe.progress>0&&ve.progress===0?-1:fe.progress===0&&ve.progress>0?1:fe.progress>0&&ve.progress>0?ve.progress-fe.progress:(fe.numeric_id||0)-(ve.numeric_id||0)).slice(0,3);r({totalCourses:ye,completedCourses:ee,inProgressCourses:oe,totalExams:ye*3,completedExams:ee*3+Math.floor(oe*1.5),overallProgress:W}),o(ge)}catch(te){console.error("獲取儀表板數據失敗:",te)}finally{t(!1)}};D.useEffect(()=>{z(),H(),J(),de()},[I]),D.useEffect(()=>{E==="manager"?H():E==="enterprise"&&J()},[E]);const ae=te=>{P(`/course/${te}`)},Ce=()=>{const te=new Date().getHours();return te<12?"早安":te<18?"午安":"晚安"};return e?y(Ne,{children:[u(Bt,{title:"儀表板",tagline:"數據載入中..."}),u(DT,{children:u(RT,{children:u(NT,{children:y(LJ,{children:[u("i",{className:"ri-loader-4-line"}),u("span",{children:"正在載入儀表板數據..."})]})})})}),u(kn,{})]}):y(Ne,{children:[u(Bt,{title:"儀表板",tagline:`${Ce()}，${a}！`}),u(DT,{children:u(RT,{children:y(NT,{children:[u(_J,{children:y(kJ,{children:[y(EJ,{children:[y(TJ,{children:[Ce(),"，",a,"！"]}),u(IJ,{children:E==="enterprise"?"準備好管理全公司學習狀況了嗎？":E==="manager"?"準備好管理店面學習狀況了嗎？":"準備好今天的學習之旅了嗎？"}),y(AJ,{children:[u("i",{className:"ri-calendar-line"}),j()]})]}),u(PJ,{children:E==="manager"?u(Ne,{children:y(FJ,{onClick:B,children:[u("i",{className:"ri-user-settings-line"}),"編輯人員"]})}):E==="staff"&&y(Ne,{children:[y(MT,{to:"/courses-internal",children:[u("i",{className:"ri-book-open-line"}),"開始學習"]}),y(MT,{to:"/exams",children:[u("i",{className:"ri-file-list-3-line"}),"參加考試"]})]})})]})}),u(DJ,{children:E==="enterprise"?y(Ne,{children:[y(xi,{children:[y(yi,{children:[y("div",{children:[u(Si,{children:"總分店數"}),u(wi,{children:d.totalStores})]}),u(bi,{gradient:"#7C3AED, #3B82F6",children:u("i",{className:"ri-store-line"})})]}),y(Ci,{children:["全公司共有 ",d.totalStores," 間分店"]})]}),y(xi,{children:[y(yi,{children:[y("div",{children:[u(Si,{children:"總員工數"}),u(wi,{children:d.totalStaff})]}),u(bi,{gradient:"#10B981, #34D399",children:u("i",{className:"ri-team-line"})})]}),u(Ci,{children:"全公司員工人數統計"})]}),y(xi,{children:[y(yi,{children:[y("div",{children:[u(Si,{children:"整體完成率"}),y(wi,{children:[d.overallCompletionRate,"%"]})]}),u(bi,{gradient:"#F59E0B, #FBBF24",children:u("i",{className:"ri-bar-chart-line"})})]}),u(Ci,{children:"全公司平均課程完成率"})]}),y(xi,{children:[y(yi,{children:[y("div",{children:[u(Si,{children:"優秀分店"}),u(wi,{children:d.storeRankings.filter(te=>te.completionRate>=80).length})]}),u(bi,{gradient:"#EF4444, #F87171",children:u("i",{className:"ri-trophy-line"})})]}),u(Ci,{children:"完成率達80%以上的分店"})]})]}):E==="manager"?y(Ne,{children:[y(xi,{children:[y(yi,{children:[y("div",{children:[u(Si,{children:"店面員工數"}),u(wi,{children:l.totalEmployees})]}),u(bi,{gradient:"#7C3AED, #3B82F6",children:u("i",{className:"ri-team-line"})})]}),y(Ci,{children:["活躍學習員工 ",l.activeEmployees," 人"]})]}),y(xi,{children:[y(yi,{children:[y("div",{children:[u(Si,{children:"課程完成率"}),y(wi,{children:[l.courseCompletionRate,"%"]})]}),u(bi,{gradient:"#10B981, #34D399",children:u("i",{className:"ri-bar-chart-line"})})]}),u(Ci,{children:"店面平均課程完成進度"})]}),y(xi,{children:[y(yi,{children:[y("div",{children:[u(Si,{children:"考試通過率"}),y(wi,{children:[l.examPassRate,"%"]})]}),u(bi,{gradient:"#F59E0B, #FBBF24",children:u("i",{className:"ri-award-line"})})]}),u(Ci,{children:"店面員工考試平均通過率"})]}),y(xi,{children:[y(yi,{children:[y("div",{children:[u(Si,{children:"優秀員工"}),u(wi,{children:l.topPerformers.length})]}),u(bi,{gradient:"#EF4444, #F87171",children:u("i",{className:"ri-trophy-line"})})]}),u(Ci,{children:"學習進度達80%以上的員工"})]})]}):y(Ne,{children:[y(xi,{children:[y(yi,{children:[y("div",{children:[u(Si,{children:"總課程數"}),u(wi,{children:n.totalCourses})]}),u(bi,{gradient:"#7C3AED, #3B82F6",children:u("i",{className:"ri-book-line"})})]}),y(Ci,{children:["系統中共有 ",n.totalCourses," 門課程"]})]}),y(xi,{children:[y(yi,{children:[y("div",{children:[u(Si,{children:"學習進度"}),y(wi,{children:[n.overallProgress,"%"]})]}),u(bi,{gradient:"#10B981, #34D399",children:u("i",{className:"ri-bar-chart-line"})})]}),y(Ci,{children:["已完成 ",n.completedCourses," 門，進行中 ",n.inProgressCourses," 門"]})]}),y(xi,{children:[y(yi,{children:[y("div",{children:[u(Si,{children:"考試狀況"}),u(wi,{children:n.completedExams})]}),u(bi,{gradient:"#F59E0B, #FBBF24",children:u("i",{className:"ri-award-line"})})]}),y(Ci,{children:["已完成 ",n.completedExams," / ",n.totalExams," 項考試"]})]}),y(xi,{children:[y(yi,{children:[y("div",{children:[u(Si,{children:"完成課程"}),u(wi,{children:n.completedCourses})]}),u(bi,{gradient:"#EF4444, #F87171",children:u("i",{className:"ri-trophy-line"})})]}),y(Ci,{children:["恭喜完成 ",n.completedCourses," 門課程！"]})]})]})}),E==="enterprise"?y(hy,{children:[y(fy,{children:[u("i",{className:"ri-global-line"}),"分店學習統計"]}),y(gy,{children:[y(va,{children:[y(xa,{children:[u(ya,{gradient:"#10B981, #34D399",children:u("i",{className:"ri-trophy-line"})}),y(ba,{children:[u(wa,{children:"優秀分店排行"}),u(Sa,{children:"課程完成率最高的分店"})]})]}),d.storeRankings.length>0?u("div",{style:{position:"relative",zIndex:2},children:d.storeRankings.map((te,G)=>y($n,{style:{marginBottom:"8px",justifyContent:"space-between"},children:[y("span",{children:["#",G+1," ",te.storeName]}),y("span",{style:{color:"#10B981",fontWeight:"600"},children:[te.completionRate,"%"]})]},te.storeName))}):u($n,{style:{position:"relative",zIndex:2},children:u("span",{children:"暫無分店數據"})})]}),y(va,{children:[y(xa,{children:[u(ya,{gradient:"#F59E0B, #FBBF24",children:u("i",{className:"ri-alert-line"})}),y(ba,{children:[u(wa,{children:"需要關注分店"}),u(Sa,{children:"完成率較低的分店"})]})]}),d.allStoreStats.length>0?y("div",{style:{position:"relative",zIndex:2},children:[d.allStoreStats.filter(te=>te.completionRate<50).slice(0,3).map(te=>y($n,{style:{marginBottom:"8px",justifyContent:"space-between"},children:[u("span",{children:te.storeName}),y("span",{style:{color:"#F59E0B",fontWeight:"600"},children:[te.completionRate,"%"]})]},te.storeName)),d.allStoreStats.filter(te=>te.completionRate<50).length===0&&u($n,{style:{position:"relative",zIndex:2},children:u("span",{children:"所有分店完成率都在50%以上！"})})]}):u($n,{style:{position:"relative",zIndex:2},children:u("span",{children:"暫無分店數據"})})]}),y(va,{children:[y(xa,{children:[u(ya,{gradient:"#7C3AED, #3B82F6",children:u("i",{className:"ri-building-line"})}),y(ba,{children:[u(wa,{children:"全公司總覽"}),u(Sa,{children:"整體學習狀況統計"})]})]}),y("div",{style:{position:"relative",zIndex:2},children:[y($n,{style:{marginBottom:"8px",justifyContent:"space-between"},children:[u("span",{children:"總分店數"}),y("span",{children:[d.totalStores," 間"]})]}),y($n,{style:{marginBottom:"8px",justifyContent:"space-between"},children:[u("span",{children:"總員工數"}),y("span",{children:[d.totalStaff," 人"]})]}),y($n,{style:{marginBottom:"8px",justifyContent:"space-between"},children:[u("span",{children:"整體完成率"}),y("span",{children:[d.overallCompletionRate,"%"]})]}),y($n,{style:{justifyContent:"space-between"},children:[u("span",{children:"優秀分店數"}),y("span",{children:[d.storeRankings.filter(te=>te.completionRate>=80).length," 間"]})]})]})]})]})]}):E==="manager"?y(hy,{children:[y(fy,{children:[u("i",{className:"ri-store-line"}),"店面學習管理"]}),y(gy,{children:[y(va,{children:[y(xa,{children:[u(ya,{gradient:"#10B981, #34D399",children:u("i",{className:"ri-trophy-line"})}),y(ba,{children:[u(wa,{children:"優秀員工表現"}),u(Sa,{children:"學習進度80%以上的員工名單"})]})]}),l.topPerformers.length>0?u("div",{style:{position:"relative",zIndex:2},children:l.topPerformers.map(te=>y($n,{style:{marginBottom:"8px",justifyContent:"space-between"},children:[u("span",{children:te.name}),y("span",{style:{color:"#10B981",fontWeight:"600"},children:[te.progress,"%"]})]},te.id))}):u($n,{style:{position:"relative",zIndex:2},children:u("span",{children:"目前暫無員工達到80%進度"})})]}),y(va,{children:[y(xa,{children:[u(ya,{gradient:"#F59E0B, #FBBF24",children:u("i",{className:"ri-alert-line"})}),y(ba,{children:[u(wa,{children:"需要關注員工"}),u(Sa,{children:"學習進度低於50%的員工"})]})]}),l.needAttention.length>0?u("div",{style:{position:"relative",zIndex:2},children:l.needAttention.map(te=>y($n,{style:{marginBottom:"8px",justifyContent:"space-between"},children:[u("span",{children:te.name}),y("span",{style:{color:"#F59E0B",fontWeight:"600"},children:[te.progress,"%"]})]},te.id))}):u($n,{style:{position:"relative",zIndex:2},children:u("span",{children:"所有員工學習進度都在50%以上！"})})]}),y(va,{children:[y(xa,{children:[u(ya,{gradient:"#7C3AED, #3B82F6",children:u("i",{className:"ri-bar-chart-box-line"})}),y(ba,{children:[u(wa,{children:"店面學習總覽"}),u(Sa,{children:"本店整體學習狀況統計"})]})]}),y("div",{style:{position:"relative",zIndex:2},children:[y($n,{style:{marginBottom:"8px",justifyContent:"space-between"},children:[u("span",{children:"總員工數"}),y("span",{children:[l.totalEmployees," 人"]})]}),y($n,{style:{marginBottom:"8px",justifyContent:"space-between"},children:[u("span",{children:"活躍學習"}),y("span",{children:[l.activeEmployees," 人"]})]}),y($n,{style:{marginBottom:"8px",justifyContent:"space-between"},children:[u("span",{children:"平均完成率"}),y("span",{children:[l.courseCompletionRate,"%"]})]}),y($n,{style:{justifyContent:"space-between"},children:[u("span",{children:"考試通過率"}),y("span",{children:[l.examPassRate,"%"]})]})]})]})]})]}):y(hy,{children:[y(fy,{children:[u("i",{className:"ri-star-line"}),"今日推薦課程"]}),i.length===0?u(va,{children:y(xa,{children:[u(ya,{gradient:"#10B981, #34D399",children:u("i",{className:"ri-check-line"})}),y(ba,{children:[u(wa,{children:"🎉 恭喜！您已完成所有課程"}),u(Sa,{children:"太棒了！您已經完成了所有可用的課程。繼續保持學習的熱忱，期待更多新課程上線！"})]})]})}):u(gy,{children:i.map(te=>y(va,{onClick:()=>ae(te.id),children:[y(xa,{children:[u(ya,{gradient:te.gradient,children:u("i",{className:te.icon})}),y(ba,{children:[u(wa,{children:te.title}),u(Sa,{children:te.description})]})]}),y($n,{children:[y("span",{children:[u("i",{className:"ri-time-line"}),te.duration]}),y("span",{children:[u("i",{className:"ri-bar-chart-line"}),te.level]}),y("span",{children:[u("i",{className:"ri-file-list-line"}),te.completedSections,"/",te.totalSections," 小節"]})]}),te.progress>0&&y(RJ,{children:[y(NJ,{children:[u("span",{children:"學習進度"}),y("span",{children:[te.progress,"%"]})]}),u(MJ,{children:u(OJ,{value:te.progress})})]}),y($J,{onClick:G=>{G.stopPropagation(),ae(te.id)},children:[u("i",{className:te.progress>0?"ri-play-line":"ri-book-open-line"}),te.progress>0?"繼續學習":"開始學習"]})]},te.id))})]})]})})}),f&&u(BJ,{onClick:V,children:y(zJ,{theme:O,onClick:te=>te.stopPropagation(),children:[u(qJ,{theme:O,onClick:V,children:u("i",{className:"ri-close-line"})}),u(VJ,{theme:O,children:"人員管理"}),y(jJ,{theme:O,children:[u(OT,{active:g==="add",theme:O,onClick:()=>m("add"),children:"新增人員"}),u(OT,{active:g==="delete",theme:O,onClick:()=>m("delete"),children:"刪除人員"})]}),A.text&&u(BT,{type:A.type,children:A.text}),g==="add"?y($T,{children:[y(my,{children:[u(vy,{theme:O,children:"帳號 (電子郵件) *"}),u(xy,{theme:O,type:"email",name:"email",value:v.email,onChange:R,placeholder:"請輸入員工電子郵件",required:!0})]}),y(my,{children:[u(vy,{theme:O,children:"密碼 *"}),u(xy,{theme:O,type:"password",name:"password",value:v.password,onChange:R,placeholder:"請輸入密碼 (至少6個字符)",required:!0})]}),y(my,{children:[u(vy,{theme:O,children:"姓名 *"}),u(xy,{theme:O,type:"text",name:"name",value:v.name,onChange:R,placeholder:"請輸入員工姓名",required:!0})]}),y(LT,{children:[u(FT,{theme:O,onClick:V,children:"取消"}),u(UJ,{onClick:L,disabled:S,children:S?"新增中...":"送出"})]})]}):y($T,{children:[u(BT,{type:"info",children:"目前不開放刪除人員功能"}),u("p",{style:{color:O.textSecondary,textAlign:"center",margin:"20px 0"},children:"如需刪除人員，請聯繫系統管理員"}),u(LT,{children:u(FT,{theme:O,onClick:V,children:"關閉"})})]})]})}),u(kn,{})]})},HJ=b("div",{target:"ecak4jp67"})({name:"zpjj62",styles:"max-width:1000px;margin:0 auto;padding:24px 12px 80px 12px;position:relative"}),GJ=b("h2",{target:"ecak4jp66"})("font-size:24px;font-weight:700;margin-bottom:24px;color:",e=>e.theme.primary,";",e=>e.theme.darkTheme&&`
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  `,";"),YJ=b("div",{target:"ecak4jp65"})({name:"st938q",styles:"margin-bottom:40px;display:flex;flex-direction:column;gap:20px"}),KJ=b("div",{target:"ecak4jp64"})({name:"khhb07",styles:"display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;flex-wrap:wrap;gap:10px;@media (max-width: 600px){flex-direction:column;align-items:stretch;&>div{width:100%;justify-content:space-between;}}"}),XJ=b("div",{target:"ecak4jp63"})("display:flex;gap:1px;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px ",e=>e.theme.shadowColor,";"),zT=b("button",{target:"ecak4jp62"})("padding:6px 12px;border:none;background:",e=>e.active?"#7C3AED":e.theme.grayLight,";color:",e=>e.active?"#fff":e.theme.textSecondary,";cursor:pointer;font-size:13px;transition:all 0.2s;&:hover{background:",e=>e.active?"#7C3AED":e.theme.gray,";}"),QJ=b("button",{target:"ecak4jp61"})({name:"yp1hgj",styles:"background:#7C3AED;color:#fff;border:none;border-radius:8px;padding:8px 14px;font-size:14px;cursor:pointer;display:flex;align-items:center;gap:6px;box-shadow:0 2px 10px rgba(124,58,237,0.15);transition:all 0.2s;&:hover{background:#6D28D9;transform:translateY(-1px);}i{font-size:16px;}"}),JJ=b("div",{target:"ecak4jp60"})({name:"1talpdj",styles:"display:flex;align-items:center;justify-content:space-between;margin-bottom:16px"}),ZJ=b("div",{target:"ecak4jp59"})("font-size:15px;font-weight:500;color:",e=>e.theme.primary,";@media (max-width: 600px){font-size:14px;}"),VT=b("button",{target:"ecak4jp58"})("background:none;border:none;border-radius:20px;width:32px;height:32px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:",e=>e.theme.textSecondary,";font-size:18px;transition:all 0.2s;&:hover{background:",e=>e.theme.grayLight,";color:#7C3AED;}"),eZ=b("div",{target:"ecak4jp57"})("display:grid;grid-template-columns:repeat(7, 1fr);gap:6px;background:",e=>e.theme.backgroundColor,";border-radius:14px;overflow:hidden;box-shadow:0 2px 12px ",e=>e.theme.shadowColor,";padding:6px;margin-bottom:20px;",e=>e.theme.darkTheme&&`
    background: linear-gradient(135deg, rgba(30, 30, 30, 0.7), rgba(40, 40, 40, 0.7));
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    box-shadow: 
      0 4px 24px rgba(0, 0, 0, 0.4),
      inset 0 0 1px 1px rgba(255, 255, 255, 0.05);
  `,"@media (max-width: 600px){gap:3px;padding:3px;}"),tZ=b("div",{target:"ecak4jp56"})("display:grid;grid-template-columns:repeat(7, 1fr);background:",e=>e.theme.grayLight,";font-weight:600;color:",e=>e.theme.primary,";text-align:center;border-radius:10px;margin-bottom:8px;",e=>e.theme.darkTheme&&`
    background: rgba(50, 50, 50, 0.5);
    border: 1px solid rgba(255, 255, 255, 0.05);
    color: #BB9DFF;
  `,"@media (max-width: 600px){grid-template-columns:repeat(7, 1fr);}"),nZ=b("div",{target:"ecak4jp55"})("padding:12px 6px;font-size:14px;",e=>e.theme.darkTheme&&`
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  `,";"),rZ=b("div",{target:"ecak4jp54"})("aspect-ratio:1/0.8;border-radius:8px;background:",e=>e.theme.darkTheme?e.isToday?"rgba(124, 58, 237, 0.2)":"rgba(40, 40, 40, 0.6)":e.isToday?"#f0e7ff":"#f8f9fc",";color:",e=>e.theme.darkTheme?e.isToday?"#BB9DFF":e.isCurrentMonth?e.theme.textColor:"rgba(170, 170, 170, 0.7)":e.isToday?"#7C3AED":e.isCurrentMonth?"#333":"#aaa",";font-weight:",e=>e.isToday?"600":"400",";border:",e=>e.theme.darkTheme?e.isSelected?"2px solid #9C68FF":"1px solid rgba(80, 80, 80, 0.6)":e.isSelected?"2px solid #7C3AED":"1px solid #eee",";padding:6px;display:flex;flex-direction:column;cursor:pointer;transition:all 0.2s ease;position:relative;overflow:hidden;",e=>e.theme.darkTheme&&`
    backdrop-filter: blur(10px);
    box-shadow: 
      ${e.isToday?"0 0 15px rgba(124, 58, 237, 0.3)":"0 2px 8px rgba(0, 0, 0, 0.3)"};
    
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        ${e.isToday?"radial-gradient(circle at center, rgba(124, 58, 237, 0.15) 0%, transparent 70%)":"radial-gradient(circle at 80% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 60%)"};
      pointer-events: none;
      z-index: 1;
    }
  `," &:hover{",e=>e.theme.darkTheme?`
      background: rgba(60, 60, 60, 0.7);
      border-color: rgba(124, 58, 237, 0.5);
      box-shadow: 0 0 12px rgba(124, 58, 237, 0.2);
    `:`
      background: ${e.isToday?"#e8dcff":"#f0f0f0"};
    `,";}"),iZ=b("div",{target:"ecak4jp53"})("font-size:14px;font-weight:",e=>e.isToday?"700":"500",";margin-bottom:3px;color:",e=>e.theme.textColor,";@media (max-width: 600px){font-size:13px;margin-bottom:2px;}"),oZ=b("div",{target:"ecak4jp52"})("height:6px;width:6px;border-radius:50%;background:",e=>e.theme.darkMode?"#BB9DFF":"#7C3AED",";margin-right:4px;display:inline-block;"),aZ=b("div",{target:"ecak4jp51"})("font-size:11px;color:",e=>e.theme.textSecondary,";margin-top:2px;display:flex;align-items:center;"),jT=b("div",{target:"ecak4jp50"})("position:fixed;top:0;right:",e=>e.isOpen?"0":"-400px",";width:100%;max-width:380px;height:100vh;background:",e=>e.theme.cardBg,";box-shadow:-5px 0 25px ",e=>e.theme.shadowColor,";transition:right 0.3s ease-in-out;z-index:1000;overflow-y:auto;padding:24px;display:flex;flex-direction:column;@media (max-width: 600px){max-width:100%;padding:20px 16px 80px 16px;}"),UT=b("div",{target:"ecak4jp49"})({name:"tv6097",styles:"display:flex;justify-content:space-between;align-items:center;margin-bottom:20px"}),qT=b("h3",{target:"ecak4jp48"})("font-size:20px;font-weight:600;color:",e=>e.theme.primary,";display:flex;align-items:center;&::before{content:'';display:inline-block;width:4px;height:18px;background:#7C3AED;margin-right:10px;border-radius:2px;}"),WT=b("button",{target:"ecak4jp47"})("background:none;border:none;font-size:24px;cursor:pointer;color:",e=>e.theme.textSecondary,";display:flex;align-items:center;justify-content:center;padding:4px;border-radius:50%;transition:all 0.2s;&:hover{background:",e=>e.theme.grayLight,";color:#7C3AED;}"),HT=b("div",{target:"ecak4jp46"})("background:",e=>e.theme.cardBg,";height:100%;padding:20px;overflow-y:auto;position:relative;",e=>e.theme.darkTheme&&`
    background: linear-gradient(135deg, rgba(30, 30, 30, 0.95), rgba(40, 40, 40, 0.95));
    backdrop-filter: blur(20px);
    
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 20%, rgba(124, 58, 237, 0.1) 0%, transparent 60%),
        radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.1) 0%, transparent 60%);
      pointer-events: none;
      z-index: 0;
    }
  `,";"),GT=b("div",{target:"ecak4jp45"})("position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.4);z-index:999;opacity:",e=>e.isOpen?1:0,";visibility:",e=>e.isOpen?"visible":"hidden",";transition:opacity 0.3s,visibility 0.3s;"),sZ=b("div",{target:"ecak4jp44"})("margin-bottom:32px;display:",e=>e.visible?"block":"none",";width:100%;"),lZ=b("div",{target:"ecak4jp43"})("background:",e=>e.theme.cardBg,";border-radius:12px;padding:12px;margin-bottom:10px;box-shadow:0 2px 8px ",e=>e.theme.shadowColor,";position:relative;overflow:hidden;",e=>e.theme.darkTheme&&`
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(124, 58, 237, 0.08));
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    box-shadow: 
      0 4px 24px rgba(0, 0, 0, 0.4),
      inset 0 0 1px 1px rgba(255, 255, 255, 0.05);
      
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 20%, rgba(124, 58, 237, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.15) 0%, transparent 50%);
      border-radius: 12px;
      pointer-events: none;
      z-index: 1;
    }
  `,";"),yy=b("div",{target:"ecak4jp39"})({name:"yjfk0n",styles:"display:flex;gap:10px;margin-top:6px"}),Ll=b("button",{target:"ecak4jp38"})({name:"10d7omo",styles:"background:#7C3AED;color:#fff;border:none;border-radius:6px;padding:4px 12px;font-size:13px;cursor:pointer;transition:background 0.2s;&:hover{background:#3B82F6;}"}),cZ=b("form",{target:"ecak4jp37"})({name:"1po18sa",styles:"background:transparent;border-radius:14px;padding:0;margin-bottom:24px"}),zu=b("div",{target:"ecak4jp35"})({name:"3w6m3c",styles:"display:flex;gap:12px;margin-bottom:16px;flex-wrap:wrap;@media (max-width: 600px){gap:8px;}"}),Vu=b("label",{target:"ecak4jp34"})("display:block;margin-bottom:6px;font-size:14px;color:",e=>e.theme.textSecondary,";font-weight:500;"),YT=b("input",{target:"ecak4jp33"})("flex:1;padding:10px 12px;border:1px solid ",e=>e.theme.cardBorder,";border-radius:8px;font-size:15px;background:",e=>e.theme.inputBg,";color:",e=>e.theme.textColor,";&:focus{outline:none;border-color:#7C3AED;box-shadow:0 0 0 2px rgba(124,58,237,0.1);}@media (max-width: 600px){padding:12px;font-size:16px;}"),uZ=b("textarea",{target:"ecak4jp32"})("width:100%;padding:10px 12px;border:1px solid ",e=>e.theme.cardBorder,";border-radius:8px;font-size:15px;min-height:80px;resize:vertical;background:",e=>e.theme.inputBg,";color:",e=>e.theme.textColor,";&:focus{outline:none;border-color:#7C3AED;box-shadow:0 0 0 2px rgba(124,58,237,0.1);}"),dZ=b("div",{target:"ecak4jp31"})({name:"1w75y33",styles:"color:#e53e3e;margin-bottom:16px;font-size:14px;background:#fff5f5;padding:8px 12px;border-radius:8px;border-left:3px solid #e53e3e"}),KT=b("button",{target:"ecak4jp30"})({name:"1qf4bbz",styles:"width:100%;background:#7C3AED;color:#fff;border:none;border-radius:8px;padding:12px;font-size:16px;font-weight:500;cursor:pointer;transition:all 0.2s;&:hover{background:#6D28D9;transform:translateY(-1px);box-shadow:0 4px 12px rgba(124,58,237,0.2);}&:disabled{background:#a78bfa;cursor:not-allowed;}@media (max-width: 600px){padding:14px;font-size:16px;}"}),pZ=b("button",{target:"ecak4jp29"})({name:"1vxdpwg",styles:"width:100%;background:#f3f4f6;color:#4b5563;border:none;border-radius:8px;padding:12px;font-size:16px;font-weight:500;cursor:pointer;transition:all 0.2s;margin-top:10px;&:hover{background:#e5e7eb;}@media (max-width: 600px){padding:14px;}"}),Mf=b("div",{target:"ecak4jp28"})({name:"1azpx8r",styles:"margin-bottom:20px"}),hZ=b("div",{target:"ecak4jp27"})({name:"60441h",styles:"display:flex;flex-direction:column;margin-top:24px"}),fZ=b("div",{target:"ecak4jp26"})({name:"1azpx8r",styles:"margin-bottom:20px"}),gZ=b("div",{target:"ecak4jp25"})("padding:12px;background:",e=>e.theme.cardBg,";border-radius:8px;margin-bottom:10px;border-left:3px solid #7C3AED;box-shadow:0 2px 8px ",e=>e.theme.shadowColor,";"),mZ=b("div",{target:"ecak4jp24"})("font-weight:600;margin-bottom:4px;color:",e=>e.theme.primary,";"),XT=b("div",{target:"ecak4jp23"})({name:"iyo664",styles:"display:flex;gap:5px;background:#fff;border:1px solid #e2e8f0;border-radius:8px;overflow:hidden;padding:5px;@media (max-width: 600px){padding:6px;flex:1;min-width:110px;}"}),Of=b("div",{target:"ecak4jp22"})({name:"2qd0l8",styles:"flex:1;text-align:center"}),$f=b("div",{target:"ecak4jp21"})({name:"1c20tnz",styles:"font-size:12px;color:#666;margin-bottom:5px"}),Lf=b("select",{target:"ecak4jp20"})("border:none;background:",e=>e.theme.grayLight,";border-radius:6px;padding:6px 4px;font-size:14px;width:100%;color:",e=>e.theme.textColor,";@media (max-width: 600px){padding:8px 6px;font-size:16px;}"),vZ=b("select",{target:"ecak4jp19"})({name:"1kxq6oo",styles:"padding:10px 12px;border:1px solid #e2e8f0;border-radius:8px;font-size:15px;background:#fff;color:#333;width:100%;&:focus{outline:none;border-color:#7C3AED;box-shadow:0 0 0 2px rgba(124,58,237,0.1);}"}),xZ=b("button",{target:"ecak4jp16"})({name:"yp1hgj",styles:"background:#7C3AED;color:#fff;border:none;border-radius:8px;padding:8px 14px;font-size:14px;cursor:pointer;display:flex;align-items:center;gap:6px;box-shadow:0 2px 10px rgba(124,58,237,0.15);transition:all 0.2s;&:hover{background:#6D28D9;transform:translateY(-1px);}i{font-size:16px;}"}),yZ=b("div",{target:"ecak4jp15"})({name:"5x9qz4",styles:"max-height:75vh;overflow-y:auto;padding-right:5px"}),QT=b("div",{target:"ecak4jp14"})({name:"1k8ojry",styles:"font-size:16px;font-weight:600;color:#3A5199;margin:16px 0 10px 0;padding-bottom:6px;border-bottom:1px solid #eaedf2;&:first-of-type{margin-top:0;}"}),bZ=b("div",{target:"ecak4jp13"})("background:#fff;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,0.04);padding:12px;margin-bottom:8px;border-left:3px solid ",e=>e.isOwn?"#7C3AED":"#3B82F6",";font-size:14px;"),wZ=b("div",{target:"ecak4jp12"})({name:"cgc8iu",styles:"font-weight:500;color:#3A5199;display:flex;justify-content:space-between;margin-bottom:4px"}),SZ=b("div",{target:"ecak4jp11"})({name:"152ghbs",styles:"display:flex;justify-content:space-between;align-items:flex-start;margin-top:2px;>div{margin-bottom:2px;}"}),CZ=b("div",{target:"ecak4jp10"})({name:"w3pehn",styles:"font-size:13px;color:#666"}),_Z=b("button",{target:"ecak4jp9"})({name:"1ufa4s8",styles:"width:100%;background:#e53e3e;color:#fff;border:none;border-radius:8px;padding:12px;font-size:16px;font-weight:500;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:6px;transition:all 0.2s;&:hover{background:#c53030;transform:translateY(-1px);box-shadow:0 4px 12px rgba(229, 62, 62, 0.2);}i{font-size:16px;}"}),kZ=(e,t)=>{const n=[],r=new Date(e,t,1),i=new Date(e,t+1,0),o=r.getDay();for(let s=o-1;s>=0;s--){const l=new Date(e,t,-s);n.push({date:l,isCurrentMonth:!1})}for(let s=1;s<=i.getDate();s++){const l=new Date(e,t,s);n.push({date:l,isCurrentMonth:!0})}const a=42-n.length;for(let s=1;s<=a;s++){const l=new Date(e,t+1,s);n.push({date:l,isCurrentMonth:!1})}return n},Ca=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,EZ=e=>{const t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},TZ=b("span",{target:"ecak4jp7"})("padding:3px 6px;border-radius:4px;font-size:11px;font-weight:500;margin-left:5px;background:",e=>e.type==="create"?"#dcfce7":e.type==="update"?"#e0f2fe":e.type==="delete"?"#fee2e2":"#f3f4f6",";color:",e=>e.type==="create"?"#16a34a":e.type==="update"?"#0284c7":e.type==="delete"?"#dc2626":"#6b7280",";"),IZ=b("select",{target:"ecak4jp6"})("padding:8px 12px;border:1px solid ",e=>e.theme.cardBorder||"#e2e8f0",";border-radius:8px;font-size:14px;background:",e=>e.theme.cardBg||"#fff",";color:",e=>e.theme.textColor||"#333",";min-width:180px;box-shadow:0 1px 3px rgba(0,0,0,0.1);&:focus{outline:none;border-color:#7C3AED;box-shadow:0 0 0 2px rgba(124,58,237,0.1);}"),AZ=b("div",{target:"ecak4jp5"})({name:"1jfb4up",styles:"display:flex;align-items:center;gap:10px;margin:10px 0"}),PZ=b("label",{target:"ecak4jp4"})("font-size:14px;color:",e=>e.theme.textSecondary,";display:flex;align-items:center;cursor:pointer;"),DZ=b("input",{target:"ecak4jp3"})({name:"1vpyvcq",styles:"height:0;width:0;visibility:hidden;position:absolute"}),RZ=b("span",{target:"ecak4jp2"})("display:inline-block;position:relative;width:48px;height:24px;background:",e=>e.checked?"#7C3AED":"#e2e8f0",";border-radius:24px;margin-right:10px;transition:all 0.3s;cursor:pointer;&:after{content:'';position:absolute;top:2px;left:",e=>e.checked?"26px":"2px",";width:20px;height:20px;background:#fff;border-radius:50%;transition:all 0.3s;box-shadow:0 1px 3px rgba(0,0,0,0.1);}"),NZ=b("div",{target:"ecak4jp1"})("position:absolute;top:0;right:0;bottom:0;left:0;display:flex;align-items:center;justify-content:center;z-index:1;pointer-events:none;&::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;border:2px solid ",e=>(e.isManager,"#e53e3e"),";border-radius:6px;opacity:0.5;}&::after{content:'✕';font-size:24px;color:",e=>(e.isManager,"#e53e3e"),";opacity:0.6;transform:",e=>e.isManager?"scale(0.8)":"scale(1)",";}"),MZ=b("div",{target:"ecak4jp0"})({name:"6hvina",styles:"position:absolute;top:5px;right:5px;width:8px;height:8px;border-radius:50%;background-color:#e53e3e;z-index:2"}),OZ=()=>{const{currentUser:e}=gi(),{userRole:t,userData:n}=Bi(),{darkMode:r,theme:i}=El();D.useEffect(()=>{console.log("====== 用戶和權限資訊 ======"),console.log("當前用戶角色:",t),console.log("當前用戶資料:",n),console.log("用戶ID:",e==null?void 0:e.uid),console.log("用戶商店:",n==null?void 0:n.store),console.log("============================")},[t,n,e]);const[o,a]=D.useState([]),[s,l]=D.useState({id:"",date:"",startTime:"",endTime:"",title:"",location:"",note:"",store:""}),[c,d]=D.useState(!1),[p,f]=D.useState(""),[h,g]=D.useState(!1),[m,v]=D.useState("calendar"),[w,S]=D.useState(!1),[C,A]=D.useState(null),[_,I]=D.useState(new Date().getMonth()),[E,k]=D.useState(new Date().getFullYear()),[T,P]=D.useState([]),[O,R]=D.useState([]),[N,L]=D.useState(!1),[B,V]=D.useState([]),[j,z]=D.useState([]),H=Array.from({length:24},(q,X)=>String(X).padStart(2,"0")),J=Array.from({length:6},(q,X)=>String(X*10).padStart(2,"0")),de=q=>{if(!q)return{hour:"09",minute:"00"};const[X,ie]=q.split(":");return{hour:X,minute:ie||"00"}},ae=(q,X,ie)=>{const ne=de(s[X]);let Te;q==="hour"?Te=`${ie}:${ne.minute}`:Te=`${ne.hour}:${ie}`,l(Me=>({...Me,[X]:Te}))},Ce=D.useMemo(()=>{const q={};return o.forEach(X=>{q[X.date]||(q[X.date]=[]),q[X.date].push(X)}),q},[o]),te=q=>{const X=Ca(q),ie=o.filter(ne=>ne.date===X);return oe(ie)},G=kZ(E,_);D.useMemo(()=>{const q=`${E}-${String(_+1).padStart(2,"0")}`,X=o.filter(ne=>ne.date.startsWith(q)),ie={};return X.forEach(ne=>{ie[ne.date]||(ie[ne.date]=[]),ie[ne.date].push(ne)}),Object.entries(ie).sort(([ne],[Te])=>ne.localeCompare(Te)).map(([ne,Te])=>({date:ne,formattedDate:`${new Date(ne).getMonth()+1}月${new Date(ne).getDate()}日`,records:Te.sort((Me,st)=>Me.startTime.localeCompare(st.startTime))}))},[o,_,E]);const[K,me]=D.useState((n==null?void 0:n.store)||""),[ye,ee]=D.useState([]),oe=D.useCallback(q=>q?t==="admin"||t==="enterprise"?K?q.filter(X=>X.store===K):q:t==="manager"?q.filter(X=>X.store===(n==null?void 0:n.store)):t==="staff"?q.filter(X=>X.store===(n==null?void 0:n.store)):q:[],[t,n==null?void 0:n.store,K]),he=D.useCallback(q=>t==="admin"||t==="enterprise"?!K||q.store===K:t==="manager"||t==="staff"?q.store===(n==null?void 0:n.store):!1,[t,n==null?void 0:n.store,K]),we=D.useCallback(q=>t==="admin"||t==="enterprise"?!1:t==="manager"?q.store===(n==null?void 0:n.store):t==="staff"?q.store===(n==null?void 0:n.store)&&q.userId===(e==null?void 0:e.uid):!1,[t,n==null?void 0:n.store,e==null?void 0:e.uid]),W=D.useCallback(q=>t==="admin"||t==="enterprise"?!1:t==="manager"?q.store===(n==null?void 0:n.store):t==="staff"?q.store===(n==null?void 0:n.store)&&q.userId===(e==null?void 0:e.uid):!1,[t,n==null?void 0:n.store,e==null?void 0:e.uid]),ge=D.useCallback(()=>(console.log("刪除所有排班權限檢查 - userRole:",t,"isManager:",t==="manager"),t==="manager"),[t]);D.useEffect(()=>{(async()=>{try{console.log("===== 獲取商店資料 =====");const ie=(await be(se(U,"stores"))).docs.map(ne=>({id:ne.id,...ne.data()}));if(console.log("獲取到商店資料:",ie.length,"筆"),ie.forEach(ne=>{console.log(`- 商店 ID: ${ne.id}, 名稱: ${ne.name}`)}),ee(ie),R(ie),t==="admin"||t==="enterprise")me("");else{const ne=(n==null?void 0:n.store)||"";me(ne);const Te=ie.some(Me=>Me.id===ne);ne&&!Te&&console.error(`警告: 用戶所屬商店 (${ne}) 不存在於商店列表中!`)}}catch(X){console.error("獲取所有商店資料失敗",X),f(`獲取商店資料失敗: ${X.message||"未知錯誤"}`)}})()},[t,n==null?void 0:n.store]),D.useEffect(()=>{(async()=>{try{const X=tt(se(U,"users"),tn("role","in",["staff","manager"])),ne=(await be(X)).docs.map(Te=>({id:Te.id,...Te.data()}));z(ne)}catch(X){console.error("獲取員工資料失敗",X)}})()},[]),D.useCallback(q=>{if(!Array.isArray(q))return console.error("ensureScheduleIds: 不是有效的數組",q),[];const X=q.filter(ie=>!(ie!=null&&ie.id));return X.length>0?(console.warn(`有 ${X.length} 筆排班資料缺少ID，嘗試修復...`),q.map(ne=>{if(!ne.id&&ne.date&&ne.startTime&&ne.userId){const Te=`${ne.date}_${ne.startTime}_${ne.userId}`;return console.log(`為排班資料生成臨時ID: ${Te}`),{...ne,id:Te,_needsIdFix:!0}}return ne})):q},[]),D.useEffect(()=>{let q=()=>{};return(()=>{g(!0);try{if(console.log("===== 設置排班監聽器 ====="),console.log("Firebase 資料庫實例:",U?"已連接":"未連接"),console.log("當前用戶:",e==null?void 0:e.uid,"角色:",t),console.log("用戶商店:",n==null?void 0:n.store),console.log("選擇的商店:",K),(t==="manager"||t==="staff")&&!(n!=null&&n.store)){console.error("錯誤: 用戶沒有分店信息!",t,n),f("您的帳戶沒有關聯到任何分店，請聯絡管理員 (錯誤碼: NO_STORE)"),g(!1);return}let ie;t==="admin"||t==="enterprise"?K?(console.log("查詢指定分店排班:",K),ie=tt(se(U,"schedules"),tn("store","==",K),Ot("date","asc"),Ot("startTime","asc"))):(console.log("查詢所有分店排班"),ie=tt(se(U,"schedules"),Ot("date","asc"),Ot("startTime","asc"))):t==="manager"||t==="staff"?(console.log("查詢用戶所屬分店排班:",n.store),ie=tt(se(U,"schedules"),tn("store","==",n.store),Ot("date","asc"),Ot("startTime","asc"))):(console.warn("用戶角色不明確:",t),ie=tt(se(U,"schedules"),tn("userId","==","non-existent-id"),Ot("date","asc"))),console.log("建立排班資料監聽器"),q=TM(ie,ne=>{console.log("收到排班資料更新, 文檔數:",ne.size);const Te=ne.docs.map(Me=>{const st=Me.data();return{id:Me.id,...st}});if(a(Te),g(!1),C){const Me=Ca(C),st=Te.filter(lt=>lt.date===Me);P(st)}fe(Te),console.log("排班資料更新完成, 總筆數:",Te.length)},ne=>{console.error("監聽排班資料錯誤",ne),f(`無法即時更新排班資料: ${ne.message||"未知錯誤"} (錯誤碼: ${ne.code||"UNKNOWN"})`),g(!1)})}catch(ie){console.error("設置排班監聽器失敗",ie),f(`設置監聽器失敗: ${ie.message||"未知錯誤"} (錯誤碼: LISTENER_SETUP_FAILED)`),g(!1)}})(),()=>{console.log("清理排班監聽器"),q()}},[t,n==null?void 0:n.store,K,e==null?void 0:e.uid]);const fe=q=>{const X=`${E}-${String(_+1).padStart(2,"0")}`,ie=q.filter(Me=>Me.date.startsWith(X)),ne={};ie.forEach(Me=>{ne[Me.date]||(ne[Me.date]=[]),ne[Me.date].push(Me)});const Te=Object.entries(ne).sort(([Me],[st])=>Me.localeCompare(st)).map(([Me,st])=>({date:Me,formattedDate:`${new Date(Me).getMonth()+1}月${new Date(Me).getDate()}日`,records:st.sort((lt,Q)=>lt.startTime.localeCompare(Q.startTime))}));V(Te)};D.useEffect(()=>{if(!C)return;const q=Ca(C),X=o.filter(Te=>Te.date===q),ie=oe(X);P(ie);const ne=t!=="admin"&&t!=="enterprise"?n==null?void 0:n.store:K||(n==null?void 0:n.store)||"";(t==="manager"||t==="staff")&&!ne&&(f("您的帳戶沒有關聯到任何分店，請聯絡管理員"),console.error("用戶沒有商店信息",t,n)),l(Te=>({...Te,date:q,startTime:"09:00",endTime:"18:00",store:ne})),console.log("已選日期的排班:",ie)},[C,o,n,Ce,t,K,oe]);const ve=async(q,X,ie=null)=>{try{console.log(`記錄排班${q}操作歷史`);const ne={action:q,userId:e.uid,userName:(n==null?void 0:n.name)||"未知用戶",timestamp:At(),scheduleId:X.id||null,storeId:X.store||null,date:X.date||null,details:q==="delete"?{deletedSchedule:{...X}}:q==="update"?{oldData:{...ie},newData:{...X}}:{newSchedule:{...X}}};await tr(se(U,"schedule_history"),ne),console.log(`排班${q}歷史記錄已保存`)}catch(ne){console.error(`記錄排班${q}歷史失敗`,ne)}},[ce,De]=D.useState(!1),He=async q=>{q.preventDefault(),f(""),g(!0);try{if(!s.date||!s.store){f("請填寫完整資訊，包括商店"),g(!1);return}if(!(e!=null&&e.uid)){f("用戶身份驗證失敗，請重新登入"),g(!1);return}if(t!=="admin"&&t!=="enterprise"&&s.store!==(n==null?void 0:n.store)){f("您只能在自己所屬的商店進行排班"),g(!1);return}let X;if(ce)X={date:s.date,startTime:"00:00",endTime:"00:00",title:"不排班",location:"",note:s.note||"",store:s.store,userId:e.uid,userName:(n==null?void 0:n.name)||"未知用戶",isNotScheduled:!0};else{const ie=s.startTime.includes(":")?s.startTime:`${s.startTime}:00`,ne=s.endTime.includes(":")?s.endTime:`${s.endTime}:00`;if(!s.startTime||!s.endTime||!s.title){f("請填寫完整資訊，包括時間和標題"),g(!1);return}X={date:s.date,startTime:ie,endTime:ne,title:s.title,location:s.location||"",note:s.note||"",store:s.store,userId:e.uid,userName:(n==null?void 0:n.name)||"未知用戶",isNotScheduled:!1}}if(console.log("準備儲存的資料:",X),c&&s.id){console.log("正在編輯排班, ID:",s.id);const ie=Ie(U,"schedules",s.id),ne=await In(ie),Te=ne.exists()?ne.data():null;await fn(ie,{...X,updatedAt:At()}),console.log("排班更新成功, ID:",s.id),await ve("update",{id:s.id,...X},Te)}else{console.log("新增排班");const ie=await tr(se(U,"schedules"),{...X,createdAt:At()});console.log("排班新增成功, ID:",ie.id),await ve("create",{id:ie.id,...X})}pt(),alert(c?"排班已更新":"排班已新增")}catch(X){console.error("儲存排班失敗",X),f(`儲存失敗: ${X.message||"未知錯誤"}`)}finally{g(!1)}},Ue=q=>{if(!q||!q.id){f("無法編輯：無效的排班資料");return}console.log("編輯排班:",q);const X=q.isNotScheduled||q.title==="不排班"&&q.startTime==="00:00"&&q.endTime==="00:00";De(X),l({id:q.id,date:q.date||"",startTime:q.startTime||"09:00",endTime:q.endTime||"18:00",title:X?"":q.title||"",location:q.location||"",note:q.note||"",store:q.store||(n==null?void 0:n.store)||""}),d(!0),S(!0)},et=async q=>{if(window.confirm("確定要刪除這筆排班嗎？")){if(!q){f("刪除失敗：無效的排班ID");return}console.log("刪除排班, ID:",q),g(!0);try{const X=Ie(U,"schedules",q),ie=await In(X);if(!ie.exists()){f("刪除失敗：排班記錄不存在"),g(!1);return}const ne=ie.data();await si(X),console.log("排班已成功刪除"),await ve("delete",{id:q,...ne});const Te=o.filter(Me=>Me.id!==q);if(a(Te),C){const Me=Ca(C);P(Te.filter(st=>st.date===Me))}alert("排班已刪除")}catch(X){console.error("刪除排班失敗",X),f(`刪除失敗: ${X.message||"未知錯誤"}`)}finally{g(!1)}}},pt=()=>{S(!1),L(!1),d(!1),f(""),De(!1),l({id:"",date:C?Ca(C):"",startTime:"09:00",endTime:"18:00",title:"",location:"",note:"",store:(n==null?void 0:n.store)||""})},jt=q=>{A(q),S(!0)},Rt=q=>{q==="prev"?_===0?(I(11),k(E-1)):I(_-1):_===11?(I(0),k(E+1)):I(_+1)},ln=()=>`${E}年 ${["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][_]}`,gt=async()=>{if(!ge()){f("您沒有權限執行此操作");return}if(window.confirm("確定要刪除所有排班記錄嗎？此操作無法恢復！")){g(!0),f("");try{const q=tt(se(U,"schedules"),tn("store","==",n==null?void 0:n.store)),X=await be(q);if(X.empty){alert("沒有找到需要刪除的排班記錄"),g(!1);return}const ie=X.docs.map(async Te=>{const Me=Te.data();return ve("delete",{id:Te.id,...Me})});await Promise.all(ie);const ne=Bo(U);X.docs.forEach(Te=>{ne.delete(Te.ref)}),await ne.commit(),console.log(`成功刪除 ${X.size} 筆排班記錄`),alert(`已刪除 ${X.size} 筆排班記錄`)}catch(q){console.error("刪除所有排班記錄失敗",q),f(`刪除失敗: ${q.message||"未知錯誤"}`)}finally{g(!1)}}},wt=D.useMemo(()=>{if(!T.length)return[];const X=[...T.filter(ne=>he(ne))].sort((ne,Te)=>ne.startTime!==Te.startTime?ne.startTime.localeCompare(Te.startTime):ne.endTime.localeCompare(Te.endTime)),ie={};return X.forEach(ne=>{const Te=`${ne.startTime} - ${ne.endTime}`;ie[Te]||(ie[Te]=[]),ie[Te].push(ne)}),Object.entries(ie).map(([ne,Te])=>({timeRange:ne,items:Te}))},[T,he]),at=()=>{if(console.log("打開/關閉排班紀錄抽屜, userRole:",t),!N){const q=`${E}-${String(_+1).padStart(2,"0")}`,X=o.filter(Me=>Me.date.startsWith(q)),ie=oe(X),ne={};ie.forEach(Me=>{ne[Me.date]||(ne[Me.date]=[]),ne[Me.date].push(Me)});const Te=Object.entries(ne).sort(([Me],[st])=>Me.localeCompare(st)).map(([Me,st])=>({date:Me,formattedDate:`${new Date(Me).getMonth()+1}月${new Date(Me).getDate()}日`,records:st.sort((lt,Q)=>lt.startTime.localeCompare(Q.startTime))}));V(Te),console.log("檢查是否顯示刪除所有按鈕:",{canDeleteAllRecords:ge(),userRole:t,isManager:t==="manager"})}L(!N)},_t=D.useCallback(q=>{const X=Ca(q);return(Ce[X]||[]).some(ne=>ne.userId===(e==null?void 0:e.uid)&&(ne.isNotScheduled||ne.title==="不排班"&&ne.startTime==="00:00"&&ne.endTime==="00:00"))},[Ce,e==null?void 0:e.uid]),Ht=D.useCallback(q=>{if(t!=="manager")return!1;const X=Ca(q);return(Ce[X]||[]).some(ne=>(ne.isNotScheduled||ne.title==="不排班"&&ne.startTime==="00:00"&&ne.endTime==="00:00")&&ne.userId!==(e==null?void 0:e.uid))},[Ce,t,e==null?void 0:e.uid]);return y(HJ,{children:[u(GJ,{children:"排班管理"}),y(KJ,{children:[y("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[y(XJ,{children:[y(zT,{active:m==="calendar",onClick:()=>v("calendar"),children:[u("i",{className:"ri-calendar-line",style:{marginRight:"4px"}})," 月曆檢視"]}),y(zT,{active:m==="list",onClick:()=>v("list"),children:[u("i",{className:"ri-list-check",style:{marginRight:"4px"}})," 列表檢視"]})]}),(t==="enterprise"||t==="admin")&&y(IZ,{value:K,onChange:q=>me(q.target.value),children:[u("option",{value:"",children:"所有商店"}),ye.map(q=>u("option",{value:q.id,children:q.name},q.id))]})]}),y("div",{style:{display:"flex",gap:"10px"},children:[y(xZ,{onClick:at,children:[u("i",{className:"ri-file-list-3-line"})," 排班紀錄"]}),y(QJ,{onClick:()=>jt(C||new Date),children:[u("i",{className:"ri-add-line"})," 新增排班"]})]})]}),m==="calendar"&&y(YJ,{children:[y(JJ,{children:[u(VT,{onClick:()=>Rt("prev"),children:u("i",{className:"ri-arrow-left-s-line"})}),u(ZJ,{children:ln()}),u(VT,{onClick:()=>Rt("next"),children:u("i",{className:"ri-arrow-right-s-line"})})]}),u(tZ,{children:["週日","週一","週二","週三","週四","週五","週六"].map(q=>u(nZ,{children:q},q))}),u(eZ,{theme:i,children:G.map((q,X)=>{const ie=q.isCurrentMonth,ne=EZ(q.date),Te=C&&C.getDate()===q.date.getDate()&&C.getMonth()===q.date.getMonth()&&C.getFullYear()===q.date.getFullYear(),st=te(q.date).length,lt=_t(q.date),Q=Ht(q.date);return y(rZ,{onClick:()=>jt(q.date),isToday:ne,isCurrentMonth:ie,isSelected:Te,theme:{...i,darkMode:r},style:{position:"relative"},children:[u(iZ,{isToday:ne,theme:i,children:q.date.getDate()}),lt&&u(NZ,{isManager:t==="manager"}),Q&&u(MZ,{}),st>0&&!lt&&y(aZ,{theme:i,children:[u(oZ,{theme:{...i,darkMode:r}}),st]})]},X)})})]}),y(sZ,{visible:m==="list",children:[o.length===0&&u("div",{style:{textAlign:"center",padding:"20px",background:"#f9fafb",borderRadius:"8px",color:"#6b7280"},children:"目前沒有排班紀錄"}),Object.entries(oe(o).reduce((q,X)=>(q[X.date]||(q[X.date]=[]),q[X.date].push(X),q),{})).sort(([q],[X])=>q.localeCompare(X)).map(([q,X])=>y("div",{children:[y(QT,{children:[`${new Date(q).getFullYear()}年${new Date(q).getMonth()+1}月${new Date(q).getDate()}日`,y("span",{style:{fontSize:"14px",fontWeight:"normal",color:"#6b7280",marginLeft:"10px"},children:["共 ",X.length," 筆紀錄"]})]}),u("div",{style:{display:"grid",gap:"10px"},children:X.sort((ie,ne)=>ie.startTime.localeCompare(ne.startTime)).map(ie=>{var Me,st;const ne=((Me=O.find(lt=>lt.id===ie.store))==null?void 0:Me.name)||`未知商店 (ID: ${ie.store})`,Te=((st=j.find(lt=>lt.id===ie.userId))==null?void 0:st.name)||ie.userName;return y(lZ,{children:[y("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[y("div",{style:{fontSize:"16px",fontWeight:"600",color:"#3A5199"},children:[ie.startTime.substring(0,5)," - ",ie.endTime.substring(0,5)]}),u("div",{style:{background:"#f0e7ff",color:"#7C3AED",padding:"4px 8px",borderRadius:"6px",fontSize:"13px",fontWeight:"500"},children:ne})]}),y("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[u("div",{style:{fontWeight:"500"},children:ie.title}),ie.location&&y("div",{children:["地點：",ie.location]}),ie.note&&u("div",{style:{background:"#f9fafb",padding:"8px",borderRadius:"6px",fontSize:"13px",color:"#4b5563",marginTop:"4px"},children:ie.note})]}),y("div",{style:{fontSize:"13px",marginTop:"10px",padding:"6px",background:ie.userId===(e==null?void 0:e.uid)?"#f0e7ff":"#f0f9ff",borderRadius:"6px",color:ie.userId===(e==null?void 0:e.uid)?"#7C3AED":"#3B82F6"},children:["上班人員：",Te," ",ie.userId===(e==null?void 0:e.uid)&&"(您)"]}),we(ie)&&y(yy,{children:[u(Ll,{type:"button",onClick:()=>{Ue(ie),S(!0)},children:"編輯"}),u(Ll,{type:"button",onClick:()=>et(ie.id),children:"刪除"})]})]},ie.id)})})]},q))]}),u(GT,{isOpen:N,onClick:at}),y(jT,{isOpen:N,theme:i,children:[y(UT,{children:[y(qT,{theme:i,children:[E,"年",_+1,"月排班紀錄"]}),u(WT,{onClick:at,children:u("i",{className:"ri-close-line"})})]}),t==="manager"&&u("div",{style:{marginBottom:"20px"},children:y(_Z,{type:"button",onClick:gt,children:[u("i",{className:"ri-delete-bin-line"}),"刪除所有排班紀錄"]})}),y(HT,{children:[u(yZ,{children:B.length===0?u("div",{style:{color:"#6b7280",fontSize:"14px",background:"#f9fafb",padding:"15px",borderRadius:"6px",textAlign:"center"},children:"本月暫無排班紀錄"}):B.map(q=>y("div",{children:[u(QT,{children:q.formattedDate}),q.records.map(X=>{var lt,Q;const ie=((lt=O.find(pe=>pe.id===X.store))==null?void 0:lt.name)||`未知商店 (ID: ${X.store})`,ne=((Q=j.find(pe=>pe.id===X.userId))==null?void 0:Q.name)||X.userName;let Te="",Me="";X.createdAt&&!X.updatedAt?(Te="create",Me="新增"):X.updatedAt&&(Te="update",Me="編輯");const st=X.isNotScheduled||X.title==="不排班"&&X.startTime==="00:00"&&X.endTime==="00:00";return y(bZ,{isOwn:X.userId===(e==null?void 0:e.uid),style:st?{borderLeft:"3px solid #e53e3e",background:"rgba(229, 62, 62, 0.03)"}:{},children:[y(wZ,{children:[u("div",{style:st?{color:"#e53e3e",fontWeight:"600"}:{},children:st?"不排班":`${X.startTime} - ${X.endTime}`}),y("div",{style:{display:"flex",alignItems:"center"},children:[Te&&u(TZ,{type:Te,children:Me}),u("span",{style:{marginLeft:Te?"5px":"0"},children:ie})]})]}),y(SZ,{children:[u("div",{children:u("b",{children:st?"":X.title})}),y(CZ,{children:[ne," ",X.userId===(e==null?void 0:e.uid)&&"(您)"]})]}),!st&&X.location&&y("div",{style:{fontSize:"13px",marginTop:"3px"},children:["地點：",X.location]}),X.note&&y("div",{style:{fontSize:"13px",marginTop:"8px",padding:"6px",background:st?"rgba(229, 62, 62, 0.05)":"#f9fafb",borderRadius:"6px",color:st?"#e53e3e":"#4b5563"},children:["備註：",X.note]}),(we(X)||W(X))&&y(yy,{style:{marginTop:"10px"},children:[we(X)&&u(Ll,{type:"button",onClick:()=>{Ue(X),at(),S(!0)},children:"編輯"}),W(X)&&u(Ll,{type:"button",onClick:()=>et(X.id),children:"刪除"})]})]},X.id)})]},q.date))}),u("div",{style:{marginTop:"20px",textAlign:"center"},children:(t==="manager"||t==="staff")&&u(KT,{type:"button",onClick:()=>{A(new Date(E,_,new Date().getDate())),at(),d(!1),l({id:"",date:Ca(new Date(E,_,new Date().getDate())),startTime:"09:00",endTime:"18:00",title:"",location:"",note:"",store:(n==null?void 0:n.store)||""}),S(!0)},children:"新增排班"})})]})]}),u(GT,{isOpen:w,onClick:pt}),y(jT,{isOpen:w,theme:i,children:[y(UT,{children:[u(qT,{theme:i,children:c?"編輯排班":"新增排班"}),u(WT,{onClick:pt,children:u("i",{className:"ri-close-line"})})]}),y(HT,{children:[C&&y(fZ,{children:[y("h4",{style:{marginBottom:"16px",color:"#4b5563",fontSize:"15px",fontWeight:"500"},children:[C.getFullYear(),"年",C.getMonth()+1,"月",C.getDate(),"日 排班"]}),wt.length===0?u("div",{style:{color:"#6b7280",fontSize:"14px",background:"#f9fafb",padding:"10px",borderRadius:"6px",textAlign:"center"},children:"當日無排班紀錄"}):wt.map((q,X)=>y("div",{style:{marginBottom:"15px"},children:[u(mZ,{children:q.timeRange}),q.items.map(ie=>{var Me,st;const ne=((Me=O.find(lt=>lt.id===ie.store))==null?void 0:Me.name)||`未知商店 (ID: ${ie.store})`,Te=((st=j.find(lt=>lt.id===ie.userId))==null?void 0:st.name)||ie.userName;return y(gZ,{children:[y("div",{style:{display:"flex",justifyContent:"space-between"},children:[u("div",{children:u("b",{children:ie.title})}),u("div",{style:{fontSize:"13px",color:"#4b5563"},children:ne})]}),ie.location&&y("div",{children:["地點：",ie.location]}),y("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:["上班人員：",Te," ",ie.userId===(e==null?void 0:e.uid)&&"(您)"]}),we(ie)&&y(yy,{children:[u(Ll,{onClick:()=>Ue(ie),children:"編輯"}),u(Ll,{onClick:()=>et(ie.id),children:"刪除"})]})]},ie.id)})]},X))]}),y(cZ,{onSubmit:He,children:[p&&u(dZ,{children:p}),u(Mf,{children:u(zu,{children:y("div",{style:{width:"100%"},children:[u(Vu,{children:"排班商店"}),t!=="admin"&&t!=="enterprise"?u("div",{style:{padding:"10px 12px",border:"1px solid #e2e8f0",borderRadius:"8px",background:"#f8f9fc",color:"#555"},children:(()=>{const q=(n==null?void 0:n.store)||"",X=ye.find(ie=>ie.id===q);return X?`${X.name} (您的商店)`:`未知商店 (ID: ${q})`})()}):y(vZ,{value:s.store,onChange:q=>l(X=>({...X,store:q.target.value})),required:!0,children:[u("option",{value:"",children:"請選擇商店"}),ye.map(q=>u("option",{value:q.id,children:q.name},q.id))]})]})})}),u(Mf,{children:u(zu,{children:y("div",{style:{width:"100%"},children:[u(Vu,{children:"時間選擇"}),y("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px",alignItems:"center",marginBottom:"10px"},children:[y("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"10px",flex:"1",minWidth:"220px"},children:[u("div",{style:{minWidth:"45px"},children:"開始"}),y(XT,{style:{flex:"1"},children:[y(Of,{children:[u($f,{children:"時"}),u(Lf,{value:de(s.startTime).hour,onChange:q=>ae("hour","startTime",q.target.value),disabled:ce,children:H.map(q=>u("option",{value:q,children:q},`start-hour-${q}`))})]}),y(Of,{children:[u($f,{children:"分"}),u(Lf,{value:de(s.startTime).minute,onChange:q=>ae("minute","startTime",q.target.value),disabled:ce,children:J.map(q=>u("option",{value:q,children:q},`start-minute-${q}`))})]})]})]}),y("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"10px",flex:"1",minWidth:"220px"},children:[u("div",{style:{minWidth:"45px"},children:"結束"}),y(XT,{style:{flex:"1"},children:[y(Of,{children:[u($f,{children:"時"}),u(Lf,{value:de(s.endTime).hour,onChange:q=>ae("hour","endTime",q.target.value),disabled:ce,children:H.map(q=>u("option",{value:q,children:q},`end-hour-${q}`))})]}),y(Of,{children:[u($f,{children:"分"}),u(Lf,{value:de(s.endTime).minute,onChange:q=>ae("minute","endTime",q.target.value),disabled:ce,children:J.map(q=>u("option",{value:q,children:q},`end-minute-${q}`))})]})]})]})]}),u(AZ,{children:y(PZ,{children:[u(DZ,{type:"checkbox",checked:ce,onChange:()=>De(!ce)}),u(RZ,{checked:ce}),"不排班"]})})]})})}),y(Mf,{style:{display:ce?"none":"block"},children:[u(zu,{children:y("div",{style:{width:"100%"},children:[u(Vu,{children:"標題"}),u(YT,{type:"text",placeholder:"例如：上班",value:s.title,onChange:q=>l(X=>({...X,title:q.target.value})),required:!ce,disabled:ce})]})}),u(zu,{children:y("div",{style:{width:"100%"},children:[u(Vu,{children:"地點"}),u(YT,{type:"text",placeholder:"例如：一樓櫃台",value:s.location,onChange:q=>l(X=>({...X,location:q.target.value})),disabled:ce})]})})]}),u(Mf,{children:u(zu,{children:y("div",{style:{width:"100%"},children:[u(Vu,{children:"備註"}),u(uZ,{placeholder:ce?"請說明不排班原因...":"其他備註說明...",value:s.note,onChange:q=>l(X=>({...X,note:q.target.value}))})]})})}),y(hZ,{children:[u(KT,{type:"submit",disabled:h,children:h?"處理中...":c?"更新排班":ce?"確認不排班":"新增排班"}),u(pZ,{type:"button",onClick:pt,children:"取消"})]})]})]})]}),u(kn,{})]})},$Z=b("div",{target:"e9pqgew10"})({name:"zpjj62",styles:"max-width:1000px;margin:0 auto;padding:24px 12px 80px 12px;position:relative"}),LZ=b("h2",{target:"e9pqgew9"})({name:"1hdh55k",styles:"font-size:24px;font-weight:700;margin-bottom:24px;color:#3A5199"}),FZ=b("div",{target:"e9pqgew8"})({name:"13ee21j",styles:"margin-bottom:24px;display:flex;flex-wrap:wrap;gap:12px;align-items:center"}),JT=b("select",{target:"e9pqgew7"})({name:"6s6lui",styles:"padding:8px 12px;border:1px solid #e2e8f0;border-radius:8px;font-size:14px;background:#fff;min-width:150px"}),BZ=b("div",{target:"e9pqgew6"})({name:"1d69duf",styles:"background:#fff;border-radius:14px;box-shadow:0 2px 10px rgba(0,0,0,0.05);overflow:hidden"}),zZ=b("div",{target:"e9pqgew5"})({name:"ukdcws",styles:"padding:16px;border-bottom:1px solid #f0f2f5;&:last-child{border-bottom:none;}&:hover{background:#f9fafb;}"}),VZ=b("div",{target:"e9pqgew4"})({name:"rcj3va",styles:"display:flex;justify-content:space-between;align-items:center;margin-bottom:8px"}),jZ=b("span",{target:"e9pqgew3"})("padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500;background:",e=>e.type==="create"?"#dcfce7":e.type==="update"?"#e0f2fe":e.type==="delete"?"#fee2e2":"#f3f4f6",";color:",e=>e.type==="create"?"#16a34a":e.type==="update"?"#0284c7":e.type==="delete"?"#dc2626":"#6b7280",";"),UZ=b("div",{target:"e9pqgew2"})({name:"2el63s",styles:"font-size:13px;color:#6b7280"}),qZ=b("div",{target:"e9pqgew1"})({name:"1r0yqr6",styles:"margin-top:10px"}),WZ=b("div",{target:"e9pqgew0"})({name:"opt8mn",styles:"margin-top:5px;font-size:14px;color:#4b5563"}),HZ=()=>{const{currentUser:e}=gi(),{userRole:t,userData:n}=Bi(),[r,i]=D.useState([]),[o,a]=D.useState(!0),[s,l]=D.useState("all"),[c,d]=D.useState(""),[p,f]=D.useState([]);D.useEffect(()=>{(async()=>{try{const S=(await be(se(U,"stores"))).docs.map(C=>({id:C.id,...C.data()}));f(S),(t==="manager"||t==="staff")&&(n!=null&&n.store)&&d(n.store)}catch(w){console.error("獲取商店列表失敗",w)}})()},[t,n]),D.useEffect(()=>{e&&(async()=>{a(!0);try{let w;const S=[];S.push(Ot("timestamp","desc")),t==="manager"||t==="staff"?S.push(tn("storeId","==",n==null?void 0:n.store)):c&&S.push(tn("storeId","==",c)),s!=="all"&&S.push(tn("action","==",s)),w=tt(se(U,"schedule_history"),...S,wS(100));const A=(await be(w)).docs.map(_=>{var I;return{id:_.id,..._.data(),timestamp:((I=_.data().timestamp)==null?void 0:I.toDate())||new Date}});i(A)}catch(w){console.error("獲取操作歷史失敗",w)}finally{a(!1)}})()},[e,t,n,s,c]);const h=v=>v?v.toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"N/A",g=v=>{switch(v){case"create":return"新增";case"update":return"編輯";case"delete":return"刪除";default:return v}},m=v=>{const w=p.find(S=>S.id===v);return w?w.name:`未知商店 (${v})`};return y($Z,{children:[u(LZ,{children:"排班操作歷史"}),y(FZ,{children:[u("div",{children:y(JT,{value:s,onChange:v=>l(v.target.value),children:[u("option",{value:"all",children:"所有操作"}),u("option",{value:"create",children:"只顯示新增"}),u("option",{value:"update",children:"只顯示編輯"}),u("option",{value:"delete",children:"只顯示刪除"})]})}),(t==="admin"||t==="enterprise")&&u("div",{children:y(JT,{value:c,onChange:v=>d(v.target.value),children:[u("option",{value:"",children:"所有商店"}),p.map(v=>u("option",{value:v.id,children:v.name},v.id))]})})]}),o?u("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:"載入中..."}):r.length===0?u("div",{style:{textAlign:"center",padding:"40px",background:"#f9fafb",borderRadius:"8px",color:"#6b7280"},children:"沒有找到符合條件的操作歷史記錄"}):u(BZ,{children:r.map(v=>{var w,S,C;return y(zZ,{children:[y(VZ,{children:[y(jZ,{type:v.action,children:[g(v.action),"排班"]}),u(UZ,{children:h(v.timestamp)})]}),y(qZ,{children:[u("div",{children:u("strong",{children:v.action==="create"?"新增了排班":v.action==="update"?"編輯了排班":"刪除了排班"})}),y(WZ,{children:[y("div",{children:["操作人員: ",v.userName]}),y("div",{children:["日期: ",v.date]}),y("div",{children:["商店: ",m(v.storeId)]}),v.action==="create"&&((w=v.details)==null?void 0:w.newSchedule)&&y("div",{children:["排班資訊: ",v.details.newSchedule.title," (",v.details.newSchedule.startTime," - ",v.details.newSchedule.endTime,")"]}),v.action==="update"&&((S=v.details)==null?void 0:S.oldData)&&((C=v.details)==null?void 0:C.newData)&&y("div",{children:["從 ",v.details.oldData.title," (",v.details.oldData.startTime," - ",v.details.oldData.endTime,")",u("br",{}),"改為 ",v.details.newData.title," (",v.details.newData.startTime," - ",v.details.newData.endTime,")"]})]})]})]},v.id)})}),u(kn,{})]})},ZT=b("div",{target:"e1xyrfud27"})({name:"zpjj62",styles:"max-width:1000px;margin:0 auto;padding:24px 12px 80px 12px;position:relative"}),eI=b("h2",{target:"e1xyrfud26"})("font-size:24px;font-weight:700;margin-bottom:24px;color:",e=>e.theme.primary,";"),GZ=b("div",{target:"e1xyrfud25"})({name:"1jrwjrm",styles:"padding:20px 0 80px"}),by=b("div",{target:"e1xyrfud24"})("background-color:",e=>e.theme.cardBg,";border-radius:16px;padding:20px;box-shadow:0 4px 15px ",e=>e.theme.shadowColor,";margin-bottom:30px;transition:all 0.3s ease;position:relative;overflow:hidden;",e=>e.theme.darkTheme&&`
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(124, 58, 237, 0.08));
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    box-shadow: 
      0 4px 24px rgba(0, 0, 0, 0.4),
      inset 0 0 1px 1px rgba(255, 255, 255, 0.05);
  `," &::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;pointer-events:none;z-index:1;",e=>e.theme.darkTheme&&`
      background: 
        radial-gradient(circle at 20% 20%, rgba(124, 58, 237, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.15) 0%, transparent 50%);
      border-radius: 16px;
    `,";}&::after{",e=>e.theme.darkTheme&&`
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle at center, rgba(255, 255, 255, 0.03) 0%, transparent 60%);
      opacity: 0.5;
      pointer-events: none;
      z-index: 0;
      animation: shine 15s infinite linear;
      
      @keyframes shine {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }
    `,";}"),YZ=b("div",{target:"e1xyrfud23"})({name:"1lx46vg",styles:"display:flex;align-items:center;gap:20px;margin-bottom:20px;position:relative;z-index:2"}),KZ=b("div",{target:"e1xyrfud22"})("width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg, #7C3AED, #3B82F6);display:flex;align-items:center;justify-content:center;color:white;font-size:32px;position:relative;cursor:pointer;transition:all 0.3s ease;&:hover{transform:scale(1.05);box-shadow:0 8px 25px rgba(124, 58, 237, 0.4);}&:active{transform:scale(0.95);}",e=>e.clickCount>0&&`
    animation: shake 0.5s ease-in-out;
  `,"@keyframes shake{0%,100%{transform:translateX(0);}25%{transform:translateX(-5px);}75%{transform:translateX(5px);}}",e=>e.theme.darkTheme&&`
    box-shadow: 
      0 8px 16px rgba(0, 0, 0, 0.3),
      inset 0 0 0 1px rgba(255, 255, 255, 0.1);
      
    &::after {
      content: '';
      position: absolute;
      top: -3px;
      left: -3px;
      right: -3px;
      bottom: -3px;
      border-radius: 50%;
      background: linear-gradient(135deg, rgba(124, 58, 237, 0.5), rgba(59, 130, 246, 0.5));
      z-index: -1;
      filter: blur(8px);
      opacity: 0.7;
    }
  `,";"),XZ=b("div",{target:"e1xyrfud21"})({name:"hz6t95",styles:"flex:1;position:relative;z-index:2"}),QZ=b("h2",{target:"e1xyrfud20"})("font-size:24px;font-weight:700;color:",e=>e.theme.textColor,";margin-bottom:5px;display:flex;align-items:center;gap:8px;",e=>e.theme.darkTheme&&`
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    background: linear-gradient(to right, #fff, #ccc);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    filter: drop-shadow(0 2px 2px rgba(0, 0, 0, 0.3));
  `,";"),JZ=b("span",{target:"e1xyrfud19"})("cursor:pointer;color:",e=>e.theme.textSecondary,";font-size:18px;transition:all 0.2s ease;&:hover{color:",e=>e.theme.primary,";transform:scale(1.1);}"),ZZ=b("p",{target:"e1xyrfud18"})("font-size:14px;color:",e=>e.theme.textSecondary,";",e=>e.theme.darkTheme&&`
    opacity: 0.8;
  `,";"),eee=b("span",{target:"e1xyrfud17"})("display:inline-block;padding:4px 10px;background-color:",e=>{switch(e.role){case"admin":return"#4F46E5";case"enterprise":return"#3B82F6";case"manager":return"#10B981";case"staff":return"#F59E0B";default:return"#6B7280"}},";color:white;border-radius:20px;font-size:12px;font-weight:500;margin-top:8px;",e=>e.theme.darkTheme&&`
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.25);
    backdrop-filter: blur(4px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    background: linear-gradient(to right, 
      ${t=>{switch(t.role){case"admin":return"#4F46E5, #6366F1";case"enterprise":return"#3B82F6, #60A5FA";case"manager":return"#10B981, #34D399";case"staff":return"#F59E0B, #FBBF24";default:return"#6B7280, #9CA3AF"}}}
    );
  `,";"),tI=b("h3",{target:"e1xyrfud16"})("font-size:18px;font-weight:600;margin-bottom:15px;color:",e=>e.theme.textColor,";"),nI=b("div",{target:"e1xyrfud15"})({name:"1b1z0gh",styles:"display:grid;gap:15px"}),No=b("div",{target:"e1xyrfud14"})("display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid ",e=>e.theme.cardBorder,";&:last-child{border-bottom:none;}"),Mo=b("span",{target:"e1xyrfud13"})("color:",e=>e.theme.textSecondary,";font-size:14px;"),Oo=b("span",{target:"e1xyrfud12"})("color:",e=>e.theme.textColor,";font-size:14px;font-weight:500;"),rI=b("div",{target:"e1xyrfud11"})("position:relative;display:inline-block;width:52px;height:26px;cursor:pointer;input{opacity:0;width:0;height:0;}.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:",e=>e.theme.gray,';transition:.4s;border-radius:34px;}.slider:before{position:absolute;content:"";height:18px;width:18px;left:4px;bottom:4px;background-color:white;transition:.4s;border-radius:50%;}input:checked+.slider{background-color:#7C3AED;}input:checked+.slider:before{transform:translateX(26px);}'),tee=b("button",{target:"e1xyrfud9"})({name:"1s5h2hy",styles:"width:100%;padding:12px;background-color:#EF4444;color:white;border:none;border-radius:8px;font-size:16px;font-weight:500;cursor:pointer;transition:all 0.3s ease;&:hover{background-color:#DC2626;transform:translateY(-1px);box-shadow:0 4px 12px rgba(239,68,68,0.2);}"}),nee=b("div",{target:"e1xyrfud8"})("position:fixed;top:0;right:",e=>e.visible?"0":"-100%",";width:85%;max-width:400px;height:100vh;background-color:",e=>e.theme.cardBg,";box-shadow:-4px 0 15px ",e=>e.theme.shadowColor,";z-index:2000;transition:right 0.3s ease-in-out;padding:20px;overflow-y:auto;"),ree=b("div",{target:"e1xyrfud7"})("position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0, 0, 0, 0.5);z-index:1999;display:",e=>e.visible?"block":"none",";"),iee=b("div",{target:"e1xyrfud6"})("display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:15px;border-bottom:1px solid ",e=>e.theme.cardBorder,";"),oee=b("h3",{target:"e1xyrfud5"})("font-size:20px;font-weight:600;color:",e=>e.theme.textColor,";"),aee=b("button",{target:"e1xyrfud4"})("background:none;border:none;font-size:22px;color:",e=>e.theme.textSecondary,";cursor:pointer;&:hover{color:",e=>e.theme.primary,";}"),see=b("div",{target:"e1xyrfud3"})({name:"1azpx8r",styles:"margin-bottom:20px"}),lee=b("label",{target:"e1xyrfud2"})("display:block;margin-bottom:8px;font-size:14px;color:",e=>e.theme.textSecondary,";"),cee=b("input",{target:"e1xyrfud1"})("width:100%;padding:12px;border:1px solid ",e=>e.theme.cardBorder,";border-radius:8px;background-color:",e=>e.theme.inputBg,";color:",e=>e.theme.textColor,";font-size:16px;transition:all 0.3s ease;&:focus{border-color:#7C3AED;box-shadow:0 0 0 2px rgba(124,58,237,0.2);}"),uee=b("button",{target:"e1xyrfud0"})({name:"1aqayxx",styles:"width:100%;padding:12px;background-color:#7C3AED;color:white;border:none;border-radius:8px;font-size:16px;font-weight:500;cursor:pointer;transition:all 0.3s ease;margin-top:10px;&:hover{background-color:#6D28D9;}&:disabled{background-color:#A78BDA;cursor:not-allowed;}"}),iI=e=>{switch(e){case"admin":return"系統管理員";case"enterprise":return"總公司負責人";case"manager":return"分店經理";case"staff":return"店員";default:return"未知角色"}},dee=()=>{var H,J;const{currentUser:e}=gi(),{userData:t,userRole:n,refreshUserData:r}=Bi(),{darkMode:i,toggleDarkMode:o}=El(),[a,s]=D.useState(!0),[l,c]=D.useState(""),[d,p]=D.useState(null),[f,h]=D.useState(0),[g,m]=D.useState(!1),[v,w]=D.useState(""),[S,C]=D.useState(!1),[A,_]=D.useState(!0),[I,E]=D.useState(0),[k,T]=D.useState(null),P=qt();D.useEffect(()=>{(async()=>{if(t!=null&&t.store)try{const ae=await In(Ie(U,"stores",t.store));ae.exists()&&p(ae.data())}catch(ae){console.error("獲取商店資訊失敗",ae),c("獲取商店資訊失敗")}s(!1)})()},[t]),D.useEffect(()=>{(async()=>{if(n==="enterprise")try{const ae=await be(se(U,"stores"));h(ae.size)}catch(ae){console.error("獲取管理商店數量失敗",ae)}})()},[n]);const O=async()=>{try{await L8(Fi),P("/login")}catch(de){c("登出失敗："+de.message)}},R=()=>{w((t==null?void 0:t.name)||""),m(!0)},N=()=>{m(!1)},L=async()=>{if(!v.trim()){c("姓名不能為空");return}C(!0);try{const de=Ie(U,"users",e.uid);await fn(de,{name:v.trim()}),await r(),m(!1),c("")}catch(de){console.error("更新姓名失敗",de),c("更新姓名失敗："+de.message)}finally{C(!1)}},B=()=>{_(de=>!de)},V=de=>{de.stopPropagation(),o()},j=de=>{de.stopPropagation(),B()},z=()=>{E(ae=>ae+1),k&&clearTimeout(k);const de=setTimeout(()=>{E(0)},3e3);T(de),I+1>=3&&(E(0),k&&clearTimeout(k),P("/secret-game"))};return D.useEffect(()=>()=>{k&&clearTimeout(k)},[k]),a?y(ZT,{children:[u(eI,{children:"個人資料"}),u("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:"載入中..."})]}):y(ZT,{children:[u(eI,{children:"個人資料"}),u(GZ,{children:y("div",{className:"container",children:[u(by,{children:y(YZ,{children:[u(KZ,{onClick:z,clickCount:I,title:I>0?`再點擊 ${3-I} 次解鎖隱藏功能`:"",children:u("i",{className:"ri-user-line"})}),y(XZ,{children:[y(QZ,{children:[(t==null?void 0:t.name)||"未設定姓名",u(JZ,{onClick:R,children:u("i",{className:"ri-edit-line"})})]}),u(ZZ,{children:e==null?void 0:e.email}),u(eee,{role:n,children:iI(n)})]})]})}),y(by,{children:[u(tI,{children:"帳號資訊"}),y(nI,{children:[y(No,{children:[u(Mo,{children:"帳號 ID"}),u(Oo,{children:e==null?void 0:e.uid})]}),(n==="manager"||n==="staff")&&y(No,{children:[u(Mo,{children:"所屬分店"}),u(Oo,{children:(d==null?void 0:d.name)||`未知商店 (${t==null?void 0:t.store})`})]}),y(No,{children:[u(Mo,{children:"職位"}),u(Oo,{children:iI(n)})]}),y(No,{children:[u(Mo,{children:"帳號建立日期"}),u(Oo,{children:t!=null&&t.createdAt?new Date(t.createdAt.seconds*1e3).toLocaleDateString("zh-TW"):(H=e==null?void 0:e.metadata)!=null&&H.creationTime?new Date(e.metadata.creationTime).toLocaleDateString("zh-TW"):"未知"})]}),n==="enterprise"&&y(No,{children:[u(Mo,{children:"管理商店數量"}),y(Oo,{children:[f," 家"]})]})]})]}),y(by,{children:[u(tI,{children:"系統設定"}),y(nI,{children:[y(No,{children:[u(Mo,{children:"語言設定"}),u(Oo,{children:"繁體中文"})]}),y(No,{children:[u(Mo,{children:"暗黑模式"}),u(Oo,{children:y(rI,{onClick:V,children:[u("input",{type:"checkbox",checked:i,readOnly:!0}),u("span",{className:"slider"})]})})]}),y(No,{children:[u(Mo,{children:"通知設定"}),u(Oo,{children:y(rI,{onClick:j,children:[u("input",{type:"checkbox",checked:A,readOnly:!0}),u("span",{className:"slider"})]})})]}),y(No,{children:[u(Mo,{children:"最後登入時間"}),u(Oo,{children:(J=e==null?void 0:e.metadata)!=null&&J.lastSignInTime?new Date(e.metadata.lastSignInTime).toLocaleString("zh-TW"):"未知"})]})]})]}),l&&u("div",{style:{color:"#EF4444",padding:"10px",marginBottom:"20px",background:"#FEF2F2",borderRadius:"8px",textAlign:"center"},children:l}),u(tee,{onClick:O,children:"登出"})]})}),u(ree,{visible:g,onClick:N}),y(nee,{visible:g,children:[y(iee,{children:[u(oee,{children:"編輯個人資料"}),u(aee,{onClick:N,children:u("i",{className:"ri-close-line"})})]}),y(see,{children:[u(lee,{htmlFor:"name",children:"姓名"}),u(cee,{type:"text",id:"name",value:v,onChange:de=>w(de.target.value),placeholder:"請輸入姓名"})]}),u(uee,{onClick:L,disabled:S||!v.trim(),children:S?"儲存中...":"儲存變更"})]}),u(kn,{})]})},pee=b("div",{target:"e1an02k628"})("min-height:100vh;background:linear-gradient(135deg, rgba(17, 24, 39, 0.97) 0%, rgba(88, 28, 135, 0.95) 100%),url('https://images.unsplash.com/photo-1557683316-973673baf926?q=80&w=2029&auto=format&fit=crop') center/cover;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;font-family:'Noto Sans TC',sans-serif;padding-top:",e=>e.isScrolled?"80px":"120px",";transition:padding-top 0.3s ease;position:relative;padding-bottom:100px;&::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:radial-gradient(circle at 20% 20%, rgba(124, 58, 237, 0.15) 0%, transparent 50%),radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.15) 0%, transparent 50%);pointer-events:none;}"),hee=b("header",{target:"e1an02k627"})("width:100%;background:rgba(17, 24, 39, 0.8);backdrop-filter:blur(12px);border-bottom:1px solid rgba(255, 255, 255, 0.1);padding:",e=>e.isScrolled?"8px 0":"16px 0",";display:flex;flex-direction:row;align-items:center;justify-content:space-between;position:fixed;top:0;left:0;z-index:1000;transition:all 0.3s ease;white-space:nowrap;"),fee=b("div",{target:"e1an02k626"})("display:flex;align-items:center;gap:",e=>e.isScrolled?"8px":"16px",";padding-left:",e=>e.isScrolled?"16px":"24px",";transition:all 0.3s ease;"),gee=b("div",{target:"e1an02k625"})("display:flex;align-items:center;gap:",e=>e.isScrolled?"16px":"24px",";padding-right:",e=>e.isScrolled?"16px":"24px",";transition:all 0.3s ease;"),mee=b("div",{target:"e1an02k624"})("position:relative;display:flex;align-items:center;gap:",e=>e.isScrolled?"8px":"12px",";transition:all 0.3s ease;&::after{content:'';position:absolute;right:-16px;top:50%;transform:translateY(-50%);height:24px;width:1px;background:linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.2), transparent);}"),vee=b("img",{target:"e1an02k623"})("width:",e=>e.isScrolled?"32px":"40px",";height:",e=>e.isScrolled?"32px":"40px",";object-fit:contain;filter:drop-shadow(0 4px 8px rgba(0,0,0,0.2)) brightness(0) invert(1);transition:all 0.3s ease;&:hover{transform:scale(1.05);filter:drop-shadow(0 6px 12px rgba(0,0,0,0.3)) brightness(0) invert(1);}"),xee=b("h1",{target:"e1an02k622"})("color:#fff;font-size:",e=>e.isScrolled?"18px":"22px",";font-weight:600;letter-spacing:0.5px;text-shadow:0 2px 4px rgba(0,0,0,0.2);transition:all 0.3s ease;margin:0;"),yee=b("div",{target:"e1an02k621"})("display:flex;gap:",e=>e.$isScrolled?"20px":"32px",";transition:all 0.3s ease;@media (max-width: 768px){display:none;}"),wy=b(bt,{shouldForwardProp:e=>!e.startsWith("$"),target:"e1an02k620"})("color:rgba(255, 255, 255, 0.8);text-decoration:none;font-size:",e=>e.$isScrolled?"13px":"14px",";font-weight:500;transition:all 0.3s ease;position:relative;white-space:nowrap;&::after{content:'';position:absolute;bottom:-4px;left:0;width:0;height:2px;background:linear-gradient(90deg, #7C3AED, #3B82F6);transition:width 0.3s ease;}&:hover{color:#fff;text-decoration:none;&::after{width:100%;}}"),bee=b(bt,{shouldForwardProp:e=>!e.startsWith("$"),target:"e1an02k619"})("position:relative;display:inline-block;background:linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%);color:#fff;font-weight:500;font-size:",e=>e.$isScrolled?"13px":"14px",";padding:",e=>e.$isScrolled?"6px 16px":"8px 20px",";border-radius:8px;text-decoration:none;border:none;box-shadow:0 4px 15px rgba(124, 58, 237, 0.2);white-space:nowrap;overflow:hidden;z-index:1;transition:color 0.3s,box-shadow 0.6s cubic-bezier(0.4,0,0.2,1),transform 0.6s cubic-bezier(0.4,0,0.2,1);@media (max-width: 768px){display:none;}&::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg, #3B82F6 0%, #7C3AED 100%);opacity:0;transition:opacity 0.6s cubic-bezier(0.4,0,0.2,1);z-index:-1;}&:hover{color:#fff;text-decoration:none;transform:translateY(-2px) scale(1.04);box-shadow:0 8px 24px rgba(59, 130, 246, 0.25);}&:hover::before{opacity:1;}"),wee=b("div",{target:"e1an02k618"})({name:"m3yq9q",styles:"width:100%;max-width:1200px;margin:0 auto;padding:0 20px"}),See=b("h2",{target:"e1an02k617"})({name:"9ugv0",styles:"text-align:center;font-size:32px;font-weight:700;margin-bottom:60px;color:#fff;position:relative;&::after{content:'';position:absolute;bottom:-15px;left:50%;transform:translateX(-50%);width:80px;height:3px;background:linear-gradient(90deg, #7C3AED, #3B82F6);border-radius:3px;}"}),Cee=b("p",{target:"e1an02k616"})({name:"tx4hgt",styles:"text-align:center;color:rgba(255,255,255,0.8);max-width:700px;margin:-30px auto 50px;font-size:16px;line-height:1.6"}),_ee=b("div",{target:"e1an02k615"})({name:"155jw8k",styles:"display:grid;grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));gap:30px;padding:30px 0;@media (max-width: 768px){grid-template-columns:1fr;padding:20px;}"}),kee={name:"sa3le6",styles:"@keyframes fadeInUp{from{opacity:0;transform:translateY(50px);}to{opacity:1;transform:translateY(0);}}@keyframes fadeInUpHighlighted{from{opacity:0;transform:translateY(50px) scale(1.05);}to{opacity:1;transform:translateY(-10px) scale(1.05);}}"},Sy=b("div",{target:"e1an02k614"})("background:rgba(255, 255, 255, 0.05);backdrop-filter:blur(10px);border-radius:20px;padding:40px 30px;display:flex;flex-direction:column;border:1px solid rgba(255, 255, 255, 0.1);transition:all 0.5s cubic-bezier(0.4,0,0.2,1);position:relative;overflow:hidden;box-shadow:0 10px 30px rgba(0, 0, 0, 0.1);opacity:0;animation:",e=>e.highlighted?"fadeInUpHighlighted":"fadeInUp"," 0.8s cubic-bezier(0.13, 0.67, 0.34, 0.94) forwards;animation-delay:",e=>e.delay||"0s",";",e=>e.highlighted&&`
    transform: scale(1.05) translateY(-10px);
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 20px 40px rgba(124, 58, 237, 0.15);
    z-index: 1;
  `," &:hover{transform:",e=>e.highlighted?"scale(1.05) translateY(-15px)":"translateY(-15px)",";box-shadow:0 25px 45px rgba(0, 0, 0, 0.25);}&::before{content:'';position:absolute;top:0;left:0;right:0;height:5px;background:",e=>e.color||"linear-gradient(90deg, #3B82F6, #7C3AED)",";}"),Cy=b("h3",{target:"e1an02k613"})({name:"anwr3w",styles:"font-size:24px;font-weight:700;margin-bottom:5px;color:#fff;text-align:center"}),_y=b("div",{target:"e1an02k612"})({name:"1cnszt7",styles:"font-size:48px;font-weight:800;color:#fff;margin:20px 0;text-align:center;display:flex;align-items:center;justify-content:center;span{font-size:16px;font-weight:500;margin-left:8px;}"}),ky=b("ul",{target:"e1an02k611"})({name:"ctmzd9",styles:"list-style:none;padding:0;margin:30px 0;flex-grow:1"}),Ln=b("li",{target:"e1an02k610"})({name:"pspuke",styles:"display:flex;align-items:flex-start;margin-bottom:15px;color:rgba(255, 255, 255, 0.9);font-size:15px;line-height:1.5;i{color:#7C3AED;margin-right:10px;font-size:18px;flex-shrink:0;}"}),Ey=b(bt,{target:"e1an02k69"})("display:block;background:",e=>e.isPrimary?"linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%)":"transparent",";color:#fff;text-align:center;padding:14px 0;border-radius:10px;font-weight:600;text-decoration:none;transition:all 0.3s;border:",e=>e.isPrimary?"none":"1px solid rgba(255,255,255,0.2)",";box-shadow:",e=>e.isPrimary?"0 8px 20px rgba(124, 58, 237, 0.2)":"none",";&:hover{transform:translateY(-2px);box-shadow:",e=>e.isPrimary?"0 12px 25px rgba(124, 58, 237, 0.3)":"0 8px 15px rgba(255,255,255,0.1)",";background:",e=>e.isPrimary?"linear-gradient(135deg, #6D28D9 0%, #2563EB 100%)":"rgba(255,255,255,0.1)",";text-decoration:none;color:#fff;}"),Eee=b("div",{target:"e1an02k68"})({name:"1nqyrbb",styles:"position:absolute;top:20px;right:-30px;background:linear-gradient(90deg, #7C3AED, #3B82F6);color:white;padding:5px 30px;font-size:12px;font-weight:600;transform:rotate(45deg);box-shadow:0 3px 10px rgba(0,0,0,0.1)"}),Tee=b("div",{target:"e1an02k67"})("position:fixed;left:0;top:0;width:12px;height:12px;border-radius:50%;background:#fff;box-shadow:0 2px 8px rgba(124,58,237,0.18);pointer-events:none;z-index:2000;transform:translate(-50%, -50%) scale(",e=>e.active?1.8:1,");opacity:",e=>e.active?.4:1,";transition:background 0.2s,transform 0.22s cubic-bezier(0.4,0,0.2,1),opacity 0.22s cubic-bezier(0.4,0,0.2,1);mix-blend-mode:difference;"),Iee=b("div",{target:"e1an02k66"})({name:"yr6cf9",styles:"position:fixed;left:0;top:0;width:48px;height:48px;border-radius:50%;background:rgba(124,58,237,0.13);box-shadow:0 4px 24px 0 rgba(59,130,246,0.10);pointer-events:none;z-index:1999;transform:translate(-50%, -50%);transition:background 0.3s"}),Aee=b("button",{target:"e1an02k65"})("display:none;flex-direction:column;justify-content:space-around;width:24px;height:24px;background:transparent;border:none;cursor:none;padding:0;z-index:1001;@media (max-width: 768px){display:flex;}span{width:24px;height:2px;background:#fff;border-radius:2px;transition:all 0.3s ease;transform-origin:center;&:nth-of-type(1){transform:",e=>e.$isOpen?"rotate(45deg) translate(6px, 6px)":"rotate(0)",";}&:nth-of-type(2){opacity:",e=>e.$isOpen?"0":"1",";transform:",e=>e.$isOpen?"translateX(20px)":"translateX(0)",";}&:nth-of-type(3){transform:",e=>e.$isOpen?"rotate(-45deg) translate(6px, -6px)":"rotate(0)",";}}"),Pee=b("div",{target:"e1an02k64"})("position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0, 0, 0, 0.5);backdrop-filter:blur(4px);z-index:999;opacity:",e=>e.$isOpen?"1":"0",";visibility:",e=>e.$isOpen?"visible":"hidden",";transition:all 0.3s ease;@media (min-width: 769px){display:none;}"),Dee=b("div",{target:"e1an02k63"})("position:fixed;top:0;right:0;width:280px;height:100vh;background:linear-gradient(180deg, rgba(17, 24, 39, 0.98) 0%, rgba(88, 28, 135, 0.95) 100%);backdrop-filter:blur(20px);border-left:1px solid rgba(255, 255, 255, 0.1);padding:80px 0 40px 0;z-index:1000;transform:",e=>e.$isOpen?"translateX(0)":"translateX(100%)",";transition:transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);@media (min-width: 769px){display:none;}"),Ree=b("div",{target:"e1an02k62"})({name:"7qtg2i",styles:"display:flex;flex-direction:column;gap:0;padding:20px 0"}),Ty=b(bt,{target:"e1an02k61"})({name:"tempze",styles:"color:rgba(255, 255, 255, 0.9);text-decoration:none;font-size:16px;font-weight:500;padding:16px 32px;transition:all 0.3s ease;position:relative;border-bottom:1px solid rgba(255, 255, 255, 0.1);&:hover{color:#fff;background:rgba(255, 255, 255, 0.1);transform:translateX(8px);text-decoration:none;}&::before{content:'';position:absolute;left:0;top:0;bottom:0;width:0;background:linear-gradient(90deg, #7C3AED, #3B82F6);transition:width 0.3s ease;}&:hover::before{width:4px;}"}),Nee=b(bt,{target:"e1an02k60"})({name:"1wgbshg",styles:"display:block;background:linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%);color:#fff;font-weight:600;font-size:16px;padding:12px 32px;margin:20px 32px;border-radius:12px;text-decoration:none;text-align:center;box-shadow:0 4px 15px rgba(124, 58, 237, 0.3);transition:all 0.3s ease;&:hover{color:#fff;text-decoration:none;transform:translateY(-2px);box-shadow:0 8px 25px rgba(124, 58, 237, 0.4);}"}),Mee=()=>{const{isDarkMode:e}=El(),[t,n]=D.useState(!1),[r,i]=D.useState(!1),[o,a]=D.useState({x:window.innerWidth/2,y:window.innerHeight/2}),[s,l]=D.useState({x:window.innerWidth/2,y:window.innerHeight/2}),[c,d]=D.useState(!1),p=D.useRef(s),f=Io();D.useEffect(()=>{window.scrollTo(0,0)},[f.pathname]),D.useEffect(()=>{const v=()=>{const w=window.scrollY;n(w>50)};return window.addEventListener("scroll",v),()=>window.removeEventListener("scroll",v)},[]),D.useEffect(()=>{const v=w=>{a({x:w.clientX,y:w.clientY})};return window.addEventListener("mousemove",v),()=>window.removeEventListener("mousemove",v)},[]),D.useEffect(()=>{let v;const w=()=>{p.current.x+=(o.x-p.current.x)*.13,p.current.y+=(o.y-p.current.y)*.13,l({x:p.current.x,y:p.current.y}),v=requestAnimationFrame(w)};return v=requestAnimationFrame(w),()=>cancelAnimationFrame(v)},[o]),D.useEffect(()=>{const v=w=>{let S=w.target,C=!1;for(;S&&S!==document.body;){if(S.tagName==="A"||S.tagName==="BUTTON"||S.tagName==="INPUT"&&["button","submit","checkbox","radio"].includes(S.type)||S.getAttribute("role")==="button"||S.classList.contains("cursor-interactive")){C=!0;break}S=S.parentElement}d(C)};return window.addEventListener("mousemove",v),()=>window.removeEventListener("mousemove",v)},[]);const h=()=>{i(!1)},g=()=>{h()},m=v=>{v.stopPropagation()};return y(Ne,{children:[u(ks,{styles:Ke(kee," html,body,*,*::before,*::after,*:hover,*:focus{cursor:none!important;}a,button,input,select,textarea,[role='button'],[tabindex]{cursor:none!important;}a:hover,button:hover,input:hover,select:hover,textarea:hover,[role='button']:hover,[tabindex]:hover{cursor:none!important;}a:focus,button:focus,input:focus,select:focus,textarea:focus,[role='button']:focus,[tabindex]:focus{cursor:none!important;}@media (max-width: 768px){body{overflow-x:hidden;}}","")}),u(Iee,{style:{left:s.x,top:s.y}}),u(Tee,{style:{left:o.x,top:o.y},active:c}),u(Pee,{$isOpen:r,onClick:g}),y(Dee,{$isOpen:r,onClick:m,children:[y(Ree,{children:[u(Ty,{to:"/",onClick:h,children:"首頁"}),u(Ty,{to:"/features",onClick:h,children:"功能特色"}),u(Ty,{to:"/about",onClick:h,children:"關於我們"})]}),u(Nee,{to:"/login",onClick:h,children:"立即開始"})]}),y(pee,{isScrolled:t,children:[y(hee,{isScrolled:t,children:[u(fee,{isScrolled:t,children:y(mee,{isScrolled:t,children:[u(vee,{src:Ds,alt:"Liquid LMS Logo",isScrolled:t}),u(xee,{isScrolled:t,children:"Liquid LMS"})]})}),y(gee,{isScrolled:t,children:[y(yee,{$isScrolled:t,children:[u(wy,{to:"/",$isScrolled:t,children:"首頁"}),u(wy,{to:"/features",$isScrolled:t,children:"功能特色"}),u(wy,{to:"/about",$isScrolled:t,children:"關於我們"})]}),u(bee,{to:"/login",$isScrolled:t,children:"立即開始"}),y(Aee,{$isOpen:r,onClick:()=>i(!r),children:[u("span",{}),u("span",{}),u("span",{})]})]})]}),y(wee,{children:[u(See,{children:"選擇最適合您的方案"}),u(Cee,{children:"我們提供多種靈活的訂閱選項，從基本年費到終身使用，滿足您不同的需求和預算"}),y(_ee,{children:[y(Sy,{color:"linear-gradient(90deg, #3B82F6, #60A5FA)",delay:"0.2s",children:[u(Cy,{children:"年費訂閱"}),y(_y,{children:["5,000",u("span",{style:{fontSize:"16px",verticalAlign:"bottom",marginLeft:"3px"},children:"USD"}),u("span",{children:"/年"})]}),y(ky,{children:[y(Ln,{children:[u("i",{className:"ri-check-line"}),u("div",{children:"無限課程內容"})]}),y(Ln,{children:[u("i",{className:"ri-check-line"}),u("div",{children:"最多支援 50 名使用者"})]}),y(Ln,{children:[u("i",{className:"ri-check-line"}),u("div",{children:"基本分析報表"})]}),y(Ln,{children:[u("i",{className:"ri-check-line"}),u("div",{children:"標準技術支援"})]}),y(Ln,{children:[u("i",{className:"ri-check-line"}),u("div",{children:"每年系統自動更新"})]})]}),u(Ey,{to:"/contact",isPrimary:!1,children:"聯絡我們"})]}),y(Sy,{highlighted:!0,color:"linear-gradient(90deg, #7C3AED, #8B5CF6)",delay:"0.4s",children:[u(Eee,{children:"熱門方案"}),u(Cy,{children:"尊榮年費訂閱"}),y(_y,{children:["7,000",u("span",{style:{fontSize:"16px",verticalAlign:"bottom",marginLeft:"3px"},children:"USD"}),u("span",{children:"/年"})]}),y(ky,{children:[y(Ln,{children:[u("i",{className:"ri-check-line"}),u("div",{children:"無限課程內容"})]}),y(Ln,{children:[u("i",{className:"ri-check-line"}),u("div",{children:"最多支援 150 名使用者"})]}),y(Ln,{children:[u("i",{className:"ri-check-line"}),u("div",{children:"進階分析報表與數據匯出"})]}),y(Ln,{children:[u("i",{className:"ri-check-line"}),u("div",{children:"優先技術支援"})]}),y(Ln,{children:[u("i",{className:"ri-check-line"}),u("div",{children:"API 集成功能"})]}),y(Ln,{children:[u("i",{className:"ri-check-line"}),u("div",{children:"品牌定制化"})]})]}),u(Ey,{to:"/contact",isPrimary:!0,children:"聯絡我們"})]}),y(Sy,{color:"linear-gradient(90deg, #EC4899, #F472B6)",delay:"0.6s",children:[u(Cy,{children:"終身版"}),y(_y,{children:["15,000",u("span",{style:{fontSize:"16px",verticalAlign:"bottom",marginLeft:"3px"},children:"USD"})]}),y(ky,{children:[y(Ln,{children:[u("i",{className:"ri-check-line"}),u("div",{children:"無限課程內容"})]}),y(Ln,{children:[u("i",{className:"ri-check-line"}),u("div",{children:"無限使用者數量"})]}),y(Ln,{children:[u("i",{className:"ri-check-line"}),u("div",{children:"所有高級分析和報表功能"})]}),y(Ln,{children:[u("i",{className:"ri-check-line"}),u("div",{children:"VIP 技術支援"})]}),y(Ln,{children:[u("i",{className:"ri-check-line"}),u("div",{children:"終身軟體使用權"})]}),y(Ln,{children:[u("i",{className:"ri-check-line"}),u("div",{children:"免費更新兩年"})]}),y(Ln,{children:[u("i",{className:"ri-check-line"}),u("div",{children:"企業級 API 與整合方案"})]})]}),u(Ey,{to:"/contact",isPrimary:!1,children:"聯絡我們"})]})]})]})]})]})},Oee=b("div",{target:"e3n63k16"})("min-height:100vh;background:linear-gradient(135deg, rgba(17, 24, 39, 0.97) 0%, rgba(88, 28, 135, 0.95) 100%),url('https://images.unsplash.com/photo-1557683316-973673baf926?q=80&w=2029&auto=format&fit=crop') center/cover;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;font-family:'Noto Sans TC',sans-serif;padding-top:",e=>e.$isScrolled?"80px":"120px",";transition:padding-top 0.3s ease;position:relative;padding-bottom:100px;&::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:radial-gradient(circle at 20% 20%, rgba(124, 58, 237, 0.15) 0%, transparent 50%),radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.15) 0%, transparent 50%);pointer-events:none;}"),$ee=b("header",{target:"e3n63k15"})("width:100%;background:rgba(17, 24, 39, 0.8);backdrop-filter:blur(12px);border-bottom:1px solid rgba(255, 255, 255, 0.1);padding:",e=>e.$isScrolled?"8px 0":"16px 0",";display:flex;flex-direction:row;align-items:center;justify-content:space-between;position:fixed;top:0;left:0;z-index:1000;transition:all 0.3s ease;white-space:nowrap;"),Lee=b("div",{target:"e3n63k14"})("display:flex;align-items:center;gap:",e=>e.$isScrolled?"8px":"16px",";padding-left:",e=>e.$isScrolled?"16px":"24px",";transition:all 0.3s ease;"),Fee=b("div",{target:"e3n63k13"})("display:flex;align-items:center;gap:",e=>e.$isScrolled?"16px":"24px",";padding-right:",e=>e.$isScrolled?"16px":"24px",";transition:all 0.3s ease;"),Bee=b("div",{target:"e3n63k12"})("position:relative;display:flex;align-items:center;gap:",e=>e.$isScrolled?"8px":"12px",";transition:all 0.3s ease;&::after{content:'';position:absolute;right:-16px;top:50%;transform:translateY(-50%);height:24px;width:1px;background:linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.2), transparent);}"),zee=b("img",{target:"e3n63k11"})("width:",e=>e.$isScrolled?"32px":"40px",";height:",e=>e.$isScrolled?"32px":"40px",";object-fit:contain;filter:drop-shadow(0 4px 8px rgba(0,0,0,0.2)) brightness(0) invert(1);transition:all 0.3s ease;&:hover{transform:scale(1.05);filter:drop-shadow(0 6px 12px rgba(0,0,0,0.3)) brightness(0) invert(1);}"),Vee=b("h1",{target:"e3n63k10"})("color:#fff;font-size:",e=>e.$isScrolled?"18px":"22px",";font-weight:600;letter-spacing:0.5px;text-shadow:0 2px 4px rgba(0,0,0,0.2);transition:all 0.3s ease;margin:0;"),jee=b("div",{target:"e3n63k9"})("display:flex;gap:",e=>e.$isScrolled?"20px":"32px",";transition:all 0.3s ease;"),Iy=b(bt,{target:"e3n63k8"})("color:rgba(255, 255, 255, 0.8);text-decoration:none;font-size:",e=>e.$isScrolled?"13px":"14px",";font-weight:500;transition:all 0.3s ease;position:relative;white-space:nowrap;&::after{content:'';position:absolute;bottom:-4px;left:0;width:0;height:2px;background:linear-gradient(90deg, #7C3AED, #3B82F6);transition:width 0.3s ease;}&:hover{color:#fff;text-decoration:none;&::after{width:100%;}}"),Uee=b(bt,{target:"e3n63k7"})("position:relative;display:inline-block;background:linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%);color:#fff;font-weight:500;font-size:",e=>e.$isScrolled?"13px":"14px",";padding:",e=>e.$isScrolled?"6px 16px":"8px 20px",";border-radius:8px;text-decoration:none;border:none;box-shadow:0 4px 15px rgba(124, 58, 237, 0.2);white-space:nowrap;overflow:hidden;z-index:1;transition:color 0.3s,box-shadow 0.6s cubic-bezier(0.4,0,0.2,1),transform 0.6s cubic-bezier(0.4,0,0.2,1);&::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg, #3B82F6 0%, #7C3AED 100%);opacity:0;transition:opacity 0.6s cubic-bezier(0.4,0,0.2,1);z-index:-1;}&:hover{color:#fff;text-decoration:none;transform:translateY(-2px) scale(1.04);box-shadow:0 8px 24px rgba(59, 130, 246, 0.25);}&:hover::before{opacity:1;}"),qee=b("div",{target:"e3n63k6"})({name:"1g19hqe",styles:"width:100%;max-width:800px;margin:0 auto;padding:0 20px;display:flex;flex-direction:column;align-items:center;justify-content:center;height:70vh"}),Wee=b("div",{target:"e3n63k5"})({name:"j2n1ok",styles:"background:rgba(255, 255, 255, 0.05);backdrop-filter:blur(10px);border-radius:20px;padding:40px;display:flex;flex-direction:column;align-items:center;text-align:center;border:1px solid rgba(255, 255, 255, 0.1);box-shadow:0 20px 40px rgba(0, 0, 0, 0.1);animation:fadeIn 0.8s ease-in-out forwards;@keyframes fadeIn{from{opacity:0;transform:translateY(30px);}to{opacity:1;transform:translateY(0);}}"}),Hee=b("h2",{target:"e3n63k4"})({name:"1g065mc",styles:"color:#fff;font-size:28px;font-weight:700;margin-bottom:20px;position:relative;&::after{content:'';position:absolute;bottom:-10px;left:50%;transform:translateX(-50%);width:60px;height:3px;background:linear-gradient(90deg, #7C3AED, #3B82F6);border-radius:3px;}"}),Gee=b("p",{target:"e3n63k3"})({name:"ow633g",styles:"color:rgba(255, 255, 255, 0.8);font-size:18px;line-height:1.7;margin-bottom:30px;max-width:500px"}),Yee=b(bt,{target:"e3n63k2"})({name:"cx9zeg",styles:"background:transparent;color:#fff;border:1px solid rgba(255, 255, 255, 0.2);border-radius:8px;padding:10px 20px;font-size:14px;font-weight:500;text-decoration:none;transition:all 0.3s;display:flex;align-items:center;gap:6px;&:hover{background:rgba(255, 255, 255, 0.1);transform:translateY(-2px);text-decoration:none;color:#fff;}i{font-size:16px;}"}),Kee=b("div",{target:"e3n63k1"})("position:fixed;left:0;top:0;width:12px;height:12px;border-radius:50%;background:#fff;box-shadow:0 2px 8px rgba(124,58,237,0.18);pointer-events:none;z-index:2000;transform:translate(-50%, -50%) scale(",e=>e.active?1.8:1,");opacity:",e=>e.active?.4:1,";transition:background 0.2s,transform 0.22s cubic-bezier(0.4,0,0.2,1),opacity 0.22s cubic-bezier(0.4,0,0.2,1);mix-blend-mode:difference;"),Xee=b("div",{target:"e3n63k0"})({name:"yr6cf9",styles:"position:fixed;left:0;top:0;width:48px;height:48px;border-radius:50%;background:rgba(124,58,237,0.13);box-shadow:0 4px 24px 0 rgba(59,130,246,0.10);pointer-events:none;z-index:1999;transform:translate(-50%, -50%);transition:background 0.3s"}),Qee={name:"1fvckv4",styles:"@keyframes fadeIn{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}"},Jee=()=>{const[e,t]=D.useState(!1),[n,r]=D.useState({x:window.innerWidth/2,y:window.innerHeight/2}),[i,o]=D.useState({x:window.innerWidth/2,y:window.innerHeight/2}),[a,s]=D.useState(!1),l=D.useRef(i),{theme:c}=El();return D.useEffect(()=>{const d=()=>{const p=window.scrollY;t(p>50)};return window.addEventListener("scroll",d),()=>window.removeEventListener("scroll",d)},[]),D.useEffect(()=>{const d=p=>{r({x:p.clientX,y:p.clientY})};return window.addEventListener("mousemove",d),()=>window.removeEventListener("mousemove",d)},[]),D.useEffect(()=>{let d;const p=()=>{l.current.x+=(n.x-l.current.x)*.13,l.current.y+=(n.y-l.current.y)*.13,o({x:l.current.x,y:l.current.y}),d=requestAnimationFrame(p)};return d=requestAnimationFrame(p),()=>cancelAnimationFrame(d)},[n]),D.useEffect(()=>{const d=p=>{let f=p.target,h=!1;for(;f&&f!==document.body;){if(f.tagName==="A"||f.tagName==="BUTTON"||f.tagName==="INPUT"&&["button","submit","checkbox","radio"].includes(f.type)||f.getAttribute("role")==="button"||f.classList.contains("cursor-interactive")){h=!0;break}f=f.parentElement}s(h)};return window.addEventListener("mousemove",d),()=>window.removeEventListener("mousemove",d)},[]),y(Ne,{children:[u(ks,{styles:Ke(Qee," html,body,*,*::before,*::after,*:hover,*:focus{cursor:none!important;}a,button,input,select,textarea,[role='button'],[tabindex]{cursor:none!important;}a:hover,button:hover,input:hover,select:hover,textarea:hover,[role='button']:hover,[tabindex]:hover{cursor:none!important;}a:focus,button:focus,input:focus,select:focus,textarea:focus,[role='button']:focus,[tabindex]:focus{cursor:none!important;}","")}),u(Xee,{style:{left:i.x,top:i.y}}),u(Kee,{style:{left:n.x,top:n.y},active:a}),y(Oee,{$isScrolled:e,children:[y($ee,{$isScrolled:e,children:[u(Lee,{$isScrolled:e,children:y(Bee,{$isScrolled:e,children:[u(bt,{to:"/",children:u(zee,{src:Ds,alt:"Liquid LMS Logo",$isScrolled:e})}),u(Vee,{$isScrolled:e,children:"Liquid LMS"})]})}),y(Fee,{$isScrolled:e,children:[y(jee,{$isScrolled:e,children:[u(Iy,{to:"/features",$isScrolled:e,children:"功能特色"}),u(Iy,{to:"/pricing",$isScrolled:e,children:"方案價格"}),u(Iy,{to:"/about",$isScrolled:e,children:"關於我們"})]}),u(Uee,{to:"/login",$isScrolled:e,children:"立即開始"})]})]}),u(qee,{children:y(Wee,{children:[u(Hee,{children:"合作洽談"}),y(Gee,{children:["目前我們暫時不開放新的合作申請。",u("br",{}),"請持續關注我們的更新，未來將會有更多合作機會。"]}),y(Yee,{to:"/pricing",children:[u("i",{className:"ri-arrow-left-line"})," 返回定價頁面"]})]})})]})]})},Zee=b("div",{target:"e123e61v32"})("min-height:100vh;background:linear-gradient(135deg, rgba(17, 24, 39, 0.97) 0%, rgba(88, 28, 135, 0.95) 100%),url('https://images.unsplash.com/photo-1557683316-973673baf926?q=80&w=2029&auto=format&fit=crop') center/cover;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;font-family:'Noto Sans TC',sans-serif;padding-top:",e=>e.isScrolled?"80px":"120px",";transition:padding-top 0.3s ease;position:relative;padding-bottom:100px;&::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:radial-gradient(circle at 20% 20%, rgba(124, 58, 237, 0.15) 0%, transparent 50%),radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.15) 0%, transparent 50%);pointer-events:none;}"),ete=b("header",{target:"e123e61v31"})("width:100%;background:rgba(17, 24, 39, 0.8);backdrop-filter:blur(12px);border-bottom:1px solid rgba(255, 255, 255, 0.1);padding:",e=>e.isScrolled?"8px 0":"16px 0",";display:flex;flex-direction:row;align-items:center;justify-content:space-between;position:fixed;top:0;left:0;z-index:1000;transition:all 0.3s ease;white-space:nowrap;"),tte=b("div",{target:"e123e61v30"})("display:flex;align-items:center;gap:",e=>e.isScrolled?"8px":"16px",";padding-left:",e=>e.isScrolled?"16px":"24px",";transition:all 0.3s ease;"),nte=b("div",{target:"e123e61v29"})("display:flex;align-items:center;gap:",e=>e.isScrolled?"16px":"24px",";padding-right:",e=>e.isScrolled?"16px":"24px",";transition:all 0.3s ease;"),rte=b("div",{target:"e123e61v28"})("position:relative;display:flex;align-items:center;gap:",e=>e.isScrolled?"8px":"12px",";transition:all 0.3s ease;&::after{content:'';position:absolute;right:-16px;top:50%;transform:translateY(-50%);height:24px;width:1px;background:linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.2), transparent);}"),ite=b("img",{target:"e123e61v27"})("width:",e=>e.isScrolled?"32px":"40px",";height:",e=>e.isScrolled?"32px":"40px",";object-fit:contain;filter:drop-shadow(0 4px 8px rgba(0,0,0,0.2)) brightness(0) invert(1);transition:all 0.3s ease;&:hover{transform:scale(1.05);filter:drop-shadow(0 6px 12px rgba(0,0,0,0.3)) brightness(0) invert(1);}"),ote=b("h1",{target:"e123e61v26"})("color:#fff;font-size:",e=>e.isScrolled?"18px":"22px",";font-weight:600;letter-spacing:0.5px;text-shadow:0 2px 4px rgba(0,0,0,0.2);transition:all 0.3s ease;margin:0;"),ate=b("div",{target:"e123e61v25"})("display:flex;gap:",e=>e.$isScrolled?"20px":"32px",";transition:all 0.3s ease;@media (max-width: 768px){display:none;}"),Ay=b(bt,{shouldForwardProp:e=>!e.startsWith("$"),target:"e123e61v24"})("color:rgba(255, 255, 255, 0.8);text-decoration:none;font-size:",e=>e.$isScrolled?"13px":"14px",";font-weight:500;transition:all 0.3s ease;position:relative;white-space:nowrap;&::after{content:'';position:absolute;bottom:-4px;left:0;width:0;height:2px;background:linear-gradient(90deg, #7C3AED, #3B82F6);transition:width 0.3s ease;}&:hover{color:#fff;text-decoration:none;&::after{width:100%;}}"),ste=b(bt,{shouldForwardProp:e=>!e.startsWith("$"),target:"e123e61v23"})("position:relative;display:inline-block;background:linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%);color:#fff;font-weight:500;font-size:",e=>e.$isScrolled?"13px":"14px",";padding:",e=>e.$isScrolled?"6px 16px":"8px 20px",";border-radius:8px;text-decoration:none;border:none;box-shadow:0 4px 15px rgba(124, 58, 237, 0.2);white-space:nowrap;overflow:hidden;z-index:1;transition:color 0.3s,box-shadow 0.6s cubic-bezier(0.4,0,0.2,1),transform 0.6s cubic-bezier(0.4,0,0.2,1);@media (max-width: 768px){display:none;}&::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg, #3B82F6 0%, #7C3AED 100%);opacity:0;transition:opacity 0.6s cubic-bezier(0.4,0,0.2,1);z-index:-1;}&:hover{color:#fff;text-decoration:none;transform:translateY(-2px) scale(1.04);box-shadow:0 8px 24px rgba(59, 130, 246, 0.25);}&:hover::before{opacity:1;}"),lte=b("div",{target:"e123e61v22"})({name:"11giruu",styles:"width:100%;max-width:1200px;margin:0 auto;padding:20px"}),cte=b("h2",{target:"e123e61v21"})({name:"1i4nhrl",styles:"text-align:center;font-size:32px;font-weight:700;margin-bottom:50px;color:#fff;position:relative;&::after{content:'';position:absolute;bottom:-15px;left:50%;transform:translateX(-50%);width:80px;height:3px;background:linear-gradient(90deg, #7C3AED, #3B82F6);border-radius:3px;}"}),ute=b("div",{target:"e123e61v20"})("position:fixed;left:0;top:0;width:12px;height:12px;border-radius:50%;background:#fff;box-shadow:0 2px 8px rgba(124,58,237,0.18);pointer-events:none;z-index:2000;transform:translate(-50%, -50%) scale(",e=>e.active?1.8:1,");opacity:",e=>e.active?.4:1,";transition:background 0.2s,transform 0.22s cubic-bezier(0.4,0,0.2,1),opacity 0.22s cubic-bezier(0.4,0,0.2,1);mix-blend-mode:difference;"),dte=b("div",{target:"e123e61v19"})({name:"yr6cf9",styles:"position:fixed;left:0;top:0;width:48px;height:48px;border-radius:50%;background:rgba(124,58,237,0.13);box-shadow:0 4px 24px 0 rgba(59,130,246,0.10);pointer-events:none;z-index:1999;transform:translate(-50%, -50%);transition:background 0.3s"}),pte={name:"1vcmeu8",styles:"@keyframes fadeInUp{from{opacity:0;transform:translateY(30px);}to{opacity:1;transform:translateY(0);}}"},Py=b("div",{target:"e123e61v18"})("background:rgba(255, 255, 255, 0.05);backdrop-filter:blur(10px);border-radius:20px;padding:40px;margin-bottom:40px;border:1px solid rgba(255, 255, 255, 0.1);box-shadow:0 10px 30px rgba(0, 0, 0, 0.1);animation:fadeInUp 0.8s ease-out forwards;animation-delay:",e=>e.delay||"0s",";opacity:0;@media (max-width: 768px){padding:30px 20px;}"),Dy=b("h3",{target:"e123e61v17"})({name:"bgf7ve",styles:"font-size:24px;font-weight:600;margin-bottom:20px;color:#fff;position:relative;padding-left:16px;&::before{content:'';position:absolute;left:0;top:50%;transform:translateY(-50%);width:4px;height:24px;background:linear-gradient(to bottom, #7C3AED, #3B82F6);border-radius:2px;}"}),ju=b("p",{target:"e123e61v16"})({name:"1ldx6u2",styles:"color:rgba(255, 255, 255, 0.8);font-size:16px;line-height:1.8;margin-bottom:20px"}),hte=b("div",{target:"e123e61v15"})({name:"1d0ik8b",styles:"display:flex;justify-content:center;margin-top:40px;@media (max-width: 768px){flex-direction:column;align-items:center;}"}),fte=b("div",{target:"e123e61v14"})({name:"1kyakqs",styles:"display:flex;flex-direction:column;align-items:center;text-align:center;width:220px"}),gte=b("div",{target:"e123e61v13"})({name:"1bj9jzh",styles:"width:120px;height:120px;border-radius:50%;background:linear-gradient(135deg, #7C3AED, #3B82F6);margin-bottom:15px;position:relative;overflow:hidden;box-shadow:0 10px 25px rgba(124, 58, 237, 0.2);display:flex;align-items:center;justify-content:center;i{font-size:50px;color:rgba(255, 255, 255, 0.9);}"}),mte=b("h4",{target:"e123e61v12"})({name:"1qx2ohs",styles:"font-size:18px;font-weight:600;margin-bottom:4px;color:#fff"}),vte=b("p",{target:"e123e61v11"})({name:"2hfyg8",styles:"font-size:14px;color:rgba(255, 255, 255, 0.7);margin-bottom:10px"}),xte=b("div",{target:"e123e61v10"})({name:"1jdvzan",styles:"display:grid;grid-template-columns:repeat(auto-fill, minmax(280px, 1fr));gap:30px;margin-top:30px;@media (max-width: 768px){grid-template-columns:1fr;}"}),yte=b("div",{target:"e123e61v9"})({name:"t9nf80",styles:"background:rgba(255, 255, 255, 0.03);border-radius:16px;padding:25px;text-align:center;border:1px solid rgba(255, 255, 255, 0.05);transition:all 0.3s;&:hover{transform:translateY(-5px);box-shadow:0 15px 30px rgba(0, 0, 0, 0.1);background:rgba(255, 255, 255, 0.07);}"}),bte=b("div",{target:"e123e61v8"})("width:60px;height:60px;background:linear-gradient(135deg, ",e=>e.gradient||"#7C3AED, #3B82F6",");border-radius:50%;margin:0 auto 20px;display:flex;align-items:center;justify-content:center;font-size:28px;color:#fff;box-shadow:0 10px 20px rgba(124, 58, 237, 0.2);"),wte=b("h4",{target:"e123e61v7"})({name:"13xet1f",styles:"font-size:20px;font-weight:600;margin-bottom:10px;color:#fff"}),Ste=b("p",{target:"e123e61v6"})({name:"1dsmwql",styles:"color:rgba(255, 255, 255, 0.7);font-size:14px;line-height:1.7"}),Cte=b("button",{target:"e123e61v5"})("display:none;flex-direction:column;justify-content:space-around;width:24px;height:24px;background:transparent;border:none;cursor:none;padding:0;z-index:1001;@media (max-width: 768px){display:flex;}span{width:24px;height:2px;background:#fff;border-radius:2px;transition:all 0.3s ease;transform-origin:center;&:nth-of-type(1){transform:",e=>e.$isOpen?"rotate(45deg) translate(6px, 6px)":"rotate(0)",";}&:nth-of-type(2){opacity:",e=>e.$isOpen?"0":"1",";transform:",e=>e.$isOpen?"translateX(20px)":"translateX(0)",";}&:nth-of-type(3){transform:",e=>e.$isOpen?"rotate(-45deg) translate(6px, -6px)":"rotate(0)",";}}"),_te=b("div",{target:"e123e61v4"})("position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0, 0, 0, 0.5);backdrop-filter:blur(4px);z-index:999;opacity:",e=>e.$isOpen?"1":"0",";visibility:",e=>e.$isOpen?"visible":"hidden",";transition:all 0.3s ease;@media (min-width: 769px){display:none;}"),kte=b("div",{target:"e123e61v3"})("position:fixed;top:0;right:0;width:280px;height:100vh;background:linear-gradient(180deg, rgba(17, 24, 39, 0.98) 0%, rgba(88, 28, 135, 0.95) 100%);backdrop-filter:blur(20px);border-left:1px solid rgba(255, 255, 255, 0.1);padding:80px 0 40px 0;z-index:1000;transform:",e=>e.$isOpen?"translateX(0)":"translateX(100%)",";transition:transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);@media (min-width: 769px){display:none;}"),Ete=b("div",{target:"e123e61v2"})({name:"7qtg2i",styles:"display:flex;flex-direction:column;gap:0;padding:20px 0"}),Ry=b(bt,{target:"e123e61v1"})({name:"tempze",styles:"color:rgba(255, 255, 255, 0.9);text-decoration:none;font-size:16px;font-weight:500;padding:16px 32px;transition:all 0.3s ease;position:relative;border-bottom:1px solid rgba(255, 255, 255, 0.1);&:hover{color:#fff;background:rgba(255, 255, 255, 0.1);transform:translateX(8px);text-decoration:none;}&::before{content:'';position:absolute;left:0;top:0;bottom:0;width:0;background:linear-gradient(90deg, #7C3AED, #3B82F6);transition:width 0.3s ease;}&:hover::before{width:4px;}"}),Tte=b(bt,{target:"e123e61v0"})({name:"1wgbshg",styles:"display:block;background:linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%);color:#fff;font-weight:600;font-size:16px;padding:12px 32px;margin:20px 32px;border-radius:12px;text-decoration:none;text-align:center;box-shadow:0 4px 15px rgba(124, 58, 237, 0.3);transition:all 0.3s ease;&:hover{color:#fff;text-decoration:none;transform:translateY(-2px);box-shadow:0 8px 25px rgba(124, 58, 237, 0.4);}"}),Ite=()=>{const{isDarkMode:e}=El(),[t,n]=D.useState(!1),[r,i]=D.useState(!1),[o,a]=D.useState({x:window.innerWidth/2,y:window.innerHeight/2}),[s,l]=D.useState({x:window.innerWidth/2,y:window.innerHeight/2}),[c,d]=D.useState(!1),p=D.useRef(s),f=Io();D.useEffect(()=>{window.scrollTo(0,0)},[f.pathname]),D.useEffect(()=>{const S=()=>{const C=window.scrollY;n(C>50)};return window.addEventListener("scroll",S),()=>window.removeEventListener("scroll",S)},[]),D.useEffect(()=>{const S=C=>{a({x:C.clientX,y:C.clientY})};return window.addEventListener("mousemove",S),()=>window.removeEventListener("mousemove",S)},[]),D.useEffect(()=>{let S;const C=()=>{p.current.x+=(o.x-p.current.x)*.13,p.current.y+=(o.y-p.current.y)*.13,l({x:p.current.x,y:p.current.y}),S=requestAnimationFrame(C)};return S=requestAnimationFrame(C),()=>cancelAnimationFrame(S)},[o]),D.useEffect(()=>{const S=C=>{let A=C.target,_=!1;for(;A&&A!==document.body;){if(A.tagName==="A"||A.tagName==="BUTTON"||A.tagName==="INPUT"&&["button","submit","checkbox","radio"].includes(A.type)||A.getAttribute("role")==="button"||A.classList.contains("cursor-interactive")){_=!0;break}A=A.parentElement}d(_)};return window.addEventListener("mousemove",S),()=>window.removeEventListener("mousemove",S)},[]);const h=[{name:"李承熹",title:"創辦人兼執行長",icon:"ri-user-line"}],g=[{title:"創新突破",icon:"ri-lightbulb-flash-line",description:"我們不斷尋求創新方式來解決問題，挑戰傳統思維，推動學習科技的進步。",gradient:"#7C3AED, #3B82F6"},{title:"用戶至上",icon:"ri-user-heart-line",description:"我們所有決策的核心都是以用戶為中心，致力於提供最佳的使用體驗和服務。",gradient:"#EC4899, #F472B6"},{title:"永續學習",icon:"ri-book-open-line",description:"我們相信終身學習的價值，不僅鼓勵用戶持續成長，我們自己也不斷學習進步。",gradient:"#10B981, #34D399"}],m=()=>{i(!1)},v=()=>{m()},w=S=>{S.stopPropagation()};return y(Ne,{children:[u(ks,{styles:Ke(pte," html,body,*,*::before,*::after,*:hover,*:focus{cursor:none!important;}a,button,input,select,textarea,[role='button'],[tabindex]{cursor:none!important;}a:hover,button:hover,input:hover,select:hover,textarea:hover,[role='button']:hover,[tabindex]:hover{cursor:none!important;}a:focus,button:focus,input:focus,select:focus,textarea:focus,[role='button']:focus,[tabindex]:focus{cursor:none!important;}@media (max-width: 768px){body{overflow-x:hidden;}}","")}),u(dte,{style:{left:s.x,top:s.y}}),u(ute,{style:{left:o.x,top:o.y},active:c}),u(_te,{$isOpen:r,onClick:v}),y(kte,{$isOpen:r,onClick:w,children:[y(Ete,{children:[u(Ry,{to:"/",onClick:m,children:"首頁"}),u(Ry,{to:"/features",onClick:m,children:"功能特色"}),u(Ry,{to:"/pricing",onClick:m,children:"方案價格"})]}),u(Tte,{to:"/login",onClick:m,children:"立即開始"})]}),y(Zee,{isScrolled:t,children:[y(ete,{isScrolled:t,children:[u(tte,{isScrolled:t,children:y(rte,{isScrolled:t,children:[u(ite,{src:Ds,alt:"Liquid LMS Logo",isScrolled:t}),u(ote,{isScrolled:t,children:"Liquid LMS"})]})}),y(nte,{isScrolled:t,children:[y(ate,{$isScrolled:t,children:[u(Ay,{to:"/",$isScrolled:t,children:"首頁"}),u(Ay,{to:"/features",$isScrolled:t,children:"功能特色"}),u(Ay,{to:"/pricing",$isScrolled:t,children:"方案價格"})]}),u(ste,{to:"/login",$isScrolled:t,children:"立即開始"}),y(Cte,{$isOpen:r,onClick:()=>i(!r),children:[u("span",{}),u("span",{}),u("span",{})]})]})]}),y(lte,{children:[u(cte,{children:"關於我們"}),y(Py,{delay:"0.1s",children:[u(Dy,{children:"公司簡介"}),u(ju,{children:"Liquid LMS 於2025年創立，是一家專注於企業培訓與學習管理系統(Learning Management System)的科技公司。 我們的使命是透過先進的科技和創新的學習方法，幫助企業提升員工能力，加速知識傳遞，為企業創造更高的價值。"}),u(ju,{children:"我們的團隊由來自教育科技、軟體開發和企業培訓領域的專家組成，憑藉深厚的行業知識和技術專長， 打造出一套靈活、直觀且功能強大的學習管理系統，協助企業實現數位化轉型和人才培育的目標。"})]}),y(Py,{delay:"0.3s",children:[u(Dy,{children:"使命願景"}),y(ju,{children:[u("strong",{children:"使命："}),"透過科技賦能企業培訓，讓學習變得更有效率、更有趣，並為每個人創造成長的機會。"]}),y(ju,{children:[u("strong",{children:"願景："}),"成為亞太地區最受信賴的企業學習管理解決方案提供商，引領企業學習的未來。"]}),u(xte,{children:g.map((S,C)=>y(yte,{children:[u(bte,{gradient:S.gradient,children:u("i",{className:S.icon})}),u(wte,{children:S.title}),u(Ste,{children:S.description})]},C))})]}),y(Py,{delay:"0.5s",children:[u(Dy,{children:"我們的團隊"}),u(ju,{children:"Liquid LMS 擁有一支充滿熱情和才華的團隊，致力於提供最佳的學習管理解決方案。 我們的團隊成員來自不同背景，帶來多元的視角和專業知識，共同為客戶創造價值。"}),u(hte,{children:h.map((S,C)=>y(fte,{children:[u(gte,{children:u("i",{className:S.icon})}),u(mte,{children:S.name}),u(vte,{children:S.title})]},C))})]})]})]})]})},Ate=b("div",{target:"e1oeosq236"})("min-height:100vh;background:linear-gradient(135deg, rgba(17, 24, 39, 0.97) 0%, rgba(88, 28, 135, 0.95) 100%),url('https://images.unsplash.com/photo-1557683316-973673baf926?q=80&w=2029&auto=format&fit=crop') center/cover;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;font-family:'Noto Sans TC',sans-serif;padding-top:",e=>e.isScrolled?"80px":"120px",";transition:padding-top 0.3s ease;position:relative;padding-bottom:100px;&::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:radial-gradient(circle at 20% 20%, rgba(124, 58, 237, 0.15) 0%, transparent 50%),radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.15) 0%, transparent 50%);pointer-events:none;}"),Pte=b("header",{target:"e1oeosq235"})("width:100%;background:rgba(17, 24, 39, 0.8);backdrop-filter:blur(12px);border-bottom:1px solid rgba(255, 255, 255, 0.1);padding:",e=>e.isScrolled?"8px 0":"16px 0",";display:flex;flex-direction:row;align-items:center;justify-content:space-between;position:fixed;top:0;left:0;z-index:1000;transition:all 0.3s ease;white-space:nowrap;"),Dte=b("div",{target:"e1oeosq234"})("display:flex;align-items:center;gap:",e=>e.isScrolled?"8px":"16px",";padding-left:",e=>e.isScrolled?"16px":"24px",";transition:all 0.3s ease;"),Rte=b("div",{target:"e1oeosq233"})("display:flex;align-items:center;gap:",e=>e.isScrolled?"16px":"24px",";padding-right:",e=>e.isScrolled?"16px":"24px",";transition:all 0.3s ease;"),Nte=b("div",{target:"e1oeosq232"})("position:relative;display:flex;align-items:center;gap:",e=>e.isScrolled?"8px":"12px",";transition:all 0.3s ease;&::after{content:'';position:absolute;right:-16px;top:50%;transform:translateY(-50%);height:24px;width:1px;background:linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.2), transparent);}"),Mte=b("img",{target:"e1oeosq231"})("width:",e=>e.isScrolled?"32px":"40px",";height:",e=>e.isScrolled?"32px":"40px",";object-fit:contain;filter:drop-shadow(0 4px 8px rgba(0,0,0,0.2)) brightness(0) invert(1);transition:all 0.3s ease;&:hover{transform:scale(1.05);filter:drop-shadow(0 6px 12px rgba(0,0,0,0.3)) brightness(0) invert(1);}"),Ote=b("h1",{target:"e1oeosq230"})("color:#fff;font-size:",e=>e.isScrolled?"18px":"22px",";font-weight:600;letter-spacing:0.5px;text-shadow:0 2px 4px rgba(0,0,0,0.2);transition:all 0.3s ease;margin:0;"),$te=b("div",{target:"e1oeosq229"})("display:flex;gap:",e=>e.$isScrolled?"20px":"32px",";transition:all 0.3s ease;@media (max-width: 768px){display:none;}"),Ny=b(bt,{shouldForwardProp:e=>!e.startsWith("$"),target:"e1oeosq228"})("color:rgba(255, 255, 255, 0.8);text-decoration:none;font-size:",e=>e.$isScrolled?"13px":"14px",";font-weight:500;transition:all 0.3s ease;position:relative;white-space:nowrap;&::after{content:'';position:absolute;bottom:-4px;left:0;width:0;height:2px;background:linear-gradient(90deg, #7C3AED, #3B82F6);transition:width 0.3s ease;}&:hover{color:#fff;text-decoration:none;&::after{width:100%;}}"),Lte=b(bt,{shouldForwardProp:e=>!e.startsWith("$"),target:"e1oeosq227"})("position:relative;display:inline-block;background:linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%);color:#fff;font-weight:500;font-size:",e=>e.$isScrolled?"13px":"14px",";padding:",e=>e.$isScrolled?"6px 16px":"8px 20px",";border-radius:8px;text-decoration:none;border:none;box-shadow:0 4px 15px rgba(124, 58, 237, 0.2);white-space:nowrap;overflow:hidden;z-index:1;transition:color 0.3s,box-shadow 0.6s cubic-bezier(0.4,0,0.2,1),transform 0.6s cubic-bezier(0.4,0,0.2,1);@media (max-width: 768px){display:none;}&::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg, #3B82F6 0%, #7C3AED 100%);opacity:0;transition:opacity 0.6s cubic-bezier(0.4,0,0.2,1);z-index:-1;}&:hover{color:#fff;text-decoration:none;transform:translateY(-2px) scale(1.04);box-shadow:0 8px 24px rgba(59, 130, 246, 0.25);}&:hover::before{opacity:1;}"),Fte=b("div",{target:"e1oeosq226"})({name:"11giruu",styles:"width:100%;max-width:1200px;margin:0 auto;padding:20px"}),Bte=b("h2",{target:"e1oeosq225"})({name:"1i4nhrl",styles:"text-align:center;font-size:32px;font-weight:700;margin-bottom:50px;color:#fff;position:relative;&::after{content:'';position:absolute;bottom:-15px;left:50%;transform:translateX(-50%);width:80px;height:3px;background:linear-gradient(90deg, #7C3AED, #3B82F6);border-radius:3px;}"}),zte=b("div",{target:"e1oeosq224"})("position:fixed;left:0;top:0;width:12px;height:12px;border-radius:50%;background:#fff;box-shadow:0 2px 8px rgba(124,58,237,0.18);pointer-events:none;z-index:2000;transform:translate(-50%, -50%) scale(",e=>e.active?1.8:1,");opacity:",e=>e.active?.4:1,";transition:background 0.2s,transform 0.22s cubic-bezier(0.4,0,0.2,1),opacity 0.22s cubic-bezier(0.4,0,0.2,1);mix-blend-mode:difference;"),Vte=b("div",{target:"e1oeosq223"})({name:"yr6cf9",styles:"position:fixed;left:0;top:0;width:48px;height:48px;border-radius:50%;background:rgba(124,58,237,0.13);box-shadow:0 4px 24px 0 rgba(59,130,246,0.10);pointer-events:none;z-index:1999;transform:translate(-50%, -50%);transition:background 0.3s"}),jte={name:"1vcmeu8",styles:"@keyframes fadeInUp{from{opacity:0;transform:translateY(30px);}to{opacity:1;transform:translateY(0);}}"},Ute=b("div",{target:"e1oeosq222"})({name:"13czi8z",styles:"display:grid;grid-template-columns:repeat(auto-fill, minmax(340px, 1fr));gap:30px;@media (max-width: 768px){grid-template-columns:1fr;}"}),qte=b("div",{target:"e1oeosq221"})("background:rgba(255, 255, 255, 0.05);backdrop-filter:blur(10px);border-radius:20px;padding:30px;border:1px solid rgba(255, 255, 255, 0.1);box-shadow:0 10px 30px rgba(0, 0, 0, 0.1);display:flex;flex-direction:column;transition:all 0.3s ease;animation:fadeInUp 0.8s ease-out forwards;animation-delay:",e=>e.delay||"0s",";opacity:0;&:hover{transform:translateY(-8px);box-shadow:0 15px 35px rgba(0, 0, 0, 0.15);border:1px solid rgba(255, 255, 255, 0.2);}"),Wte=b("div",{target:"e1oeosq220"})("width:70px;height:70px;border-radius:20px;background:linear-gradient(135deg, ",e=>e.gradient||"#7C3AED, #3B82F6",");display:flex;align-items:center;justify-content:center;margin-bottom:20px;font-size:30px;color:#fff;box-shadow:0 8px 20px rgba(124, 58, 237, 0.2);"),Hte=b("h3",{target:"e1oeosq219"})({name:"1nqwuga",styles:"font-size:22px;font-weight:600;margin-bottom:12px;color:#fff"}),Gte=b("p",{target:"e1oeosq218"})({name:"htv2uz",styles:"color:rgba(255, 255, 255, 0.8);font-size:15px;line-height:1.7;flex-grow:1"}),Yte=b("div",{target:"e1oeosq217"})({name:"ihijyi",styles:"margin-bottom:80px"}),Kte=b("p",{target:"e1oeosq216"})({name:"193y7ll",styles:"text-align:center;color:rgba(255, 255, 255, 0.8);font-size:16px;line-height:1.6;margin:-30px auto 50px;max-width:700px"}),Xte=b("div",{target:"e1oeosq215"})({name:"lbdde6",styles:"background:rgba(255, 255, 255, 0.07);backdrop-filter:blur(15px);border-radius:24px;padding:40px;border:1px solid rgba(255, 255, 255, 0.1);box-shadow:0 20px 40px rgba(0, 0, 0, 0.15);margin-bottom:60px;display:flex;flex-direction:column;animation:fadeInUp 0.6s ease-out forwards;@media (max-width: 900px){padding:30px;}"}),Qte=b("div",{target:"e1oeosq214"})({name:"dni18t",styles:"display:flex;justify-content:space-between;margin:30px 0;position:relative;&::before{content:'';position:absolute;top:40px;left:40px;right:40px;height:2px;background:linear-gradient(90deg, #7C3AED, #3B82F6);z-index:0;}@media (max-width: 768px){flex-direction:column;gap:50px;&::before{left:50%;top:0;bottom:0;width:2px;height:auto;transform:translateX(-50%);}}"}),Uu=b("div",{target:"e1oeosq213"})({name:"1w9cr65",styles:"display:flex;flex-direction:column;align-items:center;text-align:center;width:140px;position:relative;z-index:1;@media (max-width: 768px){width:100%;}"}),qu=b("div",{target:"e1oeosq212"})("width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg, ",e=>e.gradient||"#7C3AED, #3B82F6",");display:flex;align-items:center;justify-content:center;margin-bottom:15px;font-size:30px;color:#fff;box-shadow:0 10px 20px rgba(0, 0, 0, 0.2);position:relative;&::before{content:'",e=>e.number,"';position:absolute;top:-10px;right:-10px;width:26px;height:26px;border-radius:50%;background:#fff;color:#7C3AED;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:bold;box-shadow:0 4px 10px rgba(0, 0, 0, 0.15);}"),Wu=b("h4",{target:"e1oeosq211"})({name:"16449xr",styles:"font-size:16px;font-weight:600;color:#fff;margin-bottom:6px"}),Hu=b("p",{target:"e1oeosq210"})({name:"1wdjb8q",styles:"font-size:14px;color:rgba(255, 255, 255, 0.7);line-height:1.4"}),Jte=b("h3",{target:"e1oeosq29"})({name:"c8mk8s",styles:"font-size:28px;font-weight:700;margin-bottom:20px;color:#fff;&::after{content:'';display:block;width:60px;height:3px;margin-top:15px;background:linear-gradient(90deg, #7C3AED, #3B82F6);border-radius:3px;}"}),Zte=b("p",{target:"e1oeosq28"})({name:"1szxad4",styles:"color:rgba(255, 255, 255, 0.8);font-size:16px;line-height:1.8;margin-bottom:25px"}),ene=b("ul",{target:"e1oeosq27"})({name:"v5al3",styles:"list-style:none;padding:0;margin:0"}),Ff=b("li",{target:"e1oeosq26"})({name:"1sbc6r4",styles:"display:flex;align-items:center;margin-bottom:15px;color:rgba(255, 255, 255, 0.9);i{color:#7C3AED;margin-right:10px;font-size:20px;}"}),tne=b("button",{target:"e1oeosq25"})("display:none;flex-direction:column;justify-content:space-around;width:24px;height:24px;background:transparent;border:none;cursor:none;padding:0;z-index:1001;@media (max-width: 768px){display:flex;}span{width:24px;height:2px;background:#fff;border-radius:2px;transition:all 0.3s ease;transform-origin:center;&:nth-of-type(1){transform:",e=>e.$isOpen?"rotate(45deg) translate(6px, 6px)":"rotate(0)",";}&:nth-of-type(2){opacity:",e=>e.$isOpen?"0":"1",";transform:",e=>e.$isOpen?"translateX(20px)":"translateX(0)",";}&:nth-of-type(3){transform:",e=>e.$isOpen?"rotate(-45deg) translate(6px, -6px)":"rotate(0)",";}}"),nne=b("div",{target:"e1oeosq24"})("position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0, 0, 0, 0.5);backdrop-filter:blur(4px);z-index:999;opacity:",e=>e.$isOpen?"1":"0",";visibility:",e=>e.$isOpen?"visible":"hidden",";transition:all 0.3s ease;@media (min-width: 769px){display:none;}"),rne=b("div",{target:"e1oeosq23"})("position:fixed;top:0;right:0;width:280px;height:100vh;background:linear-gradient(180deg, rgba(17, 24, 39, 0.98) 0%, rgba(88, 28, 135, 0.95) 100%);backdrop-filter:blur(20px);border-left:1px solid rgba(255, 255, 255, 0.1);padding:80px 0 40px 0;z-index:1000;transform:",e=>e.$isOpen?"translateX(0)":"translateX(100%)",";transition:transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);@media (min-width: 769px){display:none;}"),ine=b("div",{target:"e1oeosq22"})({name:"7qtg2i",styles:"display:flex;flex-direction:column;gap:0;padding:20px 0"}),My=b(bt,{target:"e1oeosq21"})({name:"tempze",styles:"color:rgba(255, 255, 255, 0.9);text-decoration:none;font-size:16px;font-weight:500;padding:16px 32px;transition:all 0.3s ease;position:relative;border-bottom:1px solid rgba(255, 255, 255, 0.1);&:hover{color:#fff;background:rgba(255, 255, 255, 0.1);transform:translateX(8px);text-decoration:none;}&::before{content:'';position:absolute;left:0;top:0;bottom:0;width:0;background:linear-gradient(90deg, #7C3AED, #3B82F6);transition:width 0.3s ease;}&:hover::before{width:4px;}"}),one=b(bt,{target:"e1oeosq20"})({name:"1wgbshg",styles:"display:block;background:linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%);color:#fff;font-weight:600;font-size:16px;padding:12px 32px;margin:20px 32px;border-radius:12px;text-decoration:none;text-align:center;box-shadow:0 4px 15px rgba(124, 58, 237, 0.3);transition:all 0.3s ease;&:hover{color:#fff;text-decoration:none;transform:translateY(-2px);box-shadow:0 8px 25px rgba(124, 58, 237, 0.4);}"}),ane=()=>{const{isDarkMode:e}=El(),[t,n]=D.useState(!1),[r,i]=D.useState(!1),[o,a]=D.useState({x:window.innerWidth/2,y:window.innerHeight/2}),[s,l]=D.useState({x:window.innerWidth/2,y:window.innerHeight/2}),[c,d]=D.useState(!1),p=D.useRef(s),f=Io();D.useEffect(()=>{window.scrollTo(0,0)},[f.pathname]),D.useEffect(()=>{const w=()=>{const S=window.scrollY;n(S>50)};return window.addEventListener("scroll",w),()=>window.removeEventListener("scroll",w)},[]),D.useEffect(()=>{const w=S=>{a({x:S.clientX,y:S.clientY})};return window.addEventListener("mousemove",w),()=>window.removeEventListener("mousemove",w)},[]),D.useEffect(()=>{let w;const S=()=>{p.current.x+=(o.x-p.current.x)*.13,p.current.y+=(o.y-p.current.y)*.13,l({x:p.current.x,y:p.current.y}),w=requestAnimationFrame(S)};return w=requestAnimationFrame(S),()=>cancelAnimationFrame(w)},[o]),D.useEffect(()=>{const w=S=>{let C=S.target,A=!1;for(;C&&C!==document.body;){if(C.tagName==="A"||C.tagName==="BUTTON"||C.tagName==="INPUT"&&["button","submit","checkbox","radio"].includes(C.type)||C.getAttribute("role")==="button"||C.classList.contains("cursor-interactive")){A=!0;break}C=C.parentElement}d(A)};return window.addEventListener("mousemove",w),()=>window.removeEventListener("mousemove",w)},[]);const h=[{title:"互動式課程平台",description:"提供豐富的互動元素，包括影片、測驗、討論區等，提升學習參與度和效果。",icon:"ri-book-open-line",gradient:"#7C3AED, #3B82F6",delay:"0.1s"},{title:"自適應學習路徑",description:"根據每位學員的學習進度和表現，提供個人化的學習路徑建議，讓學習更有效率。",icon:"ri-route-line",gradient:"#EC4899, #F472B6",delay:"0.2s"},{title:"即時分析報表",description:"透過數據分析，深入了解學員表現和學習進度，幫助管理者做出更好的決策。",icon:"ri-line-chart-line",gradient:"#10B981, #34D399",delay:"0.3s"},{title:"多裝置同步",description:"無論是在電腦、平板還是手機上，都能獲得一致的學習體驗，學習進度自動同步。",icon:"ri-device-line",gradient:"#2563EB, #60A5FA",delay:"0.4s"},{title:"社群互動",description:"內建社群功能，讓學員可以相互交流、協作學習，建立學習社群。",icon:"ri-team-line",gradient:"#F59E0B, #FBBF24",delay:"0.5s"},{title:"全方位安全保障",description:"多層次的加密和安全措施，保護用戶數據和隱私，符合國際安全標準。",icon:"ri-shield-check-line",gradient:"#8B5CF6, #C4B5FD",delay:"0.6s"}],g=()=>{i(!1)},m=()=>{g()},v=w=>{w.stopPropagation()};return y(Ne,{children:[u(ks,{styles:Ke(jte," html,body,*,*::before,*::after,*:hover,*:focus{cursor:none!important;}a,button,input,select,textarea,[role='button'],[tabindex]{cursor:none!important;}a:hover,button:hover,input:hover,select:hover,textarea:hover,[role='button']:hover,[tabindex]:hover{cursor:none!important;}a:focus,button:focus,input:focus,select:focus,textarea:focus,[role='button']:focus,[tabindex]:focus{cursor:none!important;}@media (max-width: 768px){body{overflow-x:hidden;}}","")}),u(Vte,{style:{left:s.x,top:s.y}}),u(zte,{style:{left:o.x,top:o.y},active:c}),u(nne,{$isOpen:r,onClick:m}),y(rne,{$isOpen:r,onClick:v,children:[y(ine,{children:[u(My,{to:"/",onClick:g,children:"首頁"}),u(My,{to:"/pricing",onClick:g,children:"方案價格"}),u(My,{to:"/about",onClick:g,children:"關於我們"})]}),u(one,{to:"/login",onClick:g,children:"立即開始"})]}),y(Ate,{isScrolled:t,children:[y(Pte,{isScrolled:t,children:[u(Dte,{isScrolled:t,children:y(Nte,{isScrolled:t,children:[u(Mte,{src:Ds,alt:"Liquid LMS Logo",isScrolled:t}),u(Ote,{isScrolled:t,children:"Liquid LMS"})]})}),y(Rte,{isScrolled:t,children:[y($te,{$isScrolled:t,children:[u(Ny,{to:"/",$isScrolled:t,children:"首頁"}),u(Ny,{to:"/pricing",$isScrolled:t,children:"方案價格"}),u(Ny,{to:"/about",$isScrolled:t,children:"關於我們"})]}),u(Lte,{to:"/login",$isScrolled:t,children:"立即開始"}),y(tne,{$isOpen:r,onClick:()=>i(!r),children:[u("span",{}),u("span",{}),u("span",{})]})]})]}),y(Fte,{children:[u(Bte,{children:"功能特色"}),u(Kte,{children:"Liquid LMS 提供全方位的企業學習解決方案，從課程管理到數據分析，助您打造高效的學習環境"}),y(Yte,{children:[y(Xte,{children:[u(Jte,{children:"智能學習管理系統流程"}),u(Zte,{children:"我們的智能學習管理系統將學習過程數位化並優化，從內容建立到成果評估，提供完整的端對端解決方案。 以下是使用者在系統中的學習歷程："}),y(Qte,{children:[y(Uu,{children:[u(qu,{gradient:"#7C3AED, #8B5CF6",number:"1",children:u("i",{className:"ri-user-add-line"})}),u(Wu,{children:"註冊與分析"}),u(Hu,{children:"新用戶註冊並進行能力評估，系統分析學習需求"})]}),y(Uu,{children:[u(qu,{gradient:"#3B82F6, #60A5FA",number:"2",children:u("i",{className:"ri-git-branch-line"})}),u(Wu,{children:"個人化學習路徑"}),u(Hu,{children:"AI根據評估結果生成個人化學習計劃"})]}),y(Uu,{children:[u(qu,{gradient:"#EC4899, #F472B6",number:"3",children:u("i",{className:"ri-book-read-line"})}),u(Wu,{children:"學習進行"}),u(Hu,{children:"使用者進行課程學習，完成任務與測驗"})]}),y(Uu,{children:[u(qu,{gradient:"#10B981, #34D399",number:"4",children:u("i",{className:"ri-feedback-line"})}),u(Wu,{children:"評估與反饋"}),u(Hu,{children:"實時數據分析學習效果，提供反饋與建議"})]}),y(Uu,{children:[u(qu,{gradient:"#F59E0B, #FBBF24",number:"5",children:u("i",{className:"ri-medal-line"})}),u(Wu,{children:"認證與進階"}),u(Hu,{children:"完成課程獲得認證，推薦進階學習內容"})]})]}),y(ene,{children:[y(Ff,{children:[u("i",{className:"ri-check-line"}),u("span",{children:"AI 驅動的學習路徑推薦"})]}),y(Ff,{children:[u("i",{className:"ri-check-line"}),u("span",{children:"全方位學習進度追蹤"})]}),y(Ff,{children:[u("i",{className:"ri-check-line"}),u("span",{children:"自動化考核與認證"})]}),y(Ff,{children:[u("i",{className:"ri-check-line"}),u("span",{children:"深度數據分析與報表"})]})]})]}),u(Ute,{children:h.map((w,S)=>y(qte,{delay:w.delay,children:[u(Wte,{gradient:w.gradient,children:u("i",{className:w.icon})}),u(Hte,{children:w.title}),u(Gte,{children:w.description})]},S))})]})]})]})]})},sne={name:"1n5nsm0",styles:"@keyframes fadeIn{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}@keyframes cardHover{from{transform:translateY(0) scale(1);}to{transform:translateY(-8px) scale(1.02);}}"},lne=b("div",{target:"e4g4hzc22"})("min-height:100vh;background:linear-gradient(135deg, rgba(17, 24, 39, 0.97) 0%, rgba(88, 28, 135, 0.95) 100%),url('https://images.unsplash.com/photo-1557683316-973673baf926?q=80&w=2029&auto=format&fit=crop') center/cover;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;font-family:'Noto Sans TC',sans-serif;padding-top:",e=>e.$isScrolled?"80px":"120px",";transition:padding-top 0.3s ease;position:relative;padding-bottom:100px;&::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:radial-gradient(circle at 20% 20%, rgba(124, 58, 237, 0.15) 0%, transparent 50%),radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.15) 0%, transparent 50%);pointer-events:none;}"),cne=b("header",{target:"e4g4hzc21"})("width:100%;background:rgba(17, 24, 39, 0.8);backdrop-filter:blur(12px);border-bottom:1px solid rgba(255, 255, 255, 0.1);padding:",e=>e.$isScrolled?"8px 0":"16px 0",";display:flex;flex-direction:row;align-items:center;justify-content:space-between;position:fixed;top:0;left:0;z-index:1000;transition:all 0.3s ease;white-space:nowrap;"),une=b("div",{target:"e4g4hzc20"})("display:flex;align-items:center;gap:",e=>e.$isScrolled?"8px":"16px",";padding-left:",e=>e.$isScrolled?"16px":"24px",";transition:all 0.3s ease;"),dne=b("div",{target:"e4g4hzc19"})("display:flex;align-items:center;gap:",e=>e.$isScrolled?"16px":"24px",";padding-right:",e=>e.$isScrolled?"16px":"24px",";transition:all 0.3s ease;"),pne=b("div",{target:"e4g4hzc18"})("position:relative;display:flex;align-items:center;gap:",e=>e.$isScrolled?"8px":"12px",";transition:all 0.3s ease;&::after{content:'';position:absolute;right:-16px;top:50%;transform:translateY(-50%);height:24px;width:1px;background:linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.2), transparent);}"),hne=b("img",{target:"e4g4hzc17"})("width:",e=>e.$isScrolled?"32px":"40px",";height:",e=>e.$isScrolled?"32px":"40px",";object-fit:contain;filter:drop-shadow(0 4px 8px rgba(0,0,0,0.2)) brightness(0) invert(1);transition:all 0.3s ease;&:hover{transform:scale(1.05);filter:drop-shadow(0 6px 12px rgba(0,0,0,0.3)) brightness(0) invert(1);}"),fne=b("h1",{target:"e4g4hzc16"})("color:#fff;font-size:",e=>e.$isScrolled?"18px":"22px",";font-weight:600;letter-spacing:0.5px;text-shadow:0 2px 4px rgba(0,0,0,0.2);transition:all 0.3s ease;margin:0;"),gne=b("div",{target:"e4g4hzc15"})({name:"m3yq9q",styles:"width:100%;max-width:1200px;margin:0 auto;padding:0 20px"}),mne=b("h1",{target:"e4g4hzc14"})({name:"zzzkho",styles:"color:#fff;font-size:2.5rem;font-weight:700;text-align:center;margin-bottom:16px;text-shadow:0 4px 8px rgba(0,0,0,0.3);background:linear-gradient(135deg, #fff, #e2e8f0);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:fadeIn 0.8s ease"}),vne=b("p",{target:"e4g4hzc13"})({name:"koqnx0",styles:"color:rgba(255, 255, 255, 0.8);font-size:1.1rem;text-align:center;margin-bottom:40px;animation:fadeIn 0.8s ease 0.2s both"}),xne=b("div",{target:"e4g4hzc12"})({name:"12d4ou",styles:"background:rgba(255, 255, 255, 0.95);border-radius:16px;padding:24px;margin-bottom:40px;box-shadow:0 20px 40px rgba(0, 0, 0, 0.1);backdrop-filter:blur(20px);border:1px solid rgba(255, 255, 255, 0.2);animation:fadeIn 0.8s ease 0.4s both"}),yne=b("input",{target:"e4g4hzc11"})({name:"1wmg27b",styles:`width:100%;padding:12px 16px 12px 48px;border:2px solid #e5e7eb;border-radius:12px;font-size:1rem;transition:all 0.3s ease;background:#fff;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z'%3E%3C/path%3E%3C/svg%3E");background-repeat:no-repeat;background-position:16px center;background-size:20px;&:focus{outline:none;border-color:#7C3AED;box-shadow:0 0 0 3px rgba(124, 58, 237, 0.1);}&::placeholder{color:#9ca3af;}`}),bne=b("div",{target:"e4g4hzc10"})({name:"d3x7x2",styles:"display:grid;grid-template-columns:repeat(auto-fill, minmax(350px, 1fr));gap:24px;animation:fadeIn 0.8s ease 0.6s both;@media (max-width: 768px){grid-template-columns:1fr;gap:16px;}"}),wne=b(bt,{target:"e4g4hzc9"})({name:"26zhox",styles:"background:rgba(255, 255, 255, 0.95);border-radius:16px;padding:24px;text-decoration:none;color:inherit;box-shadow:0 8px 32px rgba(0, 0, 0, 0.1);backdrop-filter:blur(20px);border:1px solid rgba(255, 255, 255, 0.2);transition:all 0.4s cubic-bezier(0.4, 0, 0.2, 1);position:relative;overflow:hidden;&::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(135deg, #7C3AED, #3B82F6);transform:scaleX(0);transition:transform 0.4s ease;}&:hover{transform:translateY(-8px) scale(1.02);box-shadow:0 20px 60px rgba(0, 0, 0, 0.15);color:inherit;text-decoration:none;&::before{transform:scaleX(1);}}"}),Sne=b("h3",{target:"e4g4hzc8"})({name:"1myjc3u",styles:"color:#1a202c;font-size:1.25rem;font-weight:600;margin:0 0 12px 0;line-height:1.4"}),Cne=b("p",{target:"e4g4hzc7"})({name:"1ixkmrl",styles:"color:#4a5568;font-size:0.9rem;line-height:1.6;margin:0 0 16px 0;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden"}),_ne=b("div",{target:"e4g4hzc6"})({name:"lj97o",styles:"display:flex;flex-direction:column;gap:12px;color:#64748b;font-size:0.85rem;margin-top:auto"}),Oy=b("div",{target:"e4g4hzc5"})({name:"153q11y",styles:"display:flex;align-items:center;justify-content:space-between;gap:16px"}),Bf=b("div",{target:"e4g4hzc4"})({name:"n5d8kk",styles:"display:flex;align-items:center;gap:4px;i{color:#7C3AED;font-size:1rem;}"}),kne=b("span",{target:"e4g4hzc3"})({name:"1ot3vcj",styles:"background:linear-gradient(135deg, #7C3AED, #3B82F6);color:white;padding:4px 12px;border-radius:20px;font-size:0.75rem;font-weight:500;text-transform:uppercase;letter-spacing:0.5px"}),Ene=b("span",{target:"e4g4hzc2"})("padding:4px 8px;border-radius:8px;font-size:0.75rem;font-weight:500;background:",e=>{switch(e.difficulty){case"初級":return"#dcfce7";case"中級":return"#fef3c7";case"高級":return"#fee2e2";default:return"#f3f4f6"}},";color:",e=>{switch(e.difficulty){case"初級":return"#166534";case"中級":return"#92400e";case"高級":return"#991b1b";default:return"#374151"}},";"),Tne=b("div",{target:"e4g4hzc1"})({name:"a5f0qa",styles:"display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px;color:rgba(255, 255, 255, 0.8);animation:fadeIn 0.6s ease;i{font-size:3rem;margin-bottom:16px;animation:spin 1s linear infinite;color:#7C3AED;}p{font-size:1.1rem;}@keyframes spin{from{transform:rotate(0deg);}to{transform:rotate(360deg);}}"}),Ine=b("div",{target:"e4g4hzc0"})({name:"t2s3zc",styles:"text-align:center;color:rgba(255, 255, 255, 0.8);padding:60px 20px;animation:fadeIn 0.6s ease;i{font-size:4rem;color:#7C3AED;margin-bottom:24px;display:block;}h3{font-size:1.5rem;margin:0 0 12px 0;color:#fff;}p{font-size:1.1rem;margin:0 0 24px 0;opacity:0.8;}"}),Ane=()=>{const[e,t]=D.useState([]),[n,r]=D.useState([]),[i,o]=D.useState(!0),[a,s]=D.useState(""),[l,c]=D.useState(!1);return D.useEffect(()=>{const d=()=>{c(window.scrollY>50)};return window.addEventListener("scroll",d),()=>window.removeEventListener("scroll",d)},[]),D.useEffect(()=>{const d=tt(se(U,"courses"),Ot("createdAt","desc")),p=TM(d,f=>{const h=f.docs.map(g=>({id:g.id,...g.data()}));t(h),o(!1)},f=>{console.error("獲取課程列表失敗:",f),o(!1)});return()=>p()},[]),D.useEffect(()=>{if(!a.trim())r(e);else{const d=e.filter(p=>{var f,h,g;return((f=p.title)==null?void 0:f.toLowerCase().includes(a.toLowerCase()))||((h=p.description)==null?void 0:h.toLowerCase().includes(a.toLowerCase()))||((g=p.category)==null?void 0:g.toLowerCase().includes(a.toLowerCase()))});r(d)}},[e,a]),y(Ne,{children:[u(ks,{styles:Ke(sne," *{box-sizing:border-box;}body{margin:0;font-family:'Noto Sans TC',sans-serif;}","")}),y(lne,{$isScrolled:l,children:[y(cne,{$isScrolled:l,children:[u(une,{$isScrolled:l,children:y(pne,{$isScrolled:l,children:[u(bt,{to:"/",children:u(hne,{src:Ds,alt:"Liquid LMS Logo",$isScrolled:l})}),u(bt,{to:"/",style:{textDecoration:"none"},children:u(fne,{$isScrolled:l,children:"Liquid LMS"})})]})}),u(dne,{$isScrolled:l})]}),y(gne,{children:[u(mne,{children:"課程中心"}),u(vne,{children:"探索豐富的學習內容，提升您的專業技能"}),u(xne,{children:u(yne,{type:"text",placeholder:"搜尋課程標題、描述或分類...",value:a,onChange:d=>s(d.target.value)})}),i?y(Tne,{children:[u("i",{className:"ri-loader-4-line"}),u("p",{children:"正在載入課程列表..."})]}):n.length===0?y(Ine,{children:[u("i",{className:"ri-book-open-line"}),u("h3",{children:a?"找不到相關課程":"暫無課程"}),u("p",{children:a?"請嘗試不同的搜尋關鍵字":"目前還沒有課程，請建立您的第一個課程！"})]}):u(bne,{children:n.map(d=>y(wne,{to:`/course/${d.id}`,children:[u(Sne,{children:d.title}),u(Cne,{children:d.description||"暫無課程描述"}),y(_ne,{children:[y(Oy,{children:[u(kne,{children:d.category||"未分類"}),u(Ene,{difficulty:d.difficulty,children:d.difficulty||"未知"})]}),y(Oy,{children:[y(Bf,{children:[u("i",{className:"ri-user-line"}),u("span",{children:d.authorUid||"未知作者"})]}),y(Bf,{children:[u("i",{className:"ri-time-line"}),u("span",{children:d.estimatedTime||"未知"})]})]}),y(Oy,{children:[y(Bf,{children:[u("i",{className:"ri-eye-line"}),y("span",{children:[d.viewCount||0," 次觀看"]})]}),y(Bf,{children:[u("i",{className:"ri-file-list-line"}),y("span",{children:[d.totalChapters||0," 個章節"]})]})]})]})]},d.id))})]})]})]})},Pne=b("div",{target:"e2ul8b331"})({name:"19o2j5c",styles:"padding:20px 0 120px"}),Dne=b("div",{target:"e2ul8b330"})({name:"f0l27",styles:"max-width:1400px;margin:0 auto;padding:0 24px;@media (min-width: 1600px){max-width:1600px;}"}),Rne=b("div",{target:"e2ul8b329"})({name:"zfureg",styles:"display:flex;justify-content:flex-end;margin-bottom:20px"}),oI=b("button",{target:"e2ul8b328"})("display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%);color:white;border:none;border-radius:10px;padding:12px 20px;font-weight:600;font-size:15px;cursor:pointer;transition:all 0.3s ease;box-shadow:0 4px 12px rgba(124, 58, 237, 0.2);position:relative;overflow:hidden;i{margin-right:8px;font-size:18px;}&:hover{transform:translateY(-3px);box-shadow:0 6px 15px rgba(124, 58, 237, 0.3);}",e=>e.theme.darkTheme&&`
    &::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle at center, rgba(255, 255, 255, 0.2) 0%, transparent 60%);
      opacity: 0.5;
      pointer-events: none;
      z-index: 1;
      animation: shine 15s infinite linear;
      
      @keyframes shine {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }
    }
    
    &:hover {
      box-shadow: 0 6px 20px rgba(124, 58, 237, 0.5);
    }
    
    i {
      position: relative;
      z-index: 2;
    }
    
    span {
      position: relative;
      z-index: 2;
    }
  `,"@media (max-width: 768px){font-size:14px;padding:10px 16px;i{font-size:16px;}}"),Nne=b("div",{target:"e2ul8b327"})("margin-bottom:30px;position:relative;i{position:absolute;left:16px;top:50%;transform:translateY(-50%);color:",e=>e.theme.textSecondary,";font-size:18px;z-index:2;}"),Mne=b("input",{target:"e2ul8b326"})("width:100%;padding:14px 16px 14px 45px;border:1px solid ",e=>e.theme.gray,";border-radius:12px;background-color:",e=>e.theme.inputBg,";color:",e=>e.theme.text,";font-size:16px;transition:all 0.3s ease;box-shadow:0 4px 6px rgba(0, 0, 0, 0.05);&:focus{outline:none;border-color:",e=>e.theme.primary,";box-shadow:0 0 0 3px ",e=>e.theme.primary,"30;}",e=>e.theme.darkTheme&&`
    background: rgba(30, 30, 30, 0.6);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: #E0E0E0;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
    
    &:focus {
      border-color: #7C3AED;
      box-shadow: 0 0 0 2px rgba(124, 58, 237, 0.2), inset 0 2px 4px rgba(0, 0, 0, 0.2);
    }
  `,";"),One=b("div",{target:"e2ul8b325"})("display:flex;gap:12px;margin-bottom:40px;overflow-x:auto;padding-bottom:15px;scrollbar-width:thin;&::-webkit-scrollbar{height:4px;}&::-webkit-scrollbar-track{background:",e=>e.theme.bgLight,";border-radius:10px;}&::-webkit-scrollbar-thumb{background:",e=>e.theme.gray,";border-radius:10px;}"),$ne=b("button",{target:"e2ul8b324"})("padding:10px 20px;border:none;border-radius:30px;background-color:",e=>e.active?e.theme.primary:e.theme.cardBg,";color:",e=>e.active?"white":e.theme.text,";font-size:15px;font-weight:500;cursor:pointer;transition:all 0.3s ease;white-space:nowrap;box-shadow:0 4px 6px rgba(0, 0, 0, 0.05);position:relative;overflow:hidden;&:hover{background-color:",e=>e.active?e.theme.primary:e.theme.bgHover,";transform:translateY(-2px);}",e=>e.theme.darkTheme&&`
    background-color: ${e.active?"linear-gradient(135deg, #7C3AED, #3B82F6)":"rgba(40, 40, 40, 0.6)"};
    border: 1px solid ${e.active?"rgba(255, 255, 255, 0.1)":"rgba(255, 255, 255, 0.05)"};
    box-shadow: ${e.active?"0 4px 15px rgba(124, 58, 237, 0.3)":"0 2px 10px rgba(0, 0, 0, 0.2)"};
    backdrop-filter: blur(10px);
    
    &:hover {
      background-color: ${e.active?"linear-gradient(135deg, #8B5CF6, #60A5FA)":"rgba(60, 60, 60, 0.7)"};
      box-shadow: ${e.active?"0 6px 20px rgba(124, 58, 237, 0.4)":"0 4px 15px rgba(0, 0, 0, 0.3)"};
    }
    
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: radial-gradient(circle at 30% 30%, 
        ${e.active?"rgba(255, 255, 255, 0.2)":"rgba(255, 255, 255, 0.05)"} 0%, 
        transparent 70%);
      pointer-events: none;
      z-index: 1;
    }
  `,";"),Lne=b("div",{target:"e2ul8b323"})({name:"30tvht",styles:"margin-bottom:60px"}),Fne=b("h2",{target:"e2ul8b322"})("font-size:26px;font-weight:600;margin-bottom:30px;color:",e=>e.theme.text,";position:relative;padding-bottom:14px;display:flex;align-items:center;i{margin-right:12px;color:",e=>e.theme.primary,";font-size:26px;}&::after{content:'';position:absolute;bottom:0;left:0;width:80px;height:4px;background:linear-gradient(90deg, #7C3AED, #3B82F6);border-radius:4px;}",e=>e.theme.darkTheme&&`
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    
    i {
      text-shadow: 0 0 15px rgba(124, 58, 237, 0.6);
    }
    
    &::after {
      box-shadow: 0 0 10px rgba(124, 58, 237, 0.5);
    }
  `,";"),Bne=b("div",{target:"e2ul8b321"})({name:"1utn90o",styles:"display:flex;flex-direction:column;gap:25px"}),zne=b("div",{target:"e2ul8b320"})({name:"1lu3z1s",styles:"transition:all 0.3s ease"}),DS=b("div",{target:"e2ul8b319"})("background-color:",e=>e.theme.cardBg,";border-radius:15px;overflow:hidden;box-shadow:0 8px 20px ",e=>e.theme.shadowColor,";cursor:pointer;transition:all 0.3s ease;border:2px solid ",e=>e.isActive?e.theme.primary:"transparent",";position:relative;z-index:",e=>e.isActive?"2":"1",";display:flex;align-items:stretch;&:hover{transform:",e=>e.isActive?"translateY(-3px)":"translateY(-5px)",";box-shadow:0 12px 30px ",e=>e.theme.shadowColor,";}",e=>e.theme.darkTheme&&`
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(124, 58, 237, 0.08));
    backdrop-filter: blur(20px);
    border: 2px solid ${e.isActive?"rgba(124, 58, 237, 0.6)":"rgba(255, 255, 255, 0.08)"};
    box-shadow: 
      0 8px 30px rgba(0, 0, 0, 0.4),
      inset 0 0 1px 1px rgba(255, 255, 255, 0.05);
      
    &:hover {
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.5);
    }
    
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 20%, rgba(124, 58, 237, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.15) 0%, transparent 50%);
      border-radius: 13px;
      pointer-events: none;
      z-index: 1;
    }
  `,";"),Vne=b("div",{target:"e2ul8b318"})("width:70px;min-width:70px;background:",e=>e.theme.bgLight,";position:relative;display:flex;align-items:center;justify-content:center;overflow:hidden;@media (min-width: 768px){width:90px;min-width:90px;}@media (max-width: 576px){width:55px;min-width:55px;height:100%;}&::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-image:url(",e=>e.image||"",");background-size:cover;background-position:center;opacity:0.1;mix-blend-mode:overlay;}"),jne=b("div",{target:"e2ul8b317"})("width:46px;height:46px;border-radius:50%;background:linear-gradient(135deg, ",e=>e.gradient||"#7C3AED, #3B82F6",");display:flex;align-items:center;justify-content:center;font-size:22px;color:#fff;box-shadow:0 4px 12px rgba(0, 0, 0, 0.08);z-index:1;transition:all 0.3s ease;@media (min-width: 768px){width:52px;height:52px;font-size:24px;}@media (max-width: 576px){width:40px;height:40px;font-size:18px;}",DS,":hover &{transform:scale(1.1);}"),Une=b("div",{target:"e2ul8b316"})({name:"1i9d8a8",styles:"padding:16px 20px;flex-grow:1;display:flex;flex-direction:column;justify-content:center;@media (min-width: 768px){padding:20px 25px;}@media (max-width: 576px){padding:12px 15px;}"}),qne=b("h3",{target:"e2ul8b315"})("font-size:16px;font-weight:600;margin-bottom:6px;color:",e=>e.theme.text,";transition:color 0.3s ease;@media (min-width: 768px){font-size:18px;margin-bottom:8px;}@media (max-width: 576px){font-size:15px;margin-bottom:4px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;}",DS,":hover &{color:",e=>e.theme.primary,";}"),Wne=b("p",{target:"e2ul8b314"})("color:",e=>e.theme.textSecondary,";font-size:14px;line-height:1.5;margin-bottom:10px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;@media (min-width: 768px){font-size:14px;margin-bottom:15px;}@media (max-width: 576px){font-size:13px;-webkit-line-clamp:1;margin-bottom:8px;}"),Hne=b("div",{target:"e2ul8b313"})("margin-top:auto;display:flex;align-items:center;gap:15px;color:",e=>e.theme.textSecondary,";font-size:12px;@media (min-width: 768px){font-size:13px;gap:15px;}@media (max-width: 576px){font-size:11px;gap:10px;}span{display:flex;align-items:center;i{margin-right:6px;font-size:14px;color:",e=>e.theme.primary,";@media (min-width: 768px){font-size:16px;}@media (max-width: 576px){font-size:13px;margin-right:4px;}}}"),Gne=b("div",{target:"e2ul8b312"})("display:flex;align-items:center;justify-content:center;padding:0 15px;border-left:1px solid ",e=>e.theme.gray,"10;@media (min-width: 768px){padding:0 20px;}@media (max-width: 576px){padding:0 10px;min-height:100%;}"),Yne=b("div",{target:"e2ul8b311"})("width:32px;height:32px;border-radius:50%;background:",e=>e.isActive?e.theme.primary:e.theme.bgLight,";display:flex;align-items:center;justify-content:center;transition:all 0.3s ease;color:",e=>e.isActive?"white":e.theme.textSecondary,";@media (min-width: 768px){width:36px;height:36px;}@media (max-width: 576px){width:28px;height:28px;}i{font-size:18px;transition:transform 0.3s ease;transform:",e=>e.isActive?"rotate(180deg)":"rotate(0deg)",";@media (min-width: 768px){font-size:20px;}@media (max-width: 576px){font-size:16px;}}&:hover{background:",e=>(e.isActive,e.theme.primary),"30;color:",e=>e.isActive?"white":e.theme.primary,";}"),Kne=b("span",{target:"e2ul8b310"})({name:"1m9j61d",styles:"position:absolute;top:8px;right:8px;background:linear-gradient(90deg, #10B981, #34D399);color:white;padding:3px 8px;font-size:11px;font-weight:600;border-radius:20px;box-shadow:0 3px 10px rgba(16, 185, 129, 0.2);z-index:2;display:flex;align-items:center;@media (min-width: 768px){top:12px;right:12px;padding:4px 10px;font-size:12px;}@media (max-width: 576px){top:5px;right:5px;padding:2px 6px;font-size:10px;}i{margin-right:3px;font-size:11px;@media (min-width: 768px){margin-right:4px;font-size:12px;}@media (max-width: 576px){margin-right:2px;font-size:10px;}}"}),Xne=b("div",{target:"e2ul8b39"})("background-color:",e=>e.theme.cardBg,";border-radius:0 0 15px 15px;padding:0;overflow:hidden;box-shadow:0 15px 35px ",e=>e.theme.shadowColor,";margin-top:-10px;position:relative;z-index:1;max-height:",e=>e.isActive?"500px":"0",";opacity:",e=>e.isActive?"1":"0",";transition:all 0.5s cubic-bezier(0.4, 0, 0.2, 1);border:2px solid ",e=>e.theme.primary,";border-top:none;transform:",e=>e.isActive?"translateY(0)":"translateY(-20px)",";pointer-events:",e=>e.isActive?"auto":"none",";"),Qne=b("div",{target:"e2ul8b38"})({name:"k0y9hs",styles:"padding:15px;@media (min-width: 768px){padding:20px;}"}),Jne=b("h3",{target:"e2ul8b37"})("font-size:16px;font-weight:600;margin-bottom:12px;color:",e=>e.theme.text,";position:relative;padding-bottom:8px;border-bottom:1px dashed ",e=>e.theme.gray,";@media (min-width: 768px){font-size:18px;margin-bottom:15px;padding-bottom:10px;}"),Zne=b("ul",{target:"e2ul8b36"})({name:"t9v15w",styles:"list-style:none;padding:0;margin:0;display:grid;grid-template-columns:repeat(1, 1fr);gap:8px;@media (min-width: 768px){grid-template-columns:repeat(2, 1fr);gap:10px;}"}),ere=b("li",{target:"e2ul8b35"})("color:",e=>e.theme.text,";padding:12px 15px;border-radius:12px;display:flex;flex-direction:column;font-size:14px;background-color:",e=>e.completed?"rgba(16, 185, 129, 0.1)":e.theme.bgLight,";border:2px solid ",e=>e.completed?"#10B981":"transparent",";transition:all 0.3s ease;box-shadow:0 2px 5px rgba(0, 0, 0, 0.05);&:hover{background-color:",e=>e.completed?"rgba(16, 185, 129, 0.15)":e.theme.bgHover,";transform:translateY(-3px) scale(1.02);box-shadow:0 8px 15px rgba(0, 0, 0, 0.1);}.subsection-header{display:flex;align-items:center;cursor:pointer;flex:1;}.subsection-icon{color:",e=>e.completed?"#10B981":e.theme.textSecondary,";margin-right:12px;font-size:20px;background:",e=>e.completed?"rgba(16, 185, 129, 0.2)":e.theme.primary,"15;padding:8px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all 0.3s ease;min-width:36px;min-height:36px;}&:hover .subsection-icon{background:",e=>e.completed?"rgba(16, 185, 129, 0.3)":e.theme.primary,"30;transform:",e=>e.completed?"scale(1.1)":"rotate(10deg)",";}.subsection-title{flex:1;font-weight:",e=>e.completed?"600":"500",";color:",e=>e.completed?"#10B981":"inherit",";}"),tre=b("span",{target:"e2ul8b34"})({name:"csx4uy",styles:"background:linear-gradient(135deg, #4CAF50 0%, #45a049 100%);color:white;padding:4px 8px;border-radius:12px;font-size:12px;font-weight:600;display:flex;align-items:center;gap:4px;i{font-size:14px;}"}),nre=b("div",{target:"e2ul8b33"})({name:"zpviua",styles:"width:100%;height:6px;background:#f0f0f0;border-radius:3px;overflow:hidden;margin-top:8px"}),rre=b("div",{target:"e2ul8b32"})("height:100%;background:linear-gradient(90deg, #4CAF50 0%, #45a049 100%);width:",e=>e.progress,"%;transition:width 0.3s ease;"),ire=b("div",{target:"e2ul8b31"})({name:"11g35op",styles:"display:flex;gap:12px;margin-top:8px;flex-wrap:wrap"}),aI=b("div",{target:"e2ul8b30"})({name:"195cpa7",styles:"display:flex;align-items:center;gap:4px;font-size:12px;color:#666;i{font-size:14px;color:#7C3AED;}"}),ore=["全部課程","飲料製作","店面管理","顧客服務","衛生安全","行銷技巧"],are=()=>{const[e,t]=D.useState("全部課程"),[n,r]=D.useState(""),[i,o]=D.useState(null),[a,s]=D.useState([]),[l,c]=D.useState(!0),[d,p]=D.useState(null),[f,h]=D.useState({}),[g,m]=D.useState({}),v=qt(),{currentUser:w}=gi(),{userRole:S}=Bi();D.useEffect(()=>{window.scrollTo(0,0)},[]);const C=async()=>{if(w!=null&&w.uid)try{const T=await Vd(w.uid);h(T);const P={};Object.entries(T.courseProgress||{}).forEach(([O,R])=>{Object.entries(R).forEach(([N,L])=>{Object.entries(L).forEach(([B,V])=>{if(V.completed){const j=`${O}_${parseInt(N)+1}_${parseInt(B)+1}`;P[j]=!0}})})}),m(P)}catch(T){console.error("載入用戶進度失敗:",T)}};D.useEffect(()=>{(async()=>{try{c(!0),p(null),console.log("🚀 開始獲取課程資料..."),console.log("📚 從 course_summaries 集合獲取課程概覽和小節資訊...");const P=await be(tt(se(U,"course_summaries"),Ot("numeric_id","asc")));if(console.log(`📊 course_summaries 集合查詢結果: ${P.size} 筆記錄`),P.empty){console.log("⚠️ course_summaries 集合為空，嘗試從 courses 集合獲取...");const O=await be(tt(se(U,"courses"),Ot("id","asc")));if(console.log(`📊 courses 集合查詢結果: ${O.size} 筆記錄`),O.empty)console.log("⚠️ 兩個集合都為空"),p("找不到任何課程資料");else{const R=O.docs.map(N=>{const L=N.data();console.log(`處理課程: ${L.title||"未命名"} (ID: ${N.id})`);const B=[{id:`${N.id}_1_1`,title:"課程內容",chapterIndex:0,sectionIndex:0,icon:"ri-file-list-line"}];return{id:N.id,...L,subsections:B,title:L.title||"未命名課程",description:L.description||"課程描述",duration:L.duration||"2-3 小時",category:L.category||"飲料製作",viewCount:L.viewCount||0,numeric_id:L.numeric_id||parseInt(L.id)||0}});s(R),console.log(`✅ 從 courses 集合獲取 ${R.length} 個課程`)}}else{console.log("✅ 找到課程概覽資料，開始處理...");const O=P.docs.map(R=>{const N=R.data();console.log(`處理課程: ${N.title||"未命名"} (ID: ${R.id})`),console.log("課程資料結構:",N);let L=[];return N.chapters&&Array.isArray(N.chapters)?(console.log(`  → 找到 chapters 陣列，包含 ${N.chapters.length} 章`),L=N.chapters.flatMap((B,V)=>B.subsections&&Array.isArray(B.subsections)?(console.log(`    → 第 ${V+1} 章包含 ${B.subsections.length} 個小節`),B.subsections.map((j,z)=>({id:j.id||`${R.id}_${V+1}_${z+1}`,title:j.title||`第 ${z+1} 節`,chapterIndex:V,sectionIndex:z,icon:j.icon||"ri-file-list-line",order:j.order||z+1}))):(console.log(`    → 第 ${V+1} 章沒有小節，創建預設小節`),[{id:`${R.id}_${V+1}_1`,title:B.title||`第 ${V+1} 章`,chapterIndex:V,sectionIndex:0,icon:B.icon||"ri-file-list-line"}]))):N.subsections&&Array.isArray(N.subsections)?(console.log(`  → 找到 subsections 陣列，包含 ${N.subsections.length} 個小節`),L=N.subsections.map((B,V)=>({id:B.id||`${R.id}_1_${V+1}`,title:B.title||`第 ${V+1} 節`,chapterIndex:0,sectionIndex:V,icon:B.icon||"ri-file-list-line"}))):(console.log("  → 沒有找到小節資料，創建預設小節"),L=[{id:`${R.id}_1_1`,title:"課程內容",chapterIndex:0,sectionIndex:0,icon:"ri-file-list-line"}]),console.log(`  → 最終生成 ${L.length} 個小節`),{id:R.id,...N,subsections:L,title:N.title||"未命名課程",description:N.description||"課程描述",duration:N.duration||"2-3 小時",category:N.category||"飲料製作",viewCount:N.viewCount||0,numeric_id:N.numeric_id||parseInt(N.id)||0}});s(O),console.log(`✅ 從 course_summaries 集合成功獲取 ${O.length} 個課程`),console.log("課程資料樣本:",O[0])}if(w!=null&&w.uid){console.log("👤 用戶已登入，獲取學習進度...");try{const O=await be(tt(se(U,"users"),tn("uid","==",w.uid)));if(O.empty)console.log("⚠️ 找不到用戶資料");else{const R=O.docs[0].data();m(R.completedSubsections||{}),console.log("✅ 成功獲取用戶學習進度")}}catch(O){console.warn("⚠️ 無法獲取用戶數據:",O)}}console.log("🎉 課程資料獲取完成！"),c(!1)}catch(P){console.error("❌ 獲取課程時發生錯誤:",P),console.error("錯誤詳細資訊:",{message:P.message,code:P.code,stack:P.stack}),p(`獲取課程時發生錯誤：${P.message||"未知錯誤"}`),c(!1)}})()},[w]),D.useEffect(()=>{if(w!=null&&w.uid){C();const T=setInterval(()=>{C()},5e3);return()=>clearInterval(T)}},[w]);const _=a.filter(T=>{const P=e==="全部課程"||T.category===e,O=T.title.toLowerCase().includes(n.toLowerCase())||T.description.toLowerCase().includes(n.toLowerCase());return P&&O}).map(T=>{let P=[];Array.isArray(T.subsections)?P=T.subsections:Array.isArray(T.chapters)?P=T.chapters.flatMap((L,B)=>Array.isArray(L.subsections)?L.subsections.map((V,j)=>({...V,id:V.id||`${T.id}_${B+1}_${j+1}`,chapterIndex:B,sectionIndex:j,title:V.title||`第 ${j+1} 節`})):[{id:`${T.id}_${B+1}_1`,title:L.title||`第 ${B+1} 章`,chapterIndex:B,sectionIndex:0,icon:L.icon||"ri-file-list-line"}]):P=[{id:`${T.id}_1_1`,title:"課程內容",chapterIndex:0,sectionIndex:0,icon:"ri-file-list-line"}],P=P.map(L=>({title:"課程內容",icon:"ri-file-list-line",chapterIndex:0,sectionIndex:0,...L,id:L.id||`${T.id}_${(L.chapterIndex||0)+1}_${(L.sectionIndex||0)+1}`}));const O=P.filter(L=>g[L.id]||!1).length,R=P.length,N=R>0?Math.round(O/R*100):0;return{...T,subsections:P,totalSections:R,progress:N,completedCount:O,icon:T.icon||Dp(T.category,T.title,T.numeric_id),gradient:T.gradient||Rp(T.category,T.title,T.numeric_id),duration:T.duration||"2-3 小時",description:T.description||"專業技能學習"}}),I=T=>{o(i===T?null:T)},E=async(T,P)=>{try{const O=Ie(U,"courses",T);await fn(O,{viewCount:Ym(1)});try{const R=Ie(U,"course_summaries",T);await fn(R,{viewCount:Ym(1)})}catch{console.log("course_summaries 集合中沒有對應的課程，跳過更新")}s(R=>R.map(N=>N.id===T?{...N,viewCount:(N.viewCount||0)+1}:N))}catch(O){console.error("更新觀看次數失敗:",O)}typeof P=="object"&&P.chapterIndex!==void 0&&P.sectionIndex!==void 0?v(`/section/${T}/${P.chapterIndex}/${P.sectionIndex}`):v(`/course/${T}`)};return y(Ne,{children:[u(Bt,{title:"線上課程",tagline:"探索完整學習路徑"}),u(Pne,{children:y(Dne,{children:[y(Nne,{children:[u("i",{className:"ri-search-line"}),u(Mne,{type:"text",placeholder:"搜尋課程、章節或關鍵字...",value:n,onChange:T=>r(T.target.value)})]}),S==="enterprise"&&y(Rne,{children:[y(oI,{onClick:()=>{v("/course-creator")},children:[u("i",{className:"ri-add-circle-line"}),"新增/管理課程"]}),y(oI,{onClick:()=>v("/exam-management"),style:{marginLeft:"10px"},children:[u("i",{className:"ri-file-text-line"}),"管理小考題目"]})]}),u(One,{children:ore.map(T=>u($ne,{active:T===e,onClick:()=>t(T),children:T},T))}),y(Lne,{children:[y(Fne,{children:[u("i",{className:"ri-book-open-line"}),"飲料調製專業課程"]}),l?y("div",{style:{textAlign:"center",padding:"50px 0"},children:[u("i",{className:"ri-loader-4-line",style:{fontSize:"48px",animation:"spin 1s linear infinite",display:"inline-block"}}),u("p",{style:{marginTop:"20px",color:"#666"},children:"正在載入課程資料..."})]}):d?y("div",{style:{textAlign:"center",padding:"50px 0",color:"#666"},children:[u("i",{className:"ri-error-warning-line",style:{fontSize:"48px",color:"#e53e3e",display:"inline-block"}}),u("p",{style:{marginTop:"20px"},children:d})]}):u(Bne,{children:_.map(T=>y(zne,{isActive:i===T.id,children:[y(DS,{onClick:()=>I(T.id),isActive:i===T.id,children:[u(Vne,{children:u(jne,{gradient:T.gradient,children:u("i",{className:T.icon})})}),y(Une,{children:[u(qne,{children:T.title}),u(Wne,{children:T.description}),y(Hne,{children:[y("span",{children:[u("i",{className:"ri-time-line"})," ",T.duration]}),y("span",{children:[u("i",{className:"ri-eye-line"})," ",T.viewCount||0," 次觀看"]})]}),(w==null?void 0:w.uid)&&y(ire,{children:[y(aI,{children:[u("i",{className:"ri-file-list-line"}),T.completedCount,"/",T.totalSections," 完成"]}),T.progress>0&&y(aI,{children:[u("i",{className:"ri-trophy-line"}),T.progress,"% 進度"]})]}),(w==null?void 0:w.uid)&&T.progress>0&&u(nre,{children:u(rre,{progress:T.progress})})]}),y(Gne,{children:[T.progress>0&&y(Kne,{children:[u("i",{className:"ri-award-line"}),T.progress,"%"]}),u(Yne,{isActive:i===T.id,children:u("i",{className:"ri-arrow-down-s-line"})})]})]}),u(Xne,{isActive:i===T.id,children:y(Qne,{children:[u(Jne,{children:"課程小節內容"}),u(Zne,{children:(T.subsections||[]).map(P=>{const O=g[P.id];return u(ere,{completed:O,children:y("div",{className:"subsection-header",onClick:()=>E(T.id,P),children:[u("i",{className:`subsection-icon ${O?"ri-checkbox-circle-fill":"ri-play-circle-line"}`}),u("span",{className:"subsection-title",children:P.title}),O&&y(tre,{style:{marginLeft:"auto"},children:[u("i",{className:"ri-check-line"}),"已完成"]})]})},P.id)})})]})})]},T.id))})]})]})}),u(kn,{})]})},sre=b("div",{target:"e1trjva223"})({name:"1jrwjrm",styles:"padding:20px 0 80px"}),lre=b("div",{target:"e1trjva222"})("min-height:100vh;background:",e=>e.theme.darkTheme?"linear-gradient(135deg, #0F172A 0%, #1E293B 50%, #334155 100%)":"linear-gradient(135deg, #F8FAFC 0%, #E2E8F0 100%)",";position:relative;",e=>e.theme.darkTheme&&`
    &::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 20%, rgba(124, 58, 237, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.15) 0%, transparent 50%);
      pointer-events: none;
      z-index: 0;
    }
  `,";"),cre=b("div",{target:"e1trjva221"})({name:"1yzjft0",styles:"position:relative;z-index:1;max-width:1200px;margin:0 auto;padding:0 20px"}),ure=b(bt,{target:"e1trjva220"})("display:inline-flex;align-items:center;gap:8px;color:",e=>e.theme.primary,";text-decoration:none;font-weight:500;margin-bottom:24px;padding:8px 16px;border-radius:8px;background:",e=>e.theme.cardBg,";box-shadow:0 4px 15px ",e=>e.theme.shadowColor,";transition:all 0.3s ease;&:hover{transform:translateY(-2px);box-shadow:0 6px 20px ",e=>e.theme.shadowColor,";}",e=>e.theme.darkTheme&&`
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(124, 58, 237, 0.08));
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.08);
  `,";"),dre=b("div",{target:"e1trjva219"})("background:",e=>e.theme.cardBg,";border-radius:20px;padding:32px;margin-bottom:32px;box-shadow:0 8px 32px ",e=>e.theme.shadowColor,";position:relative;overflow:hidden;",e=>e.theme.darkTheme&&`
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(124, 58, 237, 0.1));
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 20%, rgba(124, 58, 237, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.15) 0%, transparent 50%);
      pointer-events: none;
      z-index: 1;
    }
  `,";"),pre=b("h1",{target:"e1trjva218"})("font-size:32px;font-weight:700;color:",e=>e.theme.text,";margin-bottom:12px;position:relative;z-index:2;",e=>e.theme.darkTheme&&`
    background: linear-gradient(to right, #fff, #e0e0e0);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  `,";"),hre=b("p",{target:"e1trjva217"})("font-size:18px;color:",e=>e.theme.textSecondary,";margin-bottom:24px;line-height:1.6;position:relative;z-index:2;",e=>e.theme.darkTheme&&`
    opacity: 0.9;
  `,";"),fre=b("div",{target:"e1trjva216"})({name:"1rbvayr",styles:"display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:16px;position:relative;z-index:2"}),zf=b("div",{target:"e1trjva215"})("background:",e=>e.theme.cardBg,";border-radius:12px;padding:16px;display:flex;align-items:center;gap:12px;border:1px solid ",e=>e.theme.cardBorder,";",e=>e.theme.darkTheme&&`
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
  `,";"),Vf=b("div",{target:"e1trjva214"})("width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg, ",e=>e.gradient||"#7C3AED, #3B82F6",");display:flex;align-items:center;justify-content:center;color:white;font-size:18px;"),jf=b("div",{target:"e1trjva213"})({name:"82a6rk",styles:"flex:1"}),Uf=b("div",{target:"e1trjva212"})("font-size:12px;color:",e=>e.theme.textSecondary,";margin-bottom:4px;text-transform:uppercase;letter-spacing:0.5px;"),qf=b("div",{target:"e1trjva211"})("font-size:16px;font-weight:600;color:",e=>e.theme.text,";"),gre=b("div",{target:"e1trjva210"})("background:",e=>e.theme.cardBg,";border-radius:20px;padding:32px;box-shadow:0 8px 32px ",e=>e.theme.shadowColor,";position:relative;overflow:hidden;",e=>e.theme.darkTheme&&`
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(124, 58, 237, 0.08));
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 20%, rgba(124, 58, 237, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.1) 0%, transparent 50%);
      pointer-events: none;
      z-index: 1;
    }
  `,";"),mre=b("h2",{target:"e1trjva29"})("font-size:24px;font-weight:700;color:",e=>e.theme.text,";margin-bottom:24px;position:relative;z-index:2;",e=>e.theme.darkTheme&&`
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  `,";"),vre=b("div",{target:"e1trjva28"})({name:"agdox0",styles:"display:grid;grid-template-columns:1fr;gap:16px;position:relative;z-index:2"}),xre=b("div",{target:"e1trjva27"})("background:",e=>e.theme.cardBg,";border-radius:16px;padding:20px;display:flex;align-items:center;gap:16px;cursor:pointer;transition:all 0.3s ease;border:1px solid ",e=>e.theme.cardBorder,";position:relative;overflow:hidden;&:hover{transform:translateY(-2px);box-shadow:0 8px 25px ",e=>e.theme.shadowColor,";}",e=>e.theme.darkTheme&&`
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    
    &:hover {
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      border-color: rgba(255, 255, 255, 0.2);
    }
    
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 20%, rgba(124, 58, 237, 0.08) 0%, transparent 70%),
        radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.08) 0%, transparent 70%);
      pointer-events: none;
      z-index: 1;
    }
  `," ",e=>e.isChapter&&`
    background: linear-gradient(135deg, rgba(124, 58, 237, 0.1), rgba(59, 130, 246, 0.1));
    border: 2px solid rgba(124, 58, 237, 0.2);
  `," ",e=>e.isExam&&`
    background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(251, 191, 36, 0.1));
    border: 2px solid rgba(245, 158, 11, 0.2);
  `,";"),yre=b("div",{target:"e1trjva26"})("width:48px;height:48px;border-radius:12px;background:",e=>e.gradient||"linear-gradient(135deg, #7C3AED, #3B82F6)",";display:flex;align-items:center;justify-content:center;color:white;font-size:20px;position:relative;z-index:2;flex-shrink:0;",e=>e.theme.darkTheme&&`
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
  `,";"),bre=b("div",{target:"e1trjva25"})({name:"hz6t95",styles:"flex:1;position:relative;z-index:2"}),wre=b("h3",{target:"e1trjva24"})("font-size:16px;font-weight:600;color:",e=>e.theme.text,";margin-bottom:4px;"),Sre=b("div",{target:"e1trjva23"})("font-size:14px;color:",e=>e.theme.textSecondary,";display:flex;align-items:center;gap:16px;"),Cre=b("div",{target:"e1trjva22"})("display:flex;align-items:center;gap:6px;font-size:14px;font-weight:500;color:",e=>e.completed?"#10B981":e.theme.textSecondary,";position:relative;z-index:2;"),_re=b("div",{target:"e1trjva21"})("display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;gap:16px;color:",e=>e.theme.textSecondary,";i{font-size:32px;animation:spin 1s linear infinite;}@keyframes spin{from{transform:rotate(0deg);}to{transform:rotate(360deg);}}"),kre=b("div",{target:"e1trjva20"})("display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;gap:16px;color:",e=>e.theme.danger,";text-align:center;i{font-size:48px;}h3{margin:0;font-size:20px;}p{margin:0;color:",e=>e.theme.textSecondary,";}"),Ere={基礎訓練:"ri-building-line",飲料製作:"ri-cup-line",店面管理:"ri-customer-service-line",行銷技巧:"ri-medal-line"},sI=()=>{var c;const[e,t]=D.useState(null),[n,r]=D.useState(!0),[i,o]=D.useState(null),{id:a}=au(),s=qt();D.useEffect(()=>{a&&(async()=>{try{r(!0);let p=Ie(U,"courses",a),f=await In(p);if(!f.exists()){const h=await be(se(U,"courses"));let g=null;h.forEach(m=>{(m.id===a||m.data().id===a)&&(g={id:m.id,...m.data()})}),g&&(f={exists:()=>!0,data:()=>g})}if(f.exists()){const h=f.data();try{await fn(p,{viewCount:Ym(1)});const m=Ie(U,"course_summaries",a);await fn(m,{viewCount:Ym(1)}),h.viewCount=(h.viewCount||0)+1}catch(m){console.error("更新觀看次數失敗:",m)}const g=[];h.chapters&&h.chapters.length>0&&[...h.chapters].sort((v,w)=>(v.order||0)-(w.order||0)).forEach((v,w)=>{g.push({id:`chapter-${w}`,title:v.title,duration:v.duration||"30-45分鐘",completed:!1,icon:v.icon||Ere[h.category]||"ri-book-open-line",isChapter:!0,order:v.order||w+1,category:v.category||h.category,chapterIndex:w,sectionIndex:-1}),v.subsections&&v.subsections.length>0&&[...v.subsections].sort((C,A)=>(C.order||0)-(A.order||0)).forEach((C,A)=>{g.push({id:`subsection-${w}-${A}`,title:C.title,duration:C.duration||"15-20分鐘",completed:!1,icon:C.icon||"ri-file-list-line",isSubsection:!0,order:C.order||A+1,chapterIndex:w,sectionIndex:A,courseId:a})}),g.push({id:`exam-${w}`,title:`${v.title.split("｜")[0]}｜小考`,duration:"5分鐘",completed:!1,icon:"ri-test-tube-line",isExam:!0,chapterIndex:w,sectionIndex:-1,courseId:a})}),t({...h,lessons:g})}else o("找不到課程資料"),setTimeout(()=>s("/courses"),3e3);r(!1)}catch(p){console.error("獲取課程詳細資料時發生錯誤:",p),o("獲取課程資料時發生錯誤，請稍後再試"),r(!1)}})()},[a,s]);const l=d=>{d.isExam?s(`/exam/${d.courseId}/${d.chapterIndex}`):d.isSubsection&&s(`/section/${d.courseId}/${d.chapterIndex}/${d.sectionIndex}`)};return y(Ne,{children:[u(Bt,{}),u(lre,{children:u(sre,{children:y(cre,{children:[y(ure,{to:"/courses",children:[u("i",{className:"ri-arrow-left-line"}),"返回課程列表"]}),n?y(_re,{children:[u("i",{className:"ri-loader-4-line"}),u("p",{children:"正在載入課程資料..."})]}):i?y(kre,{children:[u("i",{className:"ri-error-warning-line"}),u("h3",{children:i}),u("p",{children:"即將返回課程列表..."})]}):e&&y(Ne,{children:[y(dre,{children:[u(pre,{children:e.title}),u(hre,{children:e.description}),y(fre,{children:[y(zf,{children:[u(Vf,{gradient:"#7C3AED, #3B82F6",children:u("i",{className:"ri-time-line"})}),y(jf,{children:[u(Uf,{children:"總時長"}),u(qf,{children:e.duration||"3-4小時"})]})]}),y(zf,{children:[u(Vf,{gradient:"#10B981, #34D399",children:u("i",{className:"ri-book-open-line"})}),y(jf,{children:[u(Uf,{children:"課程單元"}),y(qf,{children:[((c=e.lessons)==null?void 0:c.length)||0," 個單元"]})]})]}),y(zf,{children:[u(Vf,{gradient:"#F59E0B, #FBBF24",children:u("i",{className:"ri-bar-chart-line"})}),y(jf,{children:[u(Uf,{children:"難度等級"}),u(qf,{children:e.level})]})]}),y(zf,{children:[u(Vf,{gradient:"#EF4444, #F87171",children:u("i",{className:"ri-eye-line"})}),y(jf,{children:[u(Uf,{children:"觀看次數"}),y(qf,{children:[e.viewCount||0," 次"]})]})]})]})]}),y(gre,{children:[u(mre,{children:"課程內容"}),u(vre,{children:e.lessons.map(d=>y(xre,{isChapter:d.isChapter,isExam:d.isExam,onClick:()=>l(d),children:[u(yre,{gradient:d.isExam?"linear-gradient(135deg, #F59E0B, #FBBF24)":d.isChapter?"linear-gradient(135deg, #2563EB, #60A5FA)":"linear-gradient(135deg, #7C3AED, #3B82F6)",children:u("i",{className:d.icon})}),y(bre,{children:[u(wre,{children:d.title}),y(Sre,{children:[u("span",{children:d.duration}),d.isExam&&u("span",{children:"• 測驗"}),d.isChapter&&u("span",{children:"• 章節"}),d.isSubsection&&u("span",{children:"• 學習內容"})]})]}),y(Cre,{completed:d.completed,children:[d.completed?"已完成":"未開始",u("i",{className:d.completed?"ri-checkbox-circle-fill":"ri-play-circle-line"})]})]},d.id))})]})]})]})})}),u(kn,{})]})},$y=b("div",{target:"e12nuton13"})({name:"yeh6tb",styles:`min-height:100vh;background:linear-gradient(135deg, #f0f8ff 0%, #f8fbff 25%, #e8f4fd 50%, #f8fbff 75%, #f0f8ff 100%),radial-gradient(circle at 20% 20%, rgba(135, 206, 235, 0.3) 0%, transparent 50%),radial-gradient(circle at 80% 80%, rgba(176, 224, 230, 0.2) 0%, transparent 50%);background-size:400% 400%,100% 100%,100% 100%;animation:cuteShift 15s ease infinite;font-family:'PingFang TC','Hiragino Sans','Apple SD Gothic Neo',sans-serif;position:relative;overflow-x:hidden;@keyframes cuteShift{0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}&::before{content:'';position:fixed;top:0;left:0;right:0;bottom:0;background:repeating-linear-gradient(
        45deg,
        transparent,
        transparent 20px,
        rgba(135, 206, 235, 0.03) 20px,
        rgba(135, 206, 235, 0.03) 40px
      );pointer-events:none;z-index:0;}&::after{content:'';display:none;}`}),Tre=b("div",{target:"e12nuton12"})({name:"rq1u23",styles:"position:sticky;top:0;z-index:100;background:linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(240, 248, 255, 0.95) 100%);backdrop-filter:blur(20px);border-bottom:3px solid transparent;border-image:linear-gradient(90deg, #b0e0e6, #87ceeb, #e0f6ff, #87ceeb, #b0e0e6) 1;padding:16px 32px;display:flex;align-items:center;justify-content:space-between;box-shadow:0 4px 20px rgba(135, 206, 235, 0.3),inset 0 1px 0 rgba(255, 255, 255, 0.8);@media (max-width: 768px){padding:12px 20px;flex-direction:column;gap:16px;}"}),Ire=b(bt,{target:"e12nuton11"})({name:"6mm3ne",styles:"display:flex;align-items:center;text-decoration:none;color:#4682b4;font-weight:600;font-size:14px;letter-spacing:0.5px;transition:all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);padding:12px 20px;border:2px solid #b0e0e6;background:linear-gradient(135deg, #f0f8ff 0%, #f8fbff 100%);border-radius:25px;position:relative;overflow:hidden;&::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg, transparent, rgba(135, 206, 235, 0.3), transparent);transition:left 0.5s ease;}&:hover::before{left:100%;}&:hover{border-color:#87ceeb;color:#4169e1;transform:translateX(-3px) translateY(-2px) scale(1.05);box-shadow:2px 4px 0 #b0e0e6,0 0 20px rgba(135, 206, 235, 0.4);}i{margin-right:8px;font-size:16px;transition:transform 0.3s ease;}&:hover i{transform:translateX(-2px) rotate(-10deg);}"}),Are=b("div",{target:"e12nuton10"})({name:"1vruavh",styles:"text-align:center;flex:1;max-width:600px;@media (max-width: 768px){order:-1;}h1{margin:0 0 8px 0;font-size:22px;font-weight:700;color:#4682b4;letter-spacing:1px;text-shadow:0 2px 4px rgba(135, 206, 235, 0.3);line-height:1.2;position:relative;@media (max-width: 768px){font-size:18px;}}p{margin:0;font-size:12px;color:#6495ed;font-weight:500;letter-spacing:0.5px;opacity:0.8;}"}),Pre=b("div",{target:"e12nuton9"})({name:"77ei6v",styles:"display:flex;gap:12px;align-items:center;@media (max-width: 768px){width:100%;justify-content:center;}"}),Dre=b("button",{target:"e12nuton8"})("display:flex;align-items:center;background:",e=>e.primary?"linear-gradient(135deg, #87ceeb 0%, #4169e1 50%, #6495ed 100%)":"linear-gradient(135deg, #f0f8ff 0%, #f8fbff 100%)",";color:",e=>e.primary?"#ffffff":"#4682b4",";border:2px solid ",e=>e.primary?"#87ceeb":"#b0e0e6",";padding:10px 20px;font-size:13px;font-weight:600;letter-spacing:0.5px;cursor:pointer;transition:all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);border-radius:20px;box-shadow:",e=>e.primary?"0 4px 15px rgba(135, 206, 235, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.3)":"0 2px 10px rgba(135, 206, 235, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.8)",";position:relative;overflow:hidden;&::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:",e=>e.primary?"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent)":"linear-gradient(90deg, transparent, rgba(135, 206, 235, 0.2), transparent)",";transition:left 0.5s ease;}&:hover::before{left:100%;}&:hover{transform:translateY(-2px) scale(1.05);box-shadow:",e=>e.primary?"0 8px 25px rgba(135, 206, 235, 0.6), inset 0 1px 0 rgba(255, 255, 255, 0.4)":"0 6px 20px rgba(135, 206, 235, 0.3), inset 0 1px 0 rgba(135, 206, 235, 0.2)",";border-color:",e=>e.primary?"#6495ed":"#87ceeb",";}&:disabled{opacity:0.6;cursor:not-allowed;transform:none;&:hover{transform:none;box-shadow:",e=>e.primary?"0 4px 15px rgba(135, 206, 235, 0.4)":"0 2px 10px rgba(135, 206, 235, 0.2)",";}}i{margin-right:6px;font-size:14px;position:relative;z-index:1;&.ri-loader-4-line{animation:spin 1s linear infinite;}&.ri-check-line{color:#98fb98;}}@keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}"),Rre=b("div",{target:"e12nuton7"})({name:"ti71zr",styles:"max-width:1000px;margin:0 auto;padding:32px;position:relative;z-index:1;@media (max-width: 768px){padding:20px 16px;}"}),Nre=b("div",{target:"e12nuton6"})({name:"vrwabu",styles:"background:linear-gradient(135deg, #ffffff 0%, #f8fbff 100%);border:3px solid #b0e0e6;border-radius:20px;box-shadow:0 8px 32px rgba(135, 206, 235, 0.3),inset 0 1px 0 rgba(255, 255, 255, 0.8),inset 0 -1px 0 rgba(135, 206, 235, 0.1);overflow:hidden;margin-bottom:24px;transition:all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);position:relative;&::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg, #87ceeb, #e0f6ff, #6495ed, #e0f6ff, #87ceeb);background-size:200% 100%;animation:rainbow 3s linear infinite;}@keyframes rainbow{0%{background-position:0% 50%;}100%{background-position:200% 50%;}}&:hover{transform:translateY(-6px) scale(1.02);border-color:#87ceeb;box-shadow:0 12px 48px rgba(135, 206, 235, 0.4),0 0 30px rgba(135, 206, 235, 0.5),inset 0 1px 0 rgba(255, 255, 255, 0.9);}"}),Mre=b("div",{target:"e12nuton5"})({name:"mur2gh",styles:"background:linear-gradient(135deg, #f8fbff 0%, #f0f8ff 100%);color:#4682b4;padding:28px 32px;position:relative;overflow:hidden;border-bottom:2px solid #e0f6ff;@media (max-width: 768px){padding:20px 24px;}h2{margin:0;font-size:24px;font-weight:700;letter-spacing:1px;position:relative;z-index:1;line-height:1.3;color:#4682b4;@media (max-width: 768px){font-size:20px;}}p{margin:12px 0 0 0;font-size:14px;opacity:0.8;position:relative;z-index:1;font-weight:500;letter-spacing:0.5px;color:#6495ed;@media (max-width: 768px){font-size:13px;}}"}),Ore=b("div",{target:"e12nuton4"})({name:"11xlx4g",styles:"padding:32px;background:linear-gradient(135deg, #ffffff 0%, #f8fbff 100%);@media (max-width: 768px){padding:24px 20px;}"}),$re=b("div",{target:"e12nuton3"})({name:"oe97j0",styles:"display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:60vh;color:#4682b4;position:relative;z-index:1;.spinner{width:60px;height:60px;border:3px solid #e0f6ff;border-left:3px solid #87ceeb;border-radius:50%;animation:spin 1s linear infinite;margin-bottom:24px;box-shadow:0 0 20px rgba(135, 206, 235, 0.4);}@keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}p{font-size:16px;font-weight:600;margin:0;letter-spacing:0.5px;position:relative;}"}),Lre=b("div",{target:"e12nuton2"})({name:"15kebp4",styles:"display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:60vh;color:#4682b4;text-align:center;position:relative;z-index:1;i{font-size:64px;margin-bottom:24px;color:#6495ed;text-shadow:0 0 20px rgba(100, 149, 237, 0.5);}h3{font-size:24px;margin:0 0 16px 0;font-weight:700;letter-spacing:0.5px;color:#4682b4;}p{font-size:14px;margin:0;opacity:0.8;max-width:400px;line-height:1.6;color:#6495ed;}"}),Fre=b("div",{target:"e12nuton1"})({name:"18knrl8",styles:"font-size:15px;line-height:1.7;color:#5a5a5a;font-weight:400;h1,h2,h3,h4,h5,h6{color:#4682b4;margin:28px 0 16px 0;font-weight:700;line-height:1.4;letter-spacing:0.5px;position:relative;}h1{font-size:24px;}h2{font-size:22px;}h3{font-size:20px;}h4{font-size:18px;}p{margin:18px 0;text-align:justify;color:#6a6a6a;}ul,ol{margin:18px 0;padding-left:24px;li{margin:10px 0;color:#6a6a6a;line-height:1.6;position:relative;&::marker{color:#87ceeb;}}}blockquote{background:linear-gradient(135deg, #f0f8ff 0%, #f8fbff 100%);border-left:4px solid #87ceeb;margin:24px 0;padding:20px 24px;border-radius:0 15px 15px 0;font-style:italic;box-shadow:0 4px 16px rgba(135, 206, 235, 0.2),inset 0 1px 0 rgba(255, 255, 255, 0.8);position:relative;color:#4682b4;}code{background:#e0f6ff;color:#4682b4;padding:4px 8px;border-radius:8px;font-size:13px;font-weight:600;border:1px solid #b0e0e6;}pre{background:linear-gradient(135deg, #f0f8ff 0%, #f8fbff 100%);color:#5a5a5a;padding:20px;border-radius:15px;overflow-x:auto;margin:24px 0;box-shadow:0 4px 20px rgba(135, 206, 235, 0.2),inset 0 0 20px rgba(135, 206, 235, 0.05);border:2px solid #b0e0e6;code{background:none;color:inherit;padding:0;border:none;font-weight:400;}}"}),Bre=b("div",{target:"e12nuton0"})({name:"81a887",styles:"background:linear-gradient(135deg, #f0f8ff 0%, #f8fbff 100%);border:3px solid #87ceeb;color:#4682b4;padding:28px;border-radius:20px;margin-top:32px;text-align:center;position:relative;overflow:hidden;box-shadow:0 8px 32px rgba(135, 206, 235, 0.3),inset 0 1px 0 rgba(255, 255, 255, 0.8);h3{margin:0 0 16px 0;font-size:20px;font-weight:700;position:relative;z-index:1;letter-spacing:0.5px;color:#4682b4;}p{margin:0 0 20px 0;opacity:0.8;position:relative;z-index:1;font-size:14px;line-height:1.6;color:#6495ed;}button{background:linear-gradient(135deg, #87ceeb 0%, #6495ed 100%);color:#ffffff;border:2px solid #87ceeb;border-radius:20px;padding:14px 28px;font-size:14px;font-weight:600;letter-spacing:0.5px;cursor:pointer;transition:all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);position:relative;z-index:1;box-shadow:0 4px 15px rgba(135, 206, 235, 0.4);&:hover{background:linear-gradient(135deg, #6495ed 0%, #87ceeb 100%);transform:translateY(-3px) scale(1.05);box-shadow:0 8px 25px rgba(135, 206, 235, 0.6);border-color:#6495ed;}}"}),zre=()=>{var C;const{courseId:e,chapterIndex:t,sectionIndex:n}=au(),{currentUser:r}=gi(),i=qt(),[o,a]=D.useState(null),[s,l]=D.useState(null),[c,d]=D.useState(!0),[p,f]=D.useState(null),[h,g]=D.useState(!1),[m,v]=D.useState(!1);D.useEffect(()=>{(async()=>{if(!e||t===null||n===null){console.log("❌ 缺少必要的 URL 參數"),f("無效的課程路徑"),d(!1);return}d(!0);try{const _=parseInt(e),I=parseInt(n)+1,E=`${e}_${_}_${I}`;console.log("🔍 請求小節內容，ID:",E),console.log("📊 URL 參數:",{courseId:e,chapterIndex:t,sectionIndex:n}),console.log("🔄 正確轉換邏輯:",{courseId:e,chapterNum:_,sectionNum:I,finalId:E});const k=Ie(U,"section_contents",E),T=await In(k);if(T.exists()){const P=T.data();console.log("✅ 找到課程內容:",P.title),a(P),l({courseId:e,chapterIndex:parseInt(t),sectionIndex:parseInt(n),title:P.title,subtitle:P.subtitle,duration:P.duration,difficulty:P.difficulty}),f(null)}else console.log("❌ 找不到課程內容，ID:",E),console.log("💡 請確認 Firestore 中 section_contents 集合是否有此文檔"),f(`找不到課程內容 (ID: ${E})`)}catch(_){console.error("💥 獲取課程內容失敗:",_),f("獲取課程內容時發生錯誤")}finally{d(!1)}})()},[e,t,n]),D.useEffect(()=>{(async()=>{if(!(!r||!e||t===null||n===null))try{const _=await Vd(r.uid),I=SJ(_,e,parseInt(t),parseInt(n));g(I),console.log("📚 課程完成狀態:",{courseId:e,chapterIndex:t,sectionIndex:n,completed:I})}catch(_){console.error("❌ 檢查課程完成狀態失敗:",_)}})()},[r,e,t,n]);const w=async()=>{if(!r){console.error("用戶未登入，無法記錄課程完成狀態"),i("/login");return}v(!0);try{h||(console.log("🎯 標記課程完成:",{userId:r.uid,courseId:e,chapterIndex:parseInt(t),sectionIndex:parseInt(n)}),await tO(r.uid,e,parseInt(t),parseInt(n),100,0),g(!0),console.log("✅ 課程已標記為完成"));const A=parseInt(e),_=parseInt(n)+1,I=`001_${A}_${_}`;console.log("🔍 前往小考，examId:",I),i(`/exam/section/${I}`)}catch(A){console.error("❌ 標記課程完成失敗:",A);const _=parseInt(e),I=parseInt(n)+1,E=`001_${_}_${I}`;i(`/exam/section/${E}`)}finally{v(!1)}},S=A=>A.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/### (.*)/g,"<h3>$1</h3>").replace(/## (.*)/g,"<h2>$1</h2>").replace(/# (.*)/g,"<h1>$1</h1>").replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br/>").replace(/^(.*)$/gm,"<p>$1</p>").replace(/<p><\/p>/g,"").replace(/<p><h([1-6])>/g,"<h$1>").replace(/<\/h([1-6])><\/p>/g,"</h$1>");return c?u($y,{children:y($re,{children:[u("div",{className:"spinner"}),u("p",{children:"正在載入課程內容..."})]})}):p?u($y,{children:y(Lre,{children:[u("i",{className:"ri-error-warning-line"}),u("h3",{children:"載入失敗"}),u("p",{children:p})]})}):y($y,{children:[y(Tre,{children:[y(Ire,{to:"/courses-internal",children:[u("i",{className:"ri-arrow-left-line"}),"返回課程列表"]}),y(Are,{children:[u("h1",{children:(s==null?void 0:s.title)||"課程內容"}),y("p",{children:["課程 ",e," • 第 ",parseInt(t)+1," 章 • 第 ",parseInt(n)+1," 節",(s==null?void 0:s.duration)&&` • ${s.duration}`,(s==null?void 0:s.difficulty)&&` • ${s.difficulty}`]})]}),u(Pre,{children:u(Dre,{primary:!0,onClick:w,disabled:m,children:m?y(Ne,{children:[u("i",{className:"ri-loader-4-line"}),"標記完成中..."]}):h?y(Ne,{children:[u("i",{className:"ri-check-line"}),"已完成 • 重新測驗"]}):y(Ne,{children:[u("i",{className:"ri-quiz-line"}),"開始測驗"]})})})]}),u(Rre,{children:y(Nre,{children:[y(Mre,{children:[u("h2",{children:(o==null?void 0:o.title)||"課程內容"}),(o==null?void 0:o.subtitle)&&u("p",{children:o.subtitle})]}),y(Ore,{children:[u(Fre,{dangerouslySetInnerHTML:{__html:S(((C=o==null?void 0:o.content)==null?void 0:C.text)||(o==null?void 0:o.content)||"此小節暫無內容")}}),y(Bre,{children:[u("h3",{children:"📝 完成小測驗"}),u("p",{children:"學習完成後，請進行小測驗來檢驗您的學習成果"}),u("button",{onClick:w,children:"開始測驗"})]})]})]})})]})},Yn=[];for(let e=0;e<256;++e)Yn.push((e+256).toString(16).slice(1));function Vre(e,t=0){return(Yn[e[t+0]]+Yn[e[t+1]]+Yn[e[t+2]]+Yn[e[t+3]]+"-"+Yn[e[t+4]]+Yn[e[t+5]]+"-"+Yn[e[t+6]]+Yn[e[t+7]]+"-"+Yn[e[t+8]]+Yn[e[t+9]]+"-"+Yn[e[t+10]]+Yn[e[t+11]]+Yn[e[t+12]]+Yn[e[t+13]]+Yn[e[t+14]]+Yn[e[t+15]]).toLowerCase()}let Ly;const jre=new Uint8Array(16);function Ure(){if(!Ly){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ly=crypto.getRandomValues.bind(crypto)}return Ly(jre)}const qre=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),lI={randomUUID:qre};function fo(e,t,n){var i;if(lI.randomUUID&&!e)return lI.randomUUID();e=e||{};const r=e.random??((i=e.rng)==null?void 0:i.call(e))??Ure();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Vre(r)}function Wre(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}Wre(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var RS=e=>typeof e=="number"&&!isNaN(e),Np=e=>typeof e=="string",nO=e=>typeof e=="function",Hre=e=>Np(e)||RS(e),Gre=e=>D.isValidElement(e)||Np(e)||nO(e)||RS(e),Yre=1,rO=()=>`${Yre++}`,So=new Map,E2=[],cI=new Set,iO=()=>So.size>0,Kre=(e,{containerId:t})=>{var n;return(n=So.get(t||1))==null?void 0:n.toasts.get(e)};function Xre(e,t){var n;if(t)return!!((n=So.get(t))!=null&&n.isToastActive(e));let r=!1;return So.forEach(i=>{i.isToastActive(e)&&(r=!0)}),r}function Qre(e){if(!iO()){E2=E2.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||Hre(e))So.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=So.get(e.containerId);t?t.removeToast(e.id):So.forEach(n=>{n.removeToast(e.id)})}}var Jre=(e={})=>{So.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function Zre(e,t){Gre(e)&&(iO()||E2.push({content:e,options:t}),So.forEach(n=>{n.buildToast(e,t)}))}function oO(e,t){So.forEach(n=>{(t==null||!(t!=null&&t.containerId)||(t==null?void 0:t.containerId)===n.id)&&n.toggle(e,t==null?void 0:t.id)})}function eie(e){return cI.add(e),()=>{cI.delete(e)}}function tie(e){return e&&(Np(e.toastId)||RS(e.toastId))?e.toastId:rO()}function xh(e,t){return Zre(e,t),t.toastId}function Sv(e,t){return{...t,type:t&&t.type||e,toastId:tie(t)}}function Cv(e){return(t,n)=>xh(t,Sv(e,n))}function We(e,t){return xh(e,Sv("default",t))}We.loading=(e,t)=>xh(e,Sv("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function nie(e,{pending:t,error:n,success:r},i){let o;t&&(o=Np(t)?We.loading(t,i):We.loading(t.render,{...i,...t}));let a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},s=(c,d,p)=>{if(d==null){We.dismiss(o);return}let f={type:c,...a,...i,data:p},h=Np(d)?{render:d}:d;return o?We.update(o,{...f,...h}):We(h.render,{...f,...h}),p},l=nO(e)?e():e;return l.then(c=>s("success",r,c)).catch(c=>s("error",n,c)),l}We.promise=nie;We.success=Cv("success");We.info=Cv("info");We.error=Cv("error");We.warning=Cv("warning");We.warn=We.warning;We.dark=(e,t)=>xh(e,Sv("default",{theme:"dark",...t}));function rie(e){Qre(e)}We.dismiss=rie;We.clearWaitingQueue=Jre;We.isActive=Xre;We.update=(e,t={})=>{let n=Kre(e,t);if(n){let{props:r,content:i}=n,o={delay:100,...r,...t,toastId:t.toastId||e,updateId:rO()};o.toastId!==e&&(o.staleId=e);let a=o.render||i;delete o.render,xh(a,o)}};We.done=e=>{We.update(e,{progress:1})};We.onChange=eie;We.play=e=>oO(!0,e);We.pause=e=>oO(!1,e);const uI=b("div",{target:"e10f11li30"})({name:"g46w8s",styles:"margin-bottom:30px"}),dI=b("h3",{target:"e10f11li29"})("font-size:18px;font-weight:600;color:",e=>e.theme.text,";margin-bottom:15px;display:flex;align-items:center;i{margin-right:10px;color:",e=>e.theme.primary,";}"),_a=b("div",{target:"e10f11li26"})("margin-bottom:",e=>e.noMargin?"0":"16px",";"),ka=b("label",{target:"e10f11li25"})("display:block;font-size:14px;font-weight:500;margin-bottom:6px;color:",e=>e.theme.text,";"),Wf=b("input",{target:"e10f11li24"})("width:100%;padding:12px;border:1px solid ",e=>e.theme.gray,"40;border-radius:8px;background-color:",e=>e.theme.inputBg,";color:",e=>e.theme.text,";font-size:15px;transition:all 0.3s ease;&:focus{outline:none;border-color:",e=>e.theme.primary,";box-shadow:0 0 0 3px ",e=>e.theme.primary,"30;}"),pI=b("select",{target:"e10f11li22"})("width:100%;padding:12px;border:1px solid ",e=>e.theme.gray,"40;border-radius:8px;background-color:",e=>e.theme.inputBg,";color:",e=>e.theme.text,";font-size:15px;transition:all 0.3s ease;&:focus{outline:none;border-color:",e=>e.theme.primary,";box-shadow:0 0 0 3px ",e=>e.theme.primary,"30;}"),aO=b("button",{target:"e10f11li20"})({name:"opsgi4",styles:"padding:12px 24px;border-radius:8px;font-size:15px;font-weight:500;cursor:pointer;transition:all 0.3s ease;display:flex;align-items:center;justify-content:center;i{margin-right:8px;}&:disabled{opacity:0.5;cursor:not-allowed;}"}),hI=b(aO,{target:"e10f11li17"})({name:"1lmh5qd",styles:"background:linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%);color:white;border:none;box-shadow:0 4px 10px rgba(124, 58, 237, 0.3);margin-top:20px;width:100%;&:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 15px rgba(124, 58, 237, 0.4);}"}),iie=b("div",{target:"e10f11li10"})({name:"c334ge",styles:"max-width:900px;margin:20px auto 80px;padding:0 20px"}),oie=b("div",{target:"e10f11li9"})("display:flex;justify-content:center;margin:30px 0;background:",e=>e.theme.bgLight,";padding:8px;border-radius:50px;width:300px;margin-left:auto;margin-right:auto;position:relative;box-shadow:0 2px 10px rgba(0, 0, 0, 0.05);"),fI=b("div",{target:"e10f11li8"})("padding:10px 20px;font-size:15px;font-weight:500;text-align:center;color:",e=>e.active?"#fff":e.theme.text,";border-radius:50px;cursor:pointer;transition:all 0.3s ease;position:relative;z-index:2;flex:1;background:",e=>e.active?"linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%)":"transparent",";box-shadow:",e=>e.active?"0 4px 10px rgba(124, 58, 237, 0.2)":"none",";"),aie=b("label",{target:"e10f11li7"})({name:"1necvwt",styles:"position:relative;display:inline-block;width:60px;height:30px;margin-left:10px"}),sie=b("input",{target:"e10f11li6"})({name:"1y8uxd6",styles:"opacity:0;width:0;height:0;&:checked+span{background:linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%);}&:checked+span:before{transform:translateX(30px);}"}),lie=b("span",{target:"e10f11li5"})("position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:",e=>e.theme.bgLight,';transition:.4s;border-radius:34px;border:1px solid rgba(124, 58, 237, 0.3);box-shadow:inset 0 1px 3px rgba(0, 0, 0, 0.1);&:before{position:absolute;content:"";height:22px;width:22px;left:4px;bottom:4px;background-color:white;transition:.4s;border-radius:50%;box-shadow:0 1px 3px rgba(0, 0, 0, 0.15);}'),cie=b("div",{target:"e10f11li4"})("display:flex;align-items:center;gap:10px;margin-top:15px;max-height:",e=>e.visible?"100px":"0",";opacity:",e=>e.visible?1:0,";overflow:hidden;transition:all 0.3s ease-in-out;"),gI=b("div",{target:"e10f11li3"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),mI=b("span",{target:"e10f11li2"})("font-size:13px;color:",e=>e.theme.textSecondary,";margin-bottom:5px;"),vI=b("input",{target:"e10f11li1"})("width:70px;text-align:center;padding:10px;border:1px solid ",e=>e.theme.gray,"50;border-radius:8px;background-color:",e=>e.theme.inputBg,";color:",e=>e.theme.text,";"),uie=b("div",{target:"e10f11li0"})({name:"1og3vwv",styles:"display:flex;align-items:center;gap:10px"}),xI={飲料製作:"ri-cup-line",店面管理:"ri-store-2-line",顧客服務:"ri-user-smile-line",衛生安全:"ri-shield-check-line",行銷技巧:"ri-line-chart-line"},die=()=>{const[e,t]=D.useState("chapter"),[n,r]=D.useState(""),[i,o]=D.useState("飲料製作"),[a,s]=D.useState(""),[l,c]=D.useState(""),[d,p]=D.useState(!1),[f,h]=D.useState(0),[g,m]=D.useState(0),[v,w]=D.useState(""),[S,C]=D.useState([]),[A,_]=D.useState(""),I=qt(),{user:E,userRole:k}=Bi(),[T,P]=D.useState(!1),[O,R]=D.useState(null);D.useRef(null);const[N,L]=D.useState(0),[B,V]=D.useState(null),[j,z]=D.useState({title:"",description:"",coverImage:"",category:"",level:"初級",duration:"",prerequisites:"",objectives:""}),[H,J]=D.useState(null),[de,ae]=D.useState([{title:"",description:"",icon:"ri-book-open-line",subsections:[{title:"",icon:"ri-file-list-line"}]}]);D.useEffect(()=>{(async()=>{try{const me=tt(se(U,"course_summaries"),Ot("numeric_id")),ye=await be(me),ee=[];ye.forEach(oe=>{const he=oe.data();ee.push({id:he.id||oe.id,title:he.title,numeric_id:he.numeric_id,chapters:he.chapters||[]})}),C(ee),ee.length>0&&_(ee[0].id)}catch(me){console.error("獲取章節數據時發生錯誤:",me),We.error("獲取章節數據時發生錯誤，請稍後再試")}})()},[]),D.useEffect(()=>{E&&k!=="enterprise"&&(We.error("此頁面僅限企業用戶訪問"),I("/"))},[E,k,I]);const Ce=async()=>{if(!n){We.error("請輸入章節標題");return}try{const K=tt(se(U,"courses"),Ot("numeric_id","desc")),me=await be(K);let ye=1;me.empty||(ye=(me.docs[0].data().numeric_id||0)+1);const ee=String(ye).padStart(3,"0"),oe={id:ee,numeric_id:ye,title:n,description:a,category:i,duration:l,limited_time:d,icon:xI[i]||"ri-book-open-line",gradient:"linear-gradient(135deg, #7C3AED, #3B82F6)",chapters:[],createdAt:At(),updatedAt:At()};d&&(oe.time_limit={months:Number(f),days:Number(g)}),await tr(se(U,"courses"),oe),await tr(se(U,"course_summaries"),{id:ee,numeric_id:ye,title:n,subtitle:a,category:i,icon:xI[i]||"ri-book-open-line",gradient:"linear-gradient(135deg, #7C3AED, #3B82F6)",viewCount:0,createdAt:At()}),We.success("章節創建成功！"),r(""),s(""),c(""),p(!1),h(0),m(0),t("course");const he=tt(se(U,"courses"),Ot("numeric_id")),we=await be(he),W=[];we.forEach(ge=>{W.push({id:ge.id,title:ge.data().title,numeric_id:ge.data().numeric_id})}),C(W),W.length>0&&_(W[0].id)}catch(K){console.error("創建章節時發生錯誤:",K),We.error("創建章節時發生錯誤，請稍後再試")}},te=async()=>{if(!A||!v){We.error("請選擇章節並輸入課程標題");return}try{const[K,me]=await Promise.all([In(Ie(U,"courses",A)),In(Ie(U,"course_summaries",A))]);if(!K.exists()||!me.exists()){We.error("無法找到選定的章節");return}const ye=K.data(),ee=me.data(),oe=ye.chapters||[],he=ee.chapters||[],we={title:v,order:oe.length+1,icon:"ri-file-list-line",content:"",createdAt:Date.now()},W={title:v,icon:"ri-file-list-line",order:oe.length+1};oe.push(we),he.length>0?(he[0].subsections||(he[0].subsections=[]),he[0].subsections.push(W)):he.push({title:ee.title,description:ee.description||ee.subtitle,icon:ee.icon,order:1,subsections:[W]}),await Promise.all([fn(Ie(U,"courses",A),{chapters:oe,updatedAt:At()}),fn(Ie(U,"course_summaries",A),{chapters:he,updatedAt:At()})]),We.success("課程小節創建成功！已同步更新到課程摘要"),w("");const ge=tt(se(U,"course_summaries"),Ot("numeric_id")),fe=await be(ge),ve=[];fe.forEach(ce=>{const De=ce.data();ve.push({id:De.id||ce.id,title:De.title,numeric_id:De.numeric_id,chapters:De.chapters||[]})}),C(ve),I(`/course-editor/${A}/${oe.length}`)}catch(K){console.error("創建課程小節時發生錯誤:",K),We.error("創建課程小節時發生錯誤，請稍後再試")}};return y(Ne,{children:[u(Bt,{title:"課程創建中心",tagline:"建立精彩的學習內容"}),y(iie,{children:[y(oie,{children:[u(fI,{active:e==="chapter",onClick:()=>t("chapter"),children:"新增章節"}),u(fI,{active:e==="course",onClick:()=>t("course"),children:"新增課程"})]}),u("div",{style:{textAlign:"center",marginBottom:"30px"},children:y(aO,{onClick:()=>I("/exam-management"),style:{background:"linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%)",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontWeight:"600",fontSize:"16px",display:"inline-flex",alignItems:"center",gap:"8px"},children:[u("i",{className:"ri-file-text-line"}),"管理小考題目"]})}),e==="chapter"&&y(uI,{children:[u(dI,{children:"新增課程章節"}),y(_a,{children:[u(ka,{children:"章節標題"}),u(Wf,{type:"text",placeholder:"輸入章節標題",value:n,onChange:K=>r(K.target.value)})]}),y(_a,{children:[u(ka,{children:"課程類別"}),u(pI,{value:i,onChange:K=>o(K.target.value),children:["飲料製作","店面管理","顧客服務","衛生安全","行銷技巧"].map(K=>u("option",{value:K,children:K},K))})]}),y(_a,{children:[u(ka,{children:"章節副標題"}),u(Wf,{type:"text",placeholder:"輸入副標題或簡短描述",value:a,onChange:K=>s(K.target.value)})]}),y(_a,{children:[u(ka,{children:"預計時長"}),u(Wf,{type:"text",placeholder:"例如：2小時30分鐘",value:l,onChange:K=>c(K.target.value)})]}),y(_a,{children:[y(uie,{children:[u(ka,{children:"是否為限時章節"}),y(aie,{children:[u(sie,{type:"checkbox",checked:d,onChange:K=>p(K.target.checked)}),u(lie,{})]})]}),y(cie,{visible:d,children:[y(gI,{children:[u(mI,{children:"月"}),u(vI,{type:"number",min:"0",max:"12",value:f,onChange:K=>h(K.target.value)})]}),y(gI,{children:[u(mI,{children:"日"}),u(vI,{type:"number",min:"0",max:"31",value:g,onChange:K=>m(K.target.value)})]})]})]}),u(hI,{onClick:Ce,children:"新增章節"})]}),e==="course"&&y(uI,{children:[u(dI,{children:"新增課程小節"}),y(_a,{children:[u(ka,{children:"選擇章節"}),u(pI,{value:A,onChange:K=>_(K.target.value),disabled:S.length===0,children:S.length===0?u("option",{value:"",children:"尚無可用章節"}):S.map(K=>y("option",{value:K.id,children:[K.title," (ID: ",K.numeric_id,")"]},K.id))})]}),A&&y(_a,{children:[u(ka,{children:"現有小節列表"}),u("div",{style:{background:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:"8px",padding:"12px",minHeight:"80px",color:"#495057"},children:(()=>{var ye;const K=S.find(ee=>ee.id===A);if(!((ye=K==null?void 0:K.chapters)!=null&&ye.length))return u("div",{style:{color:"#6c757d",fontStyle:"italic"},children:"此章節尚無小節"});const me=[];return K.chapters.forEach(ee=>{ee.subsections&&ee.subsections.forEach((oe,he)=>{me.push(`${he+1}. ${oe.title}`)})}),me.length>0?u("div",{children:me.map((ee,oe)=>y("div",{style:{display:"flex",alignItems:"center",padding:"4px 0",borderBottom:oe<me.length-1?"1px solid #e9ecef":"none"},children:[u("i",{className:"ri-file-list-line",style:{marginRight:"8px",color:"#7C3AED"}}),ee]},oe))}):u("div",{style:{color:"#6c757d",fontStyle:"italic"},children:"此章節尚無小節"})})()})]}),y(_a,{children:[u(ka,{children:"課程小節名稱"}),u(Wf,{type:"text",placeholder:"輸入課程小節名稱",value:v,onChange:K=>w(K.target.value)})]}),u(hI,{onClick:te,disabled:S.length===0,children:"新增課程"})]})]}),u(kn,{})]})};function T2(e,t){return T2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},T2(e,t)}function sO(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,T2(e,t)}function Mp(e){"@babel/helpers - typeof";return Mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mp(e)}function pie(e,t){if(Mp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Mp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hie(e){var t=pie(e,"string");return Mp(t)=="symbol"?t:t+""}function fie(e,t,n){return(t=hie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yI(Object(n),!0).forEach(function(r){fie(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $r(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var wI=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),SI=function(){return Math.random().toString(36).substring(7).split("").join(".")},CI={INIT:"@@redux/INIT"+SI(),REPLACE:"@@redux/REPLACE"+SI()};function gie(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function lO(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error($r(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error($r(1));return n(lO)(e,t)}if(typeof e!="function")throw new Error($r(2));var i=e,o=t,a=[],s=a,l=!1;function c(){s===a&&(s=a.slice())}function d(){if(l)throw new Error($r(3));return o}function p(m){if(typeof m!="function")throw new Error($r(4));if(l)throw new Error($r(5));var v=!0;return c(),s.push(m),function(){if(v){if(l)throw new Error($r(6));v=!1,c();var S=s.indexOf(m);s.splice(S,1),a=null}}}function f(m){if(!gie(m))throw new Error($r(7));if(typeof m.type>"u")throw new Error($r(8));if(l)throw new Error($r(9));try{l=!0,o=i(o,m)}finally{l=!1}for(var v=a=s,w=0;w<v.length;w++){var S=v[w];S()}return m}function h(m){if(typeof m!="function")throw new Error($r(10));i=m,f({type:CI.REPLACE})}function g(){var m,v=p;return m={subscribe:function(S){if(typeof S!="object"||S===null)throw new Error($r(11));function C(){S.next&&S.next(d())}C();var A=v(C);return{unsubscribe:A}}},m[wI]=function(){return this},m}return f({type:CI.INIT}),r={dispatch:f,subscribe:p,getState:d,replaceReducer:h},r[wI]=g,r}function _I(e,t){return function(){return t(e.apply(this,arguments))}}function kI(e,t){if(typeof e=="function")return _I(e,t);if(typeof e!="object"||e===null)throw new Error($r(16));var n={};for(var r in e){var i=e[r];typeof i=="function"&&(n[r]=_I(i,t))}return n}function cO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function mie(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),o=function(){throw new Error($r(15))},a={getState:i.getState,dispatch:function(){return o.apply(void 0,arguments)}},s=t.map(function(l){return l(a)});return o=cO.apply(void 0,s)(i.dispatch),bI(bI({},i),{},{dispatch:o})}}}var uO={exports:{}},vie="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",xie=vie,yie=xie;function dO(){}function pO(){}pO.resetWarningCache=dO;var bie=function(){function e(r,i,o,a,s,l){if(l!==yie){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:pO,resetWarningCache:dO};return n.PropTypes=n,n};uO.exports=bie();var _v=uO.exports,hO=ut.createContext(null);function wie(e){e()}var fO=wie,Sie=function(t){return fO=t},Cie=function(){return fO};function _ie(){var e=Cie(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e(function(){for(var i=t;i;)i.callback(),i=i.next})},get:function(){for(var i=[],o=t;o;)i.push(o),o=o.next;return i},subscribe:function(i){var o=!0,a=n={callback:i,next:null,prev:n};return a.prev?a.prev.next=a:t=a,function(){!o||t===null||(o=!1,a.next?a.next.prev=a.prev:n=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var EI={notify:function(){},get:function(){return[]}};function gO(e,t){var n,r=EI;function i(p){return l(),r.subscribe(p)}function o(){r.notify()}function a(){d.onStateChange&&d.onStateChange()}function s(){return!!n}function l(){n||(n=t?t.addNestedSub(a):e.subscribe(a),r=_ie())}function c(){n&&(n(),n=void 0,r.clear(),r=EI)}var d={addNestedSub:i,notifyNestedSubs:o,handleChangeWrapper:a,isSubscribed:s,trySubscribe:l,tryUnsubscribe:c,getListeners:function(){return r}};return d}var mO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?D.useLayoutEffect:D.useEffect;function kie(e){var t=e.store,n=e.context,r=e.children,i=D.useMemo(function(){var s=gO(t);return{store:t,subscription:s}},[t]),o=D.useMemo(function(){return t.getState()},[t]);mO(function(){var s=i.subscription;return s.onStateChange=s.notifyNestedSubs,s.trySubscribe(),o!==t.getState()&&s.notifyNestedSubs(),function(){s.tryUnsubscribe(),s.onStateChange=null}},[i,o]);var a=n||hO;return ut.createElement(a.Provider,{value:i},r)}function Qm(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var vO={exports:{}},Wt={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kv=60103,Ev=60106,yh=60107,bh=60108,wh=60114,Sh=60109,Ch=60110,_h=60112,kh=60113,NS=60120,Eh=60115,Th=60116,xO=60121,yO=60122,bO=60117,wO=60129,SO=60131;if(typeof Symbol=="function"&&Symbol.for){var Gn=Symbol.for;kv=Gn("react.element"),Ev=Gn("react.portal"),yh=Gn("react.fragment"),bh=Gn("react.strict_mode"),wh=Gn("react.profiler"),Sh=Gn("react.provider"),Ch=Gn("react.context"),_h=Gn("react.forward_ref"),kh=Gn("react.suspense"),NS=Gn("react.suspense_list"),Eh=Gn("react.memo"),Th=Gn("react.lazy"),xO=Gn("react.block"),yO=Gn("react.server.block"),bO=Gn("react.fundamental"),wO=Gn("react.debug_trace_mode"),SO=Gn("react.legacy_hidden")}function no(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case kv:switch(e=e.type,e){case yh:case wh:case bh:case kh:case NS:return e;default:switch(e=e&&e.$$typeof,e){case Ch:case _h:case Th:case Eh:case Sh:return e;default:return t}}case Ev:return t}}}var Eie=Sh,Tie=kv,Iie=_h,Aie=yh,Pie=Th,Die=Eh,Rie=Ev,Nie=wh,Mie=bh,Oie=kh;Wt.ContextConsumer=Ch;Wt.ContextProvider=Eie;Wt.Element=Tie;Wt.ForwardRef=Iie;Wt.Fragment=Aie;Wt.Lazy=Pie;Wt.Memo=Die;Wt.Portal=Rie;Wt.Profiler=Nie;Wt.StrictMode=Mie;Wt.Suspense=Oie;Wt.isAsyncMode=function(){return!1};Wt.isConcurrentMode=function(){return!1};Wt.isContextConsumer=function(e){return no(e)===Ch};Wt.isContextProvider=function(e){return no(e)===Sh};Wt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===kv};Wt.isForwardRef=function(e){return no(e)===_h};Wt.isFragment=function(e){return no(e)===yh};Wt.isLazy=function(e){return no(e)===Th};Wt.isMemo=function(e){return no(e)===Eh};Wt.isPortal=function(e){return no(e)===Ev};Wt.isProfiler=function(e){return no(e)===wh};Wt.isStrictMode=function(e){return no(e)===bh};Wt.isSuspense=function(e){return no(e)===kh};Wt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===yh||e===wh||e===wO||e===bh||e===kh||e===NS||e===SO||typeof e=="object"&&e!==null&&(e.$$typeof===Th||e.$$typeof===Eh||e.$$typeof===Sh||e.$$typeof===Ch||e.$$typeof===_h||e.$$typeof===bO||e.$$typeof===xO||e[0]===yO)};Wt.typeOf=no;vO.exports=Wt;var $ie=vO.exports,Lie=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Fie=["reactReduxForwardedRef"],Bie=[],zie=[null,null];function Vie(e,t){var n=e[1];return[t.payload,n+1]}function TI(e,t,n){mO(function(){return e.apply(void 0,t)},n)}function jie(e,t,n,r,i,o,a){e.current=r,t.current=i,n.current=!1,o.current&&(o.current=null,a())}function Uie(e,t,n,r,i,o,a,s,l,c){if(e){var d=!1,p=null,f=function(){if(!d){var m=t.getState(),v,w;try{v=r(m,i.current)}catch(S){w=S,p=S}w||(p=null),v===o.current?a.current||l():(o.current=v,s.current=v,a.current=!0,c({type:"STORE_UPDATED",payload:{error:w}}))}};n.onStateChange=f,n.trySubscribe(),f();var h=function(){if(d=!0,n.tryUnsubscribe(),n.onStateChange=null,p)throw p};return h}}var qie=function(){return[null,0]};function Wie(e,t){t===void 0&&(t={});var n=t,r=n.getDisplayName,i=r===void 0?function(C){return"ConnectAdvanced("+C+")"}:r,o=n.methodName,a=o===void 0?"connectAdvanced":o,s=n.renderCountProp,l=s===void 0?void 0:s,c=n.shouldHandleStateChanges,d=c===void 0?!0:c,p=n.storeKey,f=p===void 0?"store":p;n.withRef;var h=n.forwardRef,g=h===void 0?!1:h,m=n.context,v=m===void 0?hO:m,w=Qm(n,Lie),S=v;return function(A){var _=A.displayName||A.name||"Component",I=i(_),E=Ye({},w,{getDisplayName:i,methodName:a,renderCountProp:l,shouldHandleStateChanges:d,storeKey:f,displayName:I,wrappedComponentName:_,WrappedComponent:A}),k=w.pure;function T(L){return e(L.dispatch,E)}var P=k?D.useMemo:function(L){return L()};function O(L){var B=D.useMemo(function(){var He=L.reactReduxForwardedRef,Ue=Qm(L,Fie);return[L.context,He,Ue]},[L]),V=B[0],j=B[1],z=B[2],H=D.useMemo(function(){return V&&V.Consumer&&$ie.isContextConsumer(ut.createElement(V.Consumer,null))?V:S},[V,S]),J=D.useContext(H),de=!!L.store&&!!L.store.getState&&!!L.store.dispatch;J&&J.store;var ae=de?L.store:J.store,Ce=D.useMemo(function(){return T(ae)},[ae]),te=D.useMemo(function(){if(!d)return zie;var He=gO(ae,de?null:J.subscription),Ue=He.notifyNestedSubs.bind(He);return[He,Ue]},[ae,de,J]),G=te[0],K=te[1],me=D.useMemo(function(){return de?J:Ye({},J,{subscription:G})},[de,J,G]),ye=D.useReducer(Vie,Bie,qie),ee=ye[0],oe=ee[0],he=ye[1];if(oe&&oe.error)throw oe.error;var we=D.useRef(),W=D.useRef(z),ge=D.useRef(),fe=D.useRef(!1),ve=P(function(){return ge.current&&z===W.current?ge.current:Ce(ae.getState(),z)},[ae,oe,z]);TI(jie,[W,we,fe,z,ve,ge,K]),TI(Uie,[d,ae,G,Ce,W,we,fe,ge,K,he],[ae,G,Ce]);var ce=D.useMemo(function(){return ut.createElement(A,Ye({},ve,{ref:j}))},[j,A,ve]),De=D.useMemo(function(){return d?ut.createElement(H.Provider,{value:me},ce):ce},[H,ce,me]);return De}var R=k?ut.memo(O):O;if(R.WrappedComponent=A,R.displayName=O.displayName=I,g){var N=ut.forwardRef(function(B,V){return ut.createElement(R,Ye({},B,{reactReduxForwardedRef:V}))});return N.displayName=I,N.WrappedComponent=A,G_(N,A)}return G_(R,A)}}function II(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Fy(e,t){if(II(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!II(e[n[i]],t[n[i]]))return!1;return!0}function Hie(e,t){var n={},r=function(a){var s=e[a];typeof s=="function"&&(n[a]=function(){return t(s.apply(void 0,arguments))})};for(var i in e)r(i);return n}function MS(e){return function(n,r){var i=e(n,r);function o(){return i}return o.dependsOnOwnProps=!1,o}}function AI(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function CO(e,t){return function(r,i){i.displayName;var o=function(s,l){return o.dependsOnOwnProps?o.mapToProps(s,l):o.mapToProps(s)};return o.dependsOnOwnProps=!0,o.mapToProps=function(s,l){o.mapToProps=e,o.dependsOnOwnProps=AI(e);var c=o(s,l);return typeof c=="function"&&(o.mapToProps=c,o.dependsOnOwnProps=AI(c),c=o(s,l)),c},o}}function Gie(e){return typeof e=="function"?CO(e):void 0}function Yie(e){return e?void 0:MS(function(t){return{dispatch:t}})}function Kie(e){return e&&typeof e=="object"?MS(function(t){return Hie(e,t)}):void 0}const Xie=[Gie,Yie,Kie];function Qie(e){return typeof e=="function"?CO(e):void 0}function Jie(e){return e?void 0:MS(function(){return{}})}const Zie=[Qie,Jie];function eoe(e,t,n){return Ye({},n,e,t)}function toe(e){return function(n,r){r.displayName;var i=r.pure,o=r.areMergedPropsEqual,a=!1,s;return function(c,d,p){var f=e(c,d,p);return a?(!i||!o(f,s))&&(s=f):(a=!0,s=f),s}}}function noe(e){return typeof e=="function"?toe(e):void 0}function roe(e){return e?void 0:function(){return eoe}}const ioe=[noe,roe];var ooe=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function aoe(e,t,n,r){return function(o,a){return n(e(o,a),t(r,a),a)}}function soe(e,t,n,r,i){var o=i.areStatesEqual,a=i.areOwnPropsEqual,s=i.areStatePropsEqual,l=!1,c,d,p,f,h;function g(C,A){return c=C,d=A,p=e(c,d),f=t(r,d),h=n(p,f,d),l=!0,h}function m(){return p=e(c,d),t.dependsOnOwnProps&&(f=t(r,d)),h=n(p,f,d),h}function v(){return e.dependsOnOwnProps&&(p=e(c,d)),t.dependsOnOwnProps&&(f=t(r,d)),h=n(p,f,d),h}function w(){var C=e(c,d),A=!s(C,p);return p=C,A&&(h=n(p,f,d)),h}function S(C,A){var _=!a(A,d),I=!o(C,c,A,d);return c=C,d=A,_&&I?m():_?v():I?w():h}return function(A,_){return l?S(A,_):g(A,_)}}function loe(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,o=Qm(t,ooe),a=n(e,o),s=r(e,o),l=i(e,o),c=o.pure?soe:aoe;return c(a,s,l,e,o)}var coe=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function By(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(o,a){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+a.wrappedComponentName+".")}}function uoe(e,t){return e===t}function doe(e){var t=e===void 0?{}:e,n=t.connectHOC,r=n===void 0?Wie:n,i=t.mapStateToPropsFactories,o=i===void 0?Zie:i,a=t.mapDispatchToPropsFactories,s=a===void 0?Xie:a,l=t.mergePropsFactories,c=l===void 0?ioe:l,d=t.selectorFactory,p=d===void 0?loe:d;return function(h,g,m,v){v===void 0&&(v={});var w=v,S=w.pure,C=S===void 0?!0:S,A=w.areStatesEqual,_=A===void 0?uoe:A,I=w.areOwnPropsEqual,E=I===void 0?Fy:I,k=w.areStatePropsEqual,T=k===void 0?Fy:k,P=w.areMergedPropsEqual,O=P===void 0?Fy:P,R=Qm(w,coe),N=By(h,o,"mapStateToProps"),L=By(g,s,"mapDispatchToProps"),B=By(m,c,"mergeProps");return r(p,Ye({methodName:"connect",getDisplayName:function(j){return"Connect("+j+")"},shouldHandleStateChanges:!!h,initMapStateToProps:N,initMapDispatchToProps:L,initMergeProps:B,pure:C,areStatesEqual:_,areOwnPropsEqual:E,areStatePropsEqual:T,areMergedPropsEqual:O},R))}}const _O=doe();Sie(ru.unstable_batchedUpdates);function poe(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function kO(e,t){var n=D.useState(function(){return{inputs:t,result:e()}})[0],r=D.useRef(!0),i=D.useRef(n),o=r.current||!!(t&&i.current.inputs&&poe(t,i.current.inputs)),a=o?i.current:{inputs:t,result:e()};return D.useEffect(function(){r.current=!1,i.current=a},[a]),a.result}function hoe(e,t){return kO(function(){return e},t)}var kt=kO,qe=hoe,foe="Invariant failed";function goe(e,t){throw new Error(foe)}var Ki=function(t){var n=t.top,r=t.right,i=t.bottom,o=t.left,a=r-o,s=i-n,l={top:n,right:r,bottom:i,left:o,width:a,height:s,x:o,y:n,center:{x:(r+o)/2,y:(i+n)/2}};return l},OS=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},PI=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},moe=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},zy={top:0,right:0,bottom:0,left:0},$S=function(t){var n=t.borderBox,r=t.margin,i=r===void 0?zy:r,o=t.border,a=o===void 0?zy:o,s=t.padding,l=s===void 0?zy:s,c=Ki(OS(n,i)),d=Ki(PI(n,a)),p=Ki(PI(d,l));return{marginBox:c,borderBox:Ki(n),paddingBox:d,contentBox:p,margin:i,border:a,padding:l}},_i=function(t){var n=t.slice(0,-2),r=t.slice(-2);if(r!=="px")return 0;var i=Number(n);return isNaN(i)&&goe(),i},voe=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Jm=function(t,n){var r=t.borderBox,i=t.border,o=t.margin,a=t.padding,s=moe(r,n);return $S({borderBox:s,border:i,margin:o,padding:a})},Zm=function(t,n){return n===void 0&&(n=voe()),Jm(t,n)},EO=function(t,n){var r={top:_i(n.marginTop),right:_i(n.marginRight),bottom:_i(n.marginBottom),left:_i(n.marginLeft)},i={top:_i(n.paddingTop),right:_i(n.paddingRight),bottom:_i(n.paddingBottom),left:_i(n.paddingLeft)},o={top:_i(n.borderTopWidth),right:_i(n.borderRightWidth),bottom:_i(n.borderBottomWidth),left:_i(n.borderLeftWidth)};return $S({borderBox:t,margin:r,padding:i,border:o})},TO=function(t){var n=t.getBoundingClientRect(),r=window.getComputedStyle(t);return EO(n,r)},DI=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function xoe(e,t){return!!(e===t||DI(e)&&DI(t))}function yoe(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!xoe(e[n],t[n]))return!1;return!0}function Vn(e,t){t===void 0&&(t=yoe);var n,r=[],i,o=!1;function a(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return o&&n===this&&t(s,r)||(i=e.apply(this,s),o=!0,n=this,r=s),i}return a}var Op=function(t){var n=[],r=null,i=function(){for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];n=s,!r&&(r=requestAnimationFrame(function(){r=null,t.apply(void 0,n)}))};return i.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},i};function IO(e,t){}IO.bind(null,"warn");IO.bind(null,"error");function os(){}function boe(e,t){return Ye({},e,{},t)}function Di(e,t,n){var r=t.map(function(i){var o=boe(n,i.options);return e.addEventListener(i.eventName,i.fn,o),function(){e.removeEventListener(i.eventName,i.fn,o)}});return function(){r.forEach(function(o){o()})}}var woe="Invariant failed";function e0(e){this.message=e}e0.prototype.toString=function(){return this.message};function Se(e,t){throw new e0(woe)}var Soe=function(e){sO(t,e);function t(){for(var r,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o))||this,r.callbacks=null,r.unbind=os,r.onWindowError=function(s){var l=r.getCallbacks();l.isDragging()&&l.tryAbort();var c=s.error;c instanceof e0&&s.preventDefault()},r.getCallbacks=function(){if(!r.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return r.callbacks},r.setCallbacks=function(s){r.callbacks=s},r}var n=t.prototype;return n.componentDidMount=function(){this.unbind=Di(window,[{eventName:"error",fn:this.onWindowError}])},n.componentDidCatch=function(i){if(i instanceof e0){this.setState({});return}throw i},n.componentWillUnmount=function(){this.unbind()},n.render=function(){return this.props.children(this.setCallbacks)},t}(ut.Component),Coe=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,t0=function(t){return t+1},_oe=function(t){return`
  You have lifted an item in position `+t0(t.source.index)+`
`},AO=function(t,n){var r=t.droppableId===n.droppableId,i=t0(t.index),o=t0(n.index);return r?`
      You have moved the item from position `+i+`
      to position `+o+`
    `:`
    You have moved the item from position `+i+`
    in list `+t.droppableId+`
    to list `+n.droppableId+`
    in position `+o+`
  `},PO=function(t,n,r){var i=n.droppableId===r.droppableId;return i?`
      The item `+t+`
      has been combined with `+r.draggableId:`
      The item `+t+`
      in list `+n.droppableId+`
      has been combined with `+r.draggableId+`
      in list `+r.droppableId+`
    `},koe=function(t){var n=t.destination;if(n)return AO(t.source,n);var r=t.combine;return r?PO(t.draggableId,t.source,r):"You are over an area that cannot be dropped on"},RI=function(t){return`
  The item has returned to its starting position
  of `+t0(t.index)+`
`},Eoe=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+RI(t.source)+`
    `;var n=t.destination,r=t.combine;return n?`
      You have dropped the item.
      `+AO(t.source,n)+`
    `:r?`
      You have dropped the item.
      `+PO(t.draggableId,t.source,r)+`
    `:`
    The item has been dropped while not over a drop area.
    `+RI(t.source)+`
  `},Yg={dragHandleUsageInstructions:Coe,onDragStart:_oe,onDragUpdate:koe,onDragEnd:Eoe},jn={x:0,y:0},nr=function(t,n){return{x:t.x+n.x,y:t.y+n.y}},ri=function(t,n){return{x:t.x-n.x,y:t.y-n.y}},as=function(t,n){return t.x===n.x&&t.y===n.y},fu=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},yl=function(t,n,r){var i;return r===void 0&&(r=0),i={},i[t]=n,i[t==="x"?"y":"x"]=r,i},$p=function(t,n){return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))},NI=function(t,n){return Math.min.apply(Math,n.map(function(r){return $p(t,r)}))},DO=function(t){return function(n){return{x:t(n.x),y:t(n.y)}}},Toe=function(e,t){var n=Ki({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n},Ih=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},MI=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},Ioe={top:0,right:0,bottom:0,left:0},Aoe=function(t,n){return n?Ih(t,n.scroll.diff.displacement):t},Poe=function(t,n,r){if(r&&r.increasedBy){var i;return Ye({},t,(i={},i[n.end]=t[n.end]+r.increasedBy[n.line],i))}return t},Doe=function(t,n){return n&&n.shouldClipSubject?Toe(n.pageMarginBox,t):Ki(t)},jc=function(e){var t=e.page,n=e.withPlaceholder,r=e.axis,i=e.frame,o=Aoe(t.marginBox,i),a=Poe(o,r,n),s=Doe(a,i);return{page:t,withPlaceholder:n,active:s}},LS=function(e,t){e.frame||Se();var n=e.frame,r=ri(t,n.scroll.initial),i=fu(r),o=Ye({},n,{scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:i},max:n.scroll.max}}),a=jc({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:o}),s=Ye({},e,{frame:o,subject:a});return s};function n0(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function FS(e,t){if(e.findIndex)return e.findIndex(t);for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function Rs(e,t){if(e.find)return e.find(t);var n=FS(e,t);if(n!==-1)return e[n]}function RO(e){return Array.prototype.slice.call(e)}var NO=Vn(function(e){return e.reduce(function(t,n){return t[n.descriptor.id]=n,t},{})}),MO=Vn(function(e){return e.reduce(function(t,n){return t[n.descriptor.id]=n,t},{})}),Tv=Vn(function(e){return n0(e)}),Roe=Vn(function(e){return n0(e)}),gu=Vn(function(e,t){var n=Roe(t).filter(function(r){return e===r.descriptor.droppableId}).sort(function(r,i){return r.descriptor.index-i.descriptor.index});return n});function BS(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Iv(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Av=Vn(function(e,t){return t.filter(function(n){return n.descriptor.id!==e.descriptor.id})}),Noe=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,i=e.insideDestination,o=e.previousImpact;if(!r.isCombineEnabled)return null;var a=BS(o);if(!a)return null;function s(m){var v={type:"COMBINE",combine:{draggableId:m,droppableId:r.descriptor.id}};return Ye({},o,{at:v})}var l=o.displaced.all,c=l.length?l[0]:null;if(t)return c?s(c):null;var d=Av(n,i);if(!c){if(!d.length)return null;var p=d[d.length-1];return s(p.descriptor.id)}var f=FS(d,function(m){return m.descriptor.id===c});f===-1&&Se();var h=f-1;if(h<0)return null;var g=d[h];return s(g.descriptor.id)},mu=function(e,t){return e.descriptor.droppableId===t.descriptor.id},OO={point:jn,value:0},Lp={invisible:{},visible:{},all:[]},Moe={displaced:Lp,displacedBy:OO,at:null},Mi=function(e,t){return function(n){return e<=n&&n<=t}},$O=function(e){var t=Mi(e.top,e.bottom),n=Mi(e.left,e.right);return function(r){var i=t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right);if(i)return!0;var o=t(r.top)||t(r.bottom),a=n(r.left)||n(r.right),s=o&&a;if(s)return!0;var l=r.top<e.top&&r.bottom>e.bottom,c=r.left<e.left&&r.right>e.right,d=l&&c;if(d)return!0;var p=l&&a||c&&o;return p}},Ooe=function(e){var t=Mi(e.top,e.bottom),n=Mi(e.left,e.right);return function(r){var i=t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right);return i}},zS={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},LO={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},$oe=function(e){return function(t){var n=Mi(t.top,t.bottom),r=Mi(t.left,t.right);return function(i){return e===zS?n(i.top)&&n(i.bottom):r(i.left)&&r(i.right)}}},Loe=function(t,n){var r=n.frame?n.frame.scroll.diff.displacement:jn;return Ih(t,r)},Foe=function(t,n,r){return n.subject.active?r(n.subject.active)(t):!1},Boe=function(t,n,r){return r(n)(t)},VS=function(t){var n=t.target,r=t.destination,i=t.viewport,o=t.withDroppableDisplacement,a=t.isVisibleThroughFrameFn,s=o?Loe(n,r):n;return Foe(s,r,a)&&Boe(s,i,a)},zoe=function(t){return VS(Ye({},t,{isVisibleThroughFrameFn:$O}))},FO=function(t){return VS(Ye({},t,{isVisibleThroughFrameFn:Ooe}))},Voe=function(t){return VS(Ye({},t,{isVisibleThroughFrameFn:$oe(t.destination.axis)}))},joe=function(t,n,r){if(typeof r=="boolean")return r;if(!n)return!0;var i=n.invisible,o=n.visible;if(i[t])return!1;var a=o[t];return a?a.shouldAnimate:!0};function Uoe(e,t){var n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return Ki(OS(n,r))}function Fp(e){var t=e.afterDragging,n=e.destination,r=e.displacedBy,i=e.viewport,o=e.forceShouldAnimate,a=e.last;return t.reduce(function(l,c){var d=Uoe(c,r),p=c.descriptor.id;l.all.push(p);var f=zoe({target:d,destination:n,viewport:i,withDroppableDisplacement:!0});if(!f)return l.invisible[c.descriptor.id]=!0,l;var h=joe(p,a,o),g={draggableId:p,shouldAnimate:h};return l.visible[p]=g,l},{all:[],visible:{},invisible:{}})}function qoe(e,t){if(!e.length)return 0;var n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function OI(e){var t=e.insideDestination,n=e.inHomeList,r=e.displacedBy,i=e.destination,o=qoe(t,{inHomeList:n});return{displaced:Lp,displacedBy:r,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:o}}}}function r0(e){var t=e.draggable,n=e.insideDestination,r=e.destination,i=e.viewport,o=e.displacedBy,a=e.last,s=e.index,l=e.forceShouldAnimate,c=mu(t,r);if(s==null)return OI({insideDestination:n,inHomeList:c,displacedBy:o,destination:r});var d=Rs(n,function(m){return m.descriptor.index===s});if(!d)return OI({insideDestination:n,inHomeList:c,displacedBy:o,destination:r});var p=Av(t,n),f=n.indexOf(d),h=p.slice(f),g=Fp({afterDragging:h,destination:r,displacedBy:o,last:a,viewport:i.frame,forceShouldAnimate:l});return{displaced:g,displacedBy:o,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:s}}}}function xs(e,t){return!!t.effected[e]}var Woe=function(e){var t=e.isMovingForward,n=e.destination,r=e.draggables,i=e.combine,o=e.afterCritical;if(!n.isCombineEnabled)return null;var a=i.draggableId,s=r[a],l=s.descriptor.index,c=xs(a,o);return c?t?l:l-1:t?l+1:l},Hoe=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.insideDestination,i=e.location;if(!r.length)return null;var o=i.index,a=t?o+1:o-1,s=r[0].descriptor.index,l=r[r.length-1].descriptor.index,c=n?l:l+1;return a<s||a>c?null:a},Goe=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.draggable,i=e.draggables,o=e.destination,a=e.insideDestination,s=e.previousImpact,l=e.viewport,c=e.afterCritical,d=s.at;if(d||Se(),d.type==="REORDER"){var p=Hoe({isMovingForward:t,isInHomeList:n,location:d.destination,insideDestination:a});return p==null?null:r0({draggable:r,insideDestination:a,destination:o,viewport:l,last:s.displaced,displacedBy:s.displacedBy,index:p})}var f=Woe({isMovingForward:t,destination:o,displaced:s.displaced,draggables:i,combine:d.combine,afterCritical:c});return f==null?null:r0({draggable:r,insideDestination:a,destination:o,viewport:l,last:s.displaced,displacedBy:s.displacedBy,index:f})},Yoe=function(e){var t=e.displaced,n=e.afterCritical,r=e.combineWith,i=e.displacedBy,o=!!(t.visible[r]||t.invisible[r]);return xs(r,n)?o?jn:fu(i.point):o?i.point:jn},Koe=function(e){var t=e.afterCritical,n=e.impact,r=e.draggables,i=Iv(n);i||Se();var o=i.draggableId,a=r[o].page.borderBox.center,s=Yoe({displaced:n.displaced,afterCritical:t,combineWith:o,displacedBy:n.displacedBy});return nr(a,s)},BO=function(t,n){return n.margin[t.start]+n.borderBox[t.size]/2},Xoe=function(t,n){return n.margin[t.end]+n.borderBox[t.size]/2},jS=function(t,n,r){return n[t.crossAxisStart]+r.margin[t.crossAxisStart]+r.borderBox[t.crossAxisSize]/2},$I=function(t){var n=t.axis,r=t.moveRelativeTo,i=t.isMoving;return yl(n.line,r.marginBox[n.end]+BO(n,i),jS(n,r.marginBox,i))},LI=function(t){var n=t.axis,r=t.moveRelativeTo,i=t.isMoving;return yl(n.line,r.marginBox[n.start]-Xoe(n,i),jS(n,r.marginBox,i))},Qoe=function(t){var n=t.axis,r=t.moveInto,i=t.isMoving;return yl(n.line,r.contentBox[n.start]+BO(n,i),jS(n,r.contentBox,i))},Joe=function(e){var t=e.impact,n=e.draggable,r=e.draggables,i=e.droppable,o=e.afterCritical,a=gu(i.descriptor.id,r),s=n.page,l=i.axis;if(!a.length)return Qoe({axis:l,moveInto:i.page,isMoving:s});var c=t.displaced,d=t.displacedBy,p=c.all[0];if(p){var f=r[p];if(xs(p,o))return LI({axis:l,moveRelativeTo:f.page,isMoving:s});var h=Jm(f.page,d.point);return LI({axis:l,moveRelativeTo:h,isMoving:s})}var g=a[a.length-1];if(g.descriptor.id===n.descriptor.id)return s.borderBox.center;if(xs(g.descriptor.id,o)){var m=Jm(g.page,fu(o.displacedBy.point));return $I({axis:l,moveRelativeTo:m,isMoving:s})}return $I({axis:l,moveRelativeTo:g.page,isMoving:s})},I2=function(e,t){var n=e.frame;return n?nr(t,n.scroll.diff.displacement):t},Zoe=function(t){var n=t.impact,r=t.draggable,i=t.droppable,o=t.draggables,a=t.afterCritical,s=r.page.borderBox.center,l=n.at;return!i||!l?s:l.type==="REORDER"?Joe({impact:n,draggable:r,draggables:o,droppable:i,afterCritical:a}):Koe({impact:n,draggables:o,afterCritical:a})},Pv=function(e){var t=Zoe(e),n=e.droppable,r=n?I2(n,t):t;return r},zO=function(e,t){var n=ri(t,e.scroll.initial),r=fu(n),i=Ki({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),o={frame:i,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}};return o};function FI(e,t){return e.map(function(n){return t[n]})}function eae(e,t){for(var n=0;n<t.length;n++){var r=t[n].visible[e];if(r)return r}return null}var tae=function(e){var t=e.impact,n=e.viewport,r=e.destination,i=e.draggables,o=e.maxScrollChange,a=zO(n,nr(n.scroll.current,o)),s=r.frame?LS(r,nr(r.frame.scroll.current,o)):r,l=t.displaced,c=Fp({afterDragging:FI(l.all,i),destination:r,displacedBy:t.displacedBy,viewport:a.frame,last:l,forceShouldAnimate:!1}),d=Fp({afterDragging:FI(l.all,i),destination:s,displacedBy:t.displacedBy,viewport:n.frame,last:l,forceShouldAnimate:!1}),p={},f={},h=[l,c,d];l.all.forEach(function(m){var v=eae(m,h);if(v){f[m]=v;return}p[m]=!0});var g=Ye({},t,{displaced:{all:l.all,invisible:p,visible:f}});return g},nae=function(e,t){return nr(e.scroll.diff.displacement,t)},US=function(e){var t=e.pageBorderBoxCenter,n=e.draggable,r=e.viewport,i=nae(r,t),o=ri(i,n.page.borderBox.center);return nr(n.client.borderBox.center,o)},VO=function(e){var t=e.draggable,n=e.destination,r=e.newPageBorderBoxCenter,i=e.viewport,o=e.withDroppableDisplacement,a=e.onlyOnMainAxis,s=a===void 0?!1:a,l=ri(r,t.page.borderBox.center),c=Ih(t.page.borderBox,l),d={target:c,destination:n,withDroppableDisplacement:o,viewport:i};return s?Voe(d):FO(d)},rae=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,i=e.draggables,o=e.previousImpact,a=e.viewport,s=e.previousPageBorderBoxCenter,l=e.previousClientSelection,c=e.afterCritical;if(!r.isEnabled)return null;var d=gu(r.descriptor.id,i),p=mu(n,r),f=Noe({isMovingForward:t,draggable:n,destination:r,insideDestination:d,previousImpact:o})||Goe({isMovingForward:t,isInHomeList:p,draggable:n,draggables:i,destination:r,insideDestination:d,previousImpact:o,viewport:a,afterCritical:c});if(!f)return null;var h=Pv({impact:f,draggable:n,droppable:r,draggables:i,afterCritical:c}),g=VO({draggable:n,destination:r,newPageBorderBoxCenter:h,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(g){var m=US({pageBorderBoxCenter:h,draggable:n,viewport:a});return{clientSelection:m,impact:f,scrollJumpRequest:null}}var v=ri(h,s),w=tae({impact:f,viewport:a,destination:r,draggables:i,maxScrollChange:v});return{clientSelection:l,impact:w,scrollJumpRequest:v}},Cr=function(t){var n=t.subject.active;return n||Se(),n},iae=function(e){var t=e.isMovingForward,n=e.pageBorderBoxCenter,r=e.source,i=e.droppables,o=e.viewport,a=r.subject.active;if(!a)return null;var s=r.axis,l=Mi(a[s.start],a[s.end]),c=Tv(i).filter(function(p){return p!==r}).filter(function(p){return p.isEnabled}).filter(function(p){return!!p.subject.active}).filter(function(p){return $O(o.frame)(Cr(p))}).filter(function(p){var f=Cr(p);return t?a[s.crossAxisEnd]<f[s.crossAxisEnd]:f[s.crossAxisStart]<a[s.crossAxisStart]}).filter(function(p){var f=Cr(p),h=Mi(f[s.start],f[s.end]);return l(f[s.start])||l(f[s.end])||h(a[s.start])||h(a[s.end])}).sort(function(p,f){var h=Cr(p)[s.crossAxisStart],g=Cr(f)[s.crossAxisStart];return t?h-g:g-h}).filter(function(p,f,h){return Cr(p)[s.crossAxisStart]===Cr(h[0])[s.crossAxisStart]});if(!c.length)return null;if(c.length===1)return c[0];var d=c.filter(function(p){var f=Mi(Cr(p)[s.start],Cr(p)[s.end]);return f(n[s.line])});return d.length===1?d[0]:d.length>1?d.sort(function(p,f){return Cr(p)[s.start]-Cr(f)[s.start]})[0]:c.sort(function(p,f){var h=NI(n,MI(Cr(p))),g=NI(n,MI(Cr(f)));return h!==g?h-g:Cr(p)[s.start]-Cr(f)[s.start]})[0]},BI=function(t,n){var r=t.page.borderBox.center;return xs(t.descriptor.id,n)?ri(r,n.displacedBy.point):r},oae=function(t,n){var r=t.page.borderBox;return xs(t.descriptor.id,n)?Ih(r,fu(n.displacedBy.point)):r},aae=function(e){var t=e.pageBorderBoxCenter,n=e.viewport,r=e.destination,i=e.insideDestination,o=e.afterCritical,a=i.filter(function(s){return FO({target:oae(s,o),destination:r,viewport:n.frame,withDroppableDisplacement:!0})}).sort(function(s,l){var c=$p(t,I2(r,BI(s,o))),d=$p(t,I2(r,BI(l,o)));return c<d?-1:d<c?1:s.descriptor.index-l.descriptor.index});return a[0]||null},Ah=Vn(function(t,n){var r=n[t.line];return{value:r,point:yl(t.line,r)}}),sae=function(t,n,r){var i=t.axis;if(t.descriptor.mode==="virtual")return yl(i.line,n[i.line]);var o=t.subject.page.contentBox[i.size],a=gu(t.descriptor.id,r),s=a.reduce(function(d,p){return d+p.client.marginBox[i.size]},0),l=s+n[i.line],c=l-o;return c<=0?null:yl(i.line,c)},jO=function(t,n){return Ye({},t,{scroll:Ye({},t.scroll,{max:n})})},UO=function(t,n,r){var i=t.frame;mu(n,t)&&Se(),t.subject.withPlaceholder&&Se();var o=Ah(t.axis,n.displaceBy).point,a=sae(t,o,r),s={placeholderSize:o,increasedBy:a,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!i){var l=jc({page:t.subject.page,withPlaceholder:s,axis:t.axis,frame:t.frame});return Ye({},t,{subject:l})}var c=a?nr(i.scroll.max,a):i.scroll.max,d=jO(i,c),p=jc({page:t.subject.page,withPlaceholder:s,axis:t.axis,frame:d});return Ye({},t,{subject:p,frame:d})},lae=function(t){var n=t.subject.withPlaceholder;n||Se();var r=t.frame;if(!r){var i=jc({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return Ye({},t,{subject:i})}var o=n.oldFrameMaxScroll;o||Se();var a=jO(r,o),s=jc({page:t.subject.page,axis:t.axis,frame:a,withPlaceholder:null});return Ye({},t,{subject:s,frame:a})},cae=function(e){var t=e.previousPageBorderBoxCenter,n=e.moveRelativeTo,r=e.insideDestination,i=e.draggable,o=e.draggables,a=e.destination,s=e.viewport,l=e.afterCritical;if(!n){if(r.length)return null;var c={displaced:Lp,displacedBy:OO,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},d=Pv({impact:c,draggable:i,droppable:a,draggables:o,afterCritical:l}),p=mu(i,a)?a:UO(a,i,o),f=VO({draggable:i,destination:p,newPageBorderBoxCenter:d,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return f?c:null}var h=t[a.axis.line]<=n.page.borderBox.center[a.axis.line],g=function(){var v=n.descriptor.index;return n.descriptor.id===i.descriptor.id||h?v:v+1}(),m=Ah(a.axis,i.displaceBy);return r0({draggable:i,insideDestination:r,destination:a,viewport:s,displacedBy:m,last:Lp,index:g})},uae=function(e){var t=e.isMovingForward,n=e.previousPageBorderBoxCenter,r=e.draggable,i=e.isOver,o=e.draggables,a=e.droppables,s=e.viewport,l=e.afterCritical,c=iae({isMovingForward:t,pageBorderBoxCenter:n,source:i,droppables:a,viewport:s});if(!c)return null;var d=gu(c.descriptor.id,o),p=aae({pageBorderBoxCenter:n,viewport:s,destination:c,insideDestination:d,afterCritical:l}),f=cae({previousPageBorderBoxCenter:n,destination:c,draggable:r,draggables:o,moveRelativeTo:p,insideDestination:d,viewport:s,afterCritical:l});if(!f)return null;var h=Pv({impact:f,draggable:r,droppable:c,draggables:o,afterCritical:l}),g=US({pageBorderBoxCenter:h,draggable:r,viewport:s});return{clientSelection:g,impact:f,scrollJumpRequest:null}},li=function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},dae=function(t,n){var r=li(t);return r?n[r]:null},pae=function(e){var t=e.state,n=e.type,r=dae(t.impact,t.dimensions.droppables),i=!!r,o=t.dimensions.droppables[t.critical.droppable.id],a=r||o,s=a.axis.direction,l=s==="vertical"&&(n==="MOVE_UP"||n==="MOVE_DOWN")||s==="horizontal"&&(n==="MOVE_LEFT"||n==="MOVE_RIGHT");if(l&&!i)return null;var c=n==="MOVE_DOWN"||n==="MOVE_RIGHT",d=t.dimensions.draggables[t.critical.draggable.id],p=t.current.page.borderBoxCenter,f=t.dimensions,h=f.draggables,g=f.droppables;return l?rae({isMovingForward:c,previousPageBorderBoxCenter:p,draggable:d,destination:a,draggables:h,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):uae({isMovingForward:c,previousPageBorderBoxCenter:p,draggable:d,isOver:a,draggables:h,droppables:g,viewport:t.viewport,afterCritical:t.afterCritical})};function Gs(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function qO(e){var t=Mi(e.top,e.bottom),n=Mi(e.left,e.right);return function(i){return t(i.y)&&n(i.x)}}function hae(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function fae(e){var t=e.pageBorderBox,n=e.draggable,r=e.candidates,i=n.page.borderBox.center,o=r.map(function(a){var s=a.axis,l=yl(a.axis.line,t.center[s.line],a.page.borderBox.center[s.crossAxisLine]);return{id:a.descriptor.id,distance:$p(i,l)}}).sort(function(a,s){return s.distance-a.distance});return o[0]?o[0].id:null}function gae(e){var t=e.pageBorderBox,n=e.draggable,r=e.droppables,i=Tv(r).filter(function(o){if(!o.isEnabled)return!1;var a=o.subject.active;if(!a||!hae(t,a))return!1;if(qO(a)(t.center))return!0;var s=o.axis,l=a.center[s.crossAxisLine],c=t[s.crossAxisStart],d=t[s.crossAxisEnd],p=Mi(a[s.crossAxisStart],a[s.crossAxisEnd]),f=p(c),h=p(d);return!f&&!h?!0:f?c<l:d>l});return i.length?i.length===1?i[0].descriptor.id:fae({pageBorderBox:t,draggable:n,candidates:i}):null}var WO=function(t,n){return Ki(Ih(t,n))},mae=function(e,t){var n=e.frame;return n?WO(t,n.scroll.diff.value):t};function HO(e){var t=e.displaced,n=e.id;return!!(t.visible[n]||t.invisible[n])}function vae(e){var t=e.draggable,n=e.closest,r=e.inHomeList;return n?r&&n.descriptor.index>t.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}var xae=function(e){var t=e.pageBorderBoxWithDroppableScroll,n=e.draggable,r=e.destination,i=e.insideDestination,o=e.last,a=e.viewport,s=e.afterCritical,l=r.axis,c=Ah(r.axis,n.displaceBy),d=c.value,p=t[l.start],f=t[l.end],h=Av(n,i),g=Rs(h,function(v){var w=v.descriptor.id,S=v.page.borderBox.center[l.line],C=xs(w,s),A=HO({displaced:o,id:w});return C?A?f<=S:p<S-d:A?f<=S+d:p<S}),m=vae({draggable:n,closest:g,inHomeList:mu(n,r)});return r0({draggable:n,insideDestination:i,destination:r,viewport:a,last:o,displacedBy:c,index:m})},yae=4,bae=function(e){var t=e.draggable,n=e.pageBorderBoxWithDroppableScroll,r=e.previousImpact,i=e.destination,o=e.insideDestination,a=e.afterCritical;if(!i.isCombineEnabled)return null;var s=i.axis,l=Ah(i.axis,t.displaceBy),c=l.value,d=n[s.start],p=n[s.end],f=Av(t,o),h=Rs(f,function(m){var v=m.descriptor.id,w=m.page.borderBox,S=w[s.size],C=S/yae,A=xs(v,a),_=HO({displaced:r.displaced,id:v});return A?_?p>w[s.start]+C&&p<w[s.end]-C:d>w[s.start]-c+C&&d<w[s.end]-c-C:_?p>w[s.start]+c+C&&p<w[s.end]+c-C:d>w[s.start]+C&&d<w[s.end]-C});if(!h)return null;var g={displacedBy:l,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:i.descriptor.id}}};return g},GO=function(e){var t=e.pageOffset,n=e.draggable,r=e.draggables,i=e.droppables,o=e.previousImpact,a=e.viewport,s=e.afterCritical,l=WO(n.page.borderBox,t),c=gae({pageBorderBox:l,draggable:n,droppables:i});if(!c)return Moe;var d=i[c],p=gu(d.descriptor.id,r),f=mae(d,l);return bae({pageBorderBoxWithDroppableScroll:f,draggable:n,previousImpact:o,destination:d,insideDestination:p,afterCritical:s})||xae({pageBorderBoxWithDroppableScroll:f,draggable:n,destination:d,insideDestination:p,last:o.displaced,viewport:a,afterCritical:s})},qS=function(e,t){var n;return Ye({},e,(n={},n[t.descriptor.id]=t,n))},wae=function(t){var n=t.previousImpact,r=t.impact,i=t.droppables,o=li(n),a=li(r);if(!o||o===a)return i;var s=i[o];if(!s.subject.withPlaceholder)return i;var l=lae(s);return qS(i,l)},Sae=function(e){var t=e.draggable,n=e.draggables,r=e.droppables,i=e.previousImpact,o=e.impact,a=wae({previousImpact:i,impact:o,droppables:r}),s=li(o);if(!s)return a;var l=r[s];if(mu(t,l)||l.subject.withPlaceholder)return a;var c=UO(l,t,n);return qS(a,c)},jd=function(e){var t=e.state,n=e.clientSelection,r=e.dimensions,i=e.viewport,o=e.impact,a=e.scrollJumpRequest,s=i||t.viewport,l=r||t.dimensions,c=n||t.current.client.selection,d=ri(c,t.initial.client.selection),p={offset:d,selection:c,borderBoxCenter:nr(t.initial.client.borderBoxCenter,d)},f={selection:nr(p.selection,s.scroll.current),borderBoxCenter:nr(p.borderBoxCenter,s.scroll.current),offset:nr(p.offset,s.scroll.diff.value)},h={client:p,page:f};if(t.phase==="COLLECTING")return Ye({phase:"COLLECTING"},t,{dimensions:l,viewport:s,current:h});var g=l.draggables[t.critical.draggable.id],m=o||GO({pageOffset:f.offset,draggable:g,draggables:l.draggables,droppables:l.droppables,previousImpact:t.impact,viewport:s,afterCritical:t.afterCritical}),v=Sae({draggable:g,impact:m,previousImpact:t.impact,draggables:l.draggables,droppables:l.droppables}),w=Ye({},t,{current:h,dimensions:{draggables:l.draggables,droppables:v},impact:m,viewport:s,scrollJumpRequest:a||null,forceShouldAnimate:a?!1:null});return w};function Cae(e,t){return e.map(function(n){return t[n]})}var YO=function(e){var t=e.impact,n=e.viewport,r=e.draggables,i=e.destination,o=e.forceShouldAnimate,a=t.displaced,s=Cae(a.all,r),l=Fp({afterDragging:s,destination:i,displacedBy:t.displacedBy,viewport:n.frame,forceShouldAnimate:o,last:a});return Ye({},t,{displaced:l})},KO=function(e){var t=e.impact,n=e.draggable,r=e.droppable,i=e.draggables,o=e.viewport,a=e.afterCritical,s=Pv({impact:t,draggable:n,draggables:i,droppable:r,afterCritical:a});return US({pageBorderBoxCenter:s,draggable:n,viewport:o})},XO=function(e){var t=e.state,n=e.dimensions,r=e.viewport;t.movementMode!=="SNAP"&&Se();var i=t.impact,o=r||t.viewport,a=n||t.dimensions,s=a.draggables,l=a.droppables,c=s[t.critical.draggable.id],d=li(i);d||Se();var p=l[d],f=YO({impact:i,viewport:o,destination:p,draggables:s}),h=KO({impact:f,draggable:c,droppable:p,draggables:s,viewport:o,afterCritical:t.afterCritical});return jd({impact:f,clientSelection:h,state:t,dimensions:a,viewport:o})},_ae=function(e){return{index:e.index,droppableId:e.droppableId}},QO=function(e){var t=e.draggable,n=e.home,r=e.draggables,i=e.viewport,o=Ah(n.axis,t.displaceBy),a=gu(n.descriptor.id,r),s=a.indexOf(t);s===-1&&Se();var l=a.slice(s+1),c=l.reduce(function(h,g){return h[g.descriptor.id]=!0,h},{}),d={inVirtualList:n.descriptor.mode==="virtual",displacedBy:o,effected:c},p=Fp({afterDragging:l,destination:n,displacedBy:o,last:null,viewport:i.frame,forceShouldAnimate:!1}),f={displaced:p,displacedBy:o,at:{type:"REORDER",destination:_ae(t.descriptor)}};return{impact:f,afterCritical:d}},kae=function(e,t){return{draggables:e.draggables,droppables:qS(e.droppables,t)}},Eae=function(e){var t=e.draggable,n=e.offset,r=e.initialWindowScroll,i=Jm(t.client,n),o=Zm(i,r),a=Ye({},t,{placeholder:Ye({},t.placeholder,{client:i}),client:i,page:o});return a},Tae=function(e){var t=e.frame;return t||Se(),t},Iae=function(e){var t=e.additions,n=e.updatedDroppables,r=e.viewport,i=r.scroll.diff.value;return t.map(function(o){var a=o.descriptor.droppableId,s=n[a],l=Tae(s),c=l.scroll.diff.value,d=nr(i,c),p=Eae({draggable:o,offset:d,initialWindowScroll:r.scroll.initial});return p})},Aae=function(e){var t=e.state,n=e.published,r=n.modified.map(function(C){var A=t.dimensions.droppables[C.droppableId],_=LS(A,C.scroll);return _}),i=Ye({},t.dimensions.droppables,{},NO(r)),o=MO(Iae({additions:n.additions,updatedDroppables:i,viewport:t.viewport})),a=Ye({},t.dimensions.draggables,{},o);n.removals.forEach(function(C){delete a[C]});var s={droppables:i,draggables:a},l=li(t.impact),c=l?s.droppables[l]:null,d=s.draggables[t.critical.draggable.id],p=s.droppables[t.critical.droppable.id],f=QO({draggable:d,home:p,draggables:a,viewport:t.viewport}),h=f.impact,g=f.afterCritical,m=c&&c.isCombineEnabled?t.impact:h,v=GO({pageOffset:t.current.page.offset,draggable:s.draggables[t.critical.draggable.id],draggables:s.draggables,droppables:s.droppables,previousImpact:m,viewport:t.viewport,afterCritical:g}),w=Ye({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:v,onLiftImpact:h,dimensions:s,afterCritical:g,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return w;var S=Ye({phase:"DROP_PENDING"},w,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return S},A2=function(t){return t.movementMode==="SNAP"},Vy=function(t,n,r){var i=kae(t.dimensions,n);return!A2(t)||r?jd({state:t,dimensions:i}):XO({state:t,dimensions:i})};function jy(e){return e.isDragging&&e.movementMode==="SNAP"?Ye({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var zI={phase:"IDLE",completed:null,shouldFlush:!1},Pae=function(e,t){if(e===void 0&&(e=zI),t.type==="FLUSH")return Ye({},zI,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&Se();var n=t.payload,r=n.critical,i=n.clientSelection,o=n.viewport,a=n.dimensions,s=n.movementMode,l=a.draggables[r.draggable.id],c=a.droppables[r.droppable.id],d={selection:i,borderBoxCenter:l.client.borderBox.center,offset:jn},p={client:d,page:{selection:nr(d.selection,o.scroll.initial),borderBoxCenter:nr(d.selection,o.scroll.initial),offset:nr(d.selection,o.scroll.diff.value)}},f=Tv(a.droppables).every(function(he){return!he.isFixedOnPage}),h=QO({draggable:l,home:c,draggables:a.draggables,viewport:o}),g=h.impact,m=h.afterCritical,v={phase:"DRAGGING",isDragging:!0,critical:r,movementMode:s,dimensions:a,initial:p,current:p,isWindowScrollAllowed:f,impact:g,afterCritical:m,onLiftImpact:g,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null};return v}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Se();var w=Ye({phase:"COLLECTING"},e,{phase:"COLLECTING"});return w}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||Se(),Aae({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Gs(e)||Se();var S=t.payload.client;return as(S,e.current.client.selection)?e:jd({state:e,clientSelection:S,impact:A2(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return jy(e);Gs(e)||Se();var C=t.payload,A=C.id,_=C.newScroll,I=e.dimensions.droppables[A];if(!I)return e;var E=LS(I,_);return Vy(e,E,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Gs(e)||Se();var k=t.payload,T=k.id,P=k.isEnabled,O=e.dimensions.droppables[T];O||Se(),O.isEnabled===P&&Se();var R=Ye({},O,{isEnabled:P});return Vy(e,R,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Gs(e)||Se();var N=t.payload,L=N.id,B=N.isCombineEnabled,V=e.dimensions.droppables[L];V||Se(),V.isCombineEnabled===B&&Se();var j=Ye({},V,{isCombineEnabled:B});return Vy(e,j,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Gs(e)||Se(),e.isWindowScrollAllowed||Se();var z=t.payload.newScroll;if(as(e.viewport.scroll.current,z))return jy(e);var H=zO(e.viewport,z);return A2(e)?XO({state:e,viewport:H}):jd({state:e,viewport:H})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Gs(e))return e;var J=t.payload.maxScroll;if(as(J,e.viewport.scroll.max))return e;var de=Ye({},e.viewport,{scroll:Ye({},e.viewport.scroll,{max:J})});return Ye({phase:"DRAGGING"},e,{viewport:de})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Se();var ae=pae({state:e,type:t.type});return ae?jd({state:e,impact:ae.impact,clientSelection:ae.clientSelection,scrollJumpRequest:ae.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var Ce=t.payload.reason;e.phase!=="COLLECTING"&&Se();var te=Ye({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:Ce});return te}if(t.type==="DROP_ANIMATE"){var G=t.payload,K=G.completed,me=G.dropDuration,ye=G.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||Se();var ee={phase:"DROP_ANIMATING",completed:K,dropDuration:me,newHomeClientOffset:ye,dimensions:e.dimensions};return ee}if(t.type==="DROP_COMPLETE"){var oe=t.payload.completed;return{phase:"IDLE",completed:oe,shouldFlush:!1}}return e},Dae=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},Rae=function(t){return{type:"LIFT",payload:t}},Nae=function(t){return{type:"INITIAL_PUBLISH",payload:t}},Mae=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},Oae=function(){return{type:"COLLECTION_STARTING",payload:null}},$ae=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},Lae=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},Fae=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},JO=function(t){return{type:"MOVE",payload:t}},Bae=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},zae=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},Vae=function(){return{type:"MOVE_UP",payload:null}},jae=function(){return{type:"MOVE_DOWN",payload:null}},Uae=function(){return{type:"MOVE_RIGHT",payload:null}},qae=function(){return{type:"MOVE_LEFT",payload:null}},WS=function(){return{type:"FLUSH",payload:null}},Wae=function(t){return{type:"DROP_ANIMATE",payload:t}},HS=function(t){return{type:"DROP_COMPLETE",payload:t}},ZO=function(t){return{type:"DROP",payload:t}},Hae=function(t){return{type:"DROP_PENDING",payload:t}},e$=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},Gae=function(e){return function(t){var n=t.getState,r=t.dispatch;return function(i){return function(o){if(o.type!=="LIFT"){i(o);return}var a=o.payload,s=a.id,l=a.clientSelection,c=a.movementMode,d=n();d.phase==="DROP_ANIMATING"&&r(HS({completed:d.completed})),n().phase!=="IDLE"&&Se(),r(WS()),r(Dae({draggableId:s,movementMode:c}));var p={shouldPublishImmediately:c==="SNAP"},f={draggableId:s,scrollOptions:p},h=e.startPublishing(f),g=h.critical,m=h.dimensions,v=h.viewport;r(Nae({critical:g,dimensions:m,clientSelection:l,movementMode:c,viewport:v}))}}}},Yae=function(e){return function(){return function(t){return function(n){n.type==="INITIAL_PUBLISH"&&e.dragging(),n.type==="DROP_ANIMATE"&&e.dropping(n.payload.completed.result.reason),(n.type==="FLUSH"||n.type==="DROP_COMPLETE")&&e.resting(),t(n)}}}},GS={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Bp={opacity:{drop:0,combining:.7},scale:{drop:.75}},YS={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Ls=YS.outOfTheWay+"s "+GS.outOfTheWay,Ud={fluid:"opacity "+Ls,snap:"transform "+Ls+", opacity "+Ls,drop:function(t){var n=t+"s "+GS.drop;return"transform "+n+", opacity "+n},outOfTheWay:"transform "+Ls,placeholder:"height "+Ls+", width "+Ls+", margin "+Ls},VI=function(t){return as(t,jn)?null:"translate("+t.x+"px, "+t.y+"px)"},P2={moveTo:VI,drop:function(t,n){var r=VI(t);return r?n?r+" scale("+Bp.scale.drop+")":r:null}},D2=YS.minDropTime,t$=YS.maxDropTime,Kae=t$-D2,jI=1500,Xae=.6,Qae=function(e){var t=e.current,n=e.destination,r=e.reason,i=$p(t,n);if(i<=0)return D2;if(i>=jI)return t$;var o=i/jI,a=D2+Kae*o,s=r==="CANCEL"?a*Xae:a;return Number(s.toFixed(2))},Jae=function(e){var t=e.impact,n=e.draggable,r=e.dimensions,i=e.viewport,o=e.afterCritical,a=r.draggables,s=r.droppables,l=li(t),c=l?s[l]:null,d=s[n.descriptor.droppableId],p=KO({impact:t,draggable:n,draggables:a,afterCritical:o,droppable:c||d,viewport:i}),f=ri(p,n.client.borderBox.center);return f},Zae=function(e){var t=e.draggables,n=e.reason,r=e.lastImpact,i=e.home,o=e.viewport,a=e.onLiftImpact;if(!r.at||n!=="DROP"){var s=YO({draggables:t,impact:a,destination:i,viewport:o,forceShouldAnimate:!0});return{impact:s,didDropInsideDroppable:!1}}if(r.at.type==="REORDER")return{impact:r,didDropInsideDroppable:!0};var l=Ye({},r,{displaced:Lp});return{impact:l,didDropInsideDroppable:!0}},ese=function(e){var t=e.getState,n=e.dispatch;return function(r){return function(i){if(i.type!=="DROP"){r(i);return}var o=t(),a=i.payload.reason;if(o.phase==="COLLECTING"){n(Hae({reason:a}));return}if(o.phase!=="IDLE"){var s=o.phase==="DROP_PENDING"&&o.isWaiting;s&&Se(),o.phase==="DRAGGING"||o.phase==="DROP_PENDING"||Se();var l=o.critical,c=o.dimensions,d=c.draggables[o.critical.draggable.id],p=Zae({reason:a,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),f=p.impact,h=p.didDropInsideDroppable,g=h?BS(f):null,m=h?Iv(f):null,v={index:l.draggable.index,droppableId:l.droppable.id},w={draggableId:d.descriptor.id,type:d.descriptor.type,source:v,reason:a,mode:o.movementMode,destination:g,combine:m},S=Jae({impact:f,draggable:d,dimensions:c,viewport:o.viewport,afterCritical:o.afterCritical}),C={critical:o.critical,afterCritical:o.afterCritical,result:w,impact:f},A=!as(o.current.client.offset,S)||!!w.combine;if(!A){n(HS({completed:C}));return}var _=Qae({current:o.current.client.offset,destination:S,reason:a}),I={newHomeClientOffset:S,dropDuration:_,completed:C};n(Wae(I))}}}},n$=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function tse(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(n){n.target!==window&&n.target!==window.document||e()}}}function nse(e){var t=e.onWindowScroll;function n(){t(n$())}var r=Op(n),i=tse(r),o=os;function a(){return o!==os}function s(){a()&&Se(),o=Di(window,[i])}function l(){a()||Se(),r.cancel(),o(),o=os}return{start:s,stop:l,isActive:a}}var rse=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},ise=function(e){var t=nse({onWindowScroll:function(r){e.dispatch(Bae({newScroll:r}))}});return function(n){return function(r){!t.isActive()&&r.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&rse(r)&&t.stop(),n(r)}}},ose=function(e){var t=!1,n=!1,r=setTimeout(function(){n=!0}),i=function(a){t||n||(t=!0,e(a),clearTimeout(r))};return i.wasCalled=function(){return t},i},ase=function(){var e=[],t=function(o){var a=FS(e,function(c){return c.timerId===o});a===-1&&Se();var s=e.splice(a,1),l=s[0];l.callback()},n=function(o){var a=setTimeout(function(){return t(a)}),s={timerId:a,callback:o};e.push(s)},r=function(){if(e.length){var o=[].concat(e);e.length=0,o.forEach(function(a){clearTimeout(a.timerId),a.callback()})}};return{add:n,flush:r}},sse=function(t,n){return t==null&&n==null?!0:t==null||n==null?!1:t.droppableId===n.droppableId&&t.index===n.index},lse=function(t,n){return t==null&&n==null?!0:t==null||n==null?!1:t.draggableId===n.draggableId&&t.droppableId===n.droppableId},cse=function(t,n){if(t===n)return!0;var r=t.draggable.id===n.draggable.id&&t.draggable.droppableId===n.draggable.droppableId&&t.draggable.type===n.draggable.type&&t.draggable.index===n.draggable.index,i=t.droppable.id===n.droppable.id&&t.droppable.type===n.droppable.type;return r&&i},Gu=function(t,n){n()},Hf=function(t,n){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:n}},Uy=function(t,n,r,i){if(!t){r(i(n));return}var o=ose(r),a={announce:o};t(n,a),o.wasCalled()||r(i(n))},use=function(e,t){var n=ase(),r=null,i=function(f,h){r&&Se(),Gu("onBeforeCapture",function(){var g=e().onBeforeCapture;if(g){var m={draggableId:f,mode:h};g(m)}})},o=function(f,h){r&&Se(),Gu("onBeforeDragStart",function(){var g=e().onBeforeDragStart;g&&g(Hf(f,h))})},a=function(f,h){r&&Se();var g=Hf(f,h);r={mode:h,lastCritical:f,lastLocation:g.source,lastCombine:null},n.add(function(){Gu("onDragStart",function(){return Uy(e().onDragStart,g,t,Yg.onDragStart)})})},s=function(f,h){var g=BS(h),m=Iv(h);r||Se();var v=!cse(f,r.lastCritical);v&&(r.lastCritical=f);var w=!sse(r.lastLocation,g);w&&(r.lastLocation=g);var S=!lse(r.lastCombine,m);if(S&&(r.lastCombine=m),!(!v&&!w&&!S)){var C=Ye({},Hf(f,r.mode),{combine:m,destination:g});n.add(function(){Gu("onDragUpdate",function(){return Uy(e().onDragUpdate,C,t,Yg.onDragUpdate)})})}},l=function(){r||Se(),n.flush()},c=function(f){r||Se(),r=null,Gu("onDragEnd",function(){return Uy(e().onDragEnd,f,t,Yg.onDragEnd)})},d=function(){if(r){var f=Ye({},Hf(r.lastCritical,r.mode),{combine:null,destination:null,reason:"CANCEL"});c(f)}};return{beforeCapture:i,beforeStart:o,start:a,update:s,flush:l,drop:c,abort:d}},dse=function(e,t){var n=use(e,t);return function(r){return function(i){return function(o){if(o.type==="BEFORE_INITIAL_CAPTURE"){n.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(o.type==="INITIAL_PUBLISH"){var a=o.payload.critical;n.beforeStart(a,o.payload.movementMode),i(o),n.start(a,o.payload.movementMode);return}if(o.type==="DROP_COMPLETE"){var s=o.payload.completed.result;n.flush(),i(o),n.drop(s);return}if(i(o),o.type==="FLUSH"){n.abort();return}var l=r.getState();l.phase==="DRAGGING"&&n.update(l.critical,l.impact)}}}},pse=function(e){return function(t){return function(n){if(n.type!=="DROP_ANIMATION_FINISHED"){t(n);return}var r=e.getState();r.phase!=="DROP_ANIMATING"&&Se(),e.dispatch(HS({completed:r.completed}))}}},hse=function(e){var t=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return function(i){return function(o){if((o.type==="FLUSH"||o.type==="DROP_COMPLETE"||o.type==="DROP_ANIMATION_FINISHED")&&r(),i(o),o.type==="DROP_ANIMATE"){var a={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var l=e.getState();l.phase==="DROP_ANIMATING"&&e.dispatch(e$())}};n=requestAnimationFrame(function(){n=null,t=Di(window,[a])})}}}},fse=function(e){return function(){return function(t){return function(n){(n.type==="DROP_COMPLETE"||n.type==="FLUSH"||n.type==="DROP_ANIMATE")&&e.stopPublishing(),t(n)}}}},gse=function(e){var t=!1;return function(){return function(n){return function(r){if(r.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),e.tryRestoreFocusRecorded();return}if(n(r),!!t){if(r.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(r.type==="DROP_COMPLETE"){t=!1;var i=r.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},mse=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},vse=function(e){return function(t){return function(n){return function(r){if(mse(r)){e.stop(),n(r);return}if(r.type==="INITIAL_PUBLISH"){n(r);var i=t.getState();i.phase!=="DRAGGING"&&Se(),e.start(i);return}n(r),e.scroll(t.getState())}}}},xse=function(e){return function(t){return function(n){if(t(n),n.type==="PUBLISH_WHILE_DRAGGING"){var r=e.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||e.dispatch(ZO({reason:r.reason})))}}}},yse=cO,bse=function(e){var t=e.dimensionMarshal,n=e.focusMarshal,r=e.styleMarshal,i=e.getResponders,o=e.announce,a=e.autoScroller;return lO(Pae,yse(mie(Yae(r),fse(t),Gae(t),ese,pse,hse,xse,vse(a),ise,gse(n),dse(i,o))))},qy=function(){return{additions:{},removals:{},modified:{}}};function wse(e){var t=e.registry,n=e.callbacks,r=qy(),i=null,o=function(){i||(n.collectionStarting(),i=requestAnimationFrame(function(){i=null;var d=r,p=d.additions,f=d.removals,h=d.modified,g=Object.keys(p).map(function(w){return t.draggable.getById(w).getDimension(jn)}).sort(function(w,S){return w.descriptor.index-S.descriptor.index}),m=Object.keys(h).map(function(w){var S=t.droppable.getById(w),C=S.callbacks.getScrollWhileDragging();return{droppableId:w,scroll:C}}),v={additions:g,removals:Object.keys(f),modified:m};r=qy(),n.publish(v)}))},a=function(d){var p=d.descriptor.id;r.additions[p]=d,r.modified[d.descriptor.droppableId]=!0,r.removals[p]&&delete r.removals[p],o()},s=function(d){var p=d.descriptor;r.removals[p.id]=!0,r.modified[p.droppableId]=!0,r.additions[p.id]&&delete r.additions[p.id],o()},l=function(){i&&(cancelAnimationFrame(i),i=null,r=qy())};return{add:a,remove:s,stop:l}}var r$=function(e){var t=e.scrollHeight,n=e.scrollWidth,r=e.height,i=e.width,o=ri({x:n,y:t},{x:i,y:r}),a={x:Math.max(0,o.x),y:Math.max(0,o.y)};return a},i$=function(){var e=document.documentElement;return e||Se(),e},o$=function(){var e=i$(),t=r$({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t},Sse=function(){var e=n$(),t=o$(),n=e.y,r=e.x,i=i$(),o=i.clientWidth,a=i.clientHeight,s=r+o,l=n+a,c=Ki({top:n,left:r,right:s,bottom:l}),d={frame:c,scroll:{initial:e,current:e,max:t,diff:{value:jn,displacement:jn}}};return d},Cse=function(e){var t=e.critical,n=e.scrollOptions,r=e.registry,i=Sse(),o=i.scroll.current,a=t.droppable,s=r.droppable.getAllByType(a.type).map(function(p){return p.callbacks.getDimensionAndWatchScroll(o,n)}),l=r.draggable.getAllByType(t.draggable.type).map(function(p){return p.getDimension(o)}),c={draggables:MO(l),droppables:NO(s)},d={dimensions:c,critical:t,viewport:i};return d};function UI(e,t,n){if(n.descriptor.id===t.id||n.descriptor.type!==t.type)return!1;var r=e.droppable.getById(n.descriptor.droppableId);return r.descriptor.mode==="virtual"}var _se=function(e,t){var n=null,r=wse({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=function(h,g){e.droppable.exists(h)||Se(),n&&t.updateDroppableIsEnabled({id:h,isEnabled:g})},o=function(h,g){n&&(e.droppable.exists(h)||Se(),t.updateDroppableIsCombineEnabled({id:h,isCombineEnabled:g}))},a=function(h,g){n&&(e.droppable.exists(h)||Se(),t.updateDroppableScroll({id:h,newScroll:g}))},s=function(h,g){n&&e.droppable.getById(h).callbacks.scroll(g)},l=function(){if(n){r.stop();var h=n.critical.droppable;e.droppable.getAllByType(h.type).forEach(function(g){return g.callbacks.dragStopped()}),n.unsubscribe(),n=null}},c=function(h){n||Se();var g=n.critical.draggable;h.type==="ADDITION"&&UI(e,g,h.value)&&r.add(h.value),h.type==="REMOVAL"&&UI(e,g,h.value)&&r.remove(h.value)},d=function(h){n&&Se();var g=e.draggable.getById(h.draggableId),m=e.droppable.getById(g.descriptor.droppableId),v={draggable:g.descriptor,droppable:m.descriptor},w=e.subscribe(c);return n={critical:v,unsubscribe:w},Cse({critical:v,registry:e,scrollOptions:h.scrollOptions})},p={updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:o,scrollDroppable:s,updateDroppableScroll:a,startPublishing:d,stopPublishing:l};return p},a$=function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"},kse=function(e){window.scrollBy(e.x,e.y)},Ese=Vn(function(e){return Tv(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),Tse=function(t,n){var r=Rs(Ese(n),function(i){return i.frame||Se(),qO(i.frame.pageMarginBox)(t)});return r},Ise=function(e){var t=e.center,n=e.destination,r=e.droppables;if(n){var i=r[n];return i.frame?i:null}var o=Tse(t,r);return o},ss={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},Ase=function(e,t){var n=e[t.size]*ss.startFromPercentage,r=e[t.size]*ss.maxScrollAtPercentage,i={startScrollingFrom:n,maxScrollValueAt:r};return i},s$=function(e){var t=e.startOfRange,n=e.endOfRange,r=e.current,i=n-t;if(i===0)return 0;var o=r-t,a=o/i;return a},KS=1,Pse=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return ss.maxPixelScroll;if(e===t.startScrollingFrom)return KS;var n=s$({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),r=1-n,i=ss.maxPixelScroll*ss.ease(r);return Math.ceil(i)},qI=ss.durationDampening.accelerateAt,WI=ss.durationDampening.stopDampeningAt,Dse=function(e,t){var n=t,r=WI,i=Date.now(),o=i-n;if(o>=WI)return e;if(o<qI)return KS;var a=s$({startOfRange:qI,endOfRange:r,current:o}),s=e*ss.ease(a);return Math.ceil(s)},HI=function(e){var t=e.distanceToEdge,n=e.thresholds,r=e.dragStartTime,i=e.shouldUseTimeDampening,o=Pse(t,n);return o===0?0:i?Math.max(Dse(o,r),KS):o},GI=function(e){var t=e.container,n=e.distanceToEdges,r=e.dragStartTime,i=e.axis,o=e.shouldUseTimeDampening,a=Ase(t,i),s=n[i.end]<n[i.start];return s?HI({distanceToEdge:n[i.end],thresholds:a,dragStartTime:r,shouldUseTimeDampening:o}):-1*HI({distanceToEdge:n[i.start],thresholds:a,dragStartTime:r,shouldUseTimeDampening:o})},Rse=function(e){var t=e.container,n=e.subject,r=e.proposedScroll,i=n.height>t.height,o=n.width>t.width;return!o&&!i?r:o&&i?null:{x:o?0:r.x,y:i?0:r.y}},Nse=DO(function(e){return e===0?0:e}),l$=function(e){var t=e.dragStartTime,n=e.container,r=e.subject,i=e.center,o=e.shouldUseTimeDampening,a={top:i.y-n.top,right:n.right-i.x,bottom:n.bottom-i.y,left:i.x-n.left},s=GI({container:n,distanceToEdges:a,dragStartTime:t,axis:zS,shouldUseTimeDampening:o}),l=GI({container:n,distanceToEdges:a,dragStartTime:t,axis:LO,shouldUseTimeDampening:o}),c=Nse({x:l,y:s});if(as(c,jn))return null;var d=Rse({container:n,subject:r,proposedScroll:c});return d?as(d,jn)?null:d:null},Mse=DO(function(e){return e===0?0:e>0?1:-1}),XS=function(){var e=function(n,r){return n<0?n:n>r?n-r:0};return function(t){var n=t.current,r=t.max,i=t.change,o=nr(n,i),a={x:e(o.x,r.x),y:e(o.y,r.y)};return as(a,jn)?null:a}}(),c$=function(t){var n=t.max,r=t.current,i=t.change,o={x:Math.max(r.x,n.x),y:Math.max(r.y,n.y)},a=Mse(i),s=XS({max:o,current:r,change:a});return!s||a.x!==0&&s.x===0||a.y!==0&&s.y===0},QS=function(t,n){return c$({current:t.scroll.current,max:t.scroll.max,change:n})},Ose=function(t,n){if(!QS(t,n))return null;var r=t.scroll.max,i=t.scroll.current;return XS({current:i,max:r,change:n})},JS=function(t,n){var r=t.frame;return r?c$({current:r.scroll.current,max:r.scroll.max,change:n}):!1},$se=function(t,n){var r=t.frame;return!r||!JS(t,n)?null:XS({current:r.scroll.current,max:r.scroll.max,change:n})},Lse=function(e){var t=e.viewport,n=e.subject,r=e.center,i=e.dragStartTime,o=e.shouldUseTimeDampening,a=l$({dragStartTime:i,container:t.frame,subject:n,center:r,shouldUseTimeDampening:o});return a&&QS(t,a)?a:null},Fse=function(e){var t=e.droppable,n=e.subject,r=e.center,i=e.dragStartTime,o=e.shouldUseTimeDampening,a=t.frame;if(!a)return null;var s=l$({dragStartTime:i,container:a.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:o});return s&&JS(t,s)?s:null},YI=function(e){var t=e.state,n=e.dragStartTime,r=e.shouldUseTimeDampening,i=e.scrollWindow,o=e.scrollDroppable,a=t.current.page.borderBoxCenter,s=t.dimensions.draggables[t.critical.draggable.id],l=s.page.marginBox;if(t.isWindowScrollAllowed){var c=t.viewport,d=Lse({dragStartTime:n,viewport:c,subject:l,center:a,shouldUseTimeDampening:r});if(d){i(d);return}}var p=Ise({center:a,destination:li(t.impact),droppables:t.dimensions.droppables});if(p){var f=Fse({dragStartTime:n,droppable:p,subject:l,center:a,shouldUseTimeDampening:r});f&&o(p.descriptor.id,f)}},Bse=function(e){var t=e.scrollWindow,n=e.scrollDroppable,r=Op(t),i=Op(n),o=null,a=function(d){o||Se();var p=o,f=p.shouldUseTimeDampening,h=p.dragStartTime;YI({state:d,scrollWindow:r,scrollDroppable:i,dragStartTime:h,shouldUseTimeDampening:f})},s=function(d){o&&Se();var p=Date.now(),f=!1,h=function(){f=!0};YI({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:h,scrollDroppable:h}),o={dragStartTime:p,shouldUseTimeDampening:f},f&&a(d)},l=function(){o&&(r.cancel(),i.cancel(),o=null)};return{start:s,stop:l,scroll:a}},zse=function(e){var t=e.move,n=e.scrollDroppable,r=e.scrollWindow,i=function(c,d){var p=nr(c.current.client.selection,d);t({client:p})},o=function(c,d){if(!JS(c,d))return d;var p=$se(c,d);if(!p)return n(c.descriptor.id,d),null;var f=ri(d,p);n(c.descriptor.id,f);var h=ri(d,f);return h},a=function(c,d,p){if(!c||!QS(d,p))return p;var f=Ose(d,p);if(!f)return r(p),null;var h=ri(p,f);r(h);var g=ri(p,h);return g},s=function(c){var d=c.scrollJumpRequest;if(d){var p=li(c.impact);p||Se();var f=o(c.dimensions.droppables[p],d);if(f){var h=c.viewport,g=a(c.isWindowScrollAllowed,h,f);g&&i(c,g)}}};return s},Vse=function(e){var t=e.scrollDroppable,n=e.scrollWindow,r=e.move,i=Bse({scrollWindow:n,scrollDroppable:t}),o=zse({move:r,scrollWindow:n,scrollDroppable:t}),a=function(c){if(c.phase==="DRAGGING"){if(c.movementMode==="FLUID"){i.scroll(c);return}c.scrollJumpRequest&&o(c)}},s={scroll:a,start:i.start,stop:i.stop};return s},Uc="data-rbd",qc=function(){var e=Uc+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),R2=function(){var e=Uc+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),jse=function(){var e=Uc+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),KI={contextId:Uc+"-scroll-container-context-id"},Use=function(t){return function(n){return"["+n+'="'+t+'"]'}},Yu=function(t,n){return t.map(function(r){var i=r.styles[n];return i?r.selector+" { "+i+" }":""}).join(" ")},qse="pointer-events: none;",Wse=function(e){var t=Use(e),n=function(){var s=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(qc.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:s,dragging:qse,dropAnimating:s}}}(),r=function(){var s=`
      transition: `+Ud.outOfTheWay+`;
    `;return{selector:t(R2.contextId),styles:{dragging:s,dropAnimating:s,userCancel:s}}}(),i={selector:t(jse.contextId),styles:{always:"overflow-anchor: none;"}},o={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},a=[r,n,i,o];return{always:Yu(a,"always"),resting:Yu(a,"resting"),dragging:Yu(a,"dragging"),dropAnimating:Yu(a,"dropAnimating"),userCancel:Yu(a,"userCancel")}},ci=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?D.useLayoutEffect:D.useEffect,Wy=function(){var t=document.querySelector("head");return t||Se(),t},XI=function(t){var n=document.createElement("style");return t&&n.setAttribute("nonce",t),n.type="text/css",n};function Hse(e,t){var n=kt(function(){return Wse(e)},[e]),r=D.useRef(null),i=D.useRef(null),o=qe(Vn(function(p){var f=i.current;f||Se(),f.textContent=p}),[]),a=qe(function(p){var f=r.current;f||Se(),f.textContent=p},[]);ci(function(){!r.current&&!i.current||Se();var p=XI(t),f=XI(t);return r.current=p,i.current=f,p.setAttribute(Uc+"-always",e),f.setAttribute(Uc+"-dynamic",e),Wy().appendChild(p),Wy().appendChild(f),a(n.always),o(n.resting),function(){var h=function(m){var v=m.current;v||Se(),Wy().removeChild(v),m.current=null};h(r),h(i)}},[t,a,o,n.always,n.resting,e]);var s=qe(function(){return o(n.dragging)},[o,n.dragging]),l=qe(function(p){if(p==="DROP"){o(n.dropAnimating);return}o(n.userCancel)},[o,n.dropAnimating,n.userCancel]),c=qe(function(){i.current&&o(n.resting)},[o,n.resting]),d=kt(function(){return{dragging:s,dropping:l,resting:c}},[s,l,c]);return d}var u$=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function Dv(e){return e instanceof u$(e).HTMLElement}function Gse(e,t){var n="["+qc.contextId+'="'+e+'"]',r=RO(document.querySelectorAll(n));if(!r.length)return null;var i=Rs(r,function(o){return o.getAttribute(qc.draggableId)===t});return!i||!Dv(i)?null:i}function Yse(e){var t=D.useRef({}),n=D.useRef(null),r=D.useRef(null),i=D.useRef(!1),o=qe(function(f,h){var g={id:f,focus:h};return t.current[f]=g,function(){var v=t.current,w=v[f];w!==g&&delete v[f]}},[]),a=qe(function(f){var h=Gse(e,f);h&&h!==document.activeElement&&h.focus()},[e]),s=qe(function(f,h){n.current===f&&(n.current=h)},[]),l=qe(function(){r.current||i.current&&(r.current=requestAnimationFrame(function(){r.current=null;var f=n.current;f&&a(f)}))},[a]),c=qe(function(f){n.current=null;var h=document.activeElement;h&&h.getAttribute(qc.draggableId)===f&&(n.current=f)},[]);ci(function(){return i.current=!0,function(){i.current=!1;var f=r.current;f&&cancelAnimationFrame(f)}},[]);var d=kt(function(){return{register:o,tryRecordFocus:c,tryRestoreFocusRecorded:l,tryShiftRecord:s}},[o,c,l,s]);return d}function Kse(){var e={draggables:{},droppables:{}},t=[];function n(p){return t.push(p),function(){var h=t.indexOf(p);h!==-1&&t.splice(h,1)}}function r(p){t.length&&t.forEach(function(f){return f(p)})}function i(p){return e.draggables[p]||null}function o(p){var f=i(p);return f||Se(),f}var a={register:function(f){e.draggables[f.descriptor.id]=f,r({type:"ADDITION",value:f})},update:function(f,h){var g=e.draggables[h.descriptor.id];g&&g.uniqueId===f.uniqueId&&(delete e.draggables[h.descriptor.id],e.draggables[f.descriptor.id]=f)},unregister:function(f){var h=f.descriptor.id,g=i(h);g&&f.uniqueId===g.uniqueId&&(delete e.draggables[h],r({type:"REMOVAL",value:f}))},getById:o,findById:i,exists:function(f){return!!i(f)},getAllByType:function(f){return n0(e.draggables).filter(function(h){return h.descriptor.type===f})}};function s(p){return e.droppables[p]||null}function l(p){var f=s(p);return f||Se(),f}var c={register:function(f){e.droppables[f.descriptor.id]=f},unregister:function(f){var h=s(f.descriptor.id);h&&f.uniqueId===h.uniqueId&&delete e.droppables[f.descriptor.id]},getById:l,findById:s,exists:function(f){return!!s(f)},getAllByType:function(f){return n0(e.droppables).filter(function(h){return h.descriptor.type===f})}};function d(){e.draggables={},e.droppables={},t.length=0}return{draggable:a,droppable:c,subscribe:n,clean:d}}function Xse(){var e=kt(Kse,[]);return D.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var ZS=ut.createContext(null),i0=function(){var e=document.body;return e||Se(),e},Qse={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Jse=function(t){return"rbd-announcement-"+t};function Zse(e){var t=kt(function(){return Jse(e)},[e]),n=D.useRef(null);D.useEffect(function(){var o=document.createElement("div");return n.current=o,o.id=t,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),Ye(o.style,Qse),i0().appendChild(o),function(){setTimeout(function(){var l=i0();l.contains(o)&&l.removeChild(o),o===n.current&&(n.current=null)})}},[t]);var r=qe(function(i){var o=n.current;if(o){o.textContent=i;return}},[]);return r}var ele=0,tle={separator:"::"};function eC(e,t){return t===void 0&&(t=tle),kt(function(){return""+e+t.separator+ele++},[t.separator,e])}function nle(e){var t=e.contextId,n=e.uniqueId;return"rbd-hidden-text-"+t+"-"+n}function rle(e){var t=e.contextId,n=e.text,r=eC("hidden-text",{separator:"-"}),i=kt(function(){return nle({contextId:t,uniqueId:r})},[r,t]);return D.useEffect(function(){var a=document.createElement("div");return a.id=i,a.textContent=n,a.style.display="none",i0().appendChild(a),function(){var l=i0();l.contains(a)&&l.removeChild(a)}},[i,n]),i}var Rv=ut.createContext(null);function d$(e){var t=D.useRef(e);return D.useEffect(function(){t.current=e}),t}function ile(){var e=null;function t(){return!!e}function n(a){return a===e}function r(a){e&&Se();var s={abandon:a};return e=s,s}function i(){e||Se(),e=null}function o(){e&&(e.abandon(),i())}return{isClaimed:t,isActive:n,claim:r,release:i,tryAbandon:o}}var ole=9,ale=13,tC=27,p$=32,sle=33,lle=34,cle=35,ule=36,dle=37,ple=38,hle=39,fle=40,Gf,gle=(Gf={},Gf[ale]=!0,Gf[ole]=!0,Gf),h$=function(e){gle[e.keyCode]&&e.preventDefault()},Nv=function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],n=Rs(t,function(r){return"on"+r in document});return n||e}(),f$=0,QI=5;function mle(e,t){return Math.abs(t.x-e.x)>=QI||Math.abs(t.y-e.y)>=QI}var JI={type:"IDLE"};function vle(e){var t=e.cancel,n=e.completed,r=e.getPhase,i=e.setPhase;return[{eventName:"mousemove",fn:function(a){var s=a.button,l=a.clientX,c=a.clientY;if(s===f$){var d={x:l,y:c},p=r();if(p.type==="DRAGGING"){a.preventDefault(),p.actions.move(d);return}p.type!=="PENDING"&&Se();var f=p.point;if(mle(f,d)){a.preventDefault();var h=p.actions.fluidLift(d);i({type:"DRAGGING",actions:h})}}}},{eventName:"mouseup",fn:function(a){var s=r();if(s.type!=="DRAGGING"){t();return}a.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),n()}},{eventName:"mousedown",fn:function(a){r().type==="DRAGGING"&&a.preventDefault(),t()}},{eventName:"keydown",fn:function(a){var s=r();if(s.type==="PENDING"){t();return}if(a.keyCode===tC){a.preventDefault(),t();return}h$(a)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){r().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(a){var s=r();if(s.type==="IDLE"&&Se(),s.actions.shouldRespectForcePress()){t();return}a.preventDefault()}},{eventName:Nv,fn:t}]}function xle(e){var t=D.useRef(JI),n=D.useRef(os),r=kt(function(){return{eventName:"mousedown",fn:function(p){if(!p.defaultPrevented&&p.button===f$&&!(p.ctrlKey||p.metaKey||p.shiftKey||p.altKey)){var f=e.findClosestDraggableId(p);if(f){var h=e.tryGetLock(f,a,{sourceEvent:p});if(h){p.preventDefault();var g={x:p.clientX,y:p.clientY};n.current(),c(h,g)}}}}}},[e]),i=kt(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(p){if(!p.defaultPrevented){var f=e.findClosestDraggableId(p);if(f){var h=e.findOptionsForDraggable(f);h&&(h.shouldRespectForcePress||e.canGetLock(f)&&p.preventDefault())}}}}},[e]),o=qe(function(){var p={passive:!1,capture:!0};n.current=Di(window,[i,r],p)},[i,r]),a=qe(function(){var d=t.current;d.type!=="IDLE"&&(t.current=JI,n.current(),o())},[o]),s=qe(function(){var d=t.current;a(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[a]),l=qe(function(){var p={capture:!0,passive:!1},f=vle({cancel:s,completed:a,getPhase:function(){return t.current},setPhase:function(g){t.current=g}});n.current=Di(window,f,p)},[s,a]),c=qe(function(p,f){t.current.type!=="IDLE"&&Se(),t.current={type:"PENDING",point:f,actions:p},l()},[l]);ci(function(){return o(),function(){n.current()}},[o])}var Fl;function yle(){}var ble=(Fl={},Fl[lle]=!0,Fl[sle]=!0,Fl[ule]=!0,Fl[cle]=!0,Fl);function wle(e,t){function n(){t(),e.cancel()}function r(){t(),e.drop()}return[{eventName:"keydown",fn:function(o){if(o.keyCode===tC){o.preventDefault(),n();return}if(o.keyCode===p$){o.preventDefault(),r();return}if(o.keyCode===fle){o.preventDefault(),e.moveDown();return}if(o.keyCode===ple){o.preventDefault(),e.moveUp();return}if(o.keyCode===hle){o.preventDefault(),e.moveRight();return}if(o.keyCode===dle){o.preventDefault(),e.moveLeft();return}if(ble[o.keyCode]){o.preventDefault();return}h$(o)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Nv,fn:n}]}function Sle(e){var t=D.useRef(yle),n=kt(function(){return{eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==p$)return;var a=e.findClosestDraggableId(o);if(!a)return;var s=e.tryGetLock(a,d,{sourceEvent:o});if(!s)return;o.preventDefault();var l=!0,c=s.snapLift();t.current();function d(){l||Se(),l=!1,t.current(),r()}t.current=Di(window,wle(c,d),{capture:!0,passive:!1})}}},[e]),r=qe(function(){var o={passive:!1,capture:!0};t.current=Di(window,[n],o)},[n]);ci(function(){return r(),function(){t.current()}},[r])}var Hy={type:"IDLE"},Cle=120,_le=.15;function kle(e){var t=e.cancel,n=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(i){i.preventDefault()}},{eventName:"keydown",fn:function(i){if(n().type!=="DRAGGING"){t();return}i.keyCode===tC&&i.preventDefault(),t()}},{eventName:Nv,fn:t}]}function Ele(e){var t=e.cancel,n=e.completed,r=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(o){var a=r();if(a.type!=="DRAGGING"){t();return}a.hasMoved=!0;var s=o.touches[0],l=s.clientX,c=s.clientY,d={x:l,y:c};o.preventDefault(),a.actions.move(d)}},{eventName:"touchend",fn:function(o){var a=r();if(a.type!=="DRAGGING"){t();return}o.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),n()}},{eventName:"touchcancel",fn:function(o){if(r().type!=="DRAGGING"){t();return}o.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(o){var a=r();a.type==="IDLE"&&Se();var s=o.touches[0];if(s){var l=s.force>=_le;if(l){var c=a.actions.shouldRespectForcePress();if(a.type==="PENDING"){c&&t();return}if(c){if(a.hasMoved){o.preventDefault();return}t();return}o.preventDefault()}}}},{eventName:Nv,fn:t}]}function Tle(e){var t=D.useRef(Hy),n=D.useRef(os),r=qe(function(){return t.current},[]),i=qe(function(h){t.current=h},[]),o=kt(function(){return{eventName:"touchstart",fn:function(h){if(!h.defaultPrevented){var g=e.findClosestDraggableId(h);if(g){var m=e.tryGetLock(g,s,{sourceEvent:h});if(m){var v=h.touches[0],w=v.clientX,S=v.clientY,C={x:w,y:S};n.current(),p(m,C)}}}}}},[e]),a=qe(function(){var h={capture:!0,passive:!1};n.current=Di(window,[o],h)},[o]),s=qe(function(){var f=t.current;f.type!=="IDLE"&&(f.type==="PENDING"&&clearTimeout(f.longPressTimerId),i(Hy),n.current(),a())},[a,i]),l=qe(function(){var f=t.current;s(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[s]),c=qe(function(){var h={capture:!0,passive:!1},g={cancel:l,completed:s,getPhase:r},m=Di(window,Ele(g),h),v=Di(window,kle(g),h);n.current=function(){m(),v()}},[l,r,s]),d=qe(function(){var h=r();h.type!=="PENDING"&&Se();var g=h.actions.fluidLift(h.point);i({type:"DRAGGING",actions:g,hasMoved:!1})},[r,i]),p=qe(function(h,g){r().type!=="IDLE"&&Se();var m=setTimeout(d,Cle);i({type:"PENDING",point:g,actions:h,longPressTimerId:m}),c()},[c,r,i,d]);ci(function(){return a(),function(){n.current();var g=r();g.type==="PENDING"&&(clearTimeout(g.longPressTimerId),i(Hy))}},[r,a,i]),ci(function(){var h=Di(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return h},[])}var Ile={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function g$(e,t){if(t==null)return!1;var n=!!Ile[t.tagName.toLowerCase()];if(n)return!0;var r=t.getAttribute("contenteditable");return r==="true"||r===""?!0:t===e?!1:g$(e,t.parentElement)}function Ale(e,t){var n=t.target;return Dv(n)?g$(e,n):!1}var Ple=function(e){return Ki(e.getBoundingClientRect()).center};function Dle(e){return e instanceof u$(e).Element}var Rle=function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],n=Rs(t,function(r){return r in Element.prototype});return n||e}();function m$(e,t){return e==null?null:e[Rle](t)?e:m$(e.parentElement,t)}function Nle(e,t){return e.closest?e.closest(t):m$(e,t)}function Mle(e){return"["+qc.contextId+'="'+e+'"]'}function Ole(e,t){var n=t.target;if(!Dle(n))return null;var r=Mle(e),i=Nle(n,r);return!i||!Dv(i)?null:i}function $le(e,t){var n=Ole(e,t);return n?n.getAttribute(qc.draggableId):null}function Lle(e,t){var n="["+R2.contextId+'="'+e+'"]',r=RO(document.querySelectorAll(n)),i=Rs(r,function(o){return o.getAttribute(R2.id)===t});return!i||!Dv(i)?null:i}function Fle(e){e.preventDefault()}function Yf(e){var t=e.expected,n=e.phase,r=e.isLockActive;return e.shouldWarn,!(!r()||t!==n)}function v$(e){var t=e.lockAPI,n=e.store,r=e.registry,i=e.draggableId;if(t.isClaimed())return!1;var o=r.draggable.findById(i);return!(!o||!o.options.isEnabled||!a$(n.getState(),i))}function Ble(e){var t=e.lockAPI,n=e.contextId,r=e.store,i=e.registry,o=e.draggableId,a=e.forceSensorStop,s=e.sourceEvent,l=v$({lockAPI:t,store:r,registry:i,draggableId:o});if(!l)return null;var c=i.draggable.getById(o),d=Lle(n,c.descriptor.id);if(!d||s&&!c.options.canDragInteractiveElements&&Ale(d,s))return null;var p=t.claim(a||os),f="PRE_DRAG";function h(){return c.options.shouldRespectForcePress}function g(){return t.isActive(p)}function m(I,E){Yf({expected:I,phase:f,isLockActive:g,shouldWarn:!0})&&r.dispatch(E())}var v=m.bind(null,"DRAGGING");function w(I){function E(){t.release(),f="COMPLETED"}f!=="PRE_DRAG"&&(E(),f!=="PRE_DRAG"&&Se()),r.dispatch(Rae(I.liftActionArgs)),f="DRAGGING";function k(T,P){if(P===void 0&&(P={shouldBlockNextClick:!1}),I.cleanup(),P.shouldBlockNextClick){var O=Di(window,[{eventName:"click",fn:Fle,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(O)}E(),r.dispatch(ZO({reason:T}))}return Ye({isActive:function(){return Yf({expected:"DRAGGING",phase:f,isLockActive:g,shouldWarn:!1})},shouldRespectForcePress:h,drop:function(P){return k("DROP",P)},cancel:function(P){return k("CANCEL",P)}},I.actions)}function S(I){var E=Op(function(T){v(function(){return JO({client:T})})}),k=w({liftActionArgs:{id:o,clientSelection:I,movementMode:"FLUID"},cleanup:function(){return E.cancel()},actions:{move:E}});return Ye({},k,{move:E})}function C(){var I={moveUp:function(){return v(Vae)},moveRight:function(){return v(Uae)},moveDown:function(){return v(jae)},moveLeft:function(){return v(qae)}};return w({liftActionArgs:{id:o,clientSelection:Ple(d),movementMode:"SNAP"},cleanup:os,actions:I})}function A(){var I=Yf({expected:"PRE_DRAG",phase:f,isLockActive:g,shouldWarn:!0});I&&t.release()}var _={isActive:function(){return Yf({expected:"PRE_DRAG",phase:f,isLockActive:g,shouldWarn:!1})},shouldRespectForcePress:h,fluidLift:S,snapLift:C,abort:A};return _}var zle=[xle,Sle,Tle];function Vle(e){var t=e.contextId,n=e.store,r=e.registry,i=e.customSensors,o=e.enableDefaultSensors,a=[].concat(o?zle:[],i||[]),s=D.useState(function(){return ile()})[0],l=qe(function(S,C){S.isDragging&&!C.isDragging&&s.tryAbandon()},[s]);ci(function(){var S=n.getState(),C=n.subscribe(function(){var A=n.getState();l(S,A),S=A});return C},[s,n,l]),ci(function(){return s.tryAbandon},[s.tryAbandon]);for(var c=qe(function(w){return v$({lockAPI:s,registry:r,store:n,draggableId:w})},[s,r,n]),d=qe(function(w,S,C){return Ble({lockAPI:s,registry:r,contextId:t,store:n,draggableId:w,forceSensorStop:S,sourceEvent:C&&C.sourceEvent?C.sourceEvent:null})},[t,s,r,n]),p=qe(function(w){return $le(t,w)},[t]),f=qe(function(w){var S=r.draggable.findById(w);return S?S.options:null},[r.draggable]),h=qe(function(){s.isClaimed()&&(s.tryAbandon(),n.getState().phase!=="IDLE"&&n.dispatch(WS()))},[s,n]),g=qe(s.isClaimed,[s]),m=kt(function(){return{canGetLock:c,tryGetLock:d,findClosestDraggableId:p,findOptionsForDraggable:f,tryReleaseLock:h,isLockClaimed:g}},[c,d,p,f,h,g]),v=0;v<a.length;v++)a[v](m)}var jle=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function Ku(e){return e.current||Se(),e.current}function Ule(e){var t=e.contextId,n=e.setCallbacks,r=e.sensors,i=e.nonce,o=e.dragHandleUsageInstructions,a=D.useRef(null),s=d$(e),l=qe(function(){return jle(s.current)},[s]),c=Zse(t),d=rle({contextId:t,text:o}),p=Hse(t,i),f=qe(function(T){Ku(a).dispatch(T)},[]),h=kt(function(){return kI({publishWhileDragging:Mae,updateDroppableScroll:$ae,updateDroppableIsEnabled:Lae,updateDroppableIsCombineEnabled:Fae,collectionStarting:Oae},f)},[f]),g=Xse(),m=kt(function(){return _se(g,h)},[g,h]),v=kt(function(){return Vse(Ye({scrollWindow:kse,scrollDroppable:m.scrollDroppable},kI({move:JO},f)))},[m.scrollDroppable,f]),w=Yse(t),S=kt(function(){return bse({announce:c,autoScroller:v,dimensionMarshal:m,focusMarshal:w,getResponders:l,styleMarshal:p})},[c,v,m,w,l,p]);a.current=S;var C=qe(function(){var T=Ku(a),P=T.getState();P.phase!=="IDLE"&&T.dispatch(WS())},[]),A=qe(function(){var T=Ku(a).getState();return T.isDragging||T.phase==="DROP_ANIMATING"},[]),_=kt(function(){return{isDragging:A,tryAbort:C}},[A,C]);n(_);var I=qe(function(T){return a$(Ku(a).getState(),T)},[]),E=qe(function(){return Gs(Ku(a).getState())},[]),k=kt(function(){return{marshal:m,focus:w,contextId:t,canLift:I,isMovementAllowed:E,dragHandleUsageInstructionsId:d,registry:g}},[t,m,d,w,I,E,g]);return Vle({contextId:t,store:S,registry:g,customSensors:r,enableDefaultSensors:e.enableDefaultSensors!==!1}),D.useEffect(function(){return C},[C]),ut.createElement(Rv.Provider,{value:k},ut.createElement(kie,{context:ZS,store:S},e.children))}var qle=0;function Wle(){return kt(function(){return""+qle++},[])}function Hle(e){var t=Wle(),n=e.dragHandleUsageInstructions||Yg.dragHandleUsageInstructions;return ut.createElement(Soe,null,function(r){return ut.createElement(Ule,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var x$=function(t){return function(n){return t===n}},Gle=x$("scroll"),Yle=x$("auto"),ZI=function(t,n){return n(t.overflowX)||n(t.overflowY)},Kle=function(t){var n=window.getComputedStyle(t),r={overflowX:n.overflowX,overflowY:n.overflowY};return ZI(r,Gle)||ZI(r,Yle)},Xle=function(){return!1},Qle=function e(t){return t==null?null:t===document.body?Xle()?t:null:t===document.documentElement?null:Kle(t)?t:e(t.parentElement)},N2=function(e){return{x:e.scrollLeft,y:e.scrollTop}},Jle=function e(t){if(!t)return!1;var n=window.getComputedStyle(t);return n.position==="fixed"?!0:e(t.parentElement)},Zle=function(e){var t=Qle(e),n=Jle(e);return{closestScrollable:t,isFixedOnPage:n}},ece=function(e){var t=e.descriptor,n=e.isEnabled,r=e.isCombineEnabled,i=e.isFixedOnPage,o=e.direction,a=e.client,s=e.page,l=e.closest,c=function(){if(!l)return null;var h=l.scrollSize,g=l.client,m=r$({scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth,height:g.paddingBox.height,width:g.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:g,scrollSize:h,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:m,diff:{value:jn,displacement:jn}}}}(),d=o==="vertical"?zS:LO,p=jc({page:s,withPlaceholder:null,axis:d,frame:c}),f={descriptor:t,isCombineEnabled:r,isFixedOnPage:i,axis:d,isEnabled:n,client:a,page:s,frame:c,subject:p};return f},tce=function(t,n){var r=TO(t);if(!n||t!==n)return r;var i=r.paddingBox.top-n.scrollTop,o=r.paddingBox.left-n.scrollLeft,a=i+n.scrollHeight,s=o+n.scrollWidth,l={top:i,right:s,bottom:a,left:o},c=OS(l,r.border),d=$S({borderBox:c,margin:r.margin,border:r.border,padding:r.padding});return d},nce=function(e){var t=e.ref,n=e.descriptor,r=e.env,i=e.windowScroll,o=e.direction,a=e.isDropDisabled,s=e.isCombineEnabled,l=e.shouldClipSubject,c=r.closestScrollable,d=tce(t,c),p=Zm(d,i),f=function(){if(!c)return null;var g=TO(c),m={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:g,page:Zm(g,i),scroll:N2(c),scrollSize:m,shouldClipSubject:l}}(),h=ece({descriptor:n,isEnabled:!a,isCombineEnabled:s,isFixedOnPage:r.isFixedOnPage,direction:o,client:d,page:p,closest:f});return h},rce={passive:!1},ice={passive:!0},e4=function(e){return e.shouldPublishImmediately?rce:ice};function o0(e){var t=D.useContext(e);return t||Se(),t}var Kf=function(t){return t&&t.env.closestScrollable||null};function oce(e){var t=D.useRef(null),n=o0(Rv),r=eC("droppable"),i=n.registry,o=n.marshal,a=d$(e),s=kt(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),l=D.useRef(s),c=kt(function(){return Vn(function(A,_){t.current||Se();var I={x:A,y:_};o.updateDroppableScroll(s.id,I)})},[s.id,o]),d=qe(function(){var A=t.current;return!A||!A.env.closestScrollable?jn:N2(A.env.closestScrollable)},[]),p=qe(function(){var A=d();c(A.x,A.y)},[d,c]),f=kt(function(){return Op(p)},[p]),h=qe(function(){var A=t.current,_=Kf(A);A&&_||Se();var I=A.scrollOptions;if(I.shouldPublishImmediately){p();return}f()},[f,p]),g=qe(function(A,_){t.current&&Se();var I=a.current,E=I.getDroppableRef();E||Se();var k=Zle(E),T={ref:E,descriptor:s,env:k,scrollOptions:_};t.current=T;var P=nce({ref:E,descriptor:s,env:k,windowScroll:A,direction:I.direction,isDropDisabled:I.isDropDisabled,isCombineEnabled:I.isCombineEnabled,shouldClipSubject:!I.ignoreContainerClipping}),O=k.closestScrollable;return O&&(O.setAttribute(KI.contextId,n.contextId),O.addEventListener("scroll",h,e4(T.scrollOptions))),P},[n.contextId,s,h,a]),m=qe(function(){var A=t.current,_=Kf(A);return A&&_||Se(),N2(_)},[]),v=qe(function(){var A=t.current;A||Se();var _=Kf(A);t.current=null,_&&(f.cancel(),_.removeAttribute(KI.contextId),_.removeEventListener("scroll",h,e4(A.scrollOptions)))},[h,f]),w=qe(function(A){var _=t.current;_||Se();var I=Kf(_);I||Se(),I.scrollTop+=A.y,I.scrollLeft+=A.x},[]),S=kt(function(){return{getDimensionAndWatchScroll:g,getScrollWhileDragging:m,dragStopped:v,scroll:w}},[v,g,m,w]),C=kt(function(){return{uniqueId:r,descriptor:s,callbacks:S}},[S,s,r]);ci(function(){return l.current=C.descriptor,i.droppable.register(C),function(){t.current&&v(),i.droppable.unregister(C)}},[S,s,v,C,o,i.droppable]),ci(function(){t.current&&o.updateDroppableIsEnabled(l.current.id,!e.isDropDisabled)},[e.isDropDisabled,o]),ci(function(){t.current&&o.updateDroppableIsCombineEnabled(l.current.id,e.isCombineEnabled)},[e.isCombineEnabled,o])}function Gy(){}var t4={width:0,height:0,margin:Ioe},ace=function(t){var n=t.isAnimatingOpenOnMount,r=t.placeholder,i=t.animate;return n||i==="close"?t4:{height:r.client.borderBox.height,width:r.client.borderBox.width,margin:r.client.margin}},sce=function(t){var n=t.isAnimatingOpenOnMount,r=t.placeholder,i=t.animate,o=ace({isAnimatingOpenOnMount:n,placeholder:r,animate:i});return{display:r.display,boxSizing:"border-box",width:o.width,height:o.height,marginTop:o.margin.top,marginRight:o.margin.right,marginBottom:o.margin.bottom,marginLeft:o.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:i!=="none"?Ud.placeholder:null}};function lce(e){var t=D.useRef(null),n=qe(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),r=e.animate,i=e.onTransitionEnd,o=e.onClose,a=e.contextId,s=D.useState(e.animate==="open"),l=s[0],c=s[1];D.useEffect(function(){return l?r!=="open"?(n(),c(!1),Gy):t.current?Gy:(t.current=setTimeout(function(){t.current=null,c(!1)}),n):Gy},[r,l,n]);var d=qe(function(f){f.propertyName==="height"&&(i(),r==="close"&&o())},[r,o,i]),p=sce({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return ut.createElement(e.placeholder.tagName,{style:p,"data-rbd-placeholder-context-id":a,onTransitionEnd:d,ref:e.innerRef})}var cce=ut.memo(lce),nC=ut.createContext(null),uce=function(e){sO(t,e);function t(){for(var r,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o))||this,r.state={isVisible:!!r.props.on,data:r.props.on,animate:r.props.shouldAnimate&&r.props.on?"open":"none"},r.onClose=function(){r.state.animate==="close"&&r.setState({isVisible:!1})},r}t.getDerivedStateFromProps=function(i,o){return i.shouldAnimate?i.on?{isVisible:!0,data:i.on,animate:"open"}:o.isVisible?{isVisible:!0,data:o.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!i.on,data:i.on,animate:"none"}};var n=t.prototype;return n.render=function(){if(!this.state.isVisible)return null;var i={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(i)},t}(ut.PureComponent),n4={dragging:5e3,dropAnimating:4500},dce=function(t,n){return n?Ud.drop(n.duration):t?Ud.snap:Ud.fluid},pce=function(t,n){return t?n?Bp.opacity.drop:Bp.opacity.combining:null},hce=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function fce(e){var t=e.dimension,n=t.client,r=e.offset,i=e.combineWith,o=e.dropping,a=!!i,s=hce(e),l=!!o,c=l?P2.drop(r,a):P2.moveTo(r),d={position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:dce(s,o),transform:c,opacity:pce(a,l),zIndex:l?n4.dropAnimating:n4.dragging,pointerEvents:"none"};return d}function gce(e){return{transform:P2.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function mce(e){return e.type==="DRAGGING"?fce(e):gce(e)}function vce(e,t,n){n===void 0&&(n=jn);var r=window.getComputedStyle(t),i=t.getBoundingClientRect(),o=EO(i,r),a=Zm(o,n),s={client:o,tagName:t.tagName.toLowerCase(),display:r.display},l={x:o.marginBox.width,y:o.marginBox.height},c={descriptor:e,placeholder:s,displaceBy:l,client:o,page:a};return c}function xce(e){var t=eC("draggable"),n=e.descriptor,r=e.registry,i=e.getDraggableRef,o=e.canDragInteractiveElements,a=e.shouldRespectForcePress,s=e.isEnabled,l=kt(function(){return{canDragInteractiveElements:o,shouldRespectForcePress:a,isEnabled:s}},[o,s,a]),c=qe(function(h){var g=i();return g||Se(),vce(n,g,h)},[n,i]),d=kt(function(){return{uniqueId:t,descriptor:n,options:l,getDimension:c}},[n,c,l,t]),p=D.useRef(d),f=D.useRef(!0);ci(function(){return r.draggable.register(p.current),function(){return r.draggable.unregister(p.current)}},[r.draggable]),ci(function(){if(f.current){f.current=!1;return}var h=p.current;p.current=d,r.draggable.update(d,h)},[d,r.draggable])}function yce(e){e.preventDefault()}function bce(e){var t=D.useRef(null),n=qe(function(T){t.current=T},[]),r=qe(function(){return t.current},[]),i=o0(Rv),o=i.contextId,a=i.dragHandleUsageInstructionsId,s=i.registry,l=o0(nC),c=l.type,d=l.droppableId,p=kt(function(){return{id:e.draggableId,index:e.index,type:c,droppableId:d}},[e.draggableId,e.index,c,d]),f=e.children,h=e.draggableId,g=e.isEnabled,m=e.shouldRespectForcePress,v=e.canDragInteractiveElements,w=e.isClone,S=e.mapped,C=e.dropAnimationFinished;if(!w){var A=kt(function(){return{descriptor:p,registry:s,getDraggableRef:r,canDragInteractiveElements:v,shouldRespectForcePress:m,isEnabled:g}},[p,s,r,v,m,g]);xce(A)}var _=kt(function(){return g?{tabIndex:0,role:"button","aria-describedby":a,"data-rbd-drag-handle-draggable-id":h,"data-rbd-drag-handle-context-id":o,draggable:!1,onDragStart:yce}:null},[o,a,h,g]),I=qe(function(T){S.type==="DRAGGING"&&S.dropping&&T.propertyName==="transform"&&C()},[C,S]),E=kt(function(){var T=mce(S),P=S.type==="DRAGGING"&&S.dropping?I:null,O={innerRef:n,draggableProps:{"data-rbd-draggable-context-id":o,"data-rbd-draggable-id":h,style:T,onTransitionEnd:P},dragHandleProps:_};return O},[o,_,h,S,I,n]),k=kt(function(){return{draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}}},[p.droppableId,p.id,p.index,p.type]);return f(E,S.snapshot,k)}var y$=function(e,t){return e===t},b$=function(e){var t=e.combine,n=e.destination;return n?n.droppableId:t?t.droppableId:null},wce=function(t){return t.combine?t.combine.draggableId:null},Sce=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function Cce(){var e=Vn(function(i,o){return{x:i,y:o}}),t=Vn(function(i,o,a,s,l){return{isDragging:!0,isClone:o,isDropAnimating:!!l,dropAnimation:l,mode:i,draggingOver:a,combineWith:s,combineTargetFor:null}}),n=Vn(function(i,o,a,s,l,c,d){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:l,combineWith:c,mode:o,offset:i,dimension:a,forceShouldAnimate:d,snapshot:t(o,s,l,c,null)}}}),r=function(o,a){if(o.isDragging){if(o.critical.draggable.id!==a.draggableId)return null;var s=o.current.client.offset,l=o.dimensions.draggables[a.draggableId],c=li(o.impact),d=Sce(o.impact),p=o.forceShouldAnimate;return n(e(s.x,s.y),o.movementMode,l,a.isClone,c,d,p)}if(o.phase==="DROP_ANIMATING"){var f=o.completed;if(f.result.draggableId!==a.draggableId)return null;var h=a.isClone,g=o.dimensions.draggables[a.draggableId],m=f.result,v=m.mode,w=b$(m),S=wce(m),C=o.dropDuration,A={duration:C,curve:GS.drop,moveTo:o.newHomeClientOffset,opacity:S?Bp.opacity.drop:null,scale:S?Bp.scale.drop:null};return{mapped:{type:"DRAGGING",offset:o.newHomeClientOffset,dimension:g,dropping:A,draggingOver:w,combineWith:S,mode:v,forceShouldAnimate:null,snapshot:t(v,h,w,S,A)}}}return null};return r}function w$(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var _ce={mapped:{type:"SECONDARY",offset:jn,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:w$(null)}};function kce(){var e=Vn(function(a,s){return{x:a,y:s}}),t=Vn(w$),n=Vn(function(a,s,l){return s===void 0&&(s=null),{mapped:{type:"SECONDARY",offset:a,combineTargetFor:s,shouldAnimateDisplacement:l,snapshot:t(s)}}}),r=function(s){return s?n(jn,s,!0):null},i=function(s,l,c,d){var p=c.displaced.visible[s],f=!!(d.inVirtualList&&d.effected[s]),h=Iv(c),g=h&&h.draggableId===s?l:null;if(!p){if(!f)return r(g);if(c.displaced.invisible[s])return null;var m=fu(d.displacedBy.point),v=e(m.x,m.y);return n(v,g,!0)}if(f)return r(g);var w=c.displacedBy.point,S=e(w.x,w.y);return n(S,g,p.shouldAnimate)},o=function(s,l){if(s.isDragging)return s.critical.draggable.id===l.draggableId?null:i(l.draggableId,s.critical.draggable.id,s.impact,s.afterCritical);if(s.phase==="DROP_ANIMATING"){var c=s.completed;return c.result.draggableId===l.draggableId?null:i(l.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null};return o}var Ece=function(){var t=Cce(),n=kce(),r=function(o,a){return t(o,a)||n(o,a)||_ce};return r},Tce={dropAnimationFinished:e$},Ice=_O(Ece,Tce,null,{context:ZS,pure:!0,areStatePropsEqual:y$})(bce);function S$(e){var t=o0(nC),n=t.isUsingCloneFor;return n===e.draggableId&&!e.isClone?null:ut.createElement(Ice,e)}function Ace(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,r=!!e.shouldRespectForcePress;return ut.createElement(S$,Ye({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}function Pce(e){var t=D.useContext(Rv);t||Se();var n=t.contextId,r=t.isMovementAllowed,i=D.useRef(null),o=D.useRef(null),a=e.children,s=e.droppableId,l=e.type,c=e.mode,d=e.direction,p=e.ignoreContainerClipping,f=e.isDropDisabled,h=e.isCombineEnabled,g=e.snapshot,m=e.useClone,v=e.updateViewportMaxScroll,w=e.getContainerForClone,S=qe(function(){return i.current},[]),C=qe(function(O){i.current=O},[]);qe(function(){return o.current},[]);var A=qe(function(O){o.current=O},[]),_=qe(function(){r()&&v({maxScroll:o$()})},[r,v]);oce({droppableId:s,type:l,mode:c,direction:d,isDropDisabled:f,isCombineEnabled:h,ignoreContainerClipping:p,getDroppableRef:S});var I=ut.createElement(uce,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(O){var R=O.onClose,N=O.data,L=O.animate;return ut.createElement(cce,{placeholder:N,onClose:R,innerRef:A,animate:L,contextId:n,onTransitionEnd:_})}),E=kt(function(){return{innerRef:C,placeholder:I,droppableProps:{"data-rbd-droppable-id":s,"data-rbd-droppable-context-id":n}}},[n,s,I,C]),k=m?m.dragging.draggableId:null,T=kt(function(){return{droppableId:s,type:l,isUsingCloneFor:k}},[s,k,l]);function P(){if(!m)return null;var O=m.dragging,R=m.render,N=ut.createElement(S$,{draggableId:O.draggableId,index:O.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(L,B){return R(L,B,O)});return V7.createPortal(N,w())}return ut.createElement(nC.Provider,{value:T},a(E,g),P())}var Yy=function(t,n){return t===n.droppable.type},r4=function(t,n){return n.draggables[t.draggable.id]},Dce=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},n=Ye({},t,{shouldAnimatePlaceholder:!1}),r=Vn(function(a){return{draggableId:a.id,type:a.type,source:{index:a.index,droppableId:a.droppableId}}}),i=Vn(function(a,s,l,c,d,p){var f=d.descriptor.id,h=d.descriptor.droppableId===a;if(h){var g=p?{render:p,dragging:r(d.descriptor)}:null,m={isDraggingOver:l,draggingOverWith:l?f:null,draggingFromThisWith:f,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:m,useClone:g}}if(!s)return n;if(!c)return t;var v={isDraggingOver:l,draggingOverWith:f,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:v,useClone:null}}),o=function(s,l){var c=l.droppableId,d=l.type,p=!l.isDropDisabled,f=l.renderClone;if(s.isDragging){var h=s.critical;if(!Yy(d,h))return n;var g=r4(h,s.dimensions),m=li(s.impact)===c;return i(c,p,m,m,g,f)}if(s.phase==="DROP_ANIMATING"){var v=s.completed;if(!Yy(d,v.critical))return n;var w=r4(v.critical,s.dimensions);return i(c,p,b$(v.result)===c,li(v.impact)===c,w,f)}if(s.phase==="IDLE"&&s.completed&&!s.shouldFlush){var S=s.completed;if(!Yy(d,S.critical))return n;var C=li(S.impact)===c,A=!!(S.impact.at&&S.impact.at.type==="COMBINE"),_=S.critical.droppable.id===c;return C?A?t:n:_?t:n}return n};return o},Rce={updateViewportMaxScroll:zae};function Nce(){return document.body||Se(),document.body}var Mce={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Nce},C$=_O(Dce,Rce,null,{context:ZS,pure:!0,areStatePropsEqual:y$})(Pce);C$.defaultProps=Mce;var rC={exports:{}},Ph={},Mv={exports:{}},_$={};function k$(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=k$(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function i4(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=k$(e))&&(r&&(r+=" "),r+=t);return r}const Oce=Object.freeze(Object.defineProperty({__proto__:null,clsx:i4,default:i4},Symbol.toStringTag,{value:"Module"})),$ce=fF(Oce);var vn={},Ao={};Object.defineProperty(Ao,"__esModule",{value:!0});Ao.dontSetMe=Vce;Ao.findInArray=Lce;Ao.int=zce;Ao.isFunction=Fce;Ao.isNum=Bce;function Lce(e,t){for(let n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]}function Fce(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function Bce(e){return typeof e=="number"&&!isNaN(e)}function zce(e){return parseInt(e,10)}function Vce(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))}var Tl={};Object.defineProperty(Tl,"__esModule",{value:!0});Tl.browserPrefixToKey=T$;Tl.browserPrefixToStyle=jce;Tl.default=void 0;Tl.getPrefix=E$;const Ky=["Moz","Webkit","O","ms"];function E$(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const n=(e=window.document)===null||e===void 0||(e=e.documentElement)===null||e===void 0?void 0:e.style;if(!n||t in n)return"";for(let r=0;r<Ky.length;r++)if(T$(t,Ky[r])in n)return Ky[r];return""}function T$(e,t){return t?"".concat(t).concat(Uce(e)):e}function jce(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e}function Uce(e){let t="",n=!0;for(let r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):e[r]==="-"?n=!0:t+=e[r];return t}Tl.default=E$();Object.defineProperty(vn,"__esModule",{value:!0});vn.addClassName=P$;vn.addEvent=Hce;vn.addUserSelectStyles=rue;vn.createCSSTransform=Zce;vn.createSVGTransform=eue;vn.getTouch=tue;vn.getTouchIdentifier=nue;vn.getTranslation=iC;vn.innerHeight=Xce;vn.innerWidth=Qce;vn.matchesSelector=A$;vn.matchesSelectorAndParentsTo=Wce;vn.offsetXYFromParent=Jce;vn.outerHeight=Yce;vn.outerWidth=Kce;vn.removeClassName=D$;vn.removeEvent=Gce;vn.removeUserSelectStyles=iue;var ui=Ao,o4=qce(Tl);function I$(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(I$=function(r){return r?n:t})(e)}function qce(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=I$(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}let Xf="";function A$(e,t){return Xf||(Xf=(0,ui.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,ui.isFunction)(e[n])})),(0,ui.isFunction)(e[Xf])?e[Xf](t):!1}function Wce(e,t,n){let r=e;do{if(A$(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function Hce(e,t,n,r){if(!e)return;const i={capture:!0,...r};e.addEventListener?e.addEventListener(t,n,i):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}function Gce(e,t,n,r){if(!e)return;const i={capture:!0,...r};e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}function Yce(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,ui.int)(n.borderTopWidth),t+=(0,ui.int)(n.borderBottomWidth),t}function Kce(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,ui.int)(n.borderLeftWidth),t+=(0,ui.int)(n.borderRightWidth),t}function Xce(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,ui.int)(n.paddingTop),t-=(0,ui.int)(n.paddingBottom),t}function Qce(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,ui.int)(n.paddingLeft),t-=(0,ui.int)(n.paddingRight),t}function Jce(e,t,n){const i=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),o=(e.clientX+t.scrollLeft-i.left)/n,a=(e.clientY+t.scrollTop-i.top)/n;return{x:o,y:a}}function Zce(e,t){const n=iC(e,t,"px");return{[(0,o4.browserPrefixToKey)("transform",o4.default)]:n}}function eue(e,t){return iC(e,t,"")}function iC(e,t,n){let{x:r,y:i}=e,o="translate(".concat(r).concat(n,",").concat(i).concat(n,")");if(t){const a="".concat(typeof t.x=="string"?t.x:t.x+n),s="".concat(typeof t.y=="string"?t.y:t.y+n);o="translate(".concat(a,", ").concat(s,")")+o}return o}function tue(e,t){return e.targetTouches&&(0,ui.findInArray)(e.targetTouches,n=>t===n.identifier)||e.changedTouches&&(0,ui.findInArray)(e.changedTouches,n=>t===n.identifier)}function nue(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function rue(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,e.getElementsByTagName("head")[0].appendChild(t)),e.body&&P$(e.body,"react-draggable-transparent-selection")}function iue(e){if(e)try{if(e.body&&D$(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function P$(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function D$(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var Po={};Object.defineProperty(Po,"__esModule",{value:!0});Po.canDragX=sue;Po.canDragY=lue;Po.createCoreData=uue;Po.createDraggableData=due;Po.getBoundPosition=oue;Po.getControlPosition=cue;Po.snapToGrid=aue;var Qr=Ao,lc=vn;function oue(e,t,n){if(!e.props.bounds)return[t,n];let{bounds:r}=e.props;r=typeof r=="string"?r:pue(r);const i=oC(e);if(typeof r=="string"){const{ownerDocument:o}=i,a=o.defaultView;let s;if(r==="parent"?s=i.parentNode:s=o.querySelector(r),!(s instanceof a.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const l=s,c=a.getComputedStyle(i),d=a.getComputedStyle(l);r={left:-i.offsetLeft+(0,Qr.int)(d.paddingLeft)+(0,Qr.int)(c.marginLeft),top:-i.offsetTop+(0,Qr.int)(d.paddingTop)+(0,Qr.int)(c.marginTop),right:(0,lc.innerWidth)(l)-(0,lc.outerWidth)(i)-i.offsetLeft+(0,Qr.int)(d.paddingRight)-(0,Qr.int)(c.marginRight),bottom:(0,lc.innerHeight)(l)-(0,lc.outerHeight)(i)-i.offsetTop+(0,Qr.int)(d.paddingBottom)-(0,Qr.int)(c.marginBottom)}}return(0,Qr.isNum)(r.right)&&(t=Math.min(t,r.right)),(0,Qr.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,Qr.isNum)(r.left)&&(t=Math.max(t,r.left)),(0,Qr.isNum)(r.top)&&(n=Math.max(n,r.top)),[t,n]}function aue(e,t,n){const r=Math.round(t/e[0])*e[0],i=Math.round(n/e[1])*e[1];return[r,i]}function sue(e){return e.props.axis==="both"||e.props.axis==="x"}function lue(e){return e.props.axis==="both"||e.props.axis==="y"}function cue(e,t,n){const r=typeof t=="number"?(0,lc.getTouch)(e,t):null;if(typeof t=="number"&&!r)return null;const i=oC(n),o=n.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,lc.offsetXYFromParent)(r||e,o,n.props.scale)}function uue(e,t,n){const r=!(0,Qr.isNum)(e.lastX),i=oC(e);return r?{node:i,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:i,deltaX:t-e.lastX,deltaY:n-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:n}}function due(e,t){const n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}}function pue(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function oC(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var Ov={},$v={};Object.defineProperty($v,"__esModule",{value:!0});$v.default=hue;function hue(){}Object.defineProperty(Ov,"__esModule",{value:!0});Ov.default=void 0;var Xy=gue(D),Nr=aC(_v),fue=aC(ru),dr=vn,Ea=Po,Qy=Ao,Xu=aC($v);function aC(e){return e&&e.__esModule?e:{default:e}}function R$(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(R$=function(r){return r?n:t})(e)}function gue(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=R$(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function _r(e,t,n){return t=mue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mue(e){var t=vue(e,"string");return typeof t=="symbol"?t:String(t)}function vue(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const Ui={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Ta=Ui.mouse,Lv=class extends Xy.Component{constructor(){super(...arguments),_r(this,"dragging",!1),_r(this,"lastX",NaN),_r(this,"lastY",NaN),_r(this,"touchIdentifier",null),_r(this,"mounted",!1),_r(this,"handleDragStart",t=>{if(this.props.onMouseDown(t),!this.props.allowAnyClick&&typeof t.button=="number"&&t.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(t.target instanceof r.defaultView.Node)||this.props.handle&&!(0,dr.matchesSelectorAndParentsTo)(t.target,this.props.handle,n)||this.props.cancel&&(0,dr.matchesSelectorAndParentsTo)(t.target,this.props.cancel,n))return;t.type==="touchstart"&&t.preventDefault();const i=(0,dr.getTouchIdentifier)(t);this.touchIdentifier=i;const o=(0,Ea.getControlPosition)(t,i,this);if(o==null)return;const{x:a,y:s}=o,l=(0,Ea.createCoreData)(this,a,s);(0,Xu.default)("DraggableCore: handleDragStart: %j",l),(0,Xu.default)("calling",this.props.onStart),!(this.props.onStart(t,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,dr.addUserSelectStyles)(r),this.dragging=!0,this.lastX=a,this.lastY=s,(0,dr.addEvent)(r,Ta.move,this.handleDrag),(0,dr.addEvent)(r,Ta.stop,this.handleDragStop))}),_r(this,"handleDrag",t=>{const n=(0,Ea.getControlPosition)(t,this.touchIdentifier,this);if(n==null)return;let{x:r,y:i}=n;if(Array.isArray(this.props.grid)){let s=r-this.lastX,l=i-this.lastY;if([s,l]=(0,Ea.snapToGrid)(this.props.grid,s,l),!s&&!l)return;r=this.lastX+s,i=this.lastY+l}const o=(0,Ea.createCoreData)(this,r,i);if((0,Xu.default)("DraggableCore: handleDrag: %j",o),this.props.onDrag(t,o)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=r,this.lastY=i}),_r(this,"handleDragStop",t=>{if(!this.dragging)return;const n=(0,Ea.getControlPosition)(t,this.touchIdentifier,this);if(n==null)return;let{x:r,y:i}=n;if(Array.isArray(this.props.grid)){let l=r-this.lastX||0,c=i-this.lastY||0;[l,c]=(0,Ea.snapToGrid)(this.props.grid,l,c),r=this.lastX+l,i=this.lastY+c}const o=(0,Ea.createCoreData)(this,r,i);if(this.props.onStop(t,o)===!1||this.mounted===!1)return!1;const s=this.findDOMNode();s&&this.props.enableUserSelectHack&&(0,dr.removeUserSelectStyles)(s.ownerDocument),(0,Xu.default)("DraggableCore: handleDragStop: %j",o),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,s&&((0,Xu.default)("DraggableCore: Removing handlers"),(0,dr.removeEvent)(s.ownerDocument,Ta.move,this.handleDrag),(0,dr.removeEvent)(s.ownerDocument,Ta.stop,this.handleDragStop))}),_r(this,"onMouseDown",t=>(Ta=Ui.mouse,this.handleDragStart(t))),_r(this,"onMouseUp",t=>(Ta=Ui.mouse,this.handleDragStop(t))),_r(this,"onTouchStart",t=>(Ta=Ui.touch,this.handleDragStart(t))),_r(this,"onTouchEnd",t=>(Ta=Ui.touch,this.handleDragStop(t)))}componentDidMount(){this.mounted=!0;const t=this.findDOMNode();t&&(0,dr.addEvent)(t,Ui.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const t=this.findDOMNode();if(t){const{ownerDocument:n}=t;(0,dr.removeEvent)(n,Ui.mouse.move,this.handleDrag),(0,dr.removeEvent)(n,Ui.touch.move,this.handleDrag),(0,dr.removeEvent)(n,Ui.mouse.stop,this.handleDragStop),(0,dr.removeEvent)(n,Ui.touch.stop,this.handleDragStop),(0,dr.removeEvent)(t,Ui.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,dr.removeUserSelectStyles)(n)}}findDOMNode(){var t,n;return(t=this.props)!==null&&t!==void 0&&t.nodeRef?(n=this.props)===null||n===void 0||(n=n.nodeRef)===null||n===void 0?void 0:n.current:fue.default.findDOMNode(this)}render(){return Xy.cloneElement(Xy.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};Ov.default=Lv;_r(Lv,"displayName","DraggableCore");_r(Lv,"propTypes",{allowAnyClick:Nr.default.bool,children:Nr.default.node.isRequired,disabled:Nr.default.bool,enableUserSelectHack:Nr.default.bool,offsetParent:function(e,t){if(e[t]&&e[t].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Nr.default.arrayOf(Nr.default.number),handle:Nr.default.string,cancel:Nr.default.string,nodeRef:Nr.default.object,onStart:Nr.default.func,onDrag:Nr.default.func,onStop:Nr.default.func,onMouseDown:Nr.default.func,scale:Nr.default.number,className:Qy.dontSetMe,style:Qy.dontSetMe,transform:Qy.dontSetMe});_r(Lv,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),e.default=void 0;var t=f(D),n=d(_v),r=d(ru),i=d($ce),o=vn,a=Po,s=Ao,l=d(Ov),c=d($v);function d(S){return S&&S.__esModule?S:{default:S}}function p(S){if(typeof WeakMap!="function")return null;var C=new WeakMap,A=new WeakMap;return(p=function(_){return _?A:C})(S)}function f(S,C){if(S&&S.__esModule)return S;if(S===null||typeof S!="object"&&typeof S!="function")return{default:S};var A=p(C);if(A&&A.has(S))return A.get(S);var _={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in S)if(E!=="default"&&Object.prototype.hasOwnProperty.call(S,E)){var k=I?Object.getOwnPropertyDescriptor(S,E):null;k&&(k.get||k.set)?Object.defineProperty(_,E,k):_[E]=S[E]}return _.default=S,A&&A.set(S,_),_}function h(){return h=Object.assign?Object.assign.bind():function(S){for(var C=1;C<arguments.length;C++){var A=arguments[C];for(var _ in A)Object.prototype.hasOwnProperty.call(A,_)&&(S[_]=A[_])}return S},h.apply(this,arguments)}function g(S,C,A){return C=m(C),C in S?Object.defineProperty(S,C,{value:A,enumerable:!0,configurable:!0,writable:!0}):S[C]=A,S}function m(S){var C=v(S,"string");return typeof C=="symbol"?C:String(C)}function v(S,C){if(typeof S!="object"||S===null)return S;var A=S[Symbol.toPrimitive];if(A!==void 0){var _=A.call(S,C);if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(S)}class w extends t.Component{static getDerivedStateFromProps(C,A){let{position:_}=C,{prevPropsPosition:I}=A;return _&&(!I||_.x!==I.x||_.y!==I.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:_,prevPropsPosition:I}),{x:_.x,y:_.y,prevPropsPosition:{..._}}):null}constructor(C){super(C),g(this,"onDragStart",(A,_)=>{if((0,c.default)("Draggable: onDragStart: %j",_),this.props.onStart(A,(0,a.createDraggableData)(this,_))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),g(this,"onDrag",(A,_)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",_);const I=(0,a.createDraggableData)(this,_),E={x:I.x,y:I.y,slackX:0,slackY:0};if(this.props.bounds){const{x:T,y:P}=E;E.x+=this.state.slackX,E.y+=this.state.slackY;const[O,R]=(0,a.getBoundPosition)(this,E.x,E.y);E.x=O,E.y=R,E.slackX=this.state.slackX+(T-E.x),E.slackY=this.state.slackY+(P-E.y),I.x=E.x,I.y=E.y,I.deltaX=E.x-this.state.x,I.deltaY=E.y-this.state.y}if(this.props.onDrag(A,I)===!1)return!1;this.setState(E)}),g(this,"onDragStop",(A,_)=>{if(!this.state.dragging||this.props.onStop(A,(0,a.createDraggableData)(this,_))===!1)return!1;(0,c.default)("Draggable: onDragStop: %j",_);const E={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:T,y:P}=this.props.position;E.x=T,E.y=P}this.setState(E)}),this.state={dragging:!1,dragged:!1,x:C.position?C.position.x:C.defaultPosition.x,y:C.position?C.position.y:C.defaultPosition.y,prevPropsPosition:{...C.position},slackX:0,slackY:0,isElementSVG:!1},C.position&&!(C.onDrag||C.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var C,A;return(C=(A=this.props)===null||A===void 0||(A=A.nodeRef)===null||A===void 0?void 0:A.current)!==null&&C!==void 0?C:r.default.findDOMNode(this)}render(){const{axis:C,bounds:A,children:_,defaultPosition:I,defaultClassName:E,defaultClassNameDragging:k,defaultClassNameDragged:T,position:P,positionOffset:O,scale:R,...N}=this.props;let L={},B=null;const j=!!!P||this.state.dragging,z=P||I,H={x:(0,a.canDragX)(this)&&j?this.state.x:z.x,y:(0,a.canDragY)(this)&&j?this.state.y:z.y};this.state.isElementSVG?B=(0,o.createSVGTransform)(H,O):L=(0,o.createCSSTransform)(H,O);const J=(0,i.default)(_.props.className||"",E,{[k]:this.state.dragging,[T]:this.state.dragged});return t.createElement(l.default,h({},N,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(_),{className:J,style:{..._.props.style,...L},transform:B}))}}e.default=w,g(w,"displayName","Draggable"),g(w,"propTypes",{...l.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:s.dontSetMe,style:s.dontSetMe,transform:s.dontSetMe}),g(w,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(_$);const{default:N$,DraggableCore:xue}=_$;Mv.exports=N$;Mv.exports.default=N$;Mv.exports.DraggableCore=xue;var yue=Mv.exports,sC={};sC.__esModule=!0;sC.cloneElement=kue;var bue=wue(D);function wue(e){return e&&e.__esModule?e:{default:e}}function a4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function s4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?a4(Object(n),!0).forEach(function(r){Sue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sue(e,t,n){return t=Cue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cue(e){var t=_ue(e,"string");return typeof t=="symbol"?t:String(t)}function _ue(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kue(e,t){return t.style&&e.props.style&&(t.style=s4(s4({},e.props.style),t.style)),t.className&&e.props.className&&(t.className=e.props.className+" "+t.className),bue.default.cloneElement(e,t)}var Dh={};Dh.__esModule=!0;Dh.resizableProps=void 0;var ct=Eue(_v);function Eue(e){return e&&e.__esModule?e:{default:e}}var Tue={axis:ct.default.oneOf(["both","x","y","none"]),className:ct.default.string,children:ct.default.element.isRequired,draggableOpts:ct.default.shape({allowAnyClick:ct.default.bool,cancel:ct.default.string,children:ct.default.node,disabled:ct.default.bool,enableUserSelectHack:ct.default.bool,offsetParent:ct.default.node,grid:ct.default.arrayOf(ct.default.number),handle:ct.default.string,nodeRef:ct.default.object,onStart:ct.default.func,onDrag:ct.default.func,onStop:ct.default.func,onMouseDown:ct.default.func,scale:ct.default.number}),height:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0];if(i.axis==="both"||i.axis==="y"){var o;return(o=ct.default.number).isRequired.apply(o,n)}return ct.default.number.apply(ct.default,n)},handle:ct.default.oneOfType([ct.default.node,ct.default.func]),handleSize:ct.default.arrayOf(ct.default.number),lockAspectRatio:ct.default.bool,maxConstraints:ct.default.arrayOf(ct.default.number),minConstraints:ct.default.arrayOf(ct.default.number),onResizeStop:ct.default.func,onResizeStart:ct.default.func,onResize:ct.default.func,resizeHandles:ct.default.arrayOf(ct.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:ct.default.number,width:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0];if(i.axis==="both"||i.axis==="x"){var o;return(o=ct.default.number).isRequired.apply(o,n)}return ct.default.number.apply(ct.default,n)}};Dh.resizableProps=Tue;Ph.__esModule=!0;Ph.default=void 0;var Qu=Rue(D),Iue=yue,Aue=sC,Pue=Dh,Due=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function M$(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(M$=function(i){return i?n:t})(e)}function Rue(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=M$(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function M2(){return M2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M2.apply(this,arguments)}function Nue(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function l4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Jy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l4(Object(n),!0).forEach(function(r){Mue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mue(e,t,n){return t=Oue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oue(e){var t=$ue(e,"string");return typeof t=="symbol"?t:String(t)}function $ue(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lue(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,O2(e,t)}function O2(e,t){return O2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},O2(e,t)}var lC=function(e){Lue(t,e);function t(){for(var r,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o))||this,r.handleRefs={},r.lastHandleRect=null,r.slack=null,r}var n=t.prototype;return n.componentWillUnmount=function(){this.resetData()},n.resetData=function(){this.lastHandleRect=this.slack=null},n.runConstraints=function(i,o){var a=this.props,s=a.minConstraints,l=a.maxConstraints,c=a.lockAspectRatio;if(!s&&!l&&!c)return[i,o];if(c){var d=this.props.width/this.props.height,p=i-this.props.width,f=o-this.props.height;Math.abs(p)>Math.abs(f*d)?o=i/d:i=o*d}var h=i,g=o,m=this.slack||[0,0],v=m[0],w=m[1];return i+=v,o+=w,s&&(i=Math.max(s[0],i),o=Math.max(s[1],o)),l&&(i=Math.min(l[0],i),o=Math.min(l[1],o)),this.slack=[v+(h-i),w+(g-o)],[i,o]},n.resizeHandler=function(i,o){var a=this;return function(s,l){var c=l.node,d=l.deltaX,p=l.deltaY;i==="onResizeStart"&&a.resetData();var f=(a.props.axis==="both"||a.props.axis==="x")&&o!=="n"&&o!=="s",h=(a.props.axis==="both"||a.props.axis==="y")&&o!=="e"&&o!=="w";if(!(!f&&!h)){var g=o[0],m=o[o.length-1],v=c.getBoundingClientRect();if(a.lastHandleRect!=null){if(m==="w"){var w=v.left-a.lastHandleRect.left;d+=w}if(g==="n"){var S=v.top-a.lastHandleRect.top;p+=S}}a.lastHandleRect=v,m==="w"&&(d=-d),g==="n"&&(p=-p);var C=a.props.width+(f?d/a.props.transformScale:0),A=a.props.height+(h?p/a.props.transformScale:0),_=a.runConstraints(C,A);C=_[0],A=_[1];var I=C!==a.props.width||A!==a.props.height,E=typeof a.props[i]=="function"?a.props[i]:null,k=i==="onResize"&&!I;E&&!k&&(s.persist==null||s.persist(),E(s,{node:c,size:{width:C,height:A},handle:o})),i==="onResizeStop"&&a.resetData()}}},n.renderResizeHandle=function(i,o){var a=this.props.handle;if(!a)return Qu.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+i,ref:o});if(typeof a=="function")return a(i,o);var s=typeof a.type=="string",l=Jy({ref:o},s?{}:{handleAxis:i});return Qu.cloneElement(a,l)},n.render=function(){var i=this,o=this.props,a=o.children,s=o.className,l=o.draggableOpts;o.width,o.height,o.handle,o.handleSize,o.lockAspectRatio,o.axis,o.minConstraints,o.maxConstraints,o.onResize,o.onResizeStop,o.onResizeStart;var c=o.resizeHandles;o.transformScale;var d=Nue(o,Due);return(0,Aue.cloneElement)(a,Jy(Jy({},d),{},{className:(s?s+" ":"")+"react-resizable",children:[].concat(a.props.children,c.map(function(p){var f,h=(f=i.handleRefs[p])!=null?f:i.handleRefs[p]=Qu.createRef();return Qu.createElement(Iue.DraggableCore,M2({},l,{nodeRef:h,key:"resizableHandle-"+p,onStop:i.resizeHandler("onResizeStop",p),onStart:i.resizeHandler("onResizeStart",p),onDrag:i.resizeHandler("onResize",p)}),i.renderResizeHandle(p,h))}))}))},t}(Qu.Component);Ph.default=lC;lC.propTypes=Pue.resizableProps;lC.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var Fv={};Fv.__esModule=!0;Fv.default=void 0;var Zy=jue(D),Fue=O$(_v),Bue=O$(Ph),zue=Dh,Vue=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function O$(e){return e&&e.__esModule?e:{default:e}}function $$(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return($$=function(i){return i?n:t})(e)}function jue(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=$$(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function $2(){return $2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$2.apply(this,arguments)}function c4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function a0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c4(Object(n),!0).forEach(function(r){Uue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Uue(e,t,n){return t=que(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function que(e){var t=Wue(e,"string");return typeof t=="symbol"?t:String(t)}function Wue(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hue(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Gue(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,L2(e,t)}function L2(e,t){return L2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},L2(e,t)}var L$=function(e){Gue(t,e);function t(){for(var r,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o))||this,r.state={width:r.props.width,height:r.props.height,propsWidth:r.props.width,propsHeight:r.props.height},r.onResize=function(s,l){var c=l.size;r.props.onResize?(s.persist==null||s.persist(),r.setState(c,function(){return r.props.onResize&&r.props.onResize(s,l)})):r.setState(c)},r}t.getDerivedStateFromProps=function(i,o){return o.propsWidth!==i.width||o.propsHeight!==i.height?{width:i.width,height:i.height,propsWidth:i.width,propsHeight:i.height}:null};var n=t.prototype;return n.render=function(){var i=this.props,o=i.handle,a=i.handleSize;i.onResize;var s=i.onResizeStart,l=i.onResizeStop,c=i.draggableOpts,d=i.minConstraints,p=i.maxConstraints,f=i.lockAspectRatio,h=i.axis;i.width,i.height;var g=i.resizeHandles,m=i.style,v=i.transformScale,w=Hue(i,Vue);return Zy.createElement(Bue.default,{axis:h,draggableOpts:c,handle:o,handleSize:a,height:this.state.height,lockAspectRatio:f,maxConstraints:p,minConstraints:d,onResizeStart:s,onResize:this.onResize,onResizeStop:l,resizeHandles:g,transformScale:v,width:this.state.width},Zy.createElement("div",$2({},w,{style:a0(a0({},m),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},t}(Zy.Component);Fv.default=L$;L$.propTypes=a0(a0({},zue.resizableProps),{},{children:Fue.default.element});rC.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};rC.exports.Resizable=Ph.default;rC.exports.ResizableBox=Fv.default;const u4=b("div",{target:"e1c9ckie27"})({name:"29upag",styles:"max-width:1000px;margin:20px auto 80px;padding:0 20px"}),Yue=b("div",{target:"e1c9ckie26"})("background:",e=>e.theme.cardBg,";border-radius:15px;padding:30px;margin-bottom:30px;box-shadow:0 8px 30px ",e=>e.theme.shadowColor,";"),Kue=b("h2",{target:"e1c9ckie25"})("font-size:20px;font-weight:600;margin-bottom:20px;color:",e=>e.theme.text,";position:relative;padding-bottom:10px;border-bottom:1px solid ",e=>e.theme.gray,"50;"),Xue=b("div",{target:"e1c9ckie24"})({name:"1azpx8r",styles:"margin-bottom:20px"}),Que=b("label",{target:"e1c9ckie23"})("display:block;font-weight:500;margin-bottom:8px;color:",e=>e.theme.text,";"),Jue=b("input",{target:"e1c9ckie22"})("width:100%;padding:12px 15px;border:1px solid ",e=>e.theme.gray,"50;border-radius:8px;background-color:",e=>e.theme.inputBg,";color:",e=>e.theme.text,";font-size:15px;transition:all 0.3s ease;&:focus{outline:none;border-color:",e=>e.theme.primary,";box-shadow:0 0 0 3px ",e=>e.theme.primary,"30;}"),Zue=b("div",{target:"e1c9ckie21"})({name:"1jl19ki",styles:"display:flex;justify-content:space-between;margin-top:30px"}),Bv=b("button",{target:"e1c9ckie20"})({name:"1pocd46",styles:"padding:12px 25px;border-radius:8px;font-weight:600;font-size:15px;cursor:pointer;transition:all 0.3s ease;&:hover{transform:translateY(-3px);box-shadow:0 6px 15px rgba(0, 0, 0, 0.1);}"}),ede=b(Bv,{target:"e1c9ckie19"})("background:linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%);color:white;border:none;&:hover{box-shadow:0 6px 15px rgba(124, 58, 237, 0.3);}&:disabled{background:",e=>e.theme.gray,";cursor:not-allowed;transform:none;box-shadow:none;}"),tde=b(Bv,{target:"e1c9ckie18"})("background:transparent;color:",e=>e.theme.text,";border:1px solid ",e=>e.theme.gray,";"),nde=b("div",{target:"e1c9ckie17"})("text-align:center;padding:50px 0;i{font-size:48px;animation:spin 1s linear infinite;display:inline-block;color:",e=>e.theme.primary,";@keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}}p{margin-top:20px;color:",e=>e.theme.textSecondary,";}"),rde=b("div",{target:"e1c9ckie16"})({name:"iqoq9n",styles:"margin-top:20px"}),ide=b("div",{target:"e1c9ckie15"})("position:relative;margin-bottom:10px;transition:",e=>e.isDragging?"none":"all 0.3s ease",";"),ode=b("div",{target:"e1c9ckie14"})("border:2px solid ",e=>e.isSelected?e.theme.primary:e.theme.gray,"30;border-radius:10px;overflow:hidden;position:relative;background:",e=>e.theme.cardBg,";box-shadow:",e=>e.isSelected?`0 0 0 2px ${e.theme.primary}40`:"none",";"),ade=b("div",{target:"e1c9ckie13"})("display:flex;justify-content:space-between;align-items:center;padding:10px 15px;background:",e=>e.theme.bgLight,";border-bottom:1px solid ",e=>e.theme.gray,"30;"),sde=b("div",{target:"e1c9ckie12"})("font-size:14px;font-weight:600;color:",e=>e.theme.text,";display:flex;align-items:center;i{margin-right:8px;color:",e=>e.theme.primary,";}"),lde=b("div",{target:"e1c9ckie11"})({name:"11jf4ye",styles:"display:flex;gap:8px"}),cde=b("button",{target:"e1c9ckie10"})("background:none;border:none;font-size:18px;color:",e=>e.danger?e.theme.danger:e.theme.textSecondary,";cursor:pointer;padding:2px;border-radius:4px;display:flex;align-items:center;justify-content:center;&:hover{color:",e=>e.danger?e.theme.danger:e.theme.primary,";background:",e=>e.theme.bgHover,";}"),ude=b("textarea",{target:"e1c9ckie9"})("width:100%;min-height:",e=>e.height||"150px",";padding:15px;border:none;background-color:",e=>e.theme.inputBg,";color:",e=>e.theme.text,";font-size:15px;resize:none;&:focus{outline:none;}"),dde=b("div",{target:"e1c9ckie8"})({name:"1mjdgm5",styles:"width:100%;padding:15px;display:flex;flex-direction:column;align-items:center"}),pde=b("img",{target:"e1c9ckie7"})({name:"1gnc8jd",styles:"max-width:100%;height:auto;border-radius:5px"}),hde=b("div",{target:"e1c9ckie6"})("width:100%;height:200px;background:",e=>e.theme.bgLight,";border-radius:5px;display:flex;flex-direction:column;justify-content:center;align-items:center;color:",e=>e.theme.textSecondary,";i{font-size:32px;margin-bottom:10px;}"),fde=b("input",{target:"e1c9ckie5"})({name:"eivff4",styles:"display:none"}),gde=b(Bv,{target:"e1c9ckie4"})("margin-top:10px;padding:8px 15px;font-size:14px;background:",e=>e.theme.bgLight,";color:",e=>e.theme.text,";border:1px solid ",e=>e.theme.gray,"40;&:hover{transform:translateY(-2px);background:",e=>e.theme.bgHover,";}"),mde=b("div",{target:"e1c9ckie3"})("width:10px;height:10px;background-color:",e=>e.theme.primary,";position:absolute;bottom:0;right:0;cursor:se-resize;border-radius:0 0 4px 0;"),vde=b(Bv,{target:"e1c9ckie2"})("width:100%;margin-top:20px;padding:10px;background:",e=>e.theme.bgLight,";color:",e=>e.theme.text,";border:1px dashed ",e=>e.theme.gray,"60;display:flex;justify-content:center;align-items:center;i{margin-right:8px;font-size:18px;}&:hover{transform:translateY(-2px);background:",e=>e.theme.bgHover,";}"),xde=b("div",{target:"e1c9ckie1"})("position:absolute;top:100%;left:0;right:0;background:",e=>e.theme.cardBg,";border-radius:8px;padding:10px;box-shadow:0 5px 20px rgba(0, 0, 0, 0.15);z-index:10;display:",e=>e.isVisible?"block":"none",";margin-top:10px;"),d4=b("div",{target:"e1c9ckie0"})("padding:10px;display:flex;align-items:center;border-radius:6px;cursor:pointer;&:hover{background:",e=>e.theme.bgHover,";}i{margin-right:10px;font-size:18px;color:",e=>e.theme.primary,";}span{font-weight:500;}"),yde=()=>{const{chapterId:e,sectionIndex:t}=au(),[n,r]=D.useState(!0),[i,o]=D.useState(""),[a,s]=D.useState([]),[l,c]=D.useState(null),[d,p]=D.useState(!1),[f,h]=D.useState(!1),g=D.useRef(null),m=qt(),{user:v,userRole:w}=Bi();D.useEffect(()=>{v&&w!=="enterprise"&&(We.error("此頁面僅限企業用戶訪問"),m("/"))},[v,w,m]),D.useEffect(()=>{(async()=>{try{r(!0);const L=Ie(U,"courses",e),B=await In(L);if(!B.exists()){We.error("找不到指定的章節"),m("/course-creator");return}const j=B.data().chapters[parseInt(t)-1];if(!j){We.error("找不到指定的小節"),m("/course-creator");return}o(j.title||""),j.blocks&&j.blocks.length>0?s(j.blocks):j.content?s([{id:fo(),type:"text",content:j.content,height:"300px"}]):s([{id:fo(),type:"text",content:"",height:"300px"}]),r(!1)}catch(L){console.error("獲取課程數據時發生錯誤:",L),We.error("獲取課程數據時發生錯誤，請稍後再試"),r(!1)}})()},[e,t,m]);const S=async()=>{if(!i.trim()){We.error("請輸入小節標題");return}try{p(!0);const N=Ie(U,"courses",e),L=await In(N);if(!L.exists()){We.error("找不到指定的章節"),p(!1);return}const V=[...L.data().chapters];if(!V[parseInt(t)-1]){We.error("找不到指定的小節"),p(!1);return}const j=a.filter(z=>z.type==="text").map(z=>z.content).join(`

`);V[parseInt(t)-1]={...V[parseInt(t)-1],title:i,content:j,blocks:a,updatedAt:Date.now()},await fn(N,{chapters:V,updatedAt:At()}),We.success("課程內容保存成功！"),p(!1),m("/course-creator")}catch(N){console.error("保存課程內容時發生錯誤:",N),We.error("保存課程內容時發生錯誤，請稍後再試"),p(!1)}},C=()=>{m("/course-creator")},A=N=>{const L={id:fo(),type:N,content:N==="text"?"":null,height:N==="text"?"150px":"auto",src:N==="image"?null:void 0};s([...a,L]),c(L.id),h(!1)},_=(N,L)=>{s(a.map(B=>B.id===N?{...B,content:L}:B))},I=N=>{s(a.filter(L=>L.id!==N)),l===N&&c(null)},E=N=>{if(!N.destination)return;const L=Array.from(a),[B]=L.splice(N.source.index,1);L.splice(N.destination.index,0,B),s(L)},k=N=>{c(N)},T=(N,L)=>{s(a.map(B=>B.id===N?{...B,height:L}:B))},P=async N=>{if(g.current.files[0])try{const L=g.current.files[0];if(!L.type.startsWith("image/")){We.error("請選擇圖片文件");return}const B=L.name.split(".").pop(),V=`${fo()}.${B}`,j=YM(KM,`course_images/${V}`);We.info("正在上傳圖片..."),await HM(j,L);const z=await GM(j);s(a.map(H=>H.id===N?{...H,src:z}:H)),We.success("圖片上傳成功！"),g.current.value=null}catch(L){console.error("上傳圖片時發生錯誤:",L),We.error("上傳圖片時發生錯誤，請稍後再試")}},O=()=>{h(!f)},R=N=>{switch(N.type){case"text":return u(ude,{value:N.content||"",onChange:L=>_(N.id,L.target.value),placeholder:"輸入文字內容...",height:N.height});case"image":return y(dde,{children:[N.src?u(pde,{src:N.src,alt:"課程圖片"}):y(hde,{children:[u("i",{className:"ri-image-line"}),u("span",{children:"尚未上傳圖片"})]}),u(fde,{type:"file",ref:g,accept:"image/*",onChange:()=>P(N.id)}),u(gde,{onClick:()=>g.current.click(),children:N.src?"更換圖片":"上傳圖片"})]});default:return null}};return n?y(Ne,{children:[u(Bt,{title:"加載課程內容",tagline:"請稍候..."}),u(u4,{children:y(nde,{children:[u("i",{className:"ri-loader-4-line"}),u("p",{children:"正在載入課程內容..."})]})})]}):y(Ne,{children:[u(Bt,{title:"編輯課程內容",tagline:"豐富課程學習資源"}),u(u4,{children:y(Yue,{children:[u(Kue,{children:"編輯課程小節"}),y(Xue,{children:[u(Que,{children:"小節標題"}),u(Jue,{type:"text",placeholder:"輸入小節標題",value:i,onChange:N=>o(N.target.value)})]}),y(rde,{children:[u(Hle,{onDragEnd:E,children:u(C$,{droppableId:"blocks",children:N=>y("div",{...N.droppableProps,ref:N.innerRef,children:[a.map((L,B)=>u(Ace,{draggableId:L.id,index:B,children:(V,j)=>u(ide,{ref:V.innerRef,...V.draggableProps,isDragging:j.isDragging,children:y(ode,{isSelected:l===L.id,onClick:()=>k(L.id),children:[y(ade,{...V.dragHandleProps,children:[y(sde,{children:[u("i",{className:L.type==="text"?"ri-file-text-line":"ri-image-line"}),L.type==="text"?"文字區塊":"圖片區塊"]}),u(lde,{children:u(cde,{onClick:()=>I(L.id),danger:!0,children:u("i",{className:"ri-delete-bin-line"})})})]}),R(L),L.type==="text"&&u("div",{style:{position:"absolute",bottom:0,right:0,width:10,height:10,cursor:"se-resize"},onMouseDown:z=>{const H=z.clientY,J=parseInt(L.height),de=Ce=>{const te=J+(Ce.clientY-H);te>=100&&T(L.id,`${te}px`)},ae=()=>{document.removeEventListener("mousemove",de),document.removeEventListener("mouseup",ae)};document.addEventListener("mousemove",de),document.addEventListener("mouseup",ae)},children:u(mde,{})})]})})},L.id)),N.placeholder]})})}),y("div",{style:{position:"relative"},children:[y(vde,{onClick:O,children:[u("i",{className:"ri-add-line"}),"添加新區塊"]}),y(xde,{isVisible:f,children:[y(d4,{onClick:()=>A("text"),children:[u("i",{className:"ri-file-text-line"}),u("span",{children:"文字區塊"})]}),y(d4,{onClick:()=>A("image"),children:[u("i",{className:"ri-image-line"}),u("span",{children:"圖片區塊"})]})]})]})]}),y(Zue,{children:[u(tde,{onClick:C,children:"取消"}),u(ede,{onClick:S,disabled:d,children:d?"保存中...":"保存內容"})]})]})})]})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function bde(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(d){try{c(r.next(d))}catch(p){a(p)}}function l(d){try{c(r.throw(d))}catch(p){a(p)}}function c(d){d.done?o(d.value):i(d.value).then(s,l)}c((r=r.apply(e,[])).next())})}function wde(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(d){c=[6,d],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var cc=function(){return cc=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},cc.apply(this,arguments)},F$=function(e){return{loading:e==null,value:e}},Sde=function(){return function(e,t){switch(t.type){case"error":return cc(cc({},e),{error:t.error,loading:!1,value:void 0});case"reset":return F$(t.defaultValue);case"value":return cc(cc({},e),{error:void 0,loading:!1,value:t.value});default:return e}}},Cde=function(e){var t=e?e():void 0,n=D.useReducer(Sde(),F$(t)),r=n[0],i=n[1],o=D.useCallback(function(){var l=e?e():void 0;i({type:"reset",defaultValue:l})},[e]),a=D.useCallback(function(l){i({type:"error",error:l})},[]),s=D.useCallback(function(l){i({type:"value",value:l})},[]);return D.useMemo(function(){return{error:r.error,loading:r.loading,reset:o,setError:a,setValue:s,value:r.value}},[r.error,r.loading,o,a,s,r.value])},zv=function(e,t){var n=Cde(function(){return e.currentUser}),r=n.error,i=n.loading,o=n.setError,a=n.setValue,s=n.value;return D.useEffect(function(){var l=$8(e,function(c){return bde(void 0,void 0,void 0,function(){var d;return wde(this,function(p){switch(p.label){case 0:return[3,4];case 1:return p.trys.push([1,3,,4]),[4,t.onUserChanged(c)];case 2:return p.sent(),[3,4];case 3:return d=p.sent(),o(d),[3,4];case 4:return a(c),[2]}})})},o);return function(){l()}},[e]),[s,i,r]};const _de={name:"tskwra",styles:"@keyframes fadeIn{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}@keyframes slideIn{from{opacity:0;transform:translateX(-20px);}to{opacity:1;transform:translateX(0);}}"},p4=b("div",{target:"e9ql4zu27"})("min-height:100vh;background:linear-gradient(135deg, rgba(17, 24, 39, 0.97) 0%, rgba(88, 28, 135, 0.95) 100%),url('https://images.unsplash.com/photo-1557683316-973673baf926?q=80&w=2029&auto=format&fit=crop') center/cover;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;font-family:'Noto Sans TC',sans-serif;padding-top:",e=>e.isScrolled?"80px":"120px",";transition:padding-top 0.3s ease;position:relative;padding-bottom:100px;&::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:radial-gradient(circle at 20% 20%, rgba(124, 58, 237, 0.15) 0%, transparent 50%),radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.15) 0%, transparent 50%);pointer-events:none;}"),kde=b("header",{target:"e9ql4zu26"})("width:100%;background:rgba(17, 24, 39, 0.8);backdrop-filter:blur(12px);border-bottom:1px solid rgba(255, 255, 255, 0.1);padding:",e=>e.isScrolled?"8px 0":"16px 0",";display:flex;flex-direction:row;align-items:center;justify-content:space-between;position:fixed;top:0;left:0;z-index:1000;transition:all 0.3s ease;white-space:nowrap;"),Ede=b("div",{target:"e9ql4zu25"})("display:flex;align-items:center;gap:",e=>e.isScrolled?"8px":"16px",";padding-left:",e=>e.isScrolled?"16px":"24px",";transition:all 0.3s ease;"),Tde=b("div",{target:"e9ql4zu24"})("display:flex;align-items:center;gap:",e=>e.isScrolled?"16px":"24px",";padding-right:",e=>e.isScrolled?"16px":"24px",";transition:all 0.3s ease;"),Ide=b("div",{target:"e9ql4zu23"})("position:relative;display:flex;align-items:center;gap:",e=>e.isScrolled?"8px":"12px",";transition:all 0.3s ease;&::after{content:'';position:absolute;right:-16px;top:50%;transform:translateY(-50%);height:24px;width:1px;background:linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.2), transparent);}"),Ade=b("img",{target:"e9ql4zu22"})("width:",e=>e.isScrolled?"32px":"40px",";height:",e=>e.isScrolled?"32px":"40px",";object-fit:contain;filter:drop-shadow(0 4px 8px rgba(0,0,0,0.2)) brightness(0) invert(1);transition:all 0.3s ease;&:hover{transform:scale(1.05);filter:drop-shadow(0 6px 12px rgba(0,0,0,0.3)) brightness(0) invert(1);}"),Pde=b("h1",{target:"e9ql4zu21"})("color:#fff;font-size:",e=>e.isScrolled?"18px":"22px",";font-weight:600;letter-spacing:0.5px;text-shadow:0 2px 4px rgba(0,0,0,0.2);transition:all 0.3s ease;margin:0;"),h4=b("div",{target:"e9ql4zu20"})({name:"1tiup0x",styles:"width:100%;max-width:1000px;margin:0 auto;padding:0 20px"}),Dde=b(bt,{target:"e9ql4zu19"})({name:"v4m3fy",styles:"display:inline-flex;align-items:center;gap:8px;color:rgba(255, 255, 255, 0.8);text-decoration:none;font-size:14px;font-weight:500;padding:8px 16px;border-radius:8px;border:1px solid rgba(255, 255, 255, 0.2);background:rgba(255, 255, 255, 0.1);backdrop-filter:blur(8px);transition:all 0.3s ease;margin-bottom:40px;animation:fadeIn 0.6s ease;&:hover{color:#fff;background:rgba(255, 255, 255, 0.2);border-color:rgba(255, 255, 255, 0.3);transform:translateX(-4px);}i{font-size:16px;}"}),Rde=b("div",{target:"e9ql4zu18"})({name:"xs40wg",styles:"display:grid;grid-template-columns:1fr 300px;gap:40px;animation:fadeIn 0.8s ease;@media (max-width: 768px){grid-template-columns:1fr;gap:20px;}"}),Nde=b("div",{target:"e9ql4zu17"})({name:"rvz6ay",styles:"background:rgba(255, 255, 255, 0.95);border-radius:16px;padding:40px;box-shadow:0 20px 40px rgba(0, 0, 0, 0.1);backdrop-filter:blur(20px);border:1px solid rgba(255, 255, 255, 0.2)"}),Mde=b("div",{target:"e9ql4zu16"})({name:"zqfvy1",styles:"background:rgba(255, 255, 255, 0.95);border-radius:16px;padding:24px;box-shadow:0 20px 40px rgba(0, 0, 0, 0.1);backdrop-filter:blur(20px);border:1px solid rgba(255, 255, 255, 0.2);height:fit-content"}),f4=b("div",{target:"e9ql4zu15"})({name:"1fgdcyd",styles:"margin-bottom:24px"}),g4=b("label",{target:"e9ql4zu14"})({name:"1jozq1f",styles:"display:block;color:#374151;font-weight:600;margin-bottom:8px;font-size:0.9rem"}),e1=b("input",{target:"e9ql4zu13"})({name:"1x1981m",styles:"width:100%;padding:12px 16px;border:2px solid #e5e7eb;border-radius:8px;font-size:1rem;transition:all 0.3s ease;background:#fff;&:focus{outline:none;border-color:#7C3AED;box-shadow:0 0 0 3px rgba(124, 58, 237, 0.1);}"}),m4=b("textarea",{target:"e9ql4zu12"})({name:"gmjju7",styles:"width:100%;padding:12px 16px;border:2px solid #e5e7eb;border-radius:8px;font-size:1rem;transition:all 0.3s ease;background:#fff;resize:vertical;min-height:100px;&:focus{outline:none;border-color:#7C3AED;box-shadow:0 0 0 3px rgba(124, 58, 237, 0.1);}"}),Ode=b("div",{target:"e9ql4zu11"})({name:"1q1lp3s",styles:"border-top:2px solid #e5e7eb;padding-top:24px"}),$de=b("div",{target:"e9ql4zu10"})({name:"1fgdcyd",styles:"margin-bottom:24px"}),Lde=b("div",{target:"e9ql4zu9"})({name:"povyf5",styles:"background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:16px;margin-bottom:16px;position:relative;animation:slideIn 0.4s ease"}),Fde=b("div",{target:"e9ql4zu8"})({name:"vr88f3",styles:"display:flex;justify-content:between;align-items:center;margin-bottom:12px"}),Bde=b("span",{target:"e9ql4zu7"})({name:"12al6rf",styles:"background:linear-gradient(135deg, #7C3AED, #3B82F6);color:white;padding:4px 12px;border-radius:12px;font-size:0.8rem;font-weight:500"}),zde=b("button",{target:"e9ql4zu6"})({name:"ftd73e",styles:"background:#ef4444;color:white;border:none;border-radius:6px;padding:6px 12px;font-size:0.8rem;cursor:pointer;transition:all 0.3s ease;&:hover{background:#dc2626;transform:scale(1.05);}"}),Vde=b("div",{target:"e9ql4zu5"})({name:"1t6tsbe",styles:"display:flex;gap:12px;flex-wrap:wrap;margin-bottom:24px"}),t1=b("button",{target:"e9ql4zu4"})({name:"1bszuh6",styles:"background:linear-gradient(135deg, #7C3AED, #3B82F6);color:white;border:none;border-radius:8px;padding:8px 16px;font-size:0.9rem;cursor:pointer;transition:all 0.3s ease;display:flex;align-items:center;gap:6px;&:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(124, 58, 237, 0.3);}"}),jde=b("div",{target:"e9ql4zu3"})({name:"1nehcv",styles:"border:2px dashed #d1d5db;border-radius:8px;padding:20px;text-align:center;cursor:pointer;transition:all 0.3s ease;margin-top:8px;&:hover{border-color:#7C3AED;background:rgba(124, 58, 237, 0.05);}&.uploading{border-color:#7C3AED;background:rgba(124, 58, 237, 0.1);}"}),Ude=b("img",{target:"e9ql4zu2"})({name:"1r65jre",styles:"max-width:100%;max-height:200px;border-radius:8px;margin-top:12px"}),qde=b("button",{target:"e9ql4zu1"})({name:"kxr5pt",styles:"width:100%;background:linear-gradient(135deg, #10b981, #059669);color:white;border:none;border-radius:8px;padding:12px 24px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;margin-bottom:16px;&:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(16, 185, 129, 0.3);}&:disabled{background:#9ca3af;cursor:not-allowed;transform:none;box-shadow:none;}"}),Wde=b("button",{target:"e9ql4zu0"})({name:"hwb6l4",styles:"width:100%;background:linear-gradient(135deg, #7C3AED, #3B82F6);color:white;border:none;border-radius:8px;padding:12px 24px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;&:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(124, 58, 237, 0.3);}"}),v4=()=>{const{courseId:e}=au(),t=qt(),[n]=zv(Fi),[r,i]=D.useState(!1),[o,a]=D.useState(""),[s,l]=D.useState(""),[c,d]=D.useState([]),[p,f]=D.useState(!1),[h,g]=D.useState(!1),[m,v]=D.useState(!1);D.useEffect(()=>{const k=()=>{i(window.scrollY>50)};return window.addEventListener("scroll",k),()=>window.removeEventListener("scroll",k)},[]),D.useEffect(()=>{e&&w()},[e]);const w=async()=>{try{v(!0);const k=Ie(U,"courses",e),T=await In(k);if(T.exists()){const P=T.data();a(P.title||""),l(P.description||""),d(P.blocks||[])}}catch(k){console.error("載入課程失敗:",k)}finally{v(!1)}},S=k=>{const T={type:k,data:{}};switch(k){case"heading":T.data.text="";break;case"paragraph":T.data.text="";break;case"image":T.data.url="",T.data.caption="";break}d([...c,T])},C=(k,T,P)=>{const O=[...c];O[k].data[T]=P,d(O)},A=k=>{const T=c.filter((P,O)=>O!==k);d(T)},_=async(k,T)=>{try{g(!0);const P=fo(),O=e||"temp-"+Date.now(),R=YM(KM,`courses/${O}/images/${P}.webp`);await HM(R,k);const N=await GM(R);C(T,"url",N)}catch(P){console.error("圖片上傳失敗:",P),alert("圖片上傳失敗，請稍後再試")}finally{g(!1)}},I=async()=>{if(!n){alert("請先登入");return}if(!o.trim()){alert("請輸入課程標題");return}try{f(!0);const k={title:o.trim(),description:s.trim(),blocks:c,authorUid:n.uid,createdAt:At(),viewCount:0},T=e||fo(),P=Ie(U,"courses",T);await zt(P,k),alert("課程儲存成功！"),e||t(`/course-uploader/${T}`)}catch(k){console.error("儲存課程失敗:",k),alert("儲存失敗，請稍後再試")}finally{f(!1)}},E=()=>{e?window.open(`/course/${e}`,"_blank"):alert("請先儲存課程後才能預覽")};return n?y(Ne,{children:[u(ks,{styles:Ke(_de," *{box-sizing:border-box;}body{margin:0;font-family:'Noto Sans TC',sans-serif;}","")}),y(p4,{isScrolled:r,children:[y(kde,{isScrolled:r,children:[u(Ede,{isScrolled:r,children:y(Ide,{isScrolled:r,children:[u(bt,{to:"/",children:u(Ade,{src:Ds,alt:"Liquid LMS Logo",isScrolled:r})}),u(bt,{to:"/",style:{textDecoration:"none"},children:u(Pde,{isScrolled:r,children:"Liquid LMS"})})]})}),u(Tde,{isScrolled:r})]}),y(h4,{children:[y(Dde,{to:"/courses",children:[u("i",{className:"ri-arrow-left-line"}),"返回課程列表"]}),y(Rde,{children:[y(Nde,{children:[u("h2",{style:{marginTop:0,color:"#1f2937"},children:e?"編輯課程":"創建新課程"}),y(f4,{children:[u(g4,{children:"課程標題"}),u(e1,{type:"text",value:o,onChange:k=>a(k.target.value),placeholder:"輸入課程標題..."})]}),y(f4,{children:[u(g4,{children:"課程描述"}),u(m4,{value:s,onChange:k=>l(k.target.value),placeholder:"輸入課程描述..."})]}),y(Ode,{children:[u("h3",{style:{marginTop:0,color:"#374151"},children:"課程內容"}),y(Vde,{children:[y(t1,{onClick:()=>S("heading"),children:[u("i",{className:"ri-h-1"}),"添加標題"]}),y(t1,{onClick:()=>S("paragraph"),children:[u("i",{className:"ri-text"}),"添加段落"]}),y(t1,{onClick:()=>S("image"),children:[u("i",{className:"ri-image-line"}),"添加圖片"]})]}),u($de,{children:c.map((k,T)=>y(Lde,{children:[y(Fde,{children:[y(Bde,{children:[k.type==="heading"&&"標題",k.type==="paragraph"&&"段落",k.type==="image"&&"圖片"]}),u(zde,{onClick:()=>A(T),children:"刪除"})]}),k.type==="heading"&&u(e1,{type:"text",value:k.data.text||"",onChange:P=>C(T,"text",P.target.value),placeholder:"輸入標題文字..."}),k.type==="paragraph"&&u(m4,{value:k.data.text||"",onChange:P=>C(T,"text",P.target.value),placeholder:"輸入段落內容...",rows:4}),k.type==="image"&&y(Ne,{children:[y(jde,{className:h?"uploading":"",onClick:()=>document.getElementById(`image-${T}`).click(),children:[u("input",{id:`image-${T}`,type:"file",accept:"image/*",style:{display:"none"},onChange:P=>{const O=P.target.files[0];O&&_(O,T)}}),h?u("p",{children:"上傳中..."}):k.data.url?y(Ne,{children:[u("p",{children:"點擊更換圖片"}),u(Ude,{src:k.data.url,alt:"預覽"})]}):y(Ne,{children:[u("i",{className:"ri-upload-cloud-line",style:{fontSize:"2rem",color:"#9ca3af"}}),u("p",{children:"點擊上傳圖片"})]})]}),u(e1,{type:"text",value:k.data.caption||"",onChange:P=>C(T,"caption",P.target.value),placeholder:"輸入圖片說明...",style:{marginTop:"12px"}})]})]},T))})]})]}),y(Mde,{children:[u("h3",{style:{marginTop:0,color:"#374151"},children:"操作"}),u(qde,{onClick:I,disabled:p||!o.trim(),children:p?"儲存中...":"儲存課程"}),u(Wde,{onClick:E,children:"預覽課程"}),y("div",{style:{marginTop:"24px",padding:"16px",backgroundColor:"#f3f4f6",borderRadius:"8px"},children:[u("h4",{style:{margin:"0 0 8px 0",color:"#374151"},children:"使用說明"}),y("ul",{style:{margin:0,paddingLeft:"16px",color:"#6b7280",fontSize:"0.9rem"},children:[u("li",{children:"使用標題來分段課程內容"}),u("li",{children:"段落用於詳細說明和教學內容"}),u("li",{children:"圖片支援上傳到 Firebase Storage"}),u("li",{children:"課程會自動儲存到 Firestore"})]})]})]})]})]})]}),u(kn,{})]}):u(p4,{children:u(h4,{children:y("div",{style:{textAlign:"center",color:"white",marginTop:"100px"},children:[u("h2",{children:"請先登入"}),u(bt,{to:"/login",style:{color:"#7C3AED"},children:"前往登入"})]})})})},cC=D.createContext({});function uC(e){const t=D.useRef(null);return t.current===null&&(t.current=e()),t.current}const dC=typeof window<"u",B$=dC?D.useLayoutEffect:D.useEffect,Vv=D.createContext(null);function pC(e,t){e.indexOf(t)===-1&&e.push(t)}function hC(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const oa=(e,t,n)=>n>t?t:n<e?e:n;let fC=()=>{};const aa={},z$=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function V$(e){return typeof e=="object"&&e!==null}const j$=e=>/^0[^.\s]+$/u.test(e);function gC(e){let t;return()=>(t===void 0&&(t=e()),t)}const Oi=e=>e,Hde=(e,t)=>n=>t(e(n)),Rh=(...e)=>e.reduce(Hde),zp=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class mC{constructor(){this.subscriptions=[]}add(t){return pC(this.subscriptions,t),()=>hC(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let o=0;o<i;o++){const a=this.subscriptions[o];a&&a(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Co=e=>e*1e3,_o=e=>e/1e3;function U$(e,t){return t?e*(1e3/t):0}const q$=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Gde=1e-7,Yde=12;function Kde(e,t,n,r,i){let o,a,s=0;do a=t+(n-t)/2,o=q$(a,r,i)-e,o>0?n=a:t=a;while(Math.abs(o)>Gde&&++s<Yde);return a}function Nh(e,t,n,r){if(e===t&&n===r)return Oi;const i=o=>Kde(o,0,1,e,n);return o=>o===0||o===1?o:q$(i(o),t,r)}const W$=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,H$=e=>t=>1-e(1-t),G$=Nh(.33,1.53,.69,.99),vC=H$(G$),Y$=W$(vC),K$=e=>(e*=2)<1?.5*vC(e):.5*(2-Math.pow(2,-10*(e-1))),xC=e=>1-Math.sin(Math.acos(e)),X$=H$(xC),Q$=W$(xC),Xde=Nh(.42,0,1,1),Qde=Nh(0,0,.58,1),J$=Nh(.42,0,.58,1),Jde=e=>Array.isArray(e)&&typeof e[0]!="number",Z$=e=>Array.isArray(e)&&typeof e[0]=="number",Zde={linear:Oi,easeIn:Xde,easeInOut:J$,easeOut:Qde,circIn:xC,circInOut:Q$,circOut:X$,backIn:vC,backInOut:Y$,backOut:G$,anticipate:K$},epe=e=>typeof e=="string",x4=e=>{if(Z$(e)){fC(e.length===4);const[t,n,r,i]=e;return Nh(t,n,r,i)}else if(epe(e))return Zde[e];return e},Qf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],y4={value:null};function tpe(e,t){let n=new Set,r=new Set,i=!1,o=!1;const a=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1},l=0;function c(p){a.has(p)&&(d.schedule(p),e()),l++,p(s)}const d={schedule:(p,f=!1,h=!1)=>{const m=h&&i?n:r;return f&&a.add(p),m.has(p)||m.add(p),p},cancel:p=>{r.delete(p),a.delete(p)},process:p=>{if(s=p,i){o=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),t&&y4.value&&y4.value.frameloop[t].push(l),l=0,n.clear(),i=!1,o&&(o=!1,d.process(p))}};return d}const npe=40;function eL(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=Qf.reduce((C,A)=>(C[A]=tpe(o,t?A:void 0),C),{}),{setup:s,read:l,resolveKeyframes:c,preUpdate:d,update:p,preRender:f,render:h,postRender:g}=a,m=()=>{const C=aa.useManualTiming?i.timestamp:performance.now();n=!1,aa.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(C-i.timestamp,npe),1)),i.timestamp=C,i.isProcessing=!0,s.process(i),l.process(i),c.process(i),d.process(i),p.process(i),f.process(i),h.process(i),g.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(m))},v=()=>{n=!0,r=!0,i.isProcessing||e(m)};return{schedule:Qf.reduce((C,A)=>{const _=a[A];return C[A]=(I,E=!1,k=!1)=>(n||v(),_.schedule(I,E,k)),C},{}),cancel:C=>{for(let A=0;A<Qf.length;A++)a[Qf[A]].cancel(C)},state:i,steps:a}}const{schedule:on,cancel:ys,state:Xn,steps:n1}=eL(typeof requestAnimationFrame<"u"?requestAnimationFrame:Oi,!0);let Kg;function rpe(){Kg=void 0}const jr={now:()=>(Kg===void 0&&jr.set(Xn.isProcessing||aa.useManualTiming?Xn.timestamp:performance.now()),Kg),set:e=>{Kg=e,queueMicrotask(rpe)}},tL=e=>t=>typeof t=="string"&&t.startsWith(e),yC=tL("--"),ipe=tL("var(--"),bC=e=>ipe(e)?ope.test(e.split("/*")[0].trim()):!1,ope=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,vu={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Vp={...vu,transform:e=>oa(0,1,e)},Jf={...vu,default:1},qd=e=>Math.round(e*1e5)/1e5,wC=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function ape(e){return e==null}const spe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,SC=(e,t)=>n=>!!(typeof n=="string"&&spe.test(n)&&n.startsWith(e)||t&&!ape(n)&&Object.prototype.hasOwnProperty.call(n,t)),nL=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,o,a,s]=r.match(wC);return{[e]:parseFloat(i),[t]:parseFloat(o),[n]:parseFloat(a),alpha:s!==void 0?parseFloat(s):1}},lpe=e=>oa(0,255,e),r1={...vu,transform:e=>Math.round(lpe(e))},Zs={test:SC("rgb","red"),parse:nL("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+r1.transform(e)+", "+r1.transform(t)+", "+r1.transform(n)+", "+qd(Vp.transform(r))+")"};function cpe(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const F2={test:SC("#"),parse:cpe,transform:Zs.transform},Mh=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Da=Mh("deg"),ko=Mh("%"),Ze=Mh("px"),upe=Mh("vh"),dpe=Mh("vw"),b4={...ko,parse:e=>ko.parse(e)/100,transform:e=>ko.transform(e*100)},uc={test:SC("hsl","hue"),parse:nL("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+ko.transform(qd(t))+", "+ko.transform(qd(n))+", "+qd(Vp.transform(r))+")"},hr={test:e=>Zs.test(e)||F2.test(e)||uc.test(e),parse:e=>Zs.test(e)?Zs.parse(e):uc.test(e)?uc.parse(e):F2.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Zs.transform(e):uc.transform(e)},ppe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function hpe(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(wC))==null?void 0:t.length)||0)+(((n=e.match(ppe))==null?void 0:n.length)||0)>0}const rL="number",iL="color",fpe="var",gpe="var(",w4="${}",mpe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function jp(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const s=t.replace(mpe,l=>(hr.test(l)?(r.color.push(o),i.push(iL),n.push(hr.parse(l))):l.startsWith(gpe)?(r.var.push(o),i.push(fpe),n.push(l)):(r.number.push(o),i.push(rL),n.push(parseFloat(l))),++o,w4)).split(w4);return{values:n,split:s,indexes:r,types:i}}function oL(e){return jp(e).values}function aL(e){const{split:t,types:n}=jp(e),r=t.length;return i=>{let o="";for(let a=0;a<r;a++)if(o+=t[a],i[a]!==void 0){const s=n[a];s===rL?o+=qd(i[a]):s===iL?o+=hr.transform(i[a]):o+=i[a]}return o}}const vpe=e=>typeof e=="number"?0:e;function xpe(e){const t=oL(e);return aL(e)(t.map(vpe))}const bs={test:hpe,parse:oL,createTransformer:aL,getAnimatableNone:xpe};function i1(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function ype({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,o=0,a=0;if(!t)i=o=a=n;else{const s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;i=i1(l,s,e+1/3),o=i1(l,s,e),a=i1(l,s,e-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:r}}function s0(e,t){return n=>n>0?t:e}const nn=(e,t,n)=>e+(t-e)*n,o1=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},bpe=[F2,Zs,uc],wpe=e=>bpe.find(t=>t.test(e));function S4(e){const t=wpe(e);if(!t)return!1;let n=t.parse(e);return t===uc&&(n=ype(n)),n}const C4=(e,t)=>{const n=S4(e),r=S4(t);if(!n||!r)return s0(e,t);const i={...n};return o=>(i.red=o1(n.red,r.red,o),i.green=o1(n.green,r.green,o),i.blue=o1(n.blue,r.blue,o),i.alpha=nn(n.alpha,r.alpha,o),Zs.transform(i))},B2=new Set(["none","hidden"]);function Spe(e,t){return B2.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function Cpe(e,t){return n=>nn(e,t,n)}function CC(e){return typeof e=="number"?Cpe:typeof e=="string"?bC(e)?s0:hr.test(e)?C4:Epe:Array.isArray(e)?sL:typeof e=="object"?hr.test(e)?C4:_pe:s0}function sL(e,t){const n=[...e],r=n.length,i=e.map((o,a)=>CC(o)(o,t[a]));return o=>{for(let a=0;a<r;a++)n[a]=i[a](o);return n}}function _pe(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=CC(e[i])(e[i],t[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}}function kpe(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const o=t.types[i],a=e.indexes[o][r[o]],s=e.values[a]??0;n[i]=s,r[o]++}return n}const Epe=(e,t)=>{const n=bs.createTransformer(t),r=jp(e),i=jp(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?B2.has(e)&&!i.values.length||B2.has(t)&&!r.values.length?Spe(e,t):Rh(sL(kpe(r,i),i.values),n):s0(e,t)};function lL(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?nn(e,t,n):CC(e)(e,t)}const Tpe=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>on.update(t,n),stop:()=>ys(t),now:()=>Xn.isProcessing?Xn.timestamp:jr.now()}},cL=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let o=0;o<i;o++)r+=e(o/(i-1))+", ";return`linear(${r.substring(0,r.length-2)})`},l0=2e4;function _C(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<l0;)t+=n,r=e.next(t);return t>=l0?1/0:t}function Ipe(e,t=100,n){const r=n({...e,keyframes:[0,t]}),i=Math.min(_C(r),l0);return{type:"keyframes",ease:o=>r.next(i*o).value/t,duration:_o(i)}}const Ape=5;function uL(e,t,n){const r=Math.max(t-Ape,0);return U$(n-e(r),t-r)}const pn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},_4=.001;function Ppe({duration:e=pn.duration,bounce:t=pn.bounce,velocity:n=pn.velocity,mass:r=pn.mass}){let i,o,a=1-t;a=oa(pn.minDamping,pn.maxDamping,a),e=oa(pn.minDuration,pn.maxDuration,_o(e)),a<1?(i=c=>{const d=c*a,p=d*e,f=d-n,h=z2(c,a),g=Math.exp(-p);return _4-f/h*g},o=c=>{const p=c*a*e,f=p*n+n,h=Math.pow(a,2)*Math.pow(c,2)*e,g=Math.exp(-p),m=z2(Math.pow(c,2),a);return(-i(c)+_4>0?-1:1)*((f-h)*g)/m}):(i=c=>{const d=Math.exp(-c*e),p=(c-n)*e+1;return-.001+d*p},o=c=>{const d=Math.exp(-c*e),p=(n-c)*(e*e);return d*p});const s=5/e,l=Rpe(i,o,s);if(e=Co(e),isNaN(l))return{stiffness:pn.stiffness,damping:pn.damping,duration:e};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:a*2*Math.sqrt(r*c),duration:e}}}const Dpe=12;function Rpe(e,t,n){let r=n;for(let i=1;i<Dpe;i++)r=r-e(r)/t(r);return r}function z2(e,t){return e*Math.sqrt(1-t*t)}const Npe=["duration","bounce"],Mpe=["stiffness","damping","mass"];function k4(e,t){return t.some(n=>e[n]!==void 0)}function Ope(e){let t={velocity:pn.velocity,stiffness:pn.stiffness,damping:pn.damping,mass:pn.mass,isResolvedFromDuration:!1,...e};if(!k4(e,Mpe)&&k4(e,Npe))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,o=2*oa(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:pn.mass,stiffness:i,damping:o}}else{const n=Ppe(e);t={...t,...n,mass:pn.mass},t.isResolvedFromDuration=!0}return t}function c0(e=pn.visualDuration,t=pn.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const o=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],s={done:!1,value:o},{stiffness:l,damping:c,mass:d,duration:p,velocity:f,isResolvedFromDuration:h}=Ope({...n,velocity:-_o(n.velocity||0)}),g=f||0,m=c/(2*Math.sqrt(l*d)),v=a-o,w=_o(Math.sqrt(l/d)),S=Math.abs(v)<5;r||(r=S?pn.restSpeed.granular:pn.restSpeed.default),i||(i=S?pn.restDelta.granular:pn.restDelta.default);let C;if(m<1){const _=z2(w,m);C=I=>{const E=Math.exp(-m*w*I);return a-E*((g+m*w*v)/_*Math.sin(_*I)+v*Math.cos(_*I))}}else if(m===1)C=_=>a-Math.exp(-w*_)*(v+(g+w*v)*_);else{const _=w*Math.sqrt(m*m-1);C=I=>{const E=Math.exp(-m*w*I),k=Math.min(_*I,300);return a-E*((g+m*w*v)*Math.sinh(k)+_*v*Math.cosh(k))/_}}const A={calculatedDuration:h&&p||null,next:_=>{const I=C(_);if(h)s.done=_>=p;else{let E=_===0?g:0;m<1&&(E=_===0?Co(g):uL(C,_,I));const k=Math.abs(E)<=r,T=Math.abs(a-I)<=i;s.done=k&&T}return s.value=s.done?a:I,s},toString:()=>{const _=Math.min(_C(A),l0),I=cL(E=>A.next(_*E).value,_,30);return _+"ms "+I},toTransition:()=>{}};return A}c0.applyToOptions=e=>{const t=Ipe(e,100,c0);return e.ease=t.ease,e.duration=Co(t.duration),e.type="keyframes",e};function V2({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:a,min:s,max:l,restDelta:c=.5,restSpeed:d}){const p=e[0],f={done:!1,value:p},h=k=>s!==void 0&&k<s||l!==void 0&&k>l,g=k=>s===void 0?l:l===void 0||Math.abs(s-k)<Math.abs(l-k)?s:l;let m=n*t;const v=p+m,w=a===void 0?v:a(v);w!==v&&(m=w-p);const S=k=>-m*Math.exp(-k/r),C=k=>w+S(k),A=k=>{const T=S(k),P=C(k);f.done=Math.abs(T)<=c,f.value=f.done?w:P};let _,I;const E=k=>{h(f.value)&&(_=k,I=c0({keyframes:[f.value,g(f.value)],velocity:uL(C,k,f.value),damping:i,stiffness:o,restDelta:c,restSpeed:d}))};return E(0),{calculatedDuration:null,next:k=>{let T=!1;return!I&&_===void 0&&(T=!0,A(k),E(k)),_!==void 0&&k>=_?I.next(k-_):(!T&&A(k),f)}}}function $pe(e,t,n){const r=[],i=n||aa.mix||lL,o=e.length-1;for(let a=0;a<o;a++){let s=i(e[a],e[a+1]);if(t){const l=Array.isArray(t)?t[a]||Oi:t;s=Rh(l,s)}r.push(s)}return r}function Lpe(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const o=e.length;if(fC(o===t.length),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const s=$pe(t,r,i),l=s.length,c=d=>{if(a&&d<e[0])return t[0];let p=0;if(l>1)for(;p<e.length-2&&!(d<e[p+1]);p++);const f=zp(e[p],e[p+1],d);return s[p](f)};return n?d=>c(oa(e[0],e[o-1],d)):c}function Fpe(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=zp(0,t,r);e.push(nn(n,1,i))}}function Bpe(e){const t=[0];return Fpe(t,e.length-1),t}function zpe(e,t){return e.map(n=>n*t)}function Vpe(e,t){return e.map(()=>t||J$).splice(0,e.length-1)}function Wd({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=Jde(r)?r.map(x4):x4(r),o={done:!1,value:t[0]},a=zpe(n&&n.length===t.length?n:Bpe(t),e),s=Lpe(a,t,{ease:Array.isArray(i)?i:Vpe(t,i)});return{calculatedDuration:e,next:l=>(o.value=s(l),o.done=l>=e,o)}}const jpe=e=>e!==null;function kC(e,{repeat:t,repeatType:n="loop"},r,i=1){const o=e.filter(jpe),s=i<0||t&&n!=="loop"&&t%2===1?0:o.length-1;return!s||r===void 0?o[s]:r}const Upe={decay:V2,inertia:V2,tween:Wd,keyframes:Wd,spring:c0};function dL(e){typeof e.type=="string"&&(e.type=Upe[e.type])}class EC{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const qpe=e=>e/100;class TC extends EC{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==jr.now()&&this.tick(jr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;dL(t);const{type:n=Wd,repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:a=0}=t;let{keyframes:s}=t;const l=n||Wd;l!==Wd&&typeof s[0]!="number"&&(this.mixKeyframes=Rh(qpe,lL(s[0],s[1])),s=[0,100]);const c=l({...t,keyframes:s});o==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...s].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=_C(c));const{calculatedDuration:d}=c;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:i,mixKeyframes:o,mirroredGenerator:a,resolvedDuration:s,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:d,repeat:p,repeatType:f,repeatDelay:h,type:g,onUpdate:m,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const w=this.currentTime-c*(this.playbackSpeed>=0?1:-1),S=this.playbackSpeed>=0?w<0:w>i;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let C=this.currentTime,A=r;if(p){const k=Math.min(this.currentTime,i)/s;let T=Math.floor(k),P=k%1;!P&&k>=1&&(P=1),P===1&&T--,T=Math.min(T,p+1),!!(T%2)&&(f==="reverse"?(P=1-P,h&&(P-=h/s)):f==="mirror"&&(A=a)),C=oa(0,1,P)*s}const _=S?{done:!1,value:d[0]}:A.next(C);o&&(_.value=o(_.value));let{done:I}=_;!S&&l!==null&&(I=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return E&&g!==V2&&(_.value=kC(d,this.options,v,this.speed)),m&&m(_.value),E&&this.finish(),_}then(t,n){return this.finished.then(t,n)}get duration(){return _o(this.calculatedDuration)}get time(){return _o(this.currentTime)}set time(t){var n;t=Co(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(jr.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=_o(this.currentTime))}play(){var i,o;if(this.isStopped)return;const{driver:t=Tpe,startTime:n}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),(o=(i=this.options).onPlay)==null||o.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(jr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function Wpe(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const el=e=>e*180/Math.PI,j2=e=>{const t=el(Math.atan2(e[1],e[0]));return U2(t)},Hpe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:j2,rotateZ:j2,skewX:e=>el(Math.atan(e[1])),skewY:e=>el(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},U2=e=>(e=e%360,e<0&&(e+=360),e),E4=j2,T4=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),I4=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Gpe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:T4,scaleY:I4,scale:e=>(T4(e)+I4(e))/2,rotateX:e=>U2(el(Math.atan2(e[6],e[5]))),rotateY:e=>U2(el(Math.atan2(-e[2],e[0]))),rotateZ:E4,rotate:E4,skewX:e=>el(Math.atan(e[4])),skewY:e=>el(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function q2(e){return e.includes("scale")?1:0}function W2(e,t){if(!e||e==="none")return q2(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Gpe,i=n;else{const s=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Hpe,i=s}if(!i)return q2(t);const o=r[t],a=i[1].split(",").map(Kpe);return typeof o=="function"?o(a):a[o]}const Ype=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return W2(n,t)};function Kpe(e){return parseFloat(e.trim())}const xu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],yu=new Set(xu),A4=e=>e===vu||e===Ze,Xpe=new Set(["x","y","z"]),Qpe=xu.filter(e=>!Xpe.has(e));function Jpe(e){const t=[];return Qpe.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const il={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>W2(t,"x"),y:(e,{transform:t})=>W2(t,"y")};il.translateX=il.x;il.translateY=il.y;const ol=new Set;let H2=!1,G2=!1,Y2=!1;function pL(){if(G2){const e=Array.from(ol).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=Jpe(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([o,a])=>{var s;(s=r.getValue(o))==null||s.set(a)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}G2=!1,H2=!1,ol.forEach(e=>e.complete(Y2)),ol.clear()}function hL(){ol.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(G2=!0)})}function Zpe(){Y2=!0,hL(),pL(),Y2=!1}class IC{constructor(t,n,r,i,o,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=o,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(ol.add(this),H2||(H2=!0,on.read(hL),on.resolveKeyframes(pL))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;if(t[0]===null){const o=i==null?void 0:i.get(),a=t[t.length-1];if(o!==void 0)t[0]=o;else if(r&&n){const s=r.readValue(n,a);s!=null&&(t[0]=s)}t[0]===void 0&&(t[0]=a),i&&o===void 0&&i.set(t[0])}Wpe(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),ol.delete(this)}cancel(){this.state==="scheduled"&&(ol.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const ehe=e=>e.startsWith("--");function the(e,t,n){ehe(t)?e.style.setProperty(t,n):e.style[t]=n}const nhe=gC(()=>window.ScrollTimeline!==void 0),rhe={};function ihe(e,t){const n=gC(e);return()=>rhe[t]??n()}const fL=ihe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),bd=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,P4={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:bd([0,.65,.55,1]),circOut:bd([.55,0,1,.45]),backIn:bd([.31,.01,.66,-.59]),backOut:bd([.33,1.53,.69,.99])};function gL(e,t){if(e)return typeof e=="function"?fL()?cL(e,t):"ease-out":Z$(e)?bd(e):Array.isArray(e)?e.map(n=>gL(n,t)||P4.easeOut):P4[e]}function ohe(e,t,n,{delay:r=0,duration:i=300,repeat:o=0,repeatType:a="loop",ease:s="easeOut",times:l}={},c=void 0){const d={[t]:n};l&&(d.offset=l);const p=gL(s,i);Array.isArray(p)&&(d.easing=p);const f={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"};return c&&(f.pseudoElement=c),e.animate(d,f)}function mL(e){return typeof e=="function"&&"applyToOptions"in e}function ahe({type:e,...t}){return mL(e)&&fL()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class she extends EC{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:i,pseudoElement:o,allowFlatten:a=!1,finalKeyframe:s,onComplete:l}=t;this.isPseudoElement=!!o,this.allowFlatten=a,this.options=t,fC(typeof t.type!="string");const c=ahe(t);this.animation=ohe(n,r,i,c,o),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const d=kC(i,this.options,s,this.speed);this.updateMotionValue?this.updateMotionValue(d):the(n,r,d),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return _o(Number(t))}get time(){return _o(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Co(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&nhe()?(this.animation.timeline=t,Oi):n(this)}}const vL={anticipate:K$,backInOut:Y$,circInOut:Q$};function lhe(e){return e in vL}function che(e){typeof e.ease=="string"&&lhe(e.ease)&&(e.ease=vL[e.ease])}const D4=10;class uhe extends she{constructor(t){che(t),dL(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:i,element:o,...a}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const s=new TC({...a,autoplay:!1}),l=Co(this.finishedTime??this.time);n.setWithVelocity(s.sample(l-D4).value,s.sample(l).value,D4),s.stop()}}const R4=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(bs.test(e)||e==="0")&&!e.startsWith("url("));function dhe(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function phe(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const o=e[e.length-1],a=R4(i,t),s=R4(o,t);return!a||!s?!1:dhe(e)||(n==="spring"||mL(n))&&r}function AC(e){return V$(e)&&"offsetHeight"in e}const hhe=new Set(["opacity","clipPath","filter","transform"]),fhe=gC(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function ghe(e){var c;const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:o,type:a}=e;if(!AC((c=t==null?void 0:t.owner)==null?void 0:c.current))return!1;const{onUpdate:s,transformTemplate:l}=t.owner.getProps();return fhe()&&n&&hhe.has(n)&&(n!=="transform"||!l)&&!s&&!r&&i!=="mirror"&&o!==0&&a!=="inertia"}const mhe=40;class vhe extends EC{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",keyframes:s,name:l,motionValue:c,element:d,...p}){var g;super(),this.stop=()=>{var m,v;this._animation&&(this._animation.stop(),(m=this.stopTimeline)==null||m.call(this)),(v=this.keyframeResolver)==null||v.cancel()},this.createdAt=jr.now();const f={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:o,repeatType:a,name:l,motionValue:c,element:d,...p},h=(d==null?void 0:d.KeyframeResolver)||IC;this.keyframeResolver=new h(s,(m,v,w)=>this.onKeyframesResolved(m,v,f,!w),l,c,d),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(t,n,r,i){this.keyframeResolver=void 0;const{name:o,type:a,velocity:s,delay:l,isHandoff:c,onUpdate:d}=r;this.resolvedAt=jr.now(),phe(t,o,a,s)||((aa.instantAnimations||!l)&&(d==null||d(kC(t,r,n))),t[0]=t[t.length-1],r.duration=0,r.repeat=0);const f={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>mhe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},h=!c&&ghe(f)?new uhe({...f,element:f.motionValue.owner.current}):new TC(f);h.finished.then(()=>this.notifyFinished()).catch(Oi),this.pendingTimeline&&(this.stopTimeline=h.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=h}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),Zpe()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const xhe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function yhe(e){const t=xhe.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function xL(e,t,n=1){const[r,i]=yhe(e);if(!r)return;const o=window.getComputedStyle(t).getPropertyValue(r);if(o){const a=o.trim();return z$(a)?parseFloat(a):a}return bC(i)?xL(i,t,n+1):i}function PC(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const yL=new Set(["width","height","top","left","right","bottom",...xu]),bhe={test:e=>e==="auto",parse:e=>e},bL=e=>t=>t.test(e),wL=[vu,Ze,ko,Da,dpe,upe,bhe],N4=e=>wL.find(bL(e));function whe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||j$(e):!0}const She=new Set(["brightness","contrast","saturate","opacity"]);function Che(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(wC)||[];if(!r)return e;const i=n.replace(r,"");let o=She.has(t)?1:0;return r!==n&&(o*=100),t+"("+o+i+")"}const _he=/\b([a-z-]*)\(.*?\)/gu,K2={...bs,getAnimatableNone:e=>{const t=e.match(_he);return t?t.map(Che).join(" "):e}},M4={...vu,transform:Math.round},khe={rotate:Da,rotateX:Da,rotateY:Da,rotateZ:Da,scale:Jf,scaleX:Jf,scaleY:Jf,scaleZ:Jf,skew:Da,skewX:Da,skewY:Da,distance:Ze,translateX:Ze,translateY:Ze,translateZ:Ze,x:Ze,y:Ze,z:Ze,perspective:Ze,transformPerspective:Ze,opacity:Vp,originX:b4,originY:b4,originZ:Ze},DC={borderWidth:Ze,borderTopWidth:Ze,borderRightWidth:Ze,borderBottomWidth:Ze,borderLeftWidth:Ze,borderRadius:Ze,radius:Ze,borderTopLeftRadius:Ze,borderTopRightRadius:Ze,borderBottomRightRadius:Ze,borderBottomLeftRadius:Ze,width:Ze,maxWidth:Ze,height:Ze,maxHeight:Ze,top:Ze,right:Ze,bottom:Ze,left:Ze,padding:Ze,paddingTop:Ze,paddingRight:Ze,paddingBottom:Ze,paddingLeft:Ze,margin:Ze,marginTop:Ze,marginRight:Ze,marginBottom:Ze,marginLeft:Ze,backgroundPositionX:Ze,backgroundPositionY:Ze,...khe,zIndex:M4,fillOpacity:Vp,strokeOpacity:Vp,numOctaves:M4},Ehe={...DC,color:hr,backgroundColor:hr,outlineColor:hr,fill:hr,stroke:hr,borderColor:hr,borderTopColor:hr,borderRightColor:hr,borderBottomColor:hr,borderLeftColor:hr,filter:K2,WebkitFilter:K2},SL=e=>Ehe[e];function CL(e,t){let n=SL(e);return n!==K2&&(n=bs),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const The=new Set(["auto","none","0"]);function Ihe(e,t,n){let r=0,i;for(;r<e.length&&!i;){const o=e[r];typeof o=="string"&&!The.has(o)&&jp(o).values.length&&(i=e[r]),r++}if(i&&n)for(const o of t)e[o]=CL(n,i)}class Ahe extends IC{constructor(t,n,r,i,o){super(t,n,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let c=t[l];if(typeof c=="string"&&(c=c.trim(),bC(c))){const d=xL(c,n.current);d!==void 0&&(t[l]=d),l===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!yL.has(r)||t.length!==2)return;const[i,o]=t,a=N4(i),s=N4(o);if(a!==s)if(A4(a)&&A4(s))for(let l=0;l<t.length;l++){const c=t[l];typeof c=="string"&&(t[l]=parseFloat(c))}else il[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||whe(t[i]))&&r.push(i);r.length&&Ihe(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=il[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var s;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=il[n](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(s=this.removedTransforms)!=null&&s.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function Phe(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const i=(n==null?void 0:n[e])??r.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const _L=(e,t)=>t&&typeof e=="number"?t.transform(e):e,O4=30,Dhe=e=>!isNaN(parseFloat(e));class Rhe{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{var a,s;const o=jr.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();i&&((s=this.events.renderRequest)==null||s.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=jr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Dhe(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new mC);const r=this.events[t].add(n);return t==="change"?()=>{r(),on.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=jr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>O4)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,O4);return U$(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Wc(e,t){return new Rhe(e,t)}const{schedule:RC}=eL(queueMicrotask,!1),qi={x:!1,y:!1};function kL(){return qi.x||qi.y}function Nhe(e){return e==="x"||e==="y"?qi[e]?null:(qi[e]=!0,()=>{qi[e]=!1}):qi.x||qi.y?null:(qi.x=qi.y=!0,()=>{qi.x=qi.y=!1})}function EL(e,t){const n=Phe(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function $4(e){return!(e.pointerType==="touch"||kL())}function Mhe(e,t,n={}){const[r,i,o]=EL(e,n),a=s=>{if(!$4(s))return;const{target:l}=s,c=t(l,s);if(typeof c!="function"||!l)return;const d=p=>{$4(p)&&(c(p),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,i)};return r.forEach(s=>{s.addEventListener("pointerenter",a,i)}),o}const TL=(e,t)=>t?e===t?!0:TL(e,t.parentElement):!1,NC=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Ohe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function $he(e){return Ohe.has(e.tagName)||e.tabIndex!==-1}const Xg=new WeakSet;function L4(e){return t=>{t.key==="Enter"&&e(t)}}function a1(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Lhe=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=L4(()=>{if(Xg.has(n))return;a1(n,"down");const i=L4(()=>{a1(n,"up")}),o=()=>a1(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",o,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function F4(e){return NC(e)&&!kL()}function Fhe(e,t,n={}){const[r,i,o]=EL(e,n),a=s=>{const l=s.currentTarget;if(!F4(s))return;Xg.add(l);const c=t(l,s),d=(h,g)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",f),Xg.has(l)&&Xg.delete(l),F4(h)&&typeof c=="function"&&c(h,{success:g})},p=h=>{d(h,l===window||l===document||n.useGlobalTarget||TL(l,h.target))},f=h=>{d(h,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",f,i)};return r.forEach(s=>{(n.useGlobalTarget?window:s).addEventListener("pointerdown",a,i),AC(s)&&(s.addEventListener("focus",c=>Lhe(c,i)),!$he(s)&&!s.hasAttribute("tabindex")&&(s.tabIndex=0))}),o}function IL(e){return V$(e)&&"ownerSVGElement"in e}function Bhe(e){return IL(e)&&e.tagName==="svg"}const vr=e=>!!(e&&e.getVelocity),zhe=[...wL,hr,bs],Vhe=e=>zhe.find(bL(e)),MC=D.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class jhe extends D.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=AC(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=i-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Uhe({children:e,isPresent:t,anchorX:n}){const r=D.useId(),i=D.useRef(null),o=D.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=D.useContext(MC);return D.useInsertionEffect(()=>{const{width:s,height:l,top:c,left:d,right:p}=o.current;if(t||!i.current||!s||!l)return;const f=n==="left"?`left: ${d}`:`right: ${p}`;i.current.dataset.motionPopId=r;const h=document.createElement("style");return a&&(h.nonce=a),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${l}px !important;
            ${f}px !important;
            top: ${c}px !important;
          }
        `),()=>{document.head.contains(h)&&document.head.removeChild(h)}},[t]),qr.jsx(jhe,{isPresent:t,childRef:i,sizeRef:o,children:D.cloneElement(e,{ref:i})})}const qhe=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:a,anchorX:s})=>{const l=uC(Whe),c=D.useId();let d=!0,p=D.useMemo(()=>(d=!1,{id:c,initial:t,isPresent:n,custom:i,onExitComplete:f=>{l.set(f,!0);for(const h of l.values())if(!h)return;r&&r()},register:f=>(l.set(f,!1),()=>l.delete(f))}),[n,l,r]);return o&&d&&(p={...p}),D.useMemo(()=>{l.forEach((f,h)=>l.set(h,!1))},[n]),D.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),a==="popLayout"&&(e=qr.jsx(Uhe,{isPresent:n,anchorX:s,children:e})),qr.jsx(Vv.Provider,{value:p,children:e})};function Whe(){return new Map}function AL(e=!0){const t=D.useContext(Vv);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,o=D.useId();D.useEffect(()=>{if(e)return i(o)},[e]);const a=D.useCallback(()=>e&&r&&r(o),[o,r,e]);return!n&&r?[!1,a]:[!0]}const Zf=e=>e.key||"";function B4(e){const t=[];return D.Children.forEach(e,n=>{D.isValidElement(n)&&t.push(n)}),t}const Ft=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:a=!1,anchorX:s="left"})=>{const[l,c]=AL(a),d=D.useMemo(()=>B4(e),[e]),p=a&&!l?[]:d.map(Zf),f=D.useRef(!0),h=D.useRef(d),g=uC(()=>new Map),[m,v]=D.useState(d),[w,S]=D.useState(d);B$(()=>{f.current=!1,h.current=d;for(let _=0;_<w.length;_++){const I=Zf(w[_]);p.includes(I)?g.delete(I):g.get(I)!==!0&&g.set(I,!1)}},[w,p.length,p.join("-")]);const C=[];if(d!==m){let _=[...d];for(let I=0;I<w.length;I++){const E=w[I],k=Zf(E);p.includes(k)||(_.splice(I,0,E),C.push(E))}return o==="wait"&&C.length&&(_=C),S(B4(_)),v(d),null}const{forceRender:A}=D.useContext(cC);return qr.jsx(qr.Fragment,{children:w.map(_=>{const I=Zf(_),E=a&&!l?!1:d===w||p.includes(I),k=()=>{if(g.has(I))g.set(I,!0);else return;let T=!0;g.forEach(P=>{P||(T=!1)}),T&&(A==null||A(),S(h.current),a&&(c==null||c()),r&&r())};return qr.jsx(qhe,{isPresent:E,initial:!f.current||n?void 0:!1,custom:t,presenceAffectsLayout:i,mode:o,onExitComplete:E?void 0:k,anchorX:s,children:_},I)})})},PL=D.createContext({strict:!1}),z4={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Hc={};for(const e in z4)Hc[e]={isEnabled:t=>z4[e].some(n=>!!t[n])};function Hhe(e){for(const t in e)Hc[t]={...Hc[t],...e[t]}}const Ghe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function u0(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Ghe.has(e)}let DL=e=>!u0(e);function Yhe(e){e&&(DL=t=>t.startsWith("on")?!u0(t):e(t))}try{Yhe(require("@emotion/is-prop-valid").default)}catch{}function Khe(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(DL(i)||n===!0&&u0(i)||!t&&!u0(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function Xhe(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,i)=>i==="create"?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}const jv=D.createContext({});function Uv(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Up(e){return typeof e=="string"||Array.isArray(e)}const OC=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],$C=["initial",...OC];function qv(e){return Uv(e.animate)||$C.some(t=>Up(e[t]))}function RL(e){return!!(qv(e)||e.variants)}function Qhe(e,t){if(qv(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Up(n)?n:void 0,animate:Up(r)?r:void 0}}return e.inherit!==!1?t:{}}function Jhe(e){const{initial:t,animate:n}=Qhe(e,D.useContext(jv));return D.useMemo(()=>({initial:t,animate:n}),[V4(t),V4(n)])}function V4(e){return Array.isArray(e)?e.join(" "):e}const Zhe=Symbol.for("motionComponentSymbol");function dc(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function efe(e,t,n){return D.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):dc(n)&&(n.current=r))},[t])}const LC=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),tfe="framerAppearId",NL="data-"+LC(tfe),ML=D.createContext({});function nfe(e,t,n,r,i){var m,v;const{visualElement:o}=D.useContext(jv),a=D.useContext(PL),s=D.useContext(Vv),l=D.useContext(MC).reducedMotion,c=D.useRef(null);r=r||a.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:o,props:n,presenceContext:s,blockInitialAnimation:s?s.initial===!1:!1,reducedMotionConfig:l}));const d=c.current,p=D.useContext(ML);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&rfe(c.current,n,i,p);const f=D.useRef(!1);D.useInsertionEffect(()=>{d&&f.current&&d.update(n,s)});const h=n[NL],g=D.useRef(!!h&&!((m=window.MotionHandoffIsComplete)!=null&&m.call(window,h))&&((v=window.MotionHasOptimisedAnimation)==null?void 0:v.call(window,h)));return B$(()=>{d&&(f.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),RC.render(d.render),g.current&&d.animationState&&d.animationState.animateChanges())}),D.useEffect(()=>{d&&(!g.current&&d.animationState&&d.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)==null||w.call(window,h)}),g.current=!1))}),d}function rfe(e,t,n,r){const{layoutId:i,layout:o,drag:a,dragConstraints:s,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:OL(e.parent)),e.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!a||s&&dc(s),visualElement:e,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:c})}function OL(e){if(e)return e.options.allowProjection!==!1?e.projection:OL(e.parent)}function ife({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){e&&Hhe(e);function o(s,l){let c;const d={...D.useContext(MC),...s,layoutId:ofe(s)},{isStatic:p}=d,f=Jhe(s),h=r(s,p);if(!p&&dC){afe();const g=sfe(d);c=g.MeasureLayout,f.visualElement=nfe(i,h,d,t,g.ProjectionNode)}return qr.jsxs(jv.Provider,{value:f,children:[c&&f.visualElement?qr.jsx(c,{visualElement:f.visualElement,...d}):null,n(i,s,efe(h,f.visualElement,l),h,p,f.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const a=D.forwardRef(o);return a[Zhe]=i,a}function ofe({layoutId:e}){const t=D.useContext(cC).id;return t&&e!==void 0?t+"-"+e:e}function afe(e,t){D.useContext(PL).strict}function sfe(e){const{drag:t,layout:n}=Hc;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const qp={};function lfe(e){for(const t in e)qp[t]=e[t],yC(t)&&(qp[t].isCSSVariable=!0)}function $L(e,{layout:t,layoutId:n}){return yu.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!qp[e]||e==="opacity")}const cfe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ufe=xu.length;function dfe(e,t,n){let r="",i=!0;for(let o=0;o<ufe;o++){const a=xu[o],s=e[a];if(s===void 0)continue;let l=!0;if(typeof s=="number"?l=s===(a.startsWith("scale")?1:0):l=parseFloat(s)===0,!l||n){const c=_L(s,DC[a]);if(!l){i=!1;const d=cfe[a]||a;r+=`${d}(${c}) `}n&&(t[a]=c)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function FC(e,t,n){const{style:r,vars:i,transformOrigin:o}=e;let a=!1,s=!1;for(const l in t){const c=t[l];if(yu.has(l)){a=!0;continue}else if(yC(l)){i[l]=c;continue}else{const d=_L(c,DC[l]);l.startsWith("origin")?(s=!0,o[l]=d):r[l]=d}}if(t.transform||(a||n?r.transform=dfe(t,e.transform,n):r.transform&&(r.transform="none")),s){const{originX:l="50%",originY:c="50%",originZ:d=0}=o;r.transformOrigin=`${l} ${c} ${d}`}}const BC=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function LL(e,t,n){for(const r in t)!vr(t[r])&&!$L(r,n)&&(e[r]=t[r])}function pfe({transformTemplate:e},t){return D.useMemo(()=>{const n=BC();return FC(n,t,e),Object.assign({},n.vars,n.style)},[t])}function hfe(e,t){const n=e.style||{},r={};return LL(r,n,e),Object.assign(r,pfe(e,t)),r}function ffe(e,t){const n={},r=hfe(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const gfe={offset:"stroke-dashoffset",array:"stroke-dasharray"},mfe={offset:"strokeDashoffset",array:"strokeDasharray"};function vfe(e,t,n=1,r=0,i=!0){e.pathLength=1;const o=i?gfe:mfe;e[o.offset]=Ze.transform(-r);const a=Ze.transform(t),s=Ze.transform(n);e[o.array]=`${a} ${s}`}function FL(e,{attrX:t,attrY:n,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:a=0,...s},l,c,d){if(FC(e,s,c),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:f}=e;p.transform&&(f.transform=p.transform,delete p.transform),(f.transform||p.transformOrigin)&&(f.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),f.transform&&(f.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete p.transformBox),t!==void 0&&(p.x=t),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),i!==void 0&&vfe(p,i,o,a,!1)}const BL=()=>({...BC(),attrs:{}}),zL=e=>typeof e=="string"&&e.toLowerCase()==="svg";function xfe(e,t,n,r){const i=D.useMemo(()=>{const o=BL();return FL(o,t,zL(r),e.transformTemplate,e.style),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};LL(o,e.style,e),i.style={...o,...i.style}}return i}const yfe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function zC(e){return typeof e!="string"||e.includes("-")?!1:!!(yfe.indexOf(e)>-1||/[A-Z]/u.test(e))}function bfe(e=!1){return(n,r,i,{latestValues:o},a)=>{const l=(zC(n)?xfe:ffe)(r,o,a,n),c=Khe(r,typeof n=="string",e),d=n!==D.Fragment?{...c,...l,ref:i}:{},{children:p}=r,f=D.useMemo(()=>vr(p)?p.get():p,[p]);return D.createElement(n,{...d,children:f})}}function j4(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function VC(e,t,n,r){if(typeof t=="function"){const[i,o]=j4(r);t=t(n!==void 0?n:e.custom,i,o)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,o]=j4(r);t=t(n!==void 0?n:e.custom,i,o)}return t}function Qg(e){return vr(e)?e.get():e}function wfe({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:Sfe(n,r,i,e),renderState:t()}}const VL=e=>(t,n)=>{const r=D.useContext(jv),i=D.useContext(Vv),o=()=>wfe(e,t,r,i);return n?o():uC(o)};function Sfe(e,t,n,r){const i={},o=r(e,{});for(const f in o)i[f]=Qg(o[f]);let{initial:a,animate:s}=e;const l=qv(e),c=RL(e);t&&c&&!l&&e.inherit!==!1&&(a===void 0&&(a=t.initial),s===void 0&&(s=t.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const p=d?s:a;if(p&&typeof p!="boolean"&&!Uv(p)){const f=Array.isArray(p)?p:[p];for(let h=0;h<f.length;h++){const g=VC(e,f[h]);if(g){const{transitionEnd:m,transition:v,...w}=g;for(const S in w){let C=w[S];if(Array.isArray(C)){const A=d?C.length-1:0;C=C[A]}C!==null&&(i[S]=C)}for(const S in m)i[S]=m[S]}}}return i}function jC(e,t,n){var o;const{style:r}=e,i={};for(const a in r)(vr(r[a])||t.style&&vr(t.style[a])||$L(a,e)||((o=n==null?void 0:n.getValue(a))==null?void 0:o.liveStyle)!==void 0)&&(i[a]=r[a]);return i}const Cfe={useVisualState:VL({scrapeMotionValuesFromProps:jC,createRenderState:BC})};function jL(e,t,n){const r=jC(e,t,n);for(const i in e)if(vr(e[i])||vr(t[i])){const o=xu.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=e[i]}return r}const _fe={useVisualState:VL({scrapeMotionValuesFromProps:jL,createRenderState:BL})};function kfe(e,t){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...zC(r)?_fe:Cfe,preloadedFeatures:e,useRender:bfe(i),createVisualElement:t,Component:r};return ife(a)}}function Wp(e,t,n){const r=e.getProps();return VC(r,t,n!==void 0?n:r.custom,e)}const X2=e=>Array.isArray(e);function Efe(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Wc(n))}function Tfe(e){return X2(e)?e[e.length-1]||0:e}function Ife(e,t){const n=Wp(e,t);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const a in o){const s=Tfe(o[a]);Efe(e,a,s)}}function Afe(e){return!!(vr(e)&&e.add)}function Q2(e,t){const n=e.getValue("willChange");if(Afe(n))return n.add(t);if(!n&&aa.WillChange){const r=new aa.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function UL(e){return e.props[NL]}const Pfe=e=>e!==null;function Dfe(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(Pfe),o=t&&n!=="loop"&&t%2===1?0:i.length-1;return i[o]}const Rfe={type:"spring",stiffness:500,damping:25,restSpeed:10},Nfe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Mfe={type:"keyframes",duration:.8},Ofe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},$fe=(e,{keyframes:t})=>t.length>2?Mfe:yu.has(e)?e.startsWith("scale")?Nfe(t[1]):Rfe:Ofe;function Lfe({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:a,repeatDelay:s,from:l,elapsed:c,...d}){return!!Object.keys(d).length}const UC=(e,t,n,r={},i,o)=>a=>{const s=PC(r,e)||{},l=s.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Co(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...s,delay:-c,onUpdate:f=>{t.set(f),s.onUpdate&&s.onUpdate(f)},onComplete:()=>{a(),s.onComplete&&s.onComplete()},name:e,motionValue:t,element:o?void 0:i};Lfe(s)||Object.assign(d,$fe(e,d)),d.duration&&(d.duration=Co(d.duration)),d.repeatDelay&&(d.repeatDelay=Co(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let p=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(p=!0)),(aa.instantAnimations||aa.skipAnimations)&&(p=!0,d.duration=0,d.delay=0),d.allowFlatten=!s.type&&!s.ease,p&&!o&&t.get()!==void 0){const f=Dfe(d.keyframes,s);if(f!==void 0){on.update(()=>{d.onUpdate(f),d.onComplete()});return}}return s.isSync?new TC(d):new vhe(d)};function Ffe({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function qL(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:a,...s}=t;r&&(o=r);const l=[],c=i&&e.animationState&&e.animationState.getState()[i];for(const d in s){const p=e.getValue(d,e.latestValues[d]??null),f=s[d];if(f===void 0||c&&Ffe(c,d))continue;const h={delay:n,...PC(o||{},d)},g=p.get();if(g!==void 0&&!p.isAnimating&&!Array.isArray(f)&&f===g&&!h.velocity)continue;let m=!1;if(window.MotionHandoffAnimation){const w=UL(e);if(w){const S=window.MotionHandoffAnimation(w,d,on);S!==null&&(h.startTime=S,m=!0)}}Q2(e,d),p.start(UC(d,p,f,e.shouldReduceMotion&&yL.has(d)?{type:!1}:h,e,m));const v=p.animation;v&&l.push(v)}return a&&Promise.all(l).then(()=>{on.update(()=>{a&&Ife(e,a)})}),l}function J2(e,t,n={}){var l;const r=Wp(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(qL(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:p,staggerDirection:f}=i;return Bfe(e,t,d+c,p,f,n)}:()=>Promise.resolve(),{when:s}=i;if(s){const[c,d]=s==="beforeChildren"?[o,a]:[a,o];return c().then(()=>d())}else return Promise.all([o(),a(n.delay)])}function Bfe(e,t,n=0,r=0,i=1,o){const a=[],s=(e.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>s-c*r;return Array.from(e.variantChildren).sort(zfe).forEach((c,d)=>{c.notify("AnimationStart",t),a.push(J2(c,t,{...o,delay:n+l(d)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(a)}function zfe(e,t){return e.sortNodePosition(t)}function Vfe(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(o=>J2(e,o,n));r=Promise.all(i)}else if(typeof t=="string")r=J2(e,t,n);else{const i=typeof t=="function"?Wp(e,t,n.custom):t;r=Promise.all(qL(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function WL(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const jfe=$C.length;function HL(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?HL(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<jfe;n++){const r=$C[n],i=e.props[r];(Up(i)||i===!1)&&(t[r]=i)}return t}const Ufe=[...OC].reverse(),qfe=OC.length;function Wfe(e){return t=>Promise.all(t.map(({animation:n,options:r})=>Vfe(e,n,r)))}function Hfe(e){let t=Wfe(e),n=U4(),r=!0;const i=l=>(c,d)=>{var f;const p=Wp(e,d,l==="exit"?(f=e.presenceContext)==null?void 0:f.custom:void 0);if(p){const{transition:h,transitionEnd:g,...m}=p;c={...c,...m,...g}}return c};function o(l){t=l(e)}function a(l){const{props:c}=e,d=HL(e.parent)||{},p=[],f=new Set;let h={},g=1/0;for(let v=0;v<qfe;v++){const w=Ufe[v],S=n[w],C=c[w]!==void 0?c[w]:d[w],A=Up(C),_=w===l?S.isActive:null;_===!1&&(g=v);let I=C===d[w]&&C!==c[w]&&A;if(I&&r&&e.manuallyAnimateOnMount&&(I=!1),S.protectedKeys={...h},!S.isActive&&_===null||!C&&!S.prevProp||Uv(C)||typeof C=="boolean")continue;const E=Gfe(S.prevProp,C);let k=E||w===l&&S.isActive&&!I&&A||v>g&&A,T=!1;const P=Array.isArray(C)?C:[C];let O=P.reduce(i(w),{});_===!1&&(O={});const{prevResolvedValues:R={}}=S,N={...R,...O},L=j=>{k=!0,f.has(j)&&(T=!0,f.delete(j)),S.needsAnimating[j]=!0;const z=e.getValue(j);z&&(z.liveStyle=!1)};for(const j in N){const z=O[j],H=R[j];if(h.hasOwnProperty(j))continue;let J=!1;X2(z)&&X2(H)?J=!WL(z,H):J=z!==H,J?z!=null?L(j):f.add(j):z!==void 0&&f.has(j)?L(j):S.protectedKeys[j]=!0}S.prevProp=C,S.prevResolvedValues=O,S.isActive&&(h={...h,...O}),r&&e.blockInitialAnimation&&(k=!1),k&&(!(I&&E)||T)&&p.push(...P.map(j=>({animation:j,options:{type:w}})))}if(f.size){const v={};if(typeof c.initial!="boolean"){const w=Wp(e,Array.isArray(c.initial)?c.initial[0]:c.initial);w&&w.transition&&(v.transition=w.transition)}f.forEach(w=>{const S=e.getBaseTarget(w),C=e.getValue(w);C&&(C.liveStyle=!0),v[w]=S??null}),p.push({animation:v})}let m=!!p.length;return r&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(m=!1),r=!1,m?t(p):Promise.resolve()}function s(l,c){var p;if(n[l].isActive===c)return Promise.resolve();(p=e.variantChildren)==null||p.forEach(f=>{var h;return(h=f.animationState)==null?void 0:h.setActive(l,c)}),n[l].isActive=c;const d=a(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:a,setActive:s,setAnimateFunction:o,getState:()=>n,reset:()=>{n=U4(),r=!0}}}function Gfe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!WL(t,e):!1}function Fs(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function U4(){return{animate:Fs(!0),whileInView:Fs(),whileHover:Fs(),whileTap:Fs(),whileDrag:Fs(),whileFocus:Fs(),exit:Fs()}}class Ns{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Yfe extends Ns{constructor(t){super(t),t.animationState||(t.animationState=Hfe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Uv(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let Kfe=0;class Xfe extends Ns{constructor(){super(...arguments),this.id=Kfe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Qfe={animation:{Feature:Yfe},exit:{Feature:Xfe}};function Hp(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Oh(e){return{point:{x:e.pageX,y:e.pageY}}}const Jfe=e=>t=>NC(t)&&e(t,Oh(t));function Hd(e,t,n,r){return Hp(e,t,Jfe(n),r)}function GL({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function Zfe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function ege(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const YL=1e-4,tge=1-YL,nge=1+YL,KL=.01,rge=0-KL,ige=0+KL;function Tr(e){return e.max-e.min}function oge(e,t,n){return Math.abs(e-t)<=n}function q4(e,t,n,r=.5){e.origin=r,e.originPoint=nn(t.min,t.max,e.origin),e.scale=Tr(n)/Tr(t),e.translate=nn(n.min,n.max,e.origin)-e.originPoint,(e.scale>=tge&&e.scale<=nge||isNaN(e.scale))&&(e.scale=1),(e.translate>=rge&&e.translate<=ige||isNaN(e.translate))&&(e.translate=0)}function Gd(e,t,n,r){q4(e.x,t.x,n.x,r?r.originX:void 0),q4(e.y,t.y,n.y,r?r.originY:void 0)}function W4(e,t,n){e.min=n.min+t.min,e.max=e.min+Tr(t)}function age(e,t,n){W4(e.x,t.x,n.x),W4(e.y,t.y,n.y)}function H4(e,t,n){e.min=t.min-n.min,e.max=e.min+Tr(t)}function Yd(e,t,n){H4(e.x,t.x,n.x),H4(e.y,t.y,n.y)}const G4=()=>({translate:0,scale:1,origin:0,originPoint:0}),pc=()=>({x:G4(),y:G4()}),Y4=()=>({min:0,max:0}),yn=()=>({x:Y4(),y:Y4()});function Ei(e){return[e("x"),e("y")]}function s1(e){return e===void 0||e===1}function Z2({scale:e,scaleX:t,scaleY:n}){return!s1(e)||!s1(t)||!s1(n)}function Ys(e){return Z2(e)||XL(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function XL(e){return K4(e.x)||K4(e.y)}function K4(e){return e&&e!=="0%"}function d0(e,t,n){const r=e-n,i=t*r;return n+i}function X4(e,t,n,r,i){return i!==void 0&&(e=d0(e,i,r)),d0(e,n,r)+t}function ew(e,t=0,n=1,r,i){e.min=X4(e.min,t,n,r,i),e.max=X4(e.max,t,n,r,i)}function QL(e,{x:t,y:n}){ew(e.x,t.translate,t.scale,t.originPoint),ew(e.y,n.translate,n.scale,n.originPoint)}const Q4=.999999999999,J4=1.0000000000001;function sge(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let o,a;for(let s=0;s<i;s++){o=n[s],a=o.projectionDelta;const{visualElement:l}=o.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&fc(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,QL(e,a)),r&&Ys(o.latestValues)&&fc(e,o.latestValues))}t.x<J4&&t.x>Q4&&(t.x=1),t.y<J4&&t.y>Q4&&(t.y=1)}function hc(e,t){e.min=e.min+t,e.max=e.max+t}function Z4(e,t,n,r,i=.5){const o=nn(e.min,e.max,i);ew(e,t,n,o,r)}function fc(e,t){Z4(e.x,t.x,t.scaleX,t.scale,t.originX),Z4(e.y,t.y,t.scaleY,t.scale,t.originY)}function JL(e,t){return GL(ege(e.getBoundingClientRect(),t))}function lge(e,t,n){const r=JL(e,n),{scroll:i}=t;return i&&(hc(r.x,i.offset.x),hc(r.y,i.offset.y)),r}const ZL=({current:e})=>e?e.ownerDocument.defaultView:null,eA=(e,t)=>Math.abs(e-t);function cge(e,t){const n=eA(e.x,t.x),r=eA(e.y,t.y);return Math.sqrt(n**2+r**2)}class e9{constructor(t,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=c1(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,h=cge(p.offset,{x:0,y:0})>=3;if(!f&&!h)return;const{point:g}=p,{timestamp:m}=Xn;this.history.push({...g,timestamp:m});const{onStart:v,onMove:w}=this.handlers;f||(v&&v(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,p)},this.handlePointerMove=(p,f)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=l1(f,this.transformPagePoint),on.update(this.updatePoint,!0)},this.handlePointerUp=(p,f)=>{this.end();const{onEnd:h,onSessionEnd:g,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=c1(p.type==="pointercancel"?this.lastMoveEventInfo:l1(f,this.transformPagePoint),this.history);this.startEvent&&h&&h(p,v),g&&g(p,v)},!NC(t))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const a=Oh(t),s=l1(a,this.transformPagePoint),{point:l}=s,{timestamp:c}=Xn;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=n;d&&d(t,c1(s,this.history)),this.removeListeners=Rh(Hd(this.contextWindow,"pointermove",this.handlePointerMove),Hd(this.contextWindow,"pointerup",this.handlePointerUp),Hd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ys(this.updatePoint)}}function l1(e,t){return t?{point:t(e.point)}:e}function tA(e,t){return{x:e.x-t.x,y:e.y-t.y}}function c1({point:e},t){return{point:e,delta:tA(e,t9(t)),offset:tA(e,uge(t)),velocity:dge(t,.1)}}function uge(e){return e[0]}function t9(e){return e[e.length-1]}function dge(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=t9(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>Co(t)));)n--;if(!r)return{x:0,y:0};const o=_o(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const a={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function pge(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?nn(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?nn(n,e,r.max):Math.min(e,n)),e}function nA(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function hge(e,{top:t,left:n,bottom:r,right:i}){return{x:nA(e.x,n,i),y:nA(e.y,t,r)}}function rA(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function fge(e,t){return{x:rA(e.x,t.x),y:rA(e.y,t.y)}}function gge(e,t){let n=.5;const r=Tr(e),i=Tr(t);return i>r?n=zp(t.min,t.max-r,e.min):r>i&&(n=zp(e.min,e.max-i,t.min)),oa(0,1,n)}function mge(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const tw=.35;function vge(e=tw){return e===!1?e=0:e===!0&&(e=tw),{x:iA(e,"left","right"),y:iA(e,"top","bottom")}}function iA(e,t,n){return{min:oA(e,t),max:oA(e,n)}}function oA(e,t){return typeof e=="number"?e:e[t]||0}const xge=new WeakMap;class yge{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=yn(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Oh(d).point)},o=(d,p)=>{const{drag:f,dragPropagation:h,onDragStart:g}=this.getProps();if(f&&!h&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Nhe(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ei(v=>{let w=this.getAxisMotionValue(v).get()||0;if(ko.test(w)){const{projection:S}=this.visualElement;if(S&&S.layout){const C=S.layout.layoutBox[v];C&&(w=Tr(C)*(parseFloat(w)/100))}}this.originPoint[v]=w}),g&&on.postRender(()=>g(d,p)),Q2(this.visualElement,"transform");const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},a=(d,p)=>{const{dragPropagation:f,dragDirectionLock:h,onDirectionLock:g,onDrag:m}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:v}=p;if(h&&this.currentDirection===null){this.currentDirection=bge(v),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",p.point,v),this.updateAxis("y",p.point,v),this.visualElement.render(),m&&m(d,p)},s=(d,p)=>this.stop(d,p),l=()=>Ei(d=>{var p;return this.getAnimationState(d)==="paused"&&((p=this.getAxisMotionValue(d).animation)==null?void 0:p.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new e9(t,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:s,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:ZL(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&on.postRender(()=>o(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!eg(t,i,this.currentDirection))return;const o=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=pge(a,this.constraints[t],this.elastic[t])),o.set(a)}resolveConstraints(){var o;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,i=this.constraints;t&&dc(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=hge(r.layoutBox,t):this.constraints=!1,this.elastic=vge(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ei(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=mge(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!dc(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=lge(r,i.root,this.visualElement.getTransformPagePoint());let a=fge(i.layout.layoutBox,o);if(n){const s=n(Zfe(a));this.hasMutatedConstraints=!!s,s&&(a=GL(s))}return a}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:s}=this.getProps(),l=this.constraints||{},c=Ei(d=>{if(!eg(d,n,this.currentDirection))return;let p=l&&l[d]||{};a&&(p={min:0,max:0});const f=i?200:1e6,h=i?40:1e7,g={type:"inertia",velocity:r?t[d]:0,bounceStiffness:f,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...o,...p};return this.startAxisValueAnimation(d,g)});return Promise.all(c).then(s)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return Q2(this.visualElement,t),r.start(UC(t,r,0,n,this.visualElement,!1))}stopAnimation(){Ei(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ei(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Ei(n=>{const{drag:r}=this.getProps();if(!eg(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:s}=i.layout.layoutBox[n];o.set(t[n]-nn(a,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!dc(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ei(a=>{const s=this.getAxisMotionValue(a);if(s&&this.constraints!==!1){const l=s.get();i[a]=gge({min:l,max:l},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ei(a=>{if(!eg(a,t,null))return;const s=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];s.set(nn(l,c,i[a]))})}addListeners(){if(!this.visualElement.current)return;xge.set(this.visualElement,this);const t=this.visualElement.current,n=Hd(t,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();dc(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),on.read(r);const a=Hp(window,"resize",()=>this.scalePositionWithinConstraints()),s=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ei(d=>{const p=this.getAxisMotionValue(d);p&&(this.originPoint[d]+=l[d].translate,p.set(p.get()+l[d].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),s&&s()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:a=tw,dragMomentum:s=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:a,dragMomentum:s}}}function eg(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function bge(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class wge extends Ns{constructor(t){super(t),this.removeGroupControls=Oi,this.removeListeners=Oi,this.controls=new yge(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Oi}unmount(){this.removeGroupControls(),this.removeListeners()}}const aA=e=>(t,n)=>{e&&on.postRender(()=>e(t,n))};class Sge extends Ns{constructor(){super(...arguments),this.removePointerDownListener=Oi}onPointerDown(t){this.session=new e9(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ZL(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:aA(t),onStart:aA(n),onMove:r,onEnd:(o,a)=>{delete this.session,i&&on.postRender(()=>i(o,a))}}}mount(){this.removePointerDownListener=Hd(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Jg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function sA(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ju={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Ze.test(e))e=parseFloat(e);else return e;const n=sA(e,t.target.x),r=sA(e,t.target.y);return`${n}% ${r}%`}},Cge={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=bs.parse(e);if(i.length>5)return r;const o=bs.createTransformer(e),a=typeof i[0]!="number"?1:0,s=n.x.scale*t.x,l=n.y.scale*t.y;i[0+a]/=s,i[1+a]/=l;const c=nn(s,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=c),typeof i[3+a]=="number"&&(i[3+a]/=c),o(i)}};class _ge extends D.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=t;lfe(kge),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Jg.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,{projection:a}=r;return a&&(a.isPresent=o,i||t.layoutDependency!==n||n===void 0||t.isPresent!==o?a.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?a.promote():a.relegate()||on.postRender(()=>{const s=a.getStack();(!s||!s.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),RC.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function n9(e){const[t,n]=AL(),r=D.useContext(cC);return qr.jsx(_ge,{...e,layoutGroup:r,switchLayoutGroup:D.useContext(ML),isPresent:t,safeToRemove:n})}const kge={borderRadius:{...Ju,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ju,borderTopRightRadius:Ju,borderBottomLeftRadius:Ju,borderBottomRightRadius:Ju,boxShadow:Cge};function Ege(e,t,n){const r=vr(e)?e:Wc(e);return r.start(UC("",r,t,n)),r.animation}const Tge=(e,t)=>e.depth-t.depth;class Ige{constructor(){this.children=[],this.isDirty=!1}add(t){pC(this.children,t),this.isDirty=!0}remove(t){hC(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Tge),this.isDirty=!1,this.children.forEach(t)}}function Age(e,t){const n=jr.now(),r=({timestamp:i})=>{const o=i-n;o>=t&&(ys(r),e(o-t))};return on.setup(r,!0),()=>ys(r)}const r9=["TopLeft","TopRight","BottomLeft","BottomRight"],Pge=r9.length,lA=e=>typeof e=="string"?parseFloat(e):e,cA=e=>typeof e=="number"||Ze.test(e);function Dge(e,t,n,r,i,o){i?(e.opacity=nn(0,n.opacity??1,Rge(r)),e.opacityExit=nn(t.opacity??1,0,Nge(r))):o&&(e.opacity=nn(t.opacity??1,n.opacity??1,r));for(let a=0;a<Pge;a++){const s=`border${r9[a]}Radius`;let l=uA(t,s),c=uA(n,s);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||cA(l)===cA(c)?(e[s]=Math.max(nn(lA(l),lA(c),r),0),(ko.test(c)||ko.test(l))&&(e[s]+="%")):e[s]=c}(t.rotate||n.rotate)&&(e.rotate=nn(t.rotate||0,n.rotate||0,r))}function uA(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Rge=i9(0,.5,X$),Nge=i9(.5,.95,Oi);function i9(e,t,n){return r=>r<e?0:r>t?1:n(zp(e,t,r))}function dA(e,t){e.min=t.min,e.max=t.max}function ki(e,t){dA(e.x,t.x),dA(e.y,t.y)}function pA(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function hA(e,t,n,r,i){return e-=t,e=d0(e,1/n,r),i!==void 0&&(e=d0(e,1/i,r)),e}function Mge(e,t=0,n=1,r=.5,i,o=e,a=e){if(ko.test(t)&&(t=parseFloat(t),t=nn(a.min,a.max,t/100)-a.min),typeof t!="number")return;let s=nn(o.min,o.max,r);e===o&&(s-=t),e.min=hA(e.min,t,n,s,i),e.max=hA(e.max,t,n,s,i)}function fA(e,t,[n,r,i],o,a){Mge(e,t[n],t[r],t[i],t.scale,o,a)}const Oge=["x","scaleX","originX"],$ge=["y","scaleY","originY"];function gA(e,t,n,r){fA(e.x,t,Oge,n?n.x:void 0,r?r.x:void 0),fA(e.y,t,$ge,n?n.y:void 0,r?r.y:void 0)}function mA(e){return e.translate===0&&e.scale===1}function o9(e){return mA(e.x)&&mA(e.y)}function vA(e,t){return e.min===t.min&&e.max===t.max}function Lge(e,t){return vA(e.x,t.x)&&vA(e.y,t.y)}function xA(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function a9(e,t){return xA(e.x,t.x)&&xA(e.y,t.y)}function yA(e){return Tr(e.x)/Tr(e.y)}function bA(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Fge{constructor(){this.members=[]}add(t){pC(this.members,t),t.scheduleRender()}remove(t){if(hC(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Bge(e,t,n){let r="";const i=e.x.translate/t.x,o=e.y.translate/t.y,a=(n==null?void 0:n.z)||0;if((i||o||a)&&(r=`translate3d(${i}px, ${o}px, ${a}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:c,rotate:d,rotateX:p,rotateY:f,skewX:h,skewY:g}=n;c&&(r=`perspective(${c}px) ${r}`),d&&(r+=`rotate(${d}deg) `),p&&(r+=`rotateX(${p}deg) `),f&&(r+=`rotateY(${f}deg) `),h&&(r+=`skewX(${h}deg) `),g&&(r+=`skewY(${g}deg) `)}const s=e.x.scale*t.x,l=e.y.scale*t.y;return(s!==1||l!==1)&&(r+=`scale(${s}, ${l})`),r||"none"}const u1=["","X","Y","Z"],zge={visibility:"hidden"},Vge=1e3;let jge=0;function d1(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function s9(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=UL(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:o}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",on,!(i||o))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&s9(r)}function l9({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},s=t==null?void 0:t()){this.id=jge++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Wge),this.nodes.forEach(Xge),this.nodes.forEach(Qge),this.nodes.forEach(Hge)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=s?s.root||s:this,this.path=s?[...s.path,s]:[],this.parent=s,this.depth=s?s.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ige)}addEventListener(a,s){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new mC),this.eventHandlers.get(a).add(s)}notifyListeners(a,...s){const l=this.eventHandlers.get(a);l&&l.notify(...s)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=IL(a)&&!Bhe(a),this.instance=a;const{layoutId:s,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||s)&&(this.isLayoutDirty=!0),e){let d;const p=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=Age(p,250),Jg.hasAnimatedSinceResize&&(Jg.hasAnimatedSinceResize=!1,this.nodes.forEach(SA))})}s&&this.root.registerSharedNode(s,this),this.options.animate!==!1&&c&&(s||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeLayoutChanged:f,layout:h})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||c.getDefaultTransition()||nme,{onLayoutAnimationStart:m,onLayoutAnimationComplete:v}=c.getProps(),w=!this.targetLayout||!a9(this.targetLayout,h),S=!p&&f;if(this.options.layoutRoot||this.resumeFrom||S||p&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const C={...PC(g,"layout"),onPlay:m,onComplete:v};(c.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C),this.setAnimationOrigin(d,S)}else p||SA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=h})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ys(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Jge),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&s9(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const p=this.path[d];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:s,layout:l}=this.options;if(s===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(wA);return}this.isUpdating||this.nodes.forEach(Yge),this.isUpdating=!1,this.nodes.forEach(Kge),this.nodes.forEach(Uge),this.nodes.forEach(qge),this.clearAllSnapshots();const s=jr.now();Xn.delta=oa(0,1e3/60,s-Xn.timestamp),Xn.timestamp=s,Xn.isProcessing=!0,n1.update.process(Xn),n1.preRender.process(Xn),n1.render.process(Xn),Xn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,RC.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Gge),this.sharedNodes.forEach(Zge)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,on.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){on.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Tr(this.snapshot.measuredBox.x)&&!Tr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=yn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:s}=this.options;s&&s.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let s=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(s=!1),s&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,s=this.projectionDelta&&!o9(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;a&&this.instance&&(s||Ys(this.latestValues)||d)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const s=this.measurePageBox();let l=this.removeElementScroll(s);return a&&(l=this.removeTransform(l)),rme(l),{animationId:this.root.animationId,measuredBox:s,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:a}=this.options;if(!a)return yn();const s=a.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(ime))){const{scroll:d}=this.root;d&&(hc(s.x,d.offset.x),hc(s.y,d.offset.y))}return s}removeElementScroll(a){var l;const s=yn();if(ki(s,a),(l=this.scroll)!=null&&l.wasRoot)return s;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:p,options:f}=d;d!==this.root&&p&&f.layoutScroll&&(p.wasRoot&&ki(s,a),hc(s.x,p.offset.x),hc(s.y,p.offset.y))}return s}applyTransform(a,s=!1){const l=yn();ki(l,a);for(let c=0;c<this.path.length;c++){const d=this.path[c];!s&&d.options.layoutScroll&&d.scroll&&d!==d.root&&fc(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Ys(d.latestValues)&&fc(l,d.latestValues)}return Ys(this.latestValues)&&fc(l,this.latestValues),l}removeTransform(a){const s=yn();ki(s,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Ys(c.latestValues))continue;Z2(c.latestValues)&&c.updateSnapshot();const d=yn(),p=c.measurePageBox();ki(d,p),gA(s,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return Ys(this.latestValues)&&gA(s,this.latestValues),s}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Xn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var f;const s=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=s.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=s.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=s.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==s;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:p}=this.options;if(!(!this.layout||!(d||p))){if(this.resolvedRelativeTargetAt=Xn.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yn(),this.relativeTargetOrigin=yn(),Yd(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),ki(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=yn(),this.targetWithTransforms=yn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),age(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ki(this.target,this.layout.layoutBox),QL(this.target,this.targetDelta)):ki(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yn(),this.relativeTargetOrigin=yn(),Yd(this.relativeTargetOrigin,this.target,h.target),ki(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Z2(this.parent.latestValues)||XL(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var g;const a=this.getLead(),s=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(l=!1),s&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Xn.timestamp&&(l=!1),l)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;ki(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,f=this.treeScale.y;sge(this.layoutCorrected,this.treeScale,this.path,s),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=yn());const{target:h}=a;if(!h){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(pA(this.prevProjectionDelta.x,this.projectionDelta.x),pA(this.prevProjectionDelta.y,this.projectionDelta.y)),Gd(this.projectionDelta,this.layoutCorrected,h,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==f||!bA(this.projectionDelta.x,this.prevProjectionDelta.x)||!bA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",h))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var s;if((s=this.options.visualElement)==null||s.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=pc(),this.projectionDelta=pc(),this.projectionDeltaWithTransform=pc()}setAnimationOrigin(a,s=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},p=pc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!s;const f=yn(),h=l?l.source:void 0,g=this.layout?this.layout.source:void 0,m=h!==g,v=this.getStack(),w=!v||v.members.length<=1,S=!!(m&&!w&&this.options.crossfade===!0&&!this.path.some(tme));this.animationProgress=0;let C;this.mixTargetDelta=A=>{const _=A/1e3;CA(p.x,a.x,_),CA(p.y,a.y,_),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Yd(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),eme(this.relativeTarget,this.relativeTargetOrigin,f,_),C&&Lge(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=yn()),ki(C,this.relativeTarget)),m&&(this.animationValues=d,Dge(d,c,this.latestValues,_,S,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var s,l,c;this.notifyListeners("animationStart"),(s=this.currentAnimation)==null||s.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(ys(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=on.update(()=>{Jg.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Wc(0)),this.currentAnimation=Ege(this.motionValue,[0,1e3],{...a,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),a.onUpdate&&a.onUpdate(d)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Vge),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:s,target:l,layout:c,latestValues:d}=a;if(!(!s||!l||!c)){if(this!==a&&this.layout&&c&&c9(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||yn();const p=Tr(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+p;const f=Tr(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+f}ki(s,l),fc(s,d),Gd(this.projectionDeltaWithTransform,this.layoutCorrected,s,d)}}registerSharedNode(a,s){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Fge),this.sharedNodes.get(a).add(s);const c=s.options.initialPromotionConfig;s.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(s):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var s;const{layoutId:a}=this.options;return a?((s=this.getStack())==null?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:a}=this.options;return a?(s=this.getStack())==null?void 0:s.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:s,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),s&&this.setOptions({transition:s})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let s=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(s=!0),!s)return;const c={};l.z&&d1("z",a,c,this.animationValues);for(let d=0;d<u1.length;d++)d1(`rotate${u1[d]}`,a,c,this.animationValues),d1(`skew${u1[d]}`,a,c,this.animationValues);a.render();for(const d in c)a.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);a.scheduleRender()}getProjectionStyles(a){if(!this.instance||this.isSVG)return;if(!this.isVisible)return zge;const s={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,s.opacity="",s.pointerEvents=Qg(a==null?void 0:a.pointerEvents)||"",s.transform=l?l(this.latestValues,""):"none",s;const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){const h={};return this.options.layoutId&&(h.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,h.pointerEvents=Qg(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Ys(this.latestValues)&&(h.transform=l?l({},""):"none",this.hasProjected=!1),h}const d=c.animationValues||c.latestValues;this.applyTransformsToTarget(),s.transform=Bge(this.projectionDeltaWithTransform,this.treeScale,d),l&&(s.transform=l(d,s.transform));const{x:p,y:f}=this.projectionDelta;s.transformOrigin=`${p.origin*100}% ${f.origin*100}% 0`,c.animationValues?s.opacity=c===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:s.opacity=c===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const h in qp){if(d[h]===void 0)continue;const{correct:g,applyTo:m,isCSSVariable:v}=qp[h],w=s.transform==="none"?d[h]:g(d[h],c);if(m){const S=m.length;for(let C=0;C<S;C++)s[m[C]]=w}else v?this.options.visualElement.renderState.vars[h]=w:s[h]=w}return this.options.layoutId&&(s.pointerEvents=c===this?Qg(a==null?void 0:a.pointerEvents)||"":"none"),s}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var s;return(s=a.currentAnimation)==null?void 0:s.stop()}),this.root.nodes.forEach(wA),this.root.sharedNodes.clear()}}}function Uge(e){e.updateLayout()}function qge(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:o}=e.options,a=t.source!==e.layout.source;o==="size"?Ei(p=>{const f=a?t.measuredBox[p]:t.layoutBox[p],h=Tr(f);f.min=r[p].min,f.max=f.min+h}):c9(o,t.layoutBox,r)&&Ei(p=>{const f=a?t.measuredBox[p]:t.layoutBox[p],h=Tr(r[p]);f.max=f.min+h,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[p].max=e.relativeTarget[p].min+h)});const s=pc();Gd(s,r,t.layoutBox);const l=pc();a?Gd(l,e.applyTransform(i,!0),t.measuredBox):Gd(l,r,t.layoutBox);const c=!o9(s);let d=!1;if(!e.resumeFrom){const p=e.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:f,layout:h}=p;if(f&&h){const g=yn();Yd(g,t.layoutBox,f.layoutBox);const m=yn();Yd(m,r,h.layoutBox),a9(g,m)||(d=!0),p.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=g,e.relativeParent=p)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:s,hasLayoutChanged:c,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function Wge(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Hge(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Gge(e){e.clearSnapshot()}function wA(e){e.clearMeasurements()}function Yge(e){e.isLayoutDirty=!1}function Kge(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function SA(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Xge(e){e.resolveTargetDelta()}function Qge(e){e.calcProjection()}function Jge(e){e.resetSkewAndRotation()}function Zge(e){e.removeLeadSnapshot()}function CA(e,t,n){e.translate=nn(t.translate,0,n),e.scale=nn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function _A(e,t,n,r){e.min=nn(t.min,n.min,r),e.max=nn(t.max,n.max,r)}function eme(e,t,n,r){_A(e.x,t.x,n.x,r),_A(e.y,t.y,n.y,r)}function tme(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const nme={duration:.45,ease:[.4,0,.1,1]},kA=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),EA=kA("applewebkit/")&&!kA("chrome/")?Math.round:Oi;function TA(e){e.min=EA(e.min),e.max=EA(e.max)}function rme(e){TA(e.x),TA(e.y)}function c9(e,t,n){return e==="position"||e==="preserve-aspect"&&!oge(yA(t),yA(n),.2)}function ime(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const ome=l9({attachResizeListener:(e,t)=>Hp(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),p1={current:void 0},u9=l9({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!p1.current){const e=new ome({});e.mount(window),e.setOptions({layoutScroll:!0}),p1.current=e}return p1.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),ame={pan:{Feature:Sge},drag:{Feature:wge,ProjectionNode:u9,MeasureLayout:n9}};function IA(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,o=r[i];o&&on.postRender(()=>o(t,Oh(t)))}class sme extends Ns{mount(){const{current:t}=this.node;t&&(this.unmount=Mhe(t,(n,r)=>(IA(this.node,r,"Start"),i=>IA(this.node,i,"End"))))}unmount(){}}class lme extends Ns{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Rh(Hp(this.node.current,"focus",()=>this.onFocus()),Hp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function AA(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),o=r[i];o&&on.postRender(()=>o(t,Oh(t)))}class cme extends Ns{mount(){const{current:t}=this.node;t&&(this.unmount=Fhe(t,(n,r)=>(AA(this.node,r,"Start"),(i,{success:o})=>AA(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const nw=new WeakMap,h1=new WeakMap,ume=e=>{const t=nw.get(e.target);t&&t(e)},dme=e=>{e.forEach(ume)};function pme({root:e,...t}){const n=e||document;h1.has(n)||h1.set(n,{});const r=h1.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(dme,{root:e,...t})),r[i]}function hme(e,t,n){const r=pme(t);return nw.set(e,n),r.observe(e),()=>{nw.delete(e),r.unobserve(e)}}const fme={some:0,all:1};class gme extends Ns{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=t,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:fme[i]},s=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,o&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:p}=this.node.getProps(),f=c?d:p;f&&f(l)};return hme(this.node.current,a,s)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(mme(t,n))&&this.startObserver()}unmount(){}}function mme({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const vme={inView:{Feature:gme},tap:{Feature:cme},focus:{Feature:lme},hover:{Feature:sme}},xme={layout:{ProjectionNode:u9,MeasureLayout:n9}},rw={current:null},d9={current:!1};function yme(){if(d9.current=!0,!!dC)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>rw.current=e.matches;e.addListener(t),t()}else rw.current=!1}const bme=new WeakMap;function wme(e,t,n){for(const r in t){const i=t[r],o=n[r];if(vr(i))e.addValue(r,i);else if(vr(o))e.addValue(r,Wc(i,{owner:e}));else if(o!==i)if(e.hasValue(r)){const a=e.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=e.getStaticValue(r);e.addValue(r,Wc(a!==void 0?a:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const PA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Sme{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:a},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=IC,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=jr.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,on.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=s,this.blockInitialAnimation=!!o,this.isControllingVariants=qv(n),this.isVariantNode=RL(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in p){const h=p[f];l[f]!==void 0&&vr(h)&&h.set(l[f],!1)}}mount(t){this.current=t,bme.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),d9.current||yme(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:rw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ys(this.notifyUpdate),ys(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=yu.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",s=>{this.latestValues[t]=s,this.props.onUpdate&&on.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),o(),a&&a(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Hc){const n=Hc[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const o=this.features[t];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):yn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<PA.length;r++){const i=PA[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,a=t[o];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=wme(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Wc(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(z$(r)||j$(r))?r=parseFloat(r):!Vhe(r)&&bs.test(n)&&(r=CL(t,n)),this.setBaseTarget(t,vr(r)?r.get():r)),vr(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var o;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=VC(this.props,n,(o=this.presenceContext)==null?void 0:o.custom);a&&(r=a[t])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!vr(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new mC),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class p9 extends Sme{constructor(){super(...arguments),this.KeyframeResolver=Ahe}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;vr(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function h9(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const o in n)e.style.setProperty(o,n[o])}function Cme(e){return window.getComputedStyle(e)}class _me extends p9{constructor(){super(...arguments),this.type="html",this.renderInstance=h9}readValueFromInstance(t,n){var r;if(yu.has(n))return(r=this.projection)!=null&&r.isProjecting?q2(n):Ype(t,n);{const i=Cme(t),o=(yC(n)?i.getPropertyValue(n):i[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(t,{transformPagePoint:n}){return JL(t,n)}build(t,n,r){FC(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return jC(t,n,r)}}const f9=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function kme(e,t,n,r){h9(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(f9.has(i)?i:LC(i),t.attrs[i])}class Eme extends p9{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=yn}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(yu.has(n)){const r=SL(n);return r&&r.default||0}return n=f9.has(n)?n:LC(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return jL(t,n,r)}build(t,n,r){FL(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,i){kme(t,n,r,i)}mount(t){this.isSVGTag=zL(t.tagName),super.mount(t)}}const Tme=(e,t)=>zC(e)?new Eme(t):new _me(t,{allowProjection:e!==D.Fragment}),Ime=kfe({...Qfe,...vme,...ame,...xme},Tme),Le=Xhe(Ime),DA=b("div",{target:"e1ldn6m834"})({name:"e3cpbs",styles:"padding:20px;padding-bottom:120px;max-width:1200px;margin:0 auto"}),Ame=b("div",{target:"e1ldn6m833"})({name:"ya6ao4",styles:"display:grid;grid-template-columns:repeat(auto-fill, minmax(280px, 1fr));gap:20px;margin-top:20px"}),Pme=b(Le.div,{target:"e1ldn6m832"})("background:",e=>e.theme.cardBg,";border-radius:12px;padding:20px;box-shadow:0 6px 15px rgba(0,0,0,0.05);cursor:pointer;height:200px;display:flex;flex-direction:column;justify-content:space-between;border:2px solid transparent;transition:border-color 0.3s;&:hover{border-color:",e=>e.theme.primary,";}"),RA=b("h3",{target:"e1ldn6m831"})("color:",e=>e.theme.text,";margin-bottom:10px;font-size:18px;"),NA=b("div",{target:"e1ldn6m830"})("color:",e=>e.theme.textSecondary,";font-size:14px;margin-bottom:10px;"),Dme=b("div",{target:"e1ldn6m829"})("width:100%;height:8px;background:",e=>e.theme.grayLight,";border-radius:4px;overflow:hidden;margin-top:10px;"),Rme=b("div",{target:"e1ldn6m828"})("height:100%;background:",e=>e.theme.primary,";width:",e=>e.value,"%;"),Nme=b(Le.div,{target:"e1ldn6m827"})({name:"9jwa08",styles:"position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0, 0, 0, 0.7);display:flex;justify-content:center;align-items:center;z-index:1100;padding:20px"}),Mme=b(Le.div,{target:"e1ldn6m826"})("background:",e=>e.theme.cardBg,";border-radius:16px;width:90%;max-width:800px;max-height:calc(90vh - 80px);overflow-y:auto;padding:30px;position:relative;margin-bottom:80px;scrollbar-width:none;-ms-overflow-style:none;&::-webkit-scrollbar{display:none;}"),Ome=b("button",{target:"e1ldn6m825"})("position:absolute;top:15px;right:15px;background:none;border:none;font-size:24px;cursor:pointer;color:",e=>e.theme.textSecondary,";&:hover{color:",e=>e.theme.text,";}"),$me=b("div",{target:"e1ldn6m824"})({name:"iqoq9n",styles:"margin-top:20px"}),Lme=b("div",{target:"e1ldn6m823"})("padding:15px;border-radius:8px;background:",e=>e.theme.grayLight,";margin-bottom:15px;display:flex;justify-content:space-between;align-items:center;cursor:pointer;transition:background 0.3s;&:hover{background:",e=>e.theme.gray,";}"),Fme=b("h4",{target:"e1ldn6m822"})("margin:0;color:",e=>e.theme.text,";"),Bme=b("button",{target:"e1ldn6m821"})("padding:8px 16px;background:",e=>e.theme.primary,";color:white;border:none;border-radius:6px;cursor:pointer;transition:opacity 0.3s;&:hover{opacity:0.9;}"),zme=b("button",{target:"e1ldn6m820"})({name:"e72ndx",styles:"padding:15px;background:#F44336;color:white;border:none;border-radius:8px;font-size:18px;font-weight:bold;cursor:pointer;margin-top:30px;width:100%;transition:opacity 0.3s;&:hover{opacity:0.9;}"}),Vme=b("div",{target:"e1ldn6m819"})("background:",e=>e.theme.grayLight,";border-radius:12px;padding:20px;margin:20px 0;"),jme=b("h4",{target:"e1ldn6m818"})("color:",e=>e.theme.text,";margin-bottom:15px;font-size:16px;"),Ume=b("div",{target:"e1ldn6m817"})({name:"15xmrlw",styles:"display:grid;grid-template-columns:repeat(3, 1fr);gap:15px"}),f1=b("div",{target:"e1ldn6m816"})("background:",e=>e.theme.cardBg,";border-radius:8px;padding:15px;text-align:center;"),g1=b("div",{target:"e1ldn6m815"})("font-size:24px;font-weight:bold;color:",e=>e.theme.primary,";margin-bottom:5px;"),m1=b("div",{target:"e1ldn6m814"})("font-size:14px;color:",e=>e.theme.textSecondary,";"),MA=b("div",{target:"e1ldn6m813"})("text-align:center;padding:40px 20px;background:",e=>e.theme.cardBg,";border-radius:12px;box-shadow:0 6px 15px rgba(0,0,0,0.05);"),OA=b("h3",{target:"e1ldn6m812"})("color:",e=>e.theme.text,";margin-bottom:15px;"),v1=b("p",{target:"e1ldn6m811"})("color:",e=>e.theme.textSecondary,";margin-bottom:20px;"),x1=b(bt,{target:"e1ldn6m810"})("display:inline-block;padding:12px 24px;background:",e=>e.theme.primary,";color:white;text-decoration:none;border-radius:8px;font-size:16px;transition:opacity 0.3s;&:hover{opacity:0.9;}"),y1=b(Le.button,{target:"e1ldn6m89"})({name:"1rv6kir",styles:"padding:20px 40px;background:linear-gradient(45deg, #F44336 0%, #D32F2F 100%);color:white;border:none;border-radius:12px;font-size:20px;font-weight:bold;cursor:pointer;margin:30px auto;display:block;box-shadow:0 8px 25px rgba(244, 67, 54, 0.3);transition:all 0.3s ease;&:hover{transform:translateY(-2px);box-shadow:0 12px 35px rgba(244, 67, 54, 0.4);}&:active{transform:translateY(0);}"}),qme=b("div",{target:"e1ldn6m88"})("background:",e=>e.theme.cardBg,";border-radius:16px;padding:30px;margin:30px 0;text-align:center;box-shadow:0 6px 15px rgba(0,0,0,0.05);border:2px solid #F44336;"),Wme=b("h2",{target:"e1ldn6m87"})({name:"2ylhrg",styles:"color:#F44336;margin-bottom:15px;font-size:24px;font-weight:bold"}),Hme=b("p",{target:"e1ldn6m86"})("color:",e=>e.theme.textSecondary,";margin-bottom:25px;font-size:16px;line-height:1.6;"),Gme=b("div",{target:"e1ldn6m85"})({name:"cbkc6h",styles:"background:#fff3cd;border:1px solid #ffeaa7;border-radius:8px;padding:12px 16px;margin:15px 0;text-align:center;font-size:14px;color:#856404;font-weight:500"}),Yme=b(Le.div,{target:"e1ldn6m84"})({name:"3tam98",styles:"position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0, 0, 0, 0.8);display:flex;justify-content:center;align-items:center;z-index:1200;padding:20px"}),Kme=b(Le.div,{target:"e1ldn6m83"})("background:",e=>e.theme.cardBg,";border-radius:16px;padding:30px;max-width:400px;width:90%;text-align:center;box-shadow:0 25px 60px rgba(0, 0, 0, 0.3);"),Xme=b("h3",{target:"e1ldn6m82"})({name:"16tahbz",styles:"color:#F44336;font-size:20px;font-weight:bold;margin-bottom:15px"}),Qme=b("p",{target:"e1ldn6m81"})("color:",e=>e.theme.textSecondary,";font-size:16px;line-height:1.5;margin-bottom:20px;"),Jme=b("button",{target:"e1ldn6m80"})({name:"ug2py2",styles:"padding:12px 24px;background:#F44336;color:white;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:opacity 0.3s;&:hover{opacity:0.9;}"}),Zme=()=>{const[e,t]=D.useState([]),[n,r]=D.useState(!0),[i,o]=D.useState(""),[a,s]=D.useState(null),[l,c]=D.useState({}),[d,p]=D.useState(!1),f=qt(),[h,g]=zv(Fi),m=()=>{const R=navigator.userAgent||navigator.vendor||window.opera,N=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i,L=window.innerWidth;return N.test(R)||L<768};D.useEffect(()=>{g||(h?(v(),w()):(r(!1),o("請先登入以查看考試資料")))},[h,g]);const v=async()=>{try{let R=await be(se(U,"course_summaries"));if(R.empty&&(console.log("course_summaries 集合為空，嘗試讀取 courses 集合..."),R=await be(se(U,"courses"))),R.empty){t([]),r(!1);return}const N=R.docs.map(L=>{const B=L.data(),V="001",j=B.numeric_id||1;return console.log(`處理章節: ${B.title}, numeric_id: ${j}`),{id:L.id,title:B.title,description:B.description,category:B.category,level:B.level,duration:B.duration,numeric_id:B.numeric_id,sections:B.chapters?B.chapters.flatMap((z,H)=>Array.isArray(z.subsections)?z.subsections.map((J,de)=>{const ae=`${V}_${j}_${de+1}`;return console.log(`  生成小節ID: ${ae} - ${J.title}`),{id:ae,title:J.title,chapterId:V,chapterIndex:j,sectionIndex:de+1}}):[{id:`${V}_${j}_1`,title:z.title,chapterId:V,chapterIndex:j,sectionIndex:1}]):[]}});N.sort((L,B)=>(L.numeric_id||0)-(B.numeric_id||0)),t(N)}catch(R){o(`獲取章節資料失敗: ${R.message}`),console.error("獲取章節資料失敗:",R)}finally{r(!1)}},w=async()=>{if(h)try{const R=tt(se(U,"examResults"),tn("userId","==",h.uid)),N=await be(R),L={};N.docs.forEach(B=>{const V=B.data();V.passed&&(L[V.examId]={...V,id:B.id})}),console.log("用戶考試結果:",L),console.log("考試結果鍵值:",Object.keys(L)),c(L)}catch(R){console.error("獲取用戶考試結果失敗:",R)}},S=R=>{s(R)},C=()=>{s(null)},A=R=>{f(`/exam/section/${R}`)},_=R=>{let N;typeof R=="string"&&R.includes("_")?N=R:N=`${R.toString().padStart(3,"0")}_chapter`,console.log("章節大考ID:",N),f(`/exam/chapter/${N}`)},I=()=>{if(m()){p(!0);return}f("/beverage-exam")},E=()=>{if(m()){p(!0);return}f("/beverage-exam-hard")},k=()=>{p(!1)},T=R=>{if(!R||!R.sections||R.sections.length===0)return 0;let N=0;R.sections.forEach(j=>{l[j.id]&&N++});const L=`${(R.numeric_id||1).toString().padStart(3,"0")}_chapter`,B=l[L]?1:0,V=R.sections.length+1;return Math.round((N+B)/V*100)},P=R=>!!l[R],O=R=>!!l[R];return g||n?y(Ne,{children:[u(Bt,{title:"考試中心"}),u(DA,{children:u("p",{children:"載入中..."})})]}):y(Ne,{children:[u(Bt,{title:"考試中心"}),y(DA,{children:[i?y(MA,{children:[u(OA,{children:"錯誤"}),u(v1,{children:i}),i.includes("權限")&&u(x1,{to:"/firebase-rules",children:"查看 Firebase 安全規則設置指南"}),!h&&u(x1,{to:"/login",style:{marginLeft:"10px"},children:"前往登入"})]}):y(Ne,{children:[y(qme,{children:[u(Wme,{children:"🥤 飲料製作實戰模擬"}),u(Hme,{children:"體驗真實的飲料店工作環境！在限時2分鐘內完成多杯飲料製作， 考驗您的速度、準確度和多工處理能力。包含茶底製作、奶類調配、 配料添加、甜度冰塊調整等完整流程。現在加入高難度模式挑戰！"}),u(Gme,{children:"💻 電腦版限定 - 為確保最佳遊戲體驗，建議使用電腦進行實戰模擬"}),y("div",{style:{display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap",marginTop:"20px"},children:[u(y1,{onClick:()=>f("/tutorial"),style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)"},whileHover:{scale:1.05},whileTap:{scale:.95},children:"📚 新手教學"}),u(y1,{onClick:I,whileHover:{scale:1.05},whileTap:{scale:.95},children:"🚀 標準模式"}),u(y1,{onClick:E,style:{background:"linear-gradient(135deg, #dc2626 0%, #991b1b 100%)"},whileHover:{scale:1.05},whileTap:{scale:.95},children:"🔥 高難度模式"})]}),y("div",{style:{textAlign:"center",marginTop:"15px",fontSize:"14px",color:"#6b7280",lineHeight:"1.5"},children:["💡 首次使用建議先進行新手教學，學會基本操作流程後再挑戰實戰模式",u("br",{}),"🔥 高難度模式：6種茶類 × 4種奶類 × 6種配料 = 更多組合挑戰！"]})]}),e.length===0?y(MA,{children:[u(OA,{children:"尚無考試資料"}),u(v1,{children:"目前資料庫中沒有任何章節或考試資料。您可以前往測試資料管理頁面添加一些測試資料。"}),u(x1,{to:"/seed-exam-data",children:"添加測試資料"})]}):u(Ame,{children:e.map(R=>y(Pme,{onClick:()=>S(R),whileHover:{scale:1.03},whileTap:{scale:.98},children:[y("div",{children:[u(RA,{children:R.title}),y(NA,{children:[y("div",{children:["小節數量: ",R.sections.length]}),y("div",{children:["考試數量: ",R.sections.length+1]})]})]}),y("div",{children:[u(Dme,{children:u(Rme,{value:T(R)})}),y(NA,{style:{textAlign:"right",marginTop:"5px"},children:["完成度: ",T(R),"%"]})]})]},R.id))})]}),u(Ft,{children:a&&u(Nme,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:C,children:y(Mme,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},onClick:R=>R.stopPropagation(),children:[u(Ome,{onClick:C,children:"×"}),y(RA,{children:[a.title," - 考試"]}),y(Vme,{children:[u(jme,{children:"學習進度儀表板"}),y(Ume,{children:[y(f1,{children:[y(g1,{children:[T(a),"%"]}),u(m1,{children:"總體完成度"})]}),y(f1,{children:[y(g1,{children:[a.sections.filter(R=>P(R.id)).length,"/",a.sections.length]}),u(m1,{children:"小節考試完成"})]}),y(f1,{children:[u(g1,{children:O(`${(a.numeric_id||1).toString().padStart(3,"0")}_chapter`)?"已完成":"未完成"}),u(m1,{children:"章節大考狀態"})]})]})]}),u($me,{children:a.sections.length>0?a.sections.map((R,N)=>y(Lme,{children:[y(Fme,{children:[N+1,". ",R.title,P(R.id)&&u("span",{style:{color:"#4CAF50",marginLeft:"10px"},children:"✓ 已完成"})]}),u(Bme,{onClick:()=>A(R.id),style:P(R.id)?{background:"#4CAF50"}:{},children:P(R.id)?"重新測驗":"開始測驗"})]},R.id)):u(v1,{children:"此章節尚無小節資料"})}),u(zme,{onClick:()=>_(a.numeric_id||1),style:O(`${(a.numeric_id||1).toString().padStart(3,"0")}_chapter`)?{background:"#4CAF50"}:{},children:O(`${(a.numeric_id||1).toString().padStart(3,"0")}_chapter`)?"重新進行章節大考":"開始章節大考"})]})})}),d&&u(Yme,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:y(Kme,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},children:[u(Xme,{children:"警告"}),u(Qme,{children:"您目前正在使用移動設備進行實戰模擬，這可能會影響您的考試表現。 建議使用電腦進行實戰模擬。"}),u(Jme,{onClick:k,children:"確認"})]})})]}),u(kn,{})]})},e0e=b(Le.div,{target:"exnmt2i22"})({name:"3tam98",styles:"position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0, 0, 0, 0.8);display:flex;justify-content:center;align-items:center;z-index:1200;padding:20px"}),t0e=b(Le.div,{target:"exnmt2i21"})("background:",e=>{var t;return((t=e.theme)==null?void 0:t.cardBg)||"#ffffff"},";border-radius:20px;width:90%;max-width:500px;max-height:90vh;overflow-y:auto;position:relative;box-shadow:0 25px 60px rgba(0, 0, 0, 0.3);scrollbar-width:none;-ms-overflow-style:none;&::-webkit-scrollbar{display:none;}"),n0e=b("div",{target:"exnmt2i20"})("text-align:center;padding:40px 30px 20px;background:",e=>e.passed?"linear-gradient(135deg, #10b981 0%, #059669 100%)":"linear-gradient(135deg, #dc2626 0%, #991b1b 100%)",";border-radius:20px 20px 0 0;color:white;"),r0e=b("div",{target:"exnmt2i19"})({name:"s60jvx",styles:"width:120px;height:120px;border-radius:50%;background:rgba(255, 255, 255, 0.2);border:4px solid rgba(255, 255, 255, 0.3);display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0 auto 20px;position:relative;overflow:hidden"}),i0e=b("div",{target:"exnmt2i18"})({name:"18z9pd3",styles:"font-size:36px;font-weight:bold;line-height:1"}),o0e=b("div",{target:"exnmt2i17"})({name:"1wza052",styles:"font-size:14px;opacity:0.9;margin-top:4px"}),a0e=b("h2",{target:"exnmt2i16"})({name:"11qouba",styles:"font-size:24px;font-weight:bold;margin:0 0 8px"}),s0e=b("p",{target:"exnmt2i15"})({name:"h7h1d7",styles:"font-size:16px;opacity:0.9;margin:0"}),l0e=b("div",{target:"exnmt2i14"})({name:"1bvbw6e",styles:"padding:30px"}),c0e=b("div",{target:"exnmt2i13"})({name:"tk90wz",styles:"display:grid;grid-template-columns:repeat(3, 1fr);gap:15px;margin:25px 0"}),b1=b("div",{target:"exnmt2i12"})("background:",e=>{var t;return((t=e.theme)==null?void 0:t.grayLight)||"#f5f5f5"},";border-radius:12px;padding:16px;text-align:center;"),w1=b("div",{target:"exnmt2i11"})("font-size:20px;font-weight:bold;color:",e=>{var t;return((t=e.theme)==null?void 0:t.primary)||"#3b82f6"},";margin-bottom:4px;"),S1=b("div",{target:"exnmt2i10"})("font-size:12px;color:",e=>{var t;return((t=e.theme)==null?void 0:t.textSecondary)||"#666"},";font-weight:500;"),u0e=b("div",{target:"exnmt2i9"})("margin:25px 0;padding:20px;background:",e=>{var t;return((t=e.theme)==null?void 0:t.grayLight)||"#f5f5f5"},";border-radius:12px;"),d0e=b("h3",{target:"exnmt2i8"})("font-size:16px;font-weight:bold;color:",e=>{var t;return((t=e.theme)==null?void 0:t.text)||"#333"},";margin:0 0 15px;display:flex;align-items:center;gap:8px;"),p0e=b("div",{target:"exnmt2i7"})("padding:12px 0;border-bottom:1px solid ",e=>{var t;return((t=e.theme)==null?void 0:t.gray)||"#e5e5e5"},";&:last-child{border-bottom:none;}"),h0e=b("div",{target:"exnmt2i6"})("font-size:14px;color:",e=>{var t;return((t=e.theme)==null?void 0:t.text)||"#333"},";margin-bottom:8px;font-weight:500;"),$A=b("div",{target:"exnmt2i5"})({name:"1i6ab50",styles:"display:flex;justify-content:space-between;align-items:center;font-size:13px;margin-bottom:4px"}),LA=b("span",{target:"exnmt2i4"})("color:",e=>{var t;return((t=e.theme)==null?void 0:t.textSecondary)||"#666"},";"),FA=b("span",{target:"exnmt2i3"})("font-weight:500;color:",e=>{var t;return e.isCorrect?"#10b981":e.isWrong?"#dc2626":((t=e.theme)==null?void 0:t.text)||"#333"},";"),f0e=b("div",{target:"exnmt2i2"})({name:"xa0j6c",styles:"display:flex;gap:12px;margin-top:30px"}),BA=b("button",{target:"exnmt2i1"})("flex:1;padding:14px 20px;border:none;border-radius:10px;font-size:16px;font-weight:600;cursor:pointer;transition:all 0.3s ease;",e=>{var t,n,r,i;return e.primary?`
    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    color: white;
    
    &:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
    }
  `:`
    background: ${((t=e.theme)==null?void 0:t.grayLight)||"#f5f5f5"};
    color: ${((n=e.theme)==null?void 0:n.text)||"#333"};
    border: 1px solid ${((r=e.theme)==null?void 0:r.gray)||"#e5e5e5"};
    
    &:hover {
      background: ${((i=e.theme)==null?void 0:i.gray)||"#e5e5e5"};
    }
  `}," &:active{transform:translateY(0);}"),g0e=b("button",{target:"exnmt2i0"})({name:"1s46syl",styles:"position:absolute;top:15px;right:15px;background:rgba(255, 255, 255, 0.2);border:none;border-radius:50%;width:40px;height:40px;display:flex;justify-content:center;align-items:center;font-size:20px;color:white;cursor:pointer;transition:background 0.3s;&:hover{background:rgba(255, 255, 255, 0.3);}"}),m0e=({isOpen:e,onClose:t,examResult:n,questions:r,userAnswers:i,onRetry:o,onBackToExams:a})=>{if(!e||!n)return null;const{score:s,correctCount:l,totalQuestions:c,passed:d}=n,p=Math.round(l/c*100),f=c-l,h=r.filter((g,m)=>{const v=i[g.id],w=g.correctOptionIndex;return v!==w});return u(e0e,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,children:y(t0e,{initial:{scale:.8,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:50},onClick:g=>g.stopPropagation(),children:[u(g0e,{onClick:t,children:"×"}),y(n0e,{passed:d,children:[y(r0e,{children:[u(i0e,{children:s}),u(o0e,{children:"分數"})]}),u(a0e,{children:d?"🎉 恭喜通過！":"😔 未達及格標準"}),u(s0e,{children:d?"您已成功完成此次考試，繼續保持！":"請複習相關內容後再次挑戰"})]}),y(l0e,{children:[y(c0e,{children:[y(b1,{children:[u(w1,{children:l}),u(S1,{children:"答對題數"})]}),y(b1,{children:[u(w1,{children:f}),u(S1,{children:"答錯題數"})]}),y(b1,{children:[y(w1,{children:[p,"%"]}),u(S1,{children:"正確率"})]})]}),h.length>0&&y(u0e,{children:[y(d0e,{children:["📝 錯誤分析 (",h.length," 題)"]}),h.slice(0,3).map((g,m)=>{const v=i[g.id],w=g.correctOptionIndex;return y(p0e,{children:[y(h0e,{children:["第 ",r.findIndex(S=>S.id===g.id)+1," 題：",g.question.length>50?g.question.substring(0,50)+"...":g.question]}),y($A,{children:[u(LA,{children:"您的答案："}),u(FA,{isWrong:!0,children:v!=null?`${String.fromCharCode(65+v)}. ${g.options[v]}`:"未作答"})]}),y($A,{children:[u(LA,{children:"正確答案："}),y(FA,{isCorrect:!0,children:[String.fromCharCode(65+w),". ",g.options[w]]})]})]},g.id)}),h.length>3&&y("div",{style:{textAlign:"center",marginTop:"15px",fontSize:"13px",color:"#666"},children:["還有 ",h.length-3," 題錯誤，建議複習相關內容"]})]}),y(f0e,{children:[!d&&o&&u(BA,{onClick:o,children:"🔄 重新考試"}),u(BA,{primary:!0,onClick:a,children:d?"✅ 返回考試中心":"📚 返回學習"})]})]})]})})},Zu=b("div",{target:"e1uylgw628"})({name:"1wxo78s",styles:"padding:20px;padding-bottom:120px;max-width:800px;margin:0 auto"}),C1=b("div",{target:"e1uylgw627"})("background:",e=>e.theme.cardBg,";border-radius:16px;padding:30px;box-shadow:0 6px 15px rgba(0,0,0,0.05);margin-bottom:20px;"),v0e=b("div",{target:"e1uylgw626"})({name:"1y2t7o",styles:"margin-bottom:30px;text-align:center"}),x0e=b("h2",{target:"e1uylgw625"})("color:",e=>e.theme.text,";margin-bottom:10px;"),y0e=b("div",{target:"e1uylgw624"})("display:flex;justify-content:center;gap:30px;color:",e=>e.theme.textSecondary,";margin-bottom:20px;"),_1=b("div",{target:"e1uylgw623"})({name:"1jvurm9",styles:"display:flex;align-items:center;gap:5px"}),b0e=b("div",{target:"e1uylgw622"})("width:100%;height:10px;background:",e=>e.theme.grayLight,";border-radius:5px;overflow:hidden;margin:20px 0;"),w0e=b("div",{target:"e1uylgw621"})("height:100%;background:",e=>e.theme.primary,";width:",e=>e.progress,"%;transition:width 0.5s ease;"),S0e=b("div",{target:"e1uylgw620"})("background:",e=>e.theme.grayLight,";border-radius:12px;padding:20px;margin-bottom:20px;"),C0e=b("div",{target:"e1uylgw619"})("font-size:14px;color:",e=>e.theme.textSecondary,";margin-bottom:10px;"),_0e=b("h3",{target:"e1uylgw618"})("color:",e=>e.theme.text,";font-size:18px;margin-bottom:20px;"),k0e=b("div",{target:"e1uylgw617"})({name:"1c3pogw",styles:"display:flex;flex-direction:column;gap:10px"}),E0e=b("div",{target:"e1uylgw616"})("cursor:pointer;padding:15px;border-radius:8px;background:",e=>e.selected?e.theme.primary+"20":e.theme.cardBg,";border:2px solid ",e=>e.selected?e.theme.primary:e.theme.cardBorder,";transition:all 0.3s;&:hover{background:",e=>e.selected?e.theme.primary+"20":e.theme.cardBorder,";}"),T0e=b("div",{target:"e1uylgw615"})({name:"1jl19ki",styles:"display:flex;justify-content:space-between;margin-top:30px"}),zA=b("button",{target:"e1uylgw614"})("padding:12px 24px;background:",e=>e.primary?e.theme.primary:e.theme.grayLight,";color:",e=>e.primary?"white":e.theme.text,";border:none;border-radius:8px;font-size:16px;cursor:pointer;transition:opacity 0.3s;&:hover{opacity:0.9;}&:disabled{opacity:0.5;cursor:not-allowed;}"),I0e=b(Le.button,{target:"e1uylgw613"})("padding:15px 30px;background:",e=>e.theme.success,";color:white;border:none;border-radius:8px;font-size:18px;font-weight:bold;cursor:pointer;width:100%;margin-top:30px;"),VA=b("div",{target:"e1uylgw63"})({name:"1k2dqi3",styles:"text-align:center;padding:40px"}),jA=b("h3",{target:"e1uylgw62"})("color:",e=>e.theme.text,";margin-bottom:10px;"),UA=b("p",{target:"e1uylgw61"})("color:",e=>e.theme.textSecondary,";margin-bottom:20px;"),k1=b("button",{target:"e1uylgw60"})("background:",e=>e.theme.primary,";color:white;border:none;border-radius:8px;padding:12px 24px;cursor:pointer;font-size:16px;&:hover{opacity:0.9;}"),A0e=()=>{const{examId:e,type:t}=au(),n=qt(),[r,i]=D.useState(null),[o,a]=D.useState([]),[s,l]=D.useState(0),[c,d]=D.useState({}),[p,f]=D.useState(!1),[h,g]=D.useState(null),[m,v]=D.useState(!0),[w,S]=D.useState(""),[C,A]=zv(Fi);D.useEffect(()=>{A||(C?(_(),I()):(v(!1),S("請先登入以參加考試")))},[e,t,C,A]),D.useEffect(()=>{if(o.length>0){const N={};o.forEach(L=>{N[L.id]=null}),d(N)}},[o]);const _=async()=>{try{if(v(!0),S(""),t==="section"){const N=Ie(U,"exam-questions",e),L=await In(N);if(L.exists()){const B=L.data();if(i({id:L.id,...B,type:"section"}),B.questions&&B.questions.length>0){const V=B.questions.map((j,z)=>({id:j.id||`${e}_q${z}`,...j,correctOptionIndex:j.correct!==void 0?j.correct:j.correctAnswer}));a(V)}else{S("此考試沒有題目"),v(!1);return}}else{S("找不到指定的考試"),v(!1);return}}else if(t==="chapter"){const N=Ie(U,"exam-questions",e),L=await In(N);if(L.exists()){const B=L.data();if(B.type==="chapter")if(i({id:L.id,...B,type:"chapter"}),B.questions&&B.questions.length>0){const V=B.questions.map((j,z)=>({id:j.id||`${e}_q${z}`,...j,correctOptionIndex:j.correct!==void 0?j.correct:j.correctAnswer}));a(V)}else{S("此章節大考沒有題目"),v(!1);return}else{S("指定的考試不是章節大考"),v(!1);return}}else{S("找不到指定的章節大考"),v(!1);return}}else S("無效的考試類型")}catch(N){console.error("獲取考試資料失敗:",N),S(`獲取考試資料失敗: ${N.message}。請確保您已登入並具有適當權限。`)}finally{v(!1)}},I=async()=>{if(C)try{const N=tt(se(U,"examResults"),tn("userId","==",C.uid),tn("examId","==",e)),L=await be(N);if(!L.empty){const B=L.docs[0].data();console.log("用戶已經參加過此考試:",B)}}catch(N){console.error("檢查之前的考試結果失敗:",N)}},E=(N,L)=>{d(B=>({...B,[N]:L}))},k=()=>{l(N=>Math.max(0,N-1))},T=()=>{l(N=>Math.min(o.length-1,N+1))},P=async()=>{if(!C){S("請先登入以提交考試");return}console.log("提交考試:",{examId:e,questions:o.length,answers:Object.keys(c).length,answersData:c});let N=0,L=o.length;o.forEach(z=>{const H=c[z.id],J=z.correctOptionIndex;console.log(`題目 ${z.id}: 用戶答案=${H}, 正確答案=${J}`),H===J&&N++});const B=Math.round(N/L*100),V=B>=60;console.log("考試結果:",{correctCount:N,totalQuestions:L,score:B,passed:V});const j={userId:C.uid,userName:C.displayName||"未命名用戶",userEmail:C.email||"",examId:e,examType:t,examTitle:(r==null?void 0:r.title)||"",score:B,correctCount:N,totalQuestions:L,passed:V,answers:c,submittedAt:At()};try{console.log("保存考試結果到資料庫...");const z=await tr(se(U,"examResults"),j);console.log("考試結果已保存:",z.id),g({...j,id:z.id}),f(!0)}catch(z){console.error("提交考試失敗:",z),S(`提交考試失敗: ${z.message}`)}},O=()=>{if(o.length===0)return 0;const N=Object.values(c).filter(L=>L!=null).length;return Math.round(N/o.length*100)},R=()=>o.length===0?!1:o.every(N=>{const L=c[N.id];return L!=null});return A||m?y(Ne,{children:[u(Bt,{title:"考試"}),u(Zu,{children:u("p",{children:"載入中..."})})]}):w?y(Ne,{children:[u(Bt,{title:"考試"}),u(Zu,{children:u(C1,{children:y(VA,{children:[u(jA,{children:"錯誤"}),u(UA,{children:w}),!C&&u(k1,{onClick:()=>n("/login"),children:"前往登入"}),w.includes("權限")&&u(k1,{onClick:()=>n("/firebase-rules"),style:{marginLeft:"10px"},children:"檢視 Firebase 規則設置指南"})]})})})]}):o.length===0?y(Ne,{children:[u(Bt,{title:`${(r==null?void 0:r.title)||"考試"}`}),u(Zu,{children:u(C1,{children:y(VA,{children:[u(jA,{children:"尚無考試題目"}),y(UA,{children:["此",t==="section"?"小節":"章節","尚未設置任何考試題目。請先添加測試資料。"]}),u(k1,{onClick:()=>n("/seed-exam-data"),children:"前往測試資料管理"})]})})})]}):p?y(Ne,{children:[u(Bt,{title:"考試結果"}),u(Zu,{children:u(m0e,{isOpen:p,onClose:()=>f(!1),examResult:h,questions:o,userAnswers:c,onRetry:()=>{if(l(0),d({}),f(!1),g(null),o.length>0){const N={};o.forEach(L=>{N[L.id]=null}),d(N)}},onBackToExams:()=>n("/exams")})})]}):y(Ne,{children:[u(Bt,{title:`${(r==null?void 0:r.title)||"考試"}`}),u(Zu,{children:y(C1,{children:[y(v0e,{children:[y(x0e,{children:[t==="section"?"小節測驗":"章節大考",": ",r==null?void 0:r.title]}),y(y0e,{children:[y(_1,{children:[u("span",{children:"總題數:"}),u("strong",{children:o.length})]}),y(_1,{children:[u("span",{children:"已答題:"}),u("strong",{children:Object.values(c).filter(N=>N!==null).length})]}),y(_1,{children:[u("span",{children:"未答題:"}),u("strong",{children:Object.values(c).filter(N=>N===null).length})]})]}),u(b0e,{children:u(w0e,{progress:O()})})]}),o.length>0&&y(S0e,{children:[y(C0e,{children:["問題 ",s+1," / ",o.length]}),u(_0e,{children:o[s].question}),u(k0e,{children:o[s].options.map((N,L)=>u(E0e,{selected:c[o[s].id]===L,onClick:()=>E(o[s].id,L),children:N},L))})]}),y(T0e,{children:[u(zA,{onClick:k,disabled:s===0,children:"上一題"}),s<o.length-1?u(zA,{primary:!0,onClick:T,children:"下一題"}):u(I0e,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:P,disabled:!R(),children:"提交考試"})]})]})})]})},Bl=b("div",{target:"e1moh9v815"})({name:"b8x1mj",styles:"max-width:800px;margin:0 auto;padding:40px 20px 100px;font-family:'Noto Sans TC',sans-serif;min-height:100vh"}),P0e=b("div",{target:"e1moh9v814"})({name:"18y3zhy",styles:"text-align:center;margin-bottom:40px"}),D0e=b("h1",{target:"e1moh9v813"})({name:"5miyfk",styles:"color:#333;margin-bottom:10px"}),R0e=b("p",{target:"e1moh9v812"})({name:"1ohpjpl",styles:"color:#666;font-size:16px"}),N0e=b("div",{target:"e1moh9v811"})({name:"1xjw902",styles:"background:linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%);color:white;padding:15px 30px;border-radius:12px;text-align:center;margin-bottom:30px;font-size:18px;font-weight:600"}),M0e=b("div",{target:"e1moh9v810"})({name:"t5zce6",styles:"background:white;border-radius:12px;padding:30px;box-shadow:0 4px 20px rgba(0, 0, 0, 0.1);margin-bottom:20px"}),O0e=b("div",{target:"e1moh9v89"})({name:"1dzchzc",styles:"color:#7C3AED;font-weight:600;margin-bottom:15px"}),$0e=b("h3",{target:"e1moh9v88"})({name:"s397x4",styles:"color:#333;margin-bottom:25px;line-height:1.6"}),L0e=b("div",{target:"e1moh9v87"})({name:"tw4sx",styles:"display:flex;flex-direction:column;gap:12px"}),F0e=b("button",{target:"e1moh9v86"})("background:",e=>e.selected?"linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%)":"#f8f9fa",";color:",e=>e.selected?"white":"#333",";border:2px solid ",e=>e.selected?"transparent":"#e9ecef",";padding:15px 20px;border-radius:10px;text-align:left;cursor:pointer;transition:all 0.3s ease;font-size:16px;&:hover{border-color:#7C3AED;background:",e=>e.selected?"linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%)":"#f0f0ff",";}"),B0e=b("button",{target:"e1moh9v85"})({name:"10rq2zz",styles:"background:linear-gradient(135deg, #4CAF50 0%, #45a049 100%);color:white;border:none;padding:15px 40px;border-radius:10px;font-size:16px;font-weight:600;cursor:pointer;width:100%;margin-top:30px;transition:all 0.3s ease;&:hover{transform:translateY(-2px);box-shadow:0 4px 15px rgba(76, 175, 80, 0.3);}&:disabled{background:#ccc;cursor:not-allowed;transform:none;box-shadow:none;}"}),tg=b("div",{target:"e1moh9v84"})({name:"1f3scqs",styles:"background:white;border-radius:12px;padding:40px;box-shadow:0 4px 20px rgba(0, 0, 0, 0.1);text-align:center"}),z0e=b("div",{target:"e1moh9v83"})("font-size:48px;font-weight:700;color:",e=>e.score>=80?"#4CAF50":e.score>=60?"#FF9800":"#F44336",";margin-bottom:20px;"),V0e=b("h2",{target:"e1moh9v82"})("color:",e=>e.passed?"#4CAF50":"#F44336",";margin-bottom:30px;"),j0e=b("button",{target:"e1moh9v81"})({name:"mqgj16",styles:"background:linear-gradient(135deg, #2196F3 0%, #21CBF3 100%);color:white;border:none;padding:12px 30px;border-radius:8px;margin:0 10px;cursor:pointer;font-weight:600;&:hover{transform:translateY(-1px);}"}),ng=b("button",{target:"e1moh9v80"})({name:"okv4h",styles:"background:linear-gradient(135deg, #6c757d 0%, #5a6268 100%);color:white;border:none;padding:12px 30px;border-radius:8px;margin:0 10px;cursor:pointer;font-weight:600;&:hover{transform:translateY(-1px);}"}),U0e=async e=>{try{const t=Ie(U,"exam_questions",e),n=await In(t);if(n.exists()){const r=n.data();console.log(`成功獲取考試 ${e} 的題目`,r);const i=r.questions||[];return[...i].sort(()=>.5-Math.random()).slice(0,Math.min(5,i.length))}else return console.warn(`沒有找到考試 ${e} 的題目，使用預設題目`),qA(e)}catch(t){return console.error("獲取考試題目失敗:",t),qA(e)}},qA=e=>{const t={"001_0_0":[{question:"飲料店的基本設備中，哪一項是製作飲品時最重要的？",options:["封口機","製冰機","攪拌棒","淨水器"],correct:3,explanation:"淨水器確保水質乾淨，是製作飲品的基礎"},{question:"門市設備的清潔頻率應該是？",options:["每週一次","每天開店前","每月一次","有空就清"],correct:1,explanation:"設備清潔應該每天開店前進行，確保衛生安全"},{question:"飲料製作的正確流程順序是？",options:["加料→調味→封口→出杯","調味→加料→封口→出杯","封口→調味→加料→出杯","出杯→調味→加料→封口"],correct:1,explanation:"正確流程：調味→加料→封口→出杯"},{question:"工作檯的整理原則是？",options:["用完就放","下班才整理","隨時保持整潔","客人多時再整理"],correct:2,explanation:"工作檯應隨時保持整潔，提高工作效率"},{question:"飲料杯的選擇主要考量因素是？",options:["價格便宜","容量和飲品搭配","顏色好看","品牌知名度"],correct:1,explanation:"杯子容量應與飲品份量搭配，確保最佳呈現效果"}],"002_0_0":[{question:"綠茶的最佳沖泡溫度是？",options:["100°C","85-90°C","70-75°C","60°C"],correct:2,explanation:"綠茶適合70-75°C的水溫，避免破壞茶葉的香味"},{question:"紅茶的沖泡時間通常是？",options:["1-2分鐘","3-5分鐘","8-10分鐘","15分鐘"],correct:1,explanation:"紅茶沖泡3-5分鐘可以充分釋放茶香和茶味"},{question:"茶葉與水的比例一般是？",options:["1:10","1:50","1:100","1:200"],correct:1,explanation:"茶葉與水的標準比例約為1:50，可根據口味調整"},{question:"煮茶時最重要的是控制？",options:["茶葉品質","水的溫度和時間","杯子大小","環境溫度"],correct:1,explanation:"水溫和沖泡時間是決定茶湯品質的關鍵因素"},{question:"茶湯呈現苦澀味的主要原因是？",options:["茶葉不新鮮","水溫過高或時間過長","水質不好","杯子材質"],correct:1,explanation:"水溫過高或沖泡時間過長會使茶多酚過度釋放，產生苦澀味"}],"003_0_0":[{question:"奶精和鮮奶的主要差異是？",options:["價格不同","奶精含乳脂，鮮奶是天然","顏色不同","保存期限不同"],correct:1,explanation:"鮮奶是天然乳製品，奶精是人工調製的植脂末"},{question:"奶茶的基本比例（茶：奶）通常是？",options:["1:1","3:1","2:1","1:2"],correct:2,explanation:"奶茶的標準比例約為茶2:奶1，可根據口味調整"},{question:"調製奶茶時應該先加？",options:["先加奶","先加茶","同時加入","看心情"],correct:1,explanation:"應該先加茶湯，再慢慢加入奶，更容易控制比例和口感"},{question:"鮮奶茶和奶精茶在口感上的差異是？",options:["沒有差異","鮮奶茶更濃郁香甜","奶精茶更健康","鮮奶茶保存時間長"],correct:1,explanation:"鮮奶茶口感更濃郁香甜，奶香味更自然"},{question:"奶茶的溫度控制重點是？",options:["越熱越好","適中溫度保持奶香","冰的最好喝","溫度不重要"],correct:1,explanation:"適中的溫度能最好地保持奶香和茶香的平衡"}],"004_0_0":[{question:"珍珠的正確煮法時間是？",options:["5-10分鐘","15-20分鐘","30-40分鐘","1小時"],correct:2,explanation:"珍珠需要煮30-40分鐘才能達到外Q內軟的最佳口感"},{question:"愛玉的保存方式是？",options:["常溫保存","冷藏保存","冷凍保存","密封常溫"],correct:1,explanation:"愛玉應該冷藏保存，維持最佳口感和新鮮度"},{question:"椰果的主要特色是？",options:["甜味重","口感Q彈","顏色鮮豔","營養豐富"],correct:1,explanation:"椰果的特色是Q彈的口感，為飲品增加層次"},{question:"加料飲品的加料順序應該是？",options:["隨意加入","重的先加，輕的後加","輕的先加，重的後加","同時加入"],correct:1,explanation:"重的加料先加，輕的後加，可以讓飲品層次更分明"},{question:"珍珠煮好後應該如何處理？",options:["直接使用","用冷水沖洗","加糖拌勻","自然冷卻"],correct:2,explanation:"珍珠煮好後應加糖拌勻，增加甜味和光澤"}],"005_0_0":[{question:"水果茶的水果選擇原則是？",options:["價格便宜","新鮮時令","顏色鮮豔","進口水果"],correct:1,explanation:"選擇新鮮時令水果，口感和營養價值最佳"},{question:"果泥的使用比例通常是？",options:["越多越好","根據飲品容量調整","固定份量","客人要求"],correct:1,explanation:"果泥使用量應根據飲品容量和口味濃淡需求調整"},{question:"製作冰沙的關鍵技巧是？",options:["冰塊越多越好","控制冰塊和液體比例","攪打時間越長越好","溫度越低越好"],correct:1,explanation:"冰沙的口感取決於冰塊和液體的正確比例"},{question:"水果茶的保存期限是？",options:["1-2小時內飲用","一天","一週","一個月"],correct:0,explanation:"新鮮水果茶最好在1-2小時內飲用，保持最佳口感"},{question:"果飲調製時的衛生重點是？",options:["水果清洗","器具清潔","手部清潔","以上皆是"],correct:3,explanation:"果飲調製需注意水果清洗、器具清潔和手部清潔"}],"006_0_0":[{question:"POS系統的主要功能是？",options:["計算價格","管理庫存","記錄銷售","以上皆是"],correct:3,explanation:"POS系統整合了價格計算、庫存管理和銷售記錄功能"},{question:"出杯的正確順序應該是？",options:["依製作完成順序","依客人等待時間","依飲品種類","隨機出杯"],correct:1,explanation:"應該依客人等待時間出杯，先到先服務"},{question:"點單時應該注意？",options:["快速記錄","確認客人需求","推薦高價商品","催促客人決定"],correct:1,explanation:"點單時應仔細確認客人需求，避免出錯"},{question:"處理客人抱怨的正確態度是？",options:["立即解釋","耐心傾聽","推卸責任","置之不理"],correct:1,explanation:"應該耐心傾聽客人意見，了解問題所在"},{question:"營業高峰期的應對策略是？",options:["提高製作速度","預先準備","增加人手","以上皆是"],correct:3,explanation:"高峰期需要提高速度、預先準備和適當增加人手"}],"007_0_0":[{question:"創新飲品的開發原則是？",options:["越複雜越好","市場需求導向","成本越低越好","模仿競爭對手"],correct:1,explanation:"飲品創新應以市場需求為導向，滿足消費者喜好"},{question:"社群經營的重點是？",options:["發布頻率","內容品質","粉絲數量","廣告投放"],correct:1,explanation:"社群經營的核心是提供優質內容，建立品牌形象"},{question:"營業數據分析的重要指標是？",options:["銷售額","客流量","成本控制","以上皆是"],correct:3,explanation:"營業分析需綜合考量銷售額、客流量和成本控制"},{question:"顧客滿意度提升的關鍵是？",options:["降低價格","提升服務品質","增加促銷","裝潢豪華"],correct:1,explanation:"服務品質是提升顧客滿意度的最重要因素"},{question:"品牌建立的核心要素是？",options:["產品品質","服務態度","品牌形象","以上皆是"],correct:3,explanation:"品牌建立需要產品品質、服務態度和品牌形象並重"}]};return t[e]?t[e]:[{question:"飲料店服務中最重要的是什麼？",options:["製作速度","服務態度","價格便宜","裝潢豪華"],correct:1,explanation:"良好的服務態度是顧客滿意的關鍵"},{question:"食品安全的基本原則是？",options:["好吃就好","便宜優先","清潔衛生","快速製作"],correct:2,explanation:"清潔衛生是食品安全的基本要求"},{question:"團隊合作的重要性在於？",options:["分工明確","互相幫助","提高效率","以上皆是"],correct:3,explanation:"團隊合作包含分工明確、互相幫助和提高效率"},{question:"客人滿意度的衡量標準是？",options:["再次光臨","推薦朋友","正面評價","以上皆是"],correct:3,explanation:"客人滿意度可從再次光臨、推薦和評價來衡量"},{question:"持續學習的重要性是？",options:["跟上時代","提升技能","增加競爭力","以上皆是"],correct:3,explanation:"持續學習能幫助跟上時代、提升技能和競爭力"}]},q0e=()=>{const{examId:e}=au(),t=Io(),n=qt(),{currentUser:r}=gi(),[i,o]=D.useState([]),[a,s]=D.useState(0),[l,c]=D.useState([]),[d,p]=D.useState(!1),[f,h]=D.useState(0),[g,m]=D.useState(300),[v]=D.useState(Date.now()),[w,S]=D.useState(!0),[C,A]=D.useState(""),_=t.state||{};D.useEffect(()=>{(async()=>{try{S(!0),A("");const N=await U0e(e);if(N.length===0){A("沒有找到相關的考試題目");return}o(N),c(new Array(N.length).fill(-1))}catch(N){console.error("載入題目失敗:",N),A("載入題目時發生錯誤，請稍後再試")}finally{S(!1)}})()},[e]),D.useEffect(()=>{if(g>0&&!d){const R=setTimeout(()=>m(g-1),1e3);return()=>clearTimeout(R)}else g===0&&E()},[g,d]);const I=(R,N)=>{const L=[...l];L[R]=N,c(L)},E=async()=>{let R=0;i.forEach((V,j)=>{l[j]===V.correct&&R++});const N=Math.round(R/i.length*100),L=N>=60,B=Math.round((Date.now()-v)/1e3/60);if(h(N),p(!0),r!=null&&r.uid)try{await wJ(r.uid,e,l,N,L,B),L&&_.courseId&&_.chapterIndex!==void 0&&_.sectionIndex!==void 0&&await tO(r.uid,_.courseId,_.chapterIndex,_.sectionIndex,N,B)}catch(V){console.error("記錄考試結果失敗:",V)}},k=R=>{const N=Math.floor(R/60),L=R%60;return`${N}:${L.toString().padStart(2,"0")}`},T=()=>{s(0),c(new Array(i.length).fill(-1)),p(!1),m(300)},P=()=>{n("/courses-internal")};if(!r)return y(Bl,{children:[y(tg,{children:[u("h2",{children:"請先登入以參加小考"}),u(ng,{onClick:P,children:"返回課程列表"})]}),u(kn,{})]});if(w)return y(Bl,{children:[y("div",{style:{textAlign:"center",padding:"50px 0"},children:[u("i",{className:"ri-loader-4-line",style:{fontSize:"48px",animation:"spin 1s linear infinite"}}),u("p",{style:{marginTop:"20px"},children:"正在載入題目..."})]}),u(kn,{})]});if(C)return y(Bl,{children:[y(tg,{children:[u("h2",{style:{color:"#dc3545"},children:"❌ 載入失敗"}),u("p",{style:{color:"#666",marginBottom:"20px"},children:C}),u(ng,{onClick:P,children:"返回課程列表"})]}),u(kn,{})]});if(i.length===0)return y(Bl,{children:[y(tg,{children:[u("h2",{children:"📝 尚無考試題目"}),u("p",{style:{color:"#666",marginBottom:"20px"},children:"此小節尚未設置考試題目，請聯絡管理員新增題目。"}),u(ng,{onClick:P,children:"返回課程列表"})]}),u(kn,{})]});if(d){const R=f>=60;return y(Bl,{children:[y(tg,{children:[y(z0e,{score:f,children:[f,"分"]}),u(V0e,{passed:R,children:R?"🎉 恭喜通過！小節已完成":"😔 未達標準，請再接再厲"}),u("p",{style:{color:"#666",marginBottom:"30px"},children:R?"您已成功完成此小節的考試，小節已自動標記為完成！":"請複習課程內容後再次挑戰，及格分數為60分"}),y("div",{children:[!R&&u(j0e,{onClick:T,children:"重新考試"}),u(ng,{onClick:P,children:"返回課程"})]})]}),u(kn,{})]})}const O=l.every(R=>R!==-1);return y(Bl,{children:[y(P0e,{children:[u(D0e,{children:"📝 小節考試"}),y(R0e,{children:["課程：",_.courseId||e," | 第 ",(_.chapterIndex||0)+1," 章第 ",(_.sectionIndex||0)+1," 節"]})]}),y(N0e,{children:["⏰ 剩餘時間：",k(g)]}),i.map((R,N)=>y(M0e,{children:[y(O0e,{children:["第 ",N+1," 題 / 共 ",i.length," 題"]}),u($0e,{children:R.question}),u(L0e,{children:R.options.map((L,B)=>y(F0e,{selected:l[N]===B,onClick:()=>I(N,B),children:[String.fromCharCode(65+B),". ",L]},B))})]},N)),u(B0e,{onClick:E,disabled:!O,children:O?"提交答案":`請完成所有題目 (${l.filter(R=>R!==-1).length}/${i.length})`}),u(kn,{})]})},W0e=it`
  from { transform: translateX(100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
`;it`
  from { transform: translateX(0); opacity: 1; }
  to { transform: translateX(-100%); opacity: 0; }
`;it`
  from { transform: translateX(-100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
`;it`
  from { transform: translateX(0); opacity: 1; }
  to { transform: translateX(100%); opacity: 0; }
`;const H0e=it`
  0% { transform: scale(1) translateY(0); opacity: 1; }
  50% { transform: scale(1.5) translateY(-20px); opacity: 1; }
  100% { transform: scale(1) translateY(-40px); opacity: 0; }
`;it`
  0% { 
    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.9);
  }
  100% { 
    box-shadow: 0 0 0 25px rgba(59, 130, 246, 0);
  }
`;it`
  0% { 
    box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.9);
  }
  100% { 
    box-shadow: 0 0 0 25px rgba(16, 185, 129, 0);
  }
`;const qC=it`
  0% { background: #fef2f2; border-color: #fca5a5; }
  50% { background: #fee2e2; border-color: #f87171; }
  100% { background: #fef2f2; border-color: #fca5a5; }
`,G0e=it`
  0% { color: #ef4444; transform: scale(1); }
  50% { color: #dc2626; transform: scale(1.1); }
  100% { color: #ef4444; transform: scale(1); }
`,g9=it`
  0% { opacity: 0.7; transform: translateY(0) scale(1); }
  50% { opacity: 1; transform: translateY(-10px) scale(1.1); }
  100% { opacity: 0.7; transform: translateY(0) scale(1); }
`,Y0e=it`
  0% { 
    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.8);
  }
  100% { 
    box-shadow: 0 0 0 20px rgba(59, 130, 246, 0);
  }
`,K0e=it`
  0% { 
    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.8);
    border-color: #3b82f6;
  }
  100% { 
    box-shadow: 0 0 0 15px rgba(59, 130, 246, 0);
    border-color: #1d4ed8;
  }
`;it`
  from { opacity: 0; transform: scale(0.9); }
  to { opacity: 1; transform: scale(1); }
`;const X0e=it`
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.2); opacity: 0.8; }
  100% { transform: scale(1); opacity: 1; }
`,Q0e=it`
  0%, 100% { transform: translateY(0) rotate(0deg); }
  10% { transform: translateY(-12px) rotate(-3deg); }
  20% { transform: translateY(8px) rotate(2deg); }
  30% { transform: translateY(-10px) rotate(-2deg); }
  40% { transform: translateY(6px) rotate(1deg); }
  50% { transform: translateY(-8px) rotate(-1deg); }
  60% { transform: translateY(4px) rotate(1deg); }
  70% { transform: translateY(-6px) rotate(-1deg); }
  80% { transform: translateY(3px) rotate(0.5deg); }
  90% { transform: translateY(-4px) rotate(-0.5deg); }
`;it`
  0% { 
    transform: translateY(0) rotate(0deg);
    opacity: 1;
  }
  100% { 
    transform: translateY(-100px) rotate(360deg);
    opacity: 0;
  }
`;it`
  0%, 100% { transform: scale(0) rotate(0deg); opacity: 0; }
  50% { transform: scale(1) rotate(180deg); opacity: 1; }
`;it`
  0% { transform: translateY(50px); opacity: 0; }
  100% { transform: translateY(0); opacity: 1; }
`;const J0e=it`
  0% { 
    transform: scale(0) rotate(0deg);
    opacity: 0;
  }
  50% { 
    transform: scale(1.3) rotate(180deg);
    opacity: 1;
  }
  100% { 
    transform: scale(1) rotate(360deg);
    opacity: 1;
  }
`,Z0e=it`
  0%, 100% { transform: translateY(0) rotate(-5deg); }
  25% { transform: translateY(-8px) rotate(5deg); }
  50% { transform: translateY(8px) rotate(-3deg); }
  75% { transform: translateY(-4px) rotate(3deg); }
`,eve=it`
  0% { left: -100%; }
  100% { left: 100%; }
`,WA=b("div",{target:"eaatruv69"})("position:absolute;font-size:20px;font-weight:900;color:#000000;text-shadow:1px 1px 2px rgba(255, 255, 255, 0.8);pointer-events:none;z-index:100;",Ke("animation:",Z0e," 0.6s ease-in-out infinite;","")," &.left{left:-30px;top:25%;transform:translateY(-50%) rotate(-15deg);}&.right{right:-30px;top:25%;transform:translateY(-50%) rotate(15deg);}"),HA=b("div",{target:"eaatruv68"})({name:"9k02gz",styles:"width:100vw;height:100vh;background:linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);position:fixed;top:0;left:0;overflow:hidden;font-family:'Inter','SF Pro Display',-apple-system,sans-serif"}),tve=b("div",{target:"eaatruv67"})({name:"805u7a",styles:"width:100%;height:100%;display:grid;grid-template-rows:80px 1fr 200px 100px;grid-template-columns:300px 1fr;gap:0"}),nve=b("div",{target:"eaatruv66"})("grid-column:1/-1;background:linear-gradient(90deg, #1e293b 0%, #334155 100%);display:flex;justify-content:space-between;align-items:center;padding:0 32px;color:white;box-shadow:0 4px 20px rgba(0, 0, 0, 0.1);border-bottom:1px solid #475569;",e=>e.timeWarning&&Ke("animation:",qC," 1s ease-in-out infinite;",""),";"),rg=b("div",{target:"eaatruv65"})("display:flex;flex-direction:column;align-items:center;gap:4px;.label{font-size:12px;color:#94a3b8;font-weight:500;}.value{font-size:20px;font-weight:700;color:white;",e=>e.warning&&Ke("animation:",G0e," 1s ease-in-out infinite;",""),";}"),rve=b("div",{target:"eaatruv64"})({name:"s6jkae",styles:"background:white;border-right:1px solid #e2e8f0;padding:20px;position:relative;overflow-y:auto;box-shadow:2px 0 10px rgba(0, 0, 0, 0.05)"}),ive=b("h3",{target:"eaatruv63"})({name:"1bnejhz",styles:"color:#1e293b;font-size:16px;font-weight:700;margin-bottom:20px;text-align:center;letter-spacing:-0.025em"}),ove=b("div",{target:"eaatruv62"})({name:"dtkcwa",styles:"background:#f8fafc;padding:16px;display:grid;grid-template-rows:1fr 1fr;grid-template-columns:1fr 1fr;gap:16px;overflow:hidden"}),Zg=b("div",{target:"eaatruv61"})({name:"18wjd8s",styles:"background:white;border-radius:12px;padding:16px;box-shadow:0 2px 10px rgba(0, 0, 0, 0.05);display:flex;flex-direction:column;gap:12px;min-height:0"}),ig=b("h4",{target:"eaatruv60"})({name:"12lxela",styles:"color:#1e293b;font-size:16px;font-weight:600;text-align:center;margin:0 0 8px 0;flex-shrink:0"}),E1=b("div",{target:"eaatruv59"})("display:grid;grid-template-columns:",e=>e.columns||"repeat(2, 1fr)",";gap:8px;flex:1;min-height:0;align-content:start;"),ave=b(Zg,{target:"eaatruv58"})({name:"xs6ue",styles:"grid-template-rows:auto 1fr auto"}),sve=b("div",{target:"eaatruv57"})({name:"1vxtwg5",styles:"display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:12px"}),lve=b("div",{target:"eaatruv56"})({name:"zl1inp",styles:"display:flex;justify-content:center"}),cve=b("div",{target:"eaatruv55"})({name:"yiu1ld",styles:"grid-column:1/-1;background:white;border-radius:16px;padding:20px;display:flex;justify-content:center;align-items:flex-start;gap:40px;box-shadow:0 4px 20px rgba(0, 0, 0, 0.08);border-top:1px solid #e2e8f0;overflow-x:auto"}),uve=b("div",{target:"eaatruv54"})({name:"7cn3ql",styles:"grid-column:1/-1;background:white;display:flex;justify-content:center;align-items:center;gap:24px;padding:20px;border-top:1px solid #e2e8f0;box-shadow:0 -4px 20px rgba(0, 0, 0, 0.05)"}),dve=b(Le.div,{target:"eaatruv53"})("background:white;border-radius:12px;padding:16px;margin-bottom:12px;box-shadow:0 2px 10px rgba(0, 0, 0, 0.08);border:1px solid #e2e8f0;position:relative;transition:all 0.3s ease;",e=>e.isNew&&Ke("animation:",W0e," 0.5s ease-out;","")," &:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(0, 0, 0, 0.12);}",e=>e.urgent&&Ke("animation:",qC," 2s ease-in-out infinite;",""),";"),pve=b("div",{target:"eaatruv52"})({name:"1hzd9p5",styles:"background:#6b7280;color:white;border-radius:6px;padding:2px 8px;font-weight:600;font-size:10px;position:absolute;top:-6px;left:12px;letter-spacing:0.5px"}),hve=b("h3",{target:"eaatruv51"})({name:"feqvf2",styles:"color:#1e293b;margin-bottom:4px;font-size:14px;font-weight:600;letter-spacing:-0.025em;margin-top:6px"}),Gc=b("div",{target:"eaatruv50"})("background:white;border-radius:8px;padding:8px 12px;text-align:center;cursor:pointer;border:2px solid ",e=>e.disabled?"#f1f5f9":e.selected?"#3b82f6":"#e2e8f0",";color:",e=>e.disabled?"#94a3b8":e.selected?"#1d4ed8":"#1e293b",";font-weight:600;font-size:13px;transition:all 0.3s ease;position:relative;box-shadow:0 2px 8px rgba(0, 0, 0, 0.05);height:45px;display:flex;align-items:center;justify-content:center;opacity:",e=>e.disabled?.4:1,";pointer-events:",e=>e.disabled?"none":"auto",";&:hover:not([disabled]){transform:translateY(-2px);box-shadow:0 6px 20px rgba(0, 0, 0, 0.12);border-color:",e=>(e.selected,"#3b82f6"),";}",e=>e.selected&&`
    background: #eff6ff;
    color: #1d4ed8;
  `," ",e=>e.isProcessing&&Ke("animation:",K0e," 1.5s ease-in-out infinite!important;pointer-events:none!important;cursor:not-allowed!important;",""),";");var fve={name:"1n0ivsr",styles:"pointer-events:none!important;cursor:not-allowed!important;opacity:0.7!important"};const gve=b(Gc,{target:"eaatruv49"})(e=>e.isProcessing&&fve,";");var mve={name:"1n0ivsr",styles:"pointer-events:none!important;cursor:not-allowed!important;opacity:0.7!important"};const GA=b(Gc,{target:"eaatruv48"})(e=>e.selected&&`
    background: #ecfdf5;
    color: #047857;
    border-color: #10b981;
  `," ",e=>e.isProcessing&&mve,";"),vve=b(Gc,{target:"eaatruv47"})(e=>e.selected&&`
    background: #f3f4f6;
    color: #7c3aed;
    border-color: #8b5cf6;
  `,";"),xve=b(Le.div,{target:"eaatruv46"})("display:flex;flex-direction:column;align-items:center;gap:12px;cursor:pointer;padding:16px;border-radius:12px;border:2px solid ",e=>e.isSelected?"#3b82f6":"transparent",";background:",e=>e.isSelected?"#eff6ff":"transparent",";transition:all 0.3s ease;min-width:180px;&:hover{background:#f8fafc;}",e=>e.isProcessing&&Ke("animation:",Y0e," 1.5s ease-out infinite;",""),";"),yve=b("div",{target:"eaatruv45"})({name:"zpwk6d",styles:"display:flex;align-items:center;gap:16px;width:100%"}),bve=b("div",{target:"eaatruv44"})({name:"dxkoxo",styles:"position:relative;display:flex;align-items:center;justify-content:center"}),wve=b("div",{target:"eaatruv43"})("width:50px;height:70px;border:3px solid #374151;border-radius:0 0 6px 6px;position:relative;background:#f9fafb;overflow:hidden;flex-shrink:0;",e=>e.isProcessing&&Ke("&::before{content:'';position:absolute;top:-5px;left:50%;transform:translateX(-50%);width:20px;height:10px;background:rgba(255, 255, 255, 0.8);border-radius:50%;animation:",g9," 1s ease-in-out infinite;}","")," ",e=>e.isSealing&&Ke("animation:",Q0e," 0.6s ease-in-out infinite;",""),";"),Sve=b("div",{target:"eaatruv42"})("position:absolute;bottom:0;left:0;right:0;background:",e=>{if(e.milkType==="milk_powder"||e.milkType==="fresh_milk"){if(e.teaType==="紅茶")return"#d2b48c";if(e.teaType==="綠茶")return"#90ee90";if(e.teaType==="烏龍茶")return"#daa520";if(e.teaType==="麥茶")return"#deb887"}return e.teaType==="紅茶"?"#8b4513":e.teaType==="綠茶"?"#228b22":e.teaType==="烏龍茶"?"#b8860b":e.teaType==="麥茶"?"#cd853f":"transparent"},";height:",e=>e.fillLevel,"%;transition:height 6s ease-out,background 6s ease-out;",e=>e.isPouring&&Ke("&::after{content:'';position:absolute;top:-10px;left:0;right:0;height:10px;background:linear-gradient(to bottom, rgba(255,255,255,0.5), transparent);animation:",g9," 0.5s ease-in-out infinite;}",""),";"),Cve=b("div",{target:"eaatruv41"})({name:"phkdfo",styles:"display:flex;flex-direction:column;gap:9px;flex:1"}),_ve=b("div",{target:"eaatruv40"})({name:"7qs04i",styles:"font-size:14px;font-weight:600;color:#374151;text-align:center"}),kve=b("div",{target:"eaatruv39"})({name:"283q6o",styles:"display:flex;gap:4px;flex-wrap:wrap;justify-content:center"}),Eve=b("div",{target:"eaatruv38"})("background:",e=>e.type==="珍珠"?"#2d1b69":e.type==="椰果"?"#ffffff":e.type==="波霸"?"#1a1a1a":e.type==="粉圓"?"#ff69b4":"#gray",";color:",e=>e.type==="椰果"?"#000":"#fff",";border:1px solid #666;border-radius:4px;padding:3px 7px;font-size:10px;font-weight:600;",e=>e.isNew&&Ke("animation:",J0e," 0.6s ease-out;",""),";"),Tve=b("div",{target:"eaatruv37"})({name:"ify09q",styles:"display:flex;flex-direction:column;gap:8px;align-items:center"}),Ive=b("div",{target:"eaatruv36"})({name:"27ryvv",styles:"display:flex;gap:6px"}),YA=b("button",{target:"eaatruv35"})("padding:7px 14px;background:",e=>e.selected?"#3b82f6":"white",";color:",e=>e.selected?"white":"#1e293b",";border:2px solid ",e=>e.selected?"#3b82f6":"#e2e8f0",";border-radius:6px;cursor:pointer;font-weight:600;font-size:11px;transition:all 0.3s ease;&:hover{border-color:#3b82f6;}"),Ave=b("button",{target:"eaatruv34"})("padding:9px 18px;background:",e=>e.sealed?"#10b981":"#f59e0b",";color:white;border:none;border-radius:6px;cursor:pointer;font-weight:600;font-size:12px;transition:all 0.3s ease;min-width:85px;&:hover{transform:translateY(-1px);}&:disabled{opacity:0.5;cursor:not-allowed;transform:none;}"),KA=b(Le.div,{target:"eaatruv33"})({name:"1m8jsbz",styles:"position:absolute;top:-8px;left:50%;transform:translateX(-50%) translateY(-100%);background:white;border-radius:8px;padding:8px;box-shadow:0 10px 25px rgba(0, 0, 0, 0.2);display:grid;grid-template-columns:repeat(2, 1fr);gap:4px;z-index:1000;min-width:160px;border:1px solid #e2e8f0"}),XA=b("div",{target:"eaatruv32"})({name:"1wmn785",styles:"padding:8px 12px;background:#f8fafc;color:#1e293b;border-radius:6px;cursor:pointer;text-align:center;font-size:12px;font-weight:500;transition:all 0.2s ease;&:hover{background:#3b82f6;color:white;transform:translateY(-1px);}"}),Pve=b(Gc,{target:"eaatruv31"})({name:"1cofnfw",styles:"background:white;color:#6b7280;width:100%;&:hover{background:#fef2f2;border-color:#ef4444;color:#dc2626;}"}),Dve=b(Le.button,{target:"eaatruv30"})("padding:12px 24px;background:linear-gradient(45deg, #3b82f6 0%, #1d4ed8 100%);color:white;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;box-shadow:0 4px 15px rgba(59, 130, 246, 0.3);transition:all 0.3s ease;&:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 25px rgba(59, 130, 246, 0.4);}&:disabled{opacity:0.5;cursor:not-allowed;transform:none;box-shadow:none;}",e=>e.urgent&&Ke("animation:",qC," 1.5s ease-in-out infinite;background:linear-gradient(45deg, #ef4444 0%, #dc2626 100%);",""),";"),Rve=b(Le.div,{target:"eaatruv29"})("position:fixed;top:25%;left:0;right:0;background:",e=>e.correct?"linear-gradient(135deg, #10b981 0%, #059669 100%)":"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",";color:white;padding:24px 48px;font-size:28px;font-weight:900;z-index:1000;box-shadow:0 8px 40px rgba(0, 0, 0, 0.3);text-align:center;border-top:4px solid rgba(255, 255, 255, 0.3);border-bottom:4px solid rgba(255, 255, 255, 0.3);text-transform:uppercase;letter-spacing:3px;text-shadow:2px 2px 4px rgba(0, 0, 0, 0.3);opacity:0.92;&::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);animation:",eve," 1.5s ease-out;}.result{font-size:36px;margin-bottom:12px;font-weight:900;display:flex;align-items:center;justify-content:center;gap:16px;&::before{content:'",e=>e.correct?"🎉":"❌","';font-size:40px;}&::after{content:'",e=>e.correct?"🎉":"❌","';font-size:40px;}}.points{font-size:24px;margin-bottom:8px;font-weight:700;opacity:0.9;}.time{font-size:16px;margin-bottom:12px;opacity:0.8;font-weight:500;}.details{font-size:14px;margin-top:12px;line-height:1.4;max-width:600px;margin-left:auto;margin-right:auto;opacity:0.9;font-weight:500;}"),Nve=b("div",{target:"eaatruv28"})("position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);background:white;padding:16px 24px;border-radius:12px;box-shadow:0 10px 30px rgba(0, 0, 0, 0.2);text-align:center;font-size:14px;font-weight:600;color:#1e293b;z-index:999;pointer-events:none;opacity:",e=>e.show?1:0,";transition:opacity 0.3s ease;"),Mve=b("div",{target:"eaatruv27"})("position:fixed;top:20px;right:20px;background:rgba(0, 0, 0, 0.8);color:white;padding:8px 16px;border-radius:8px;font-size:12px;z-index:1000;opacity:",e=>e.show?1:0,";transition:opacity 0.3s ease;"),Ove=b(Le.div,{target:"eaatruv26"})({name:"zusqbq",styles:"position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0, 0, 0, 0.8);display:flex;justify-content:center;align-items:center;z-index:1000"}),$ve=b(Le.div,{target:"eaatruv25"})({name:"tidfh7",styles:"background:white;border-radius:20px;padding:36px;text-align:center;max-width:400px;width:90%;box-shadow:0 25px 60px rgba(0, 0, 0, 0.3)"}),Lve=b("h2",{target:"eaatruv24"})({name:"16yiabf",styles:"color:#1e293b;font-size:28px;font-weight:800;margin-bottom:24px"}),Fve=b("div",{target:"eaatruv23"})({name:"1mdyhst",styles:"font-size:60px;font-weight:900;color:#3b82f6;margin-bottom:20px"}),Bve=b("div",{target:"eaatruv22"})({name:"xkiv0v",styles:"display:grid;grid-template-columns:repeat(2, 1fr);gap:20px;margin-bottom:24px"}),QA=b("div",{target:"eaatruv21"})({name:"vzwjin",styles:".label{font-size:12px;color:#6b7280;font-weight:500;margin-bottom:6px;}.value{font-size:20px;font-weight:700;color:#1e293b;}"}),zve=b("button",{target:"eaatruv20"})({name:"1m24cfk",styles:"padding:12px 24px;background:linear-gradient(45deg, #3b82f6 0%, #1d4ed8 100%);color:white;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;box-shadow:0 4px 15px rgba(59, 130, 246, 0.3);transition:all 0.3s ease;&:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(59, 130, 246, 0.4);}"}),Vve=b(Le.div,{target:"eaatruv19"})("position:fixed;font-size:20px;font-weight:bold;pointer-events:none;z-index:1000;",Ke("animation:",H0e," 1s ease-out forwards;",""),";"),yt={desktop:"1200px",ultrawide:"2560px",laptopMedium:"(min-width: 1440px) and (max-height: 900px)",desktopSmall:"(min-width: 1200px) and (min-height: 900px)",desktopLarge:"(min-width: 1920px) and (min-height: 1080px)"},jve=b(Le.div,{target:"eaatruv18"})({name:"4ntqac",styles:"position:fixed;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg, rgba(0, 0, 0, 0.9), rgba(30, 41, 59, 0.9));display:flex;justify-content:center;align-items:center;z-index:2000;padding:20px"}),Uve=b(Le.div,{target:"eaatruv17"})("background:linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);border-radius:24px;width:90%;max-height:85vh;display:flex;flex-direction:column;text-align:center;box-shadow:0 32px 80px rgba(0, 0, 0, 0.3);border:2px solid rgba(59, 130, 246, 0.2);position:relative;overflow:hidden;padding:32px;max-width:1200px;@media ",yt.laptopMedium,"{padding:36px;max-width:1300px;}@media ",yt.desktopSmall,"{padding:40px;max-width:1400px;}@media ",yt.desktopLarge,"{padding:50px;max-width:1600px;}@media (min-width: ",yt.ultrawide,"){padding:60px;max-width:1800px;}"),qve=b("h2",{target:"eaatruv16"})("background:linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;font-weight:900;text-shadow:0 2px 4px rgba(0, 0, 0, 0.1);font-size:28px;margin-bottom:12px;@media ",yt.laptopMedium,"{font-size:32px;margin-bottom:14px;}@media ",yt.desktopSmall,"{font-size:36px;margin-bottom:16px;}@media ",yt.desktopLarge,"{font-size:42px;margin-bottom:20px;}@media (min-width: ",yt.ultrawide,"){font-size:48px;margin-bottom:24px;}"),Wve=b("p",{target:"eaatruv15"})("color:#64748b;line-height:1.6;font-weight:500;font-size:14px;margin-bottom:24px;@media ",yt.laptopMedium,"{font-size:16px;margin-bottom:28px;}@media ",yt.desktopSmall,"{font-size:18px;margin-bottom:32px;}@media ",yt.desktopLarge,"{font-size:20px;margin-bottom:36px;}@media (min-width: ",yt.ultrawide,"){font-size:22px;margin-bottom:40px;}"),Hve=b("div",{target:"eaatruv14"})("display:grid;grid-template-columns:repeat(4, 1fr);flex:1;gap:16px;margin-bottom:24px;@media ",yt.laptopMedium,"{gap:18px;margin-bottom:28px;}@media ",yt.desktopSmall,"{gap:20px;margin-bottom:32px;}@media ",yt.desktopLarge,"{gap:24px;margin-bottom:40px;}@media (min-width: ",yt.ultrawide,"){gap:28px;margin-bottom:48px;}@media (max-width: ",yt.desktop,"){grid-template-columns:repeat(2, 1fr);gap:16px;margin-bottom:20px;}"),og=b(Le.div,{target:"eaatruv13"})("border-radius:16px;box-shadow:0 8px 32px rgba(0, 0, 0, 0.1);position:relative;overflow:hidden;display:flex;flex-direction:column;text-align:left;transition:all 0.3s ease;height:100%;background:white;padding:20px;min-height:220px;@media ",yt.laptopMedium,"{padding:24px;min-height:240px;}@media ",yt.desktopSmall,"{padding:28px;min-height:280px;}@media ",yt.desktopLarge,"{padding:32px;min-height:320px;}@media (min-width: ",yt.ultrawide,"){padding:36px;min-height:360px;}@media (max-width: ",yt.desktop,"){padding:20px;min-height:200px;}&:nth-of-type(1){border:3px solid #3b82f6;&::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:#3b82f6;}}&:nth-of-type(2){border:3px solid #8b5cf6;&::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:#8b5cf6;}}&:nth-of-type(3){border:3px solid #10b981;&::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:#10b981;}}&:nth-of-type(4){border:3px solid #f59e0b;&::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:#f59e0b;}}&>*{position:relative;z-index:2;}&:hover{transform:translateY(-4px);box-shadow:0 16px 48px rgba(0, 0, 0, 0.15);}"),ag=b("h4",{target:"eaatruv12"})("font-weight:700;display:flex;align-items:center;gap:10px;font-size:14px;margin-bottom:10px;&::before{content:'",e=>e.icon||"📋","';font-size:18px;}@media ",yt.laptopMedium,"{font-size:16px;margin-bottom:12px;&::before{font-size:20px;}}@media ",yt.desktopSmall,"{font-size:18px;margin-bottom:14px;&::before{font-size:24px;}}@media ",yt.desktopLarge,"{font-size:20px;margin-bottom:16px;&::before{font-size:28px;}}@media (min-width: ",yt.ultrawide,"){font-size:22px;margin-bottom:18px;&::before{font-size:32px;}}@media (max-width: ",yt.desktop,"){font-size:14px;margin-bottom:10px;&::before{font-size:16px;}}",e=>e.section===1&&"color: #1e40af;"," ",e=>e.section===2&&"color: #7c3aed;"," ",e=>e.section===3&&"color: #047857;"," ",e=>e.section===4&&"color: #d97706;",";"),sg=b("p",{target:"eaatruv11"})("color:#475569;line-height:1.6;margin:0;flex:1;font-size:12px;@media ",yt.laptopMedium,"{font-size:13px;}@media ",yt.desktopSmall,"{font-size:14px;}@media ",yt.desktopLarge,"{font-size:16px;line-height:1.7;}@media (min-width: ",yt.ultrawide,"){font-size:18px;line-height:1.7;}@media (max-width: ",yt.desktop,"){font-size:11px;line-height:1.5;}strong{color:#1e293b;font-weight:700;}br{margin-bottom:6px;}.score-positive{color:#10b981;font-weight:700;}.score-negative{color:#ef4444;font-weight:700;}.score-bonus{color:#f59e0b;font-weight:700;}.score-combo{color:#8b5cf6;font-weight:700;}"),Gve=b(Le.button,{target:"eaatruv10"})("background:linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);color:white;border:none;border-radius:16px;font-weight:700;cursor:pointer;box-shadow:0 8px 25px rgba(59, 130, 246, 0.4);transition:all 0.3s ease;position:relative;overflow:hidden;flex-shrink:0;align-self:center;padding:16px 36px;font-size:14px;@media ",yt.laptopMedium,"{padding:18px 42px;font-size:16px;}@media ",yt.desktopSmall,"{padding:20px 48px;font-size:18px;}@media ",yt.desktopLarge,"{padding:24px 56px;font-size:20px;}@media (min-width: ",yt.ultrawide,"){padding:28px 64px;font-size:22px;}&::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);transition:left 0.5s ease;}&:hover::before{left:100%;}&:hover{transform:translateY(-3px);box-shadow:0 12px 35px rgba(59, 130, 246, 0.5);}"),Yve=b(Le.div,{target:"eaatruv9"})({name:"1k01zit",styles:"position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0, 0, 0, 0.9);display:flex;justify-content:center;align-items:center;z-index:1500"}),Kve=b(Le.div,{target:"eaatruv8"})("font-size:120px;font-weight:900;color:white;text-shadow:0 0 30px rgba(255, 255, 255, 0.5);",Ke("animation:",X0e," 1s ease-in-out;",""),";"),Xve=b(Le.div,{target:"eaatruv7"})({name:"zxtl06",styles:"font-size:48px;font-weight:700;color:#10b981;text-shadow:0 0 20px rgba(16, 185, 129, 0.5)"}),JA=()=>{const e=document.createElement("div");e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.pointerEvents="none",e.style.zIndex="999",document.body.appendChild(e);const t=["#3b82f6","#8b5cf6","#06b6d4","#10b981","#f59e0b","#ef4444"];for(let n=0;n<50;n++){const r=document.createElement("div");r.style.position="absolute",r.style.width=Math.random()*8+4+"px",r.style.height=Math.random()*8+4+"px",r.style.backgroundColor=t[Math.floor(Math.random()*t.length)],r.style.left=Math.random()*100+"%",r.style.top="-10px",r.style.borderRadius=Math.random()>.5?"50%":"0";const i=Math.random()*2+2,o=Math.random()*.5;r.style.transition=`transform ${i}s ease-out ${o}s, opacity ${i}s ease-out ${o}s`,e.appendChild(r),setTimeout(()=>{r.style.transform="translateY(-100px) rotate(360deg)",r.style.opacity="0"},o*1e3+10)}setTimeout(()=>{document.body.contains(e)&&document.body.removeChild(e)},4e3)};it`
  0% { opacity: 0; }
  50% { opacity: 0.3; }
  100% { opacity: 0; }
`;it`
  0% { 
    transform: scale(0) rotate(0deg);
    opacity: 1;
  }
  100% { 
    transform: scale(1.5) rotate(360deg);
    opacity: 0;
  }
`;it`
  0% { 
    transform: scale(0);
    opacity: 0.8;
  }
  100% { 
    transform: scale(3);
    opacity: 0;
  }
`;it`
  0%, 100% { 
    text-shadow: 0 0 5px currentColor;
    transform: scale(1);
  }
  50% { 
    text-shadow: 0 0 20px currentColor, 0 0 30px currentColor;
    transform: scale(1.1);
  }
`;it`
  0% { 
    transform: translateY(0) scale(1);
    opacity: 0;
  }
  50% { 
    transform: translateY(-20px) scale(1.2);
    opacity: 1;
  }
  100% { 
    transform: translateY(-50px) scale(1);
    opacity: 0;
  }
`;it`
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    `;const Qve=()=>{var nt,ht,Mt,xn,cn,Kr,Yt,wr,ro,da,Bh,zh;const[e,t]=D.useState([]),[n,r]=D.useState(0),[i,o]=D.useState([]),[a,s]=D.useState({}),[l,c]=D.useState(0),[d,p]=D.useState(240),[f,h]=D.useState(new Set),[g,m]=D.useState(null),[v,w]=D.useState([]),[S,C]=D.useState(Date.now()),[A,_]=D.useState(0),[I,E]=D.useState(!1),[k,T]=D.useState(!1),[P,O]=D.useState(!1),[R,N]=D.useState(""),[L,B]=D.useState(!1),[V,j]=D.useState(!0),[z,H]=D.useState(!1),[J,de]=D.useState(3),[ae,Ce]=D.useState(!1),[te,G]=D.useState(!1),[K,me]=D.useState(!1),[ye,ee]=D.useState(!1),[oe,he]=D.useState(!1),[we,W]=D.useState([]),[ge,fe]=D.useState([]),ve=D.useRef(null),ce=D.useRef(null),De=["紅茶","綠茶","烏龍茶","麥茶"],He=["珍珠","椰果","波霸","粉圓"],Ue=["全糖","七分糖","半糖","三分糖","無糖"],et=["正常冰","少冰","微冰","去冰"],pt=re=>{const{base:Ee,milk:$e,toppings:Je,sweetness:Ve,ice:St}=re;let ft="";return Je.length>0&&(ft+=Je[0]),$e==="fresh_milk"?Ee==="紅茶"?ft+="紅茶拿鐵":ft+=Ee+"拿鐵":$e==="milk_powder"?Ee==="紅茶"?ft+="奶茶":Ee==="綠茶"?ft+="綠奶茶":Ee==="烏龍茶"?ft+="烏龍奶茶":Ee==="麥茶"&&(ft+="麥香奶茶"):ft+=Ee,ft+=Ve+St,ft},jt=re=>{const Ee=re.map(($e,Je)=>({id:Je,orderId:$e.id,base:"",milk:"",toppings:[],sweetness:"",ice:"",straw:"",sealed:!1,fillLevel:0,isPouring:!1}));o(Ee),r(0)},Rt=()=>{const re=Math.floor(Math.random()*3)+1,Ee=[];for(let $e=0;$e<re;$e++){const Je=De[Math.floor(Math.random()*De.length)],Ve=Math.random()<.3?"none":Math.random()<.5?"milk_powder":"fresh_milk",St=Math.floor(Math.random()*2),ft=[];if(St>0){const oo=He[Math.floor(Math.random()*He.length)];ft.push(oo)}const Tt=Ue[Math.floor(Math.random()*Ue.length)],On=et[Math.floor(Math.random()*et.length)],Wn={base:Je,milk:Ve,toppings:ft,sweetness:Tt,ice:On},io=pt(Wn);Ee.push({id:Date.now()+$e,productName:io,components:Wn,completed:!1})}t(Ee),jt(Ee),h(new Set),C(Date.now()),N("新訂單到達"),setTimeout(()=>N(""),2e3)},ln=()=>{j(!1),H(!0),de(3),ce.current&&clearInterval(ce.current),ce.current=setInterval(()=>{de(re=>re===1?(clearInterval(ce.current),ce.current=null,setTimeout(()=>{H(!1),Ce(!0),gt()},1e3),"開始！"):re-1)},1e3)},gt=()=>{Rt(),ve.current&&(clearInterval(ve.current),ve.current=null),ve.current=setInterval(()=>{p(re=>(console.log(`Game Timer: ${re} seconds`),re<=1?(clearInterval(ve.current),ve.current=null,Te(),0):(re===30&&(N("時間不多了！"),setTimeout(()=>N(""),3e3)),re-1)))},1e3)};D.useEffect(()=>()=>{ve.current&&clearInterval(ve.current),ce.current&&clearInterval(ce.current)},[]);const wt=re=>{if(n>=i.length)return;const $e=`tea_${n}`;a[$e]||(s(Je=>({...Je,[$e]:!0})),o(Je=>Je.map((Ve,St)=>St===n?{...Ve,base:re,isPouring:!0,fillLevel:80}:Ve)),N("茶底製作中..."),setTimeout(()=>N(""),2e3),setTimeout(()=>{o(Je=>Je.map((Ve,St)=>St===n?{...Ve,isPouring:!1}:Ve)),s(Je=>({...Je,[$e]:!1})),N("茶底完成"),setTimeout(()=>N(""),1500)},6e3))},at=re=>{if(n>=i.length||!i[n].base)return;const Je=`milk_${n}`;a[Je]||(s(Ve=>({...Ve,[Je]:!0})),o(Ve=>Ve.map((St,ft)=>ft===n?{...St,milk:re}:St)),N("奶類調配中..."),setTimeout(()=>N(""),2e3),setTimeout(()=>{s(Ve=>({...Ve,[Je]:!1})),N("奶類完成"),setTimeout(()=>N(""),1500)},6e3))},_t=(re,Ee)=>{if(n>=i.length)return;const $e=n,Je=a[`tea_${$e}`],Ve=a[`milk_${$e}`];Je||Ve||o(St=>St.map((ft,Tt)=>{if(Tt!==n)return ft;if(re==="toppings"){if(!ft.toppings.includes(Ee)){const On=[...ft.toppings,Ee],Wn=On.length-1;return setTimeout(()=>{o(io=>io.map((oo,pa)=>pa===n?{...oo,newToppingIndex:null}:oo))},600),{...ft,toppings:On,newToppingIndex:Wn}}return ft}return{...ft,[re]:Ee}}))},Ht=re=>{if(n>=i.length)return;const Ee=n,$e=a[`tea_${Ee}`],Je=a[`milk_${Ee}`];$e||Je||o(Ve=>Ve.map((St,ft)=>ft===n?{...St,straw:re}:St))},q=()=>{if(n>=i.length)return;const re=i[n];if(!re.base||!re.straw||re.sealed)return;const Ee=n,$e=a[`tea_${Ee}`],Je=a[`milk_${Ee}`];if($e||Je)return;const Ve=`seal_${Ee}`;s(St=>({...St,[Ve]:!0})),N("封膜中..."),setTimeout(()=>{o(St=>St.map((ft,Tt)=>Tt===n?{...ft,sealed:!0}:ft)),N("封膜完成"),JA(),s(St=>({...St,[Ve]:!1})),setTimeout(()=>N(""),2e3)},3e3)},X=()=>{const re=Object.values(a).some($e=>$e),Ee=i.every($e=>$e.sealed);return i.length>0&&Ee&&!re&&!L},ie=()=>{if(!X())return;B(!0);let re=!0,Ee=0,$e=[];i.forEach((Ve,St)=>{const ft=e[St];if(!ft)return;const{components:Tt}=ft;let On=!0,Wn=[];if(Ve.base!==Tt.base&&(On=!1,Wn.push(`茶底錯誤: 應該是${Tt.base}，實際是${Ve.base||"無"}`)),Tt.milk==="none")Ve.milk!==""&&Ve.milk!=="none"&&(On=!1,Wn.push(`奶類錯誤: 純茶不應該加奶，實際選擇了${Ve.milk==="milk_powder"?"奶精":"鮮奶"}`));else if(Ve.milk!==Tt.milk){On=!1;const pa={none:"不加奶",milk_powder:"奶精",fresh_milk:"鮮奶"};Wn.push(`奶類錯誤: 應該是${pa[Tt.milk]}，實際是${pa[Ve.milk]||"無"}`)}Ve.sweetness!==Tt.sweetness&&(On=!1,Wn.push(`甜度錯誤: 應該是${Tt.sweetness}，實際是${Ve.sweetness||"無"}`)),Ve.ice!==Tt.ice&&(On=!1,Wn.push(`冰塊錯誤: 應該是${Tt.ice}，實際是${Ve.ice||"無"}`)),Ve.toppings.length!==Tt.toppings.length?(On=!1,Wn.push(`配料數量錯誤: 應該有${Tt.toppings.length}種，實際有${Ve.toppings.length}種`)):Tt.toppings.length>0&&(Tt.toppings.every(Vh=>Ve.toppings.includes(Vh))||(On=!1,Wn.push(`配料錯誤: 應該是${Tt.toppings.join("、")}，實際是${Ve.toppings.join("、")||"無"}`)));const io=Tt.toppings.length>0,oo=io?"thick":"thin";Ve.straw!==oo&&(On=!1,Wn.push(`吸管錯誤: 應該用${io?"粗":"細"}吸管`)),On||(re=!1,$e.push(`杯子${St+1}: ${Wn.join("、")}`)),Ee+=On?15:-5});const Je=Date.now()-S;re&&Je<6e4&&(Ee+=10),re?(Ee+=Math.min(A,10),N("完美製作！"),JA()):(N("有錯誤！"),console.log("錯誤詳情:",$e)),c(Ve=>Math.max(0,Ve+Ee)),_(Ve=>re?Ve+1:0),m({correct:re,points:Ee,timeTaken:Math.round(Je/1e3),details:$e}),ne(Ee,re),setTimeout(()=>{o(Ve=>Ve.map(St=>({...St,isExiting:!0}))),setTimeout(()=>{Rt()},500)},1500),setTimeout(()=>{m(null),N(""),B(!1)},3e3)},ne=(re,Ee)=>{const $e={id:Date.now(),points:re,isCorrect:Ee,x:Math.random()*window.innerWidth,y:window.innerHeight/2};w(Je=>[...Je,$e]),setTimeout(()=>{w(Je=>Je.filter(Ve=>Ve.id!==$e.id))},1e3)},Te=()=>{O(!0)},Me=()=>{ve.current&&(clearInterval(ve.current),ve.current=null),ce.current&&(clearInterval(ce.current),ce.current=null),O(!1),c(0),_(0),p(240),s({}),N(""),B(!1),Ce(!1),j(!0)},st=re=>{const Ee=Math.floor(re/60),$e=re%60;return`${Ee}:${$e.toString().padStart(2,"0")}`},lt=(re,Ee)=>{if(n>=i.length)return!0;const $e=i[n],Je=n,Ve=a[`tea_${Je}`],St=a[`milk_${Je}`];if($e.sealed||re==="base"&&Ve||re==="milk"&&St||(re==="sweetness"||re==="ice"||re==="toppings")&&(Ve||St))return!0;switch(re){case"base":return $e.base!==""&&$e.base!==Ee;case"milk":return $e.milk!==""&&$e.milk!==Ee;case"sweetness":return $e.sweetness!==""&&$e.sweetness!==Ee;case"ice":return $e.ice!==""&&$e.ice!==Ee;default:return!1}},Q=re=>{if(n>=i.length)return!1;const Ee=i[n],$e=n,Je=a[`tea_${$e}`],Ve=a[`milk_${$e}`];return!(Ee.sealed||(re==="sweetness"||re==="ice")&&(Je||Ve))},pe=()=>i[n]||null,ke=()=>{const re=n;return a[`tea_${re}`]||a[`milk_${re}`]||a[`seal_${re}`]},Be=()=>d<=60||Date.now()-S>12e4,Pe=()=>{if(n>=i.length)return;if(i[n].sealed){N("封膜後不可重做"),setTimeout(()=>N(""),2e3);return}const Ee=n,$e=a[`tea_${Ee}`],Je=a[`milk_${Ee}`],Ve=a[`seal_${Ee}`];if($e||Je||Ve){N("處理中不可重做"),setTimeout(()=>N(""),2e3);return}o(St=>St.map((ft,Tt)=>Tt===n?{...ft,base:"",milk:"",toppings:[],sweetness:"",ice:"",straw:"",sealed:!1,fillLevel:0,isPouring:!1}:ft)),N("重新開始製作"),setTimeout(()=>N(""),1500)};return ae?y(HA,{children:[y(tve,{children:[y(nve,{timeWarning:d<=30,children:[y(rg,{children:[u("div",{className:"label",children:"時間"}),u("div",{className:"value",warning:d<=30,children:st(d)})]}),y(rg,{children:[u("div",{className:"label",children:"得分"}),u("div",{className:"value",children:l})]}),y(rg,{children:[u("div",{className:"label",children:"連續"}),u("div",{className:"value",children:A})]}),y(rg,{children:[u("div",{className:"label",children:"進度"}),y("div",{className:"value",children:[f.size,"/",e.length]})]})]}),y(rve,{children:[u(ive,{children:"待製作訂單"}),e.map((re,Ee)=>y(dve,{isCompleted:f.has(Ee),isNew:Ee===0,urgent:Be(),children:[y(pve,{children:["訂單 #",String(Ee+1).padStart(3,"0")]}),u(hve,{children:re.productName})]},re.id))]}),y(ove,{children:[y(Zg,{children:[u(ig,{children:"茶飲基底"}),u(E1,{columns:"repeat(2, 1fr)",children:De.map(re=>{var Ee,$e;return u(gve,{selected:((Ee=pe())==null?void 0:Ee.base)===re,disabled:lt("base",re),isProcessing:a[`tea_${n}`]&&(($e=pe())==null?void 0:$e.base)===re,onClick:()=>!lt("base",re)&&wt(re),children:re},re)})})]}),y(Zg,{children:[u(ig,{children:"奶類選擇"}),y(E1,{columns:"repeat(1, 1fr)",children:[u(GA,{selected:((nt=pe())==null?void 0:nt.milk)==="milk_powder",disabled:lt("milk","milk_powder"),isProcessing:a[`milk_${n}`]&&((ht=pe())==null?void 0:ht.milk)==="milk_powder",onClick:()=>!lt("milk","milk_powder")&&at("milk_powder"),children:"奶精"}),u(GA,{selected:((Mt=pe())==null?void 0:Mt.milk)==="fresh_milk",disabled:lt("milk","fresh_milk"),isProcessing:a[`milk_${n}`]&&((xn=pe())==null?void 0:xn.milk)==="fresh_milk",onClick:()=>!lt("milk","fresh_milk")&&at("fresh_milk"),children:"鮮奶"})]})]}),y(Zg,{children:[u(ig,{children:"配料選擇"}),u(E1,{columns:"repeat(2, 1fr)",children:He.map(re=>{var Ee;return u(vve,{selected:(Ee=pe())==null?void 0:Ee.toppings.includes(re),disabled:lt("toppings",re),onClick:()=>!lt("toppings",re)&&_t("toppings",re),children:re},re)})})]}),y(ave,{children:[u(ig,{children:"調味設定"}),y(sve,{children:[y("div",{style:{position:"relative"},onMouseEnter:()=>Q("sweetness")&&E(!0),onMouseLeave:()=>E(!1),children:[u(Gc,{selected:!!((cn=pe())!=null&&cn.sweetness),disabled:lt("sweetness",(Kr=pe())==null?void 0:Kr.sweetness),children:((Yt=pe())==null?void 0:Yt.sweetness)||"甜度"}),u(Ft,{children:I&&Q("sweetness")&&u(KA,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},children:Ue.map(re=>u(XA,{onClick:()=>{lt("sweetness",re)||_t("sweetness",re),E(!1)},children:re},re))})})]}),y("div",{style:{position:"relative"},onMouseEnter:()=>Q("ice")&&T(!0),onMouseLeave:()=>T(!1),children:[u(Gc,{selected:!!((wr=pe())!=null&&wr.ice),disabled:lt("ice",(ro=pe())==null?void 0:ro.ice),children:((da=pe())==null?void 0:da.ice)||"冰塊"}),u(Ft,{children:k&&Q("ice")&&u(KA,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},children:et.map(re=>u(XA,{onClick:()=>{lt("ice",re)||_t("ice",re),T(!1)},children:re},re))})})]})]}),u(lve,{children:u(Pve,{disabled:ke()||((Bh=pe())==null?void 0:Bh.sealed),onClick:Pe,children:(zh=pe())!=null&&zh.sealed?"已封膜":ke()?"處理中":"重新開始"})})]})]}),u(cve,{children:u(Ft,{children:i.map((re,Ee)=>u(xve,{isSelected:n===Ee,isProcessing:a[`tea_${Ee}`]||a[`milk_${Ee}`],isSealing:a[`seal_${Ee}`],onClick:()=>r(Ee),initial:{x:300,opacity:0,scale:.8},animate:{x:re.isExiting?-300:0,opacity:re.isExiting?0:1,scale:re.isExiting?.8:1},exit:{x:-300,opacity:0,scale:.8},transition:{type:"spring",stiffness:200,damping:25,duration:.8},onAnimationComplete:$e=>{re.isExiting&&$e.x===-300&&o(Je=>Je.map(Ve=>Ve.id===re.id?{...Ve,isExiting:!1}:Ve))},children:y(yve,{children:[y(bve,{children:[u(wve,{isProcessing:re.isPouring,isSealing:a[`seal_${Ee}`],children:u(Sve,{teaType:re.base,milkType:re.milk,fillLevel:re.fillLevel,isPouring:re.isPouring})}),a[`seal_${Ee}`]&&y(Ne,{children:[u(WA,{className:"left",children:"搖"}),u(WA,{className:"right",children:"搖"})]})]}),y(Cve,{children:[y(_ve,{children:["杯子 ",Ee+1]}),u(kve,{children:re.toppings.map(($e,Je)=>u(Eve,{type:$e,isNew:re.newToppingIndex===Je,children:$e},`${$e}-${Je}`))}),y(Tve,{children:[y(Ive,{children:[u(YA,{selected:re.straw==="thin",disabled:re.sealed,onClick:$e=>{$e.stopPropagation(),re.sealed||Ht("thin")},children:"細吸管"}),u(YA,{selected:re.straw==="thick",disabled:re.sealed,onClick:$e=>{$e.stopPropagation(),re.sealed||Ht("thick")},children:"粗吸管"})]}),u(Ave,{sealed:re.sealed,disabled:!re.base||!re.straw||re.sealed||a[`seal_${Ee}`]||a[`tea_${Ee}`]||a[`milk_${Ee}`],onClick:$e=>{$e.stopPropagation(),n===Ee&&q()},children:a[`seal_${Ee}`]?"封膜中...":re.sealed?"已封膜":"封膜"})]})]})]})},re.id))})}),u(uve,{children:u(Dve,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:ie,disabled:!X(),urgent:Be()&&X(),children:"送單完成"})})]}),y(Nve,{show:ke(),children:["杯子 ",n+1," 正在製作中..."]}),u(Mve,{show:!!R,children:R}),u(Ft,{children:g&&y(Rve,{correct:g.correct,initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},transition:{type:"spring",stiffness:400,damping:30},children:[u("div",{className:"result",children:g.correct?"全部正確！":"有錯誤！"}),y("div",{className:"points",children:[g.correct?`+${g.points}`:`${g.points}`," 分"]}),y("div",{className:"time",children:["用時: ",g.timeTaken,"秒"]}),g.details&&g.details.length>0&&u("div",{className:"details",children:g.details.slice(0,3).map((re,Ee)=>u("div",{children:re},Ee))})]})}),u(Ft,{children:P&&u(Ove,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:y($ve,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},children:[u(Lve,{children:"考試結束！"}),u(Fve,{children:l}),y(Bve,{children:[y(QA,{children:[u("div",{className:"label",children:"最終得分"}),u("div",{className:"value",children:l})]}),y(QA,{children:[u("div",{className:"label",children:"最高連續"}),u("div",{className:"value",children:A})]})]}),u(zve,{onClick:Me,children:"重新開始"})]})})}),u(Ft,{children:v.map(re=>y(Vve,{style:{left:re.x,top:re.y,color:re.isCorrect?"#10b981":"#ef4444"},children:[re.isCorrect?"+":"",re.points]},re.id))})]}):y(HA,{children:[u(Ft,{children:V&&u(jve,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:y(Uve,{initial:{scale:.8,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:50},transition:{type:"spring",stiffness:300,damping:25},children:[u(qve,{children:"🥤 飲料製作實戰模擬"}),u(Wve,{children:"歡迎來到專業飲料調製考試！在這裡，您將學習如何快速且準確地製作各種美味飲品"}),y(Hve,{children:[y(og,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1},children:[u(ag,{section:1,icon:"🎯",children:"遊戲目標"}),y(sg,{children:["在",u("strong",{children:"4分鐘"}),"內完成盡可能多的飲料訂單，考驗您的",u("strong",{children:"速度"}),"和",u("strong",{children:"準確度"}),"！ 每一杯完美的飲料都會為您帶來豐厚的分數獎勵。"]})]}),y(og,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},children:[u(ag,{section:2,icon:"⚡",children:"重要提示"}),y(sg,{children:["• ",u("strong",{children:"多工處理"}),"：可同時製作多杯飲料，點擊杯子切換操作",u("br",{}),"• ",u("strong",{children:"製作時間"}),"：茶底和奶類製作需要6秒，請善用等待時間",u("br",{}),"• ",u("strong",{children:"操作限制"}),"：製作期間該杯飲料會被鎖定，無法修改",u("br",{}),"• ",u("strong",{children:"最終確認"}),"：封膜後無法修改，請仔細檢查所有配置",u("br",{}),"• ",u("strong",{children:"純茶訣竅"}),"：純茶訂單不需要選擇奶類，直接跳過即可"]})]}),y(og,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3},children:[u(ag,{section:3,icon:"🏆",children:"評分標準"}),y(sg,{children:["• ",u("strong",{className:"score-positive",children:"完美製作：+15分"})," - 所有細節都正確無誤",u("br",{}),"• ",u("strong",{className:"score-negative",children:"錯誤製作：-5分"})," - 任何細節有誤都會扣分",u("br",{}),"• ",u("strong",{className:"score-bonus",children:"速度獎勵：+10分"})," - 60秒內完成額外獎勵",u("br",{}),"• ",u("strong",{className:"score-combo",children:"連續獎勵：額外分數"})," - 連續正確製作獲得更多分數"]})]}),y(og,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.4},children:[u(ag,{section:4,icon:"💡",children:"專業技巧"}),y(sg,{children:["• 先看清所有訂單，規劃製作順序",u("br",{}),"• 利用茶底沖泡時間處理其他杯子",u("br",{}),"• 記住配料規則：有配料=粗吸管，無配料=細吸管",u("br",{}),"• 保持冷靜，準確度比速度更重要"]})]})]}),u(Gve,{onClick:ln,whileHover:{scale:1.05},whileTap:{scale:.95},children:"🚀 開始挑戰，成為調飲大師！"})]})})}),u(Ft,{children:z&&u(Yve,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:J==="開始！"?u(Xve,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:300,damping:25},children:J}):u(Kve,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:300,damping:25},children:J},J)})})]})};it`
  from { transform: translateX(100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
`;const Jve=it`
  0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.9); }
  100% { box-shadow: 0 0 0 25px rgba(59, 130, 246, 0); }
`;it`
  0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.9); }
  100% { box-shadow: 0 0 0 25px rgba(16, 185, 129, 0); }
`;const m9=it`
  0% { background: #fef2f2; border-color: #fca5a5; }
  50% { background: #fee2e2; border-color: #f87171; }
  100% { background: #fef2f2; border-color: #fca5a5; }
`,Zve=it`
  0% { color: #ef4444; transform: scale(1); }
  50% { color: #dc2626; transform: scale(1.1); }
  100% { color: #ef4444; transform: scale(1); }
`,exe=it`
  0% { 
    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.8);
    border-color: #3b82f6;
  }
  100% { 
    box-shadow: 0 0 0 15px rgba(59, 130, 246, 0);
    border-color: #1d4ed8;
  }
`,txe=it`
  0% { 
    transform: scale(0) rotate(0deg);
    opacity: 0;
  }
  50% { 
    transform: scale(1.3) rotate(180deg);
    opacity: 1;
  }
  100% { 
    transform: scale(1) rotate(360deg);
    opacity: 1;
  }
`,nxe=it`
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.2); opacity: 0.8; }
  100% { transform: scale(1); opacity: 1; }
`,rxe=it`
  0%, 100% { transform: translateY(0) rotate(-5deg); }
  25% { transform: translateY(-8px) rotate(5deg); }
  50% { transform: translateY(8px) rotate(-3deg); }
  75% { transform: translateY(-4px) rotate(3deg); }
`,ixe=it`
  0% { left: -100%; }
  100% { left: 100%; }
`,oxe=it`
  0% { transform: scale(1) translateY(0); opacity: 1; }
  50% { transform: scale(1.5) translateY(-20px); opacity: 1; }
  100% { transform: scale(1) translateY(-40px); opacity: 0; }
`,axe=it`
  0%, 100% { transform: translateY(0) rotate(0deg); }
  10% { transform: translateY(-12px) rotate(-3deg); }
  20% { transform: translateY(8px) rotate(2deg); }
  30% { transform: translateY(-10px) rotate(-2deg); }
  40% { transform: translateY(6px) rotate(1deg); }
  50% { transform: translateY(-8px) rotate(-1deg); }
  60% { transform: translateY(4px) rotate(1deg); }
  70% { transform: translateY(-6px) rotate(-1deg); }
  80% { transform: translateY(3px) rotate(0.5deg); }
  90% { transform: translateY(-4px) rotate(-0.5deg); }
`,sxe={macbookPro13:"(min-width: 1280px) and (max-width: 1440px) and (max-height: 900px)"},ZA=b("div",{target:"e1bcu66x48"})({name:"16mlace",styles:"width:100vw;height:100vh;background:linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);position:fixed;top:0;left:0;overflow:hidden;font-family:'Inter','SF Pro Display',-apple-system,sans-serif;font-size:14px"}),lxe=b("div",{target:"e1bcu66x47"})("width:100%;height:100%;display:grid;gap:0;grid-template-rows:80px 1fr 200px 100px;grid-template-columns:300px 1fr;@media ",sxe.macbookPro13,"{grid-template-rows:80px 1fr 200px 100px;grid-template-columns:300px 1fr;}"),cxe=b("div",{target:"e1bcu66x46"})("grid-column:1/-1;background:linear-gradient(90deg, #1e293b 0%, #334155 100%);display:flex;justify-content:space-between;align-items:center;color:white;box-shadow:0 4px 20px rgba(0, 0, 0, 0.1);border-bottom:1px solid #475569;padding:0 32px;",e=>e.timeWarning&&Ke("background:linear-gradient(90deg, #7f1d1d 0%, #991b1b 100%);animation:",m9," 1s ease-in-out infinite;",""),";"),T1=b("div",{target:"e1bcu66x45"})("display:flex;flex-direction:column;align-items:center;gap:4px;.label{font-size:12px;color:#94a3b8;font-weight:500;}.value{font-size:20px;font-weight:700;color:white;",e=>e.warning&&Ke("animation:",Zve," 1s ease-in-out infinite;",""),";}"),uxe=b("div",{target:"e1bcu66x44"})({name:"r3nye8",styles:"background:white;border-right:1px solid #e2e8f0;position:relative;overflow-y:auto;box-shadow:2px 0 10px rgba(0, 0, 0, 0.05);padding:20px"}),dxe=b("h3",{target:"e1bcu66x43"})({name:"54ue02",styles:"color:#1e293b;font-weight:700;margin-bottom:20px;text-align:center;letter-spacing:-0.025em;font-size:16px"}),pxe=b("div",{target:"e1bcu66x42"})({name:"dtkcwa",styles:"background:#f8fafc;padding:16px;display:grid;grid-template-rows:1fr 1fr;grid-template-columns:1fr 1fr;gap:16px;overflow:hidden"}),em=b("div",{target:"e1bcu66x41"})({name:"djw1lf",styles:"background:white;border-radius:12px;box-shadow:0 2px 10px rgba(0, 0, 0, 0.05);display:flex;flex-direction:column;gap:12px;min-height:0;padding:16px"}),lg=b("h4",{target:"e1bcu66x40"})({name:"wstntr",styles:"color:#1e293b;font-weight:600;text-align:center;margin:0 0 8px 0;flex-shrink:0;font-size:16px"}),I1=b("div",{target:"e1bcu66x39"})("display:grid;grid-template-columns:",e=>e.columns||"repeat(3, 1fr)",";gap:8px;flex:1;min-height:0;align-content:start;max-height:120px;overflow-y:auto;padding-top:8px;"),Yc=b("div",{target:"e1bcu66x38"})("background:white;border-radius:8px;text-align:center;cursor:pointer;border:2px solid ",e=>e.disabled?"#f1f5f9":e.selected?"#3b82f6":"#e2e8f0",";color:",e=>e.disabled?"#94a3b8":e.selected?"#1d4ed8":"#1e293b",";font-weight:600;transition:all 0.3s ease;position:relative;box-shadow:0 2px 8px rgba(0, 0, 0, 0.05);display:flex;align-items:center;justify-content:center;opacity:",e=>e.disabled?.4:1,";pointer-events:",e=>e.disabled?"none":"auto",";padding:6px 8px;height:35px;font-size:12px;&:hover:not([disabled]){transform:translateY(-2px);box-shadow:0 6px 20px rgba(0, 0, 0, 0.12);border-color:",e=>(e.selected,"#3b82f6"),";}",e=>e.selected&&`
    background: #eff6ff;
    color: #1d4ed8;
  `," ",e=>e.isProcessing&&Ke("animation:",exe," 1.5s ease-in-out infinite!important;pointer-events:none!important;cursor:not-allowed!important;",""),";"),hxe=b(Yc,{target:"e1bcu66x37"})(""),fxe=b(Yc,{target:"e1bcu66x36"})(""),gxe=b(Yc,{target:"e1bcu66x35"})(""),mxe=b("div",{target:"e1bcu66x34"})({name:"1buc089",styles:"grid-column:1/-1;background:white;border-radius:16px;display:flex;justify-content:center;align-items:flex-start;box-shadow:0 4px 20px rgba(0, 0, 0, 0.08);border-top:1px solid #e2e8f0;overflow-x:auto;padding:20px;gap:40px"});var vxe={name:"7hxku5",styles:"opacity:0.6;background:#f0fdf4;border-color:#10b981"};const xxe=b(Le.div,{target:"e1bcu66x33"})("background:white;border-radius:12px;margin-bottom:12px;box-shadow:0 2px 10px rgba(0, 0, 0, 0.08);border:1px solid #e2e8f0;position:relative;transition:all 0.3s ease;cursor:pointer;padding:16px;",e=>e.isCompleted&&vxe," ",e=>e.urgent&&Ke("animation:",m9," 1s ease-in-out infinite;",""),";"),yxe=b("div",{target:"e1bcu66x32"})({name:"1dcgnck",styles:"background:#6b7280;color:white;border-radius:6px;padding:2px 8px;font-weight:600;position:absolute;top:-6px;left:12px;letter-spacing:0.5px;font-size:10px"}),bxe=b("h3",{target:"e1bcu66x31"})({name:"jelfmw",styles:"color:#1e293b;margin-bottom:4px;font-weight:600;letter-spacing:-0.025em;margin-top:6px;font-size:14px"}),wxe=b(Le.div,{target:"e1bcu66x30"})("display:flex;flex-direction:column;align-items:center;cursor:pointer;border-radius:12px;border:2px solid ",e=>e.isSelected?"#3b82f6":"transparent",";background:",e=>e.isSelected?"#eff6ff":"transparent",";transition:all 0.3s ease;padding:16px;gap:12px;min-width:180px;&:hover{background:#f8fafc;}",e=>e.isProcessing&&Ke("animation:",Jve," 1.5s ease-in-out infinite;",""),";"),Sxe=b("div",{target:"e1bcu66x29"})({name:"zpwk6d",styles:"display:flex;align-items:center;gap:16px;width:100%"}),Cxe=b("div",{target:"e1bcu66x28"})({name:"dxkoxo",styles:"position:relative;display:flex;align-items:center;justify-content:center"});var _xe={name:"195n7n5",styles:"border-color:#10b981;background:#ecfdf5"};const kxe=b("div",{target:"e1bcu66x27"})("border:3px solid #374151;border-radius:0 0 6px 6px;position:relative;background:#f9fafb;overflow:hidden;flex-shrink:0;width:50px;height:70px;",e=>e.isCompleted&&_xe," ",e=>e.isSealing&&Ke("animation:",axe," 0.6s ease-in-out infinite;",""),";"),Exe=b("div",{target:"e1bcu66x26"})("position:absolute;bottom:0;left:0;right:0;height:",e=>e.fillLevel,"%;transition:height 6s ease-out,background 6s ease-out;",e=>{let t="transparent";if(e.milkType)switch(e.teaType){case"紅茶":t="#d2b48c";break;case"綠茶":t="#90ee90";break;case"烏龍茶":t="#daa520";break;case"麥茶":t="#e6c8a3";break;case"冬瓜茶":t="#f0e68c";break;case"玄米抹茶":t="#98fb98";break}else switch(e.teaType){case"紅茶":t="#8b4513";break;case"綠茶":t="#228b22";break;case"烏龍茶":t="#b8860b";break;case"麥茶":t="#cd853f";break;case"冬瓜茶":t="#daa520";break;case"玄米抹茶":t="#32cd32";break}return Ke("background:",t,";","")},";"),Txe=b("div",{target:"e1bcu66x25"})({name:"phkdfo",styles:"display:flex;flex-direction:column;gap:9px;flex:1"}),Ixe=b("div",{target:"e1bcu66x24"})({name:"1qbd68o",styles:"font-weight:600;color:#374151;text-align:center;font-size:14px"}),Axe=b("div",{target:"e1bcu66x23"})({name:"283q6o",styles:"display:flex;gap:4px;flex-wrap:wrap;justify-content:center"}),Pxe=b("div",{target:"e1bcu66x22"})("border:1px solid #666;border-radius:4px;font-weight:600;padding:3px 7px;font-size:10px;",e=>{let t="#gray",n="#fff";switch(e.type){case"珍珠":t="#2d1b69";break;case"椰果":t="#ffffff",n="#000";break;case"波霸":t="#1a1a1a";break;case"粉圓":t="#ff69b4";break;case"仙草凍":t="#2f4f4f";break;case"茶凍":t="#8fbc8f";break}return Ke("background:",t,";color:",n,";","")}," ",e=>e.isNew&&Ke("animation:",txe," 0.6s ease-out;",""),";"),e6=b(Le.div,{target:"e1bcu66x21"})({name:"12nbnuw",styles:"position:absolute;top:-8px;left:50%;transform:translateX(-50%) translateY(-100%);background:white;border-radius:8px;box-shadow:0 10px 25px rgba(0, 0, 0, 0.2);display:grid;grid-template-columns:repeat(2, 1fr);z-index:1000;border:1px solid #e2e8f0;padding:8px;gap:4px;min-width:160px"}),t6=b("div",{target:"e1bcu66x20"})({name:"kc1p1i",styles:"background:#f8fafc;color:#1e293b;border-radius:6px;cursor:pointer;text-align:center;font-weight:500;transition:all 0.2s ease;padding:8px 12px;font-size:12px;&:hover{background:#3b82f6;color:white;transform:translateY(-1px);}"}),Dxe=b(em,{target:"e1bcu66x19"})({name:"xs6ue",styles:"grid-template-rows:auto 1fr auto"}),Rxe=b("div",{target:"e1bcu66x18"})({name:"1vxtwg5",styles:"display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:12px"}),Nxe=b("div",{target:"e1bcu66x17"})({name:"zl1inp",styles:"display:flex;justify-content:center"}),Mxe=b(Yc,{target:"e1bcu66x16"})({name:"1cofnfw",styles:"background:white;color:#6b7280;width:100%;&:hover{background:#fef2f2;border-color:#ef4444;color:#dc2626;}"}),Oxe=b("div",{target:"e1bcu66x15"})({name:"7cn3ql",styles:"grid-column:1/-1;background:white;display:flex;justify-content:center;align-items:center;gap:24px;padding:20px;border-top:1px solid #e2e8f0;box-shadow:0 -4px 20px rgba(0, 0, 0, 0.05)"}),cg=b(Le.button,{target:"e1bcu66x14"})({name:"7tcscb",styles:"background:linear-gradient(45deg, #3b82f6 0%, #1d4ed8 100%);color:white;border:none;border-radius:8px;font-weight:600;cursor:pointer;box-shadow:0 4px 15px rgba(59, 130, 246, 0.3);transition:all 0.3s ease;padding:12px 24px;font-size:14px;&:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 25px rgba(59, 130, 246, 0.4);}&:disabled{opacity:0.5;cursor:not-allowed;transform:none;box-shadow:none;}"}),$xe=b(Le.div,{target:"e1bcu66x13"})({name:"zusqbq",styles:"position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0, 0, 0, 0.8);display:flex;justify-content:center;align-items:center;z-index:1000"}),Lxe=b(Le.div,{target:"e1bcu66x12"})({name:"50542l",styles:"background:white;border-radius:20px;padding:40px;text-align:center;max-width:500px;box-shadow:0 20px 60px rgba(0, 0, 0, 0.3)"}),Fxe=b(Le.div,{target:"e1bcu66x11"})({name:"1852pgl",styles:"position:fixed;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);display:flex;justify-content:center;align-items:center;z-index:1500"}),Bxe=b(Le.div,{target:"e1bcu66x10"})("font-size:120px;font-weight:900;color:white;text-shadow:0 0 20px rgba(255, 255, 255, 0.5);",Ke("animation:",nxe," 1s ease-in-out;",""),";"),zxe=b(Le.div,{target:"e1bcu66x9"})({name:"fai4zj",styles:"position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);background:#1f2937;color:white;padding:12px 24px;border-radius:8px;font-weight:600;z-index:100;box-shadow:0 10px 25px rgba(0, 0, 0, 0.3)"}),Vxe=b(Le.div,{target:"e1bcu66x8"})({name:"zusqbq",styles:"position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0, 0, 0, 0.8);display:flex;justify-content:center;align-items:center;z-index:1000"}),jxe=b(Le.div,{target:"e1bcu66x7"})({name:"8aql03",styles:"background:white;border-radius:20px;padding:40px;text-align:center;max-width:500px;box-shadow:0 20px 60px rgba(0, 0, 0, 0.3);h2{color:#1e293b;margin-bottom:20px;font-size:28px;}p{color:#64748b;margin-bottom:30px;font-size:16px;}"}),n6=b("div",{target:"e1bcu66x6"})("position:absolute;font-size:20px;font-weight:900;color:#000000;text-shadow:1px 1px 2px rgba(255, 255, 255, 0.8);pointer-events:none;z-index:100;",Ke("animation:",rxe," 0.6s ease-in-out infinite;","")," &.left{left:-30px;top:25%;transform:translateY(-50%) rotate(-15deg);}&.right{right:-30px;top:25%;transform:translateY(-50%) rotate(15deg);}"),Uxe=b("div",{target:"e1bcu66x5"})({name:"ify09q",styles:"display:flex;flex-direction:column;gap:8px;align-items:center"}),qxe=b("div",{target:"e1bcu66x4"})({name:"27ryvv",styles:"display:flex;gap:6px"}),r6=b("button",{target:"e1bcu66x3"})("padding:7px 14px;background:",e=>e.selected?"#3b82f6":"white",";color:",e=>e.selected?"white":"#1e293b",";border:2px solid ",e=>e.selected?"#3b82f6":"#e2e8f0",";border-radius:6px;cursor:pointer;font-weight:600;font-size:11px;transition:all 0.3s ease;&:hover{border-color:#3b82f6;}&:disabled{opacity:0.5;cursor:not-allowed;}"),Wxe=b("button",{target:"e1bcu66x2"})("padding:9px 18px;background:",e=>e.sealed?"#10b981":"#f59e0b",";color:white;border:none;border-radius:6px;cursor:pointer;font-weight:600;font-size:12px;transition:all 0.3s ease;min-width:85px;&:hover{transform:translateY(-1px);}&:disabled{opacity:0.5;cursor:not-allowed;transform:none;}"),Hxe=b(Le.div,{target:"e1bcu66x1"})("position:fixed;top:25%;left:0;right:0;background:",e=>e.correct?"linear-gradient(135deg, #10b981 0%, #059669 100%)":"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",";color:white;padding:24px 48px;font-size:28px;font-weight:900;z-index:1000;box-shadow:0 8px 40px rgba(0, 0, 0, 0.3);text-align:center;border-top:4px solid rgba(255, 255, 255, 0.3);border-bottom:4px solid rgba(255, 255, 255, 0.3);text-transform:uppercase;letter-spacing:3px;text-shadow:2px 2px 4px rgba(0, 0, 0, 0.3);opacity:0.92;&::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);animation:",ixe," 1.5s ease-out;}.result{font-size:36px;margin-bottom:12px;font-weight:900;display:flex;align-items:center;justify-content:center;gap:16px;&::before{content:'",e=>e.correct?"🎉":"❌","';font-size:40px;}&::after{content:'",e=>e.correct?"🎉":"❌","';font-size:40px;}}.points{font-size:24px;margin-bottom:8px;font-weight:700;opacity:0.9;}.time{font-size:16px;margin-bottom:12px;opacity:0.8;font-weight:500;}.details{font-size:14px;margin-top:12px;line-height:1.4;max-width:600px;margin-left:auto;margin-right:auto;opacity:0.9;font-weight:500;}"),Gxe=b(Le.div,{target:"e1bcu66x0"})("position:fixed;font-size:20px;font-weight:bold;pointer-events:none;z-index:1000;",Ke("animation:",oxe," 1s ease-out forwards;",""),";");function Yxe(){var q,X,ie,ne,Te,Me,st,lt;const e=["紅茶","綠茶","烏龍茶","麥茶","冬瓜茶","玄米抹茶"],t=["珍珠","波霸","椰果","粉圓","仙草凍","茶凍"],n=["全糖","七分糖","半糖","三分糖","無糖"],r=["正常冰","少冰","微冰","去冰"],i=[{key:"none",label:"不加奶"},{key:"milk_powder",label:"奶精"},{key:"fresh_milk",label:"鮮奶"},{key:"oat_milk",label:"燕麥奶"},{key:"soy_milk",label:"豆漿"}],[o,a]=D.useState(!1),[s,l]=D.useState(!0),[c,d]=D.useState(120),[p,f]=D.useState(0),[h,g]=D.useState(0),[m,v]=D.useState([]),[w,S]=D.useState([]),[C,A]=D.useState(0),[_,I]=D.useState(new Set),[E,k]=D.useState({}),[T,P]=D.useState(!1),[O,R]=D.useState(!1),[N,L]=D.useState(""),[B,V]=D.useState(!1),[j,z]=D.useState(3),[H,J]=D.useState(null),[de,ae]=D.useState(!1),[Ce,te]=D.useState(!1),[G,K]=D.useState(null),[me,ye]=D.useState([]),[ee,oe]=D.useState(!1),he=D.useRef(null),we=D.useRef(null),W=()=>{const Q=document.createElement("div");Q.style.position="fixed",Q.style.top="0",Q.style.left="0",Q.style.width="100%",Q.style.height="100%",Q.style.pointerEvents="none",Q.style.zIndex="999",document.body.appendChild(Q);const pe=["#3b82f6","#8b5cf6","#06b6d4","#10b981","#f59e0b","#ef4444"];for(let ke=0;ke<50;ke++){const Be=document.createElement("div");Be.style.position="absolute",Be.style.width=Math.random()*8+4+"px",Be.style.height=Math.random()*8+4+"px",Be.style.backgroundColor=pe[Math.floor(Math.random()*pe.length)],Be.style.left=Math.random()*100+"%",Be.style.top="-10px",Be.style.borderRadius=Math.random()>.5?"50%":"0";const Pe=Math.random()*2+2,nt=Math.random()*.5;Be.style.transition=`transform ${Pe}s ease-out ${nt}s, opacity ${Pe}s ease-out ${nt}s`,Q.appendChild(Be),setTimeout(()=>{Be.style.transform="translateY(-100px) rotate(360deg)",Be.style.opacity="0"},nt*1e3+10)}setTimeout(()=>{document.body.contains(Q)&&document.body.removeChild(Q)},4e3)},ge=Q=>{const{base:pe,milk:ke,toppings:Be,sweetness:Pe,ice:nt}=Q;let ht="";return Be.length>0&&(ht+=Be[0]),ke==="fresh_milk"?pe==="紅茶"?ht+="紅茶拿鐵":ht+=pe+"拿鐵":ke==="milk_powder"?pe==="紅茶"?ht+="奶茶":pe==="綠茶"?ht+="綠奶茶":pe==="烏龍茶"?ht+="烏龍奶茶":pe==="麥茶"?ht+="麥香奶茶":pe==="冬瓜茶"?ht+="冬瓜奶茶":pe==="玄米抹茶"&&(ht+="抹茶奶茶"):ke==="oat_milk"?ht+=pe+"燕麥拿鐵":ke==="soy_milk"?ht+=pe+"豆漿":ht+=pe,ht+=Pe+nt,ht},fe=()=>{const Q=Math.floor(Math.random()*4)+1,pe=[];for(let ke=0;ke<Q;ke++){const Be=e[Math.floor(Math.random()*e.length)],Pe=Math.random()<.2?"none":i[Math.floor(Math.random()*(i.length-1))+1].key,nt=Math.floor(Math.random()*3),ht=[],Mt=[...t].sort(()=>.5-Math.random());for(let wr=0;wr<nt;wr++)ht.push(Mt[wr]);const xn=n[Math.floor(Math.random()*n.length)],cn=r[Math.floor(Math.random()*r.length)],Kr={base:Be,milk:Pe,toppings:ht,sweetness:xn,ice:cn},Yt=ge(Kr);pe.push({id:Date.now()+ke,productName:Yt,components:Kr,completed:!1})}v(pe),ve(pe),I(new Set),J(Date.now()),L("高難度訂單到達"),setTimeout(()=>L(""),2e3)},ve=Q=>{const pe=Q.map((ke,Be)=>({id:Be,orderId:ke.id,base:"",milk:"",toppings:[],sweetness:"",ice:"",straw:"",sealed:!1,fillLevel:0,isPouring:!1}));S(pe),A(0)},ce=Q=>{if(C>=w.length)return;const ke=`tea_${C}`;E[ke]||(k(Be=>({...Be,[ke]:!0})),S(Be=>Be.map((Pe,nt)=>nt===C?{...Pe,base:Q,isPouring:!0,fillLevel:80}:Pe)),setTimeout(()=>{S(Be=>Be.map((Pe,nt)=>nt===C?{...Pe,isPouring:!1}:Pe)),k(Be=>({...Be,[ke]:!1}))},6e3))},De=Q=>{if(C>=w.length||!w[C].base)return;const Be=`milk_${C}`;E[Be]||(k(Pe=>({...Pe,[Be]:!0})),S(Pe=>Pe.map((nt,ht)=>ht===C?{...nt,milk:Q}:nt)),setTimeout(()=>{k(Pe=>({...Pe,[Be]:!1}))},6e3))},He=(Q,pe)=>{if(C>=w.length)return;const ke=C,Be=E[`tea_${ke}`],Pe=E[`milk_${ke}`];Be||Pe||S(nt=>nt.map((ht,Mt)=>{if(Mt!==C)return ht;if(Q==="toppings"){if(!ht.toppings.includes(pe)){const xn=[...ht.toppings,pe],cn=xn.length-1;return setTimeout(()=>{S(Kr=>Kr.map((Yt,wr)=>wr===C?{...Yt,newToppingIndex:null}:Yt))},600),{...ht,toppings:xn,newToppingIndex:cn}}return ht}return{...ht,[Q]:pe}}))},Ue=()=>w[C]||{base:"",milk:"",toppings:[],sweetness:"",ice:"",straw:"",sealed:!1,fillLevel:0},et=(Q,pe)=>{if(C>=w.length)return!0;const ke=w[C],Be=C,Pe=E[`tea_${Be}`],nt=E[`milk_${Be}`];if(ke.sealed||Q==="base"&&Pe||Q==="milk"&&nt||(Q==="sweetness"||Q==="ice"||Q==="toppings")&&(Pe||nt))return!0;switch(Q){case"base":return ke.base!==""&&ke.base!==pe;case"milk":return ke.milk!==""&&ke.milk!==pe;case"sweetness":return ke.sweetness!==""&&ke.sweetness!==pe;case"ice":return ke.ice!==""&&ke.ice!==pe;default:return!1}},pt=Q=>{if(C>=w.length)return!1;const pe=w[C],ke=C,Be=E[`tea_${ke}`],Pe=E[`milk_${ke}`];return!(pe.sealed||(Q==="sweetness"||Q==="ice")&&(Be||Pe))};D.useEffect(()=>()=>{he.current&&clearInterval(he.current),we.current&&clearInterval(we.current)},[]),D.useEffect(()=>{if(s){const Q=setTimeout(()=>{jt()},3e3);return()=>clearTimeout(Q)}},[s]);const jt=()=>{l(!1),V(!0),z(3),we.current&&clearInterval(we.current),we.current=setInterval(()=>{z(Q=>Q===1?(clearInterval(we.current),we.current=null,setTimeout(()=>{V(!1),a(!0),Rt()},1e3),"開始！"):Q-1)},1e3)},Rt=()=>{fe(),he.current&&(clearInterval(he.current),he.current=null),he.current=setInterval(()=>{d(Q=>Q<=1?(clearInterval(he.current),he.current=null,ln(),0):(Q===30&&(L("時間不多了！"),setTimeout(()=>L(""),3e3)),Q-1))},1e3)},ln=()=>{ae(!0),te(!0)},gt=()=>{a(!1),l(!0),d(120),f(0),g(0),v([]),S([]),A(0),I(new Set),k({}),L(""),ae(!1),te(!1),he.current&&(clearInterval(he.current),he.current=null),we.current&&(clearInterval(we.current),we.current=null)},wt=()=>{const Q=Object.values(E).some(ke=>ke),pe=w.every(ke=>ke.sealed);return w.length>0&&pe&&!Q&&!ee},at=()=>{if(!wt())return;oe(!0);let Q=!0,pe=0,ke=[];w.forEach((Pe,nt)=>{const ht=m[nt];if(!ht)return;const{components:Mt}=ht;let xn=!0,cn=[];if(Pe.base!==Mt.base&&(xn=!1,cn.push(`茶底錯誤: 應該是${Mt.base}，實際是${Pe.base||"無"}`)),Mt.milk==="none")Pe.milk!==""&&Pe.milk!=="none"&&(xn=!1,cn.push(`奶類錯誤: 純茶不應該加奶，實際選擇了${Pe.milk==="milk_powder"?"奶精":Pe.milk==="fresh_milk"?"鮮奶":Pe.milk==="oat_milk"?"燕麥奶":Pe.milk==="soy_milk"?"豆漿":Pe.milk}`));else if(Pe.milk!==Mt.milk){xn=!1;const wr={none:"不加奶",milk_powder:"奶精",fresh_milk:"鮮奶",oat_milk:"燕麥奶",soy_milk:"豆漿"};cn.push(`奶類錯誤: 應該是${wr[Mt.milk]}，實際是${wr[Pe.milk]||"無"}`)}Pe.sweetness!==Mt.sweetness&&(xn=!1,cn.push(`甜度錯誤: 應該是${Mt.sweetness}，實際是${Pe.sweetness||"無"}`)),Pe.ice!==Mt.ice&&(xn=!1,cn.push(`冰塊錯誤: 應該是${Mt.ice}，實際是${Pe.ice||"無"}`)),Pe.toppings.length!==Mt.toppings.length?(xn=!1,cn.push(`配料數量錯誤: 應該有${Mt.toppings.length}種，實際有${Pe.toppings.length}種`)):Mt.toppings.length>0&&(Mt.toppings.every(ro=>Pe.toppings.includes(ro))||(xn=!1,cn.push(`配料錯誤: 應該是${Mt.toppings.join("、")}，實際是${Pe.toppings.join("、")||"無"}`)));const Kr=Mt.toppings.length>0,Yt=Kr?"thick":"thin";Pe.straw!==Yt&&(xn=!1,cn.push(`吸管錯誤: 應該用${Kr?"粗":"細"}吸管`)),xn||(Q=!1,ke.push(`杯子${nt+1}: ${cn.join("、")}`)),pe+=xn?15:-5});const Be=Date.now()-H;Q&&Be<6e4&&(pe+=10),Q?(pe+=Math.min(h,10),L("完美製作！"),W()):(L("有錯誤！"),console.log("錯誤詳情:",ke)),f(Pe=>Math.max(0,Pe+pe)),g(Pe=>Q?Pe+1:0),K({correct:Q,points:pe,timeTaken:Math.round(Be/1e3),details:ke}),_t(pe,Q),setTimeout(()=>{S(Pe=>Pe.map(nt=>({...nt,isExiting:!0}))),setTimeout(()=>{fe()},500)},1500),setTimeout(()=>{K(null),L(""),oe(!1)},3e3)},_t=(Q,pe)=>{const ke={id:Date.now(),points:Q,isCorrect:pe,x:Math.random()*window.innerWidth,y:window.innerHeight/2};ye(Be=>[...Be,ke]),setTimeout(()=>{ye(Be=>Be.filter(Pe=>Pe.id!==ke.id))},1e3)},Ht=()=>{if(C>=w.length)return;const Q=w[C];if(!Q.base||!Q.straw||Q.sealed)return;const pe=C,ke=E[`tea_${pe}`],Be=E[`milk_${pe}`];if(ke||Be)return;const Pe=`seal_${pe}`;k(nt=>({...nt,[Pe]:!0})),L("封膜中..."),setTimeout(()=>{S(nt=>nt.map((ht,Mt)=>Mt===C?{...ht,sealed:!0}:ht)),L("封膜完成"),W(),k(nt=>({...nt,[Pe]:!1})),setTimeout(()=>L(""),2e3)},3e3)};return o?y(ZA,{children:[y(lxe,{children:[y(cxe,{timeWarning:c<=30,children:[y(T1,{children:[u("div",{className:"label",children:"高難度模式"}),y("div",{className:"value",children:["時間: ",Math.floor(c/60),":",(c%60).toString().padStart(2,"0")]})]}),y(T1,{children:[u("div",{className:"label",children:"得分"}),u("div",{className:"value",children:p})]}),y(T1,{children:[u("div",{className:"label",children:"連續"}),u("div",{className:"value",children:h})]})]}),y(uxe,{children:[u(dxe,{children:"高難度訂單"}),m.map((Q,pe)=>y(xxe,{isCompleted:_.has(pe),isNew:pe===0,urgent:c<=30,children:[y(yxe,{children:["訂單 #",String(pe+1).padStart(3,"0")]}),u(bxe,{children:Q.productName})]},Q.id))]}),y(pxe,{children:[y(em,{children:[u(lg,{children:"茶飲基底"}),u(I1,{columns:"repeat(3, 1fr)",children:e.map(Q=>{var pe,ke;return u(hxe,{selected:((pe=Ue())==null?void 0:pe.base)===Q,disabled:et("base",Q),isProcessing:E[`tea_${C}`]&&((ke=Ue())==null?void 0:ke.base)===Q,onClick:()=>!et("base",Q)&&ce(Q),children:Q},Q)})})]}),y(em,{children:[u(lg,{children:"奶類選擇"}),u(I1,{columns:"repeat(2, 1fr)",children:i.filter(Q=>Q.key!=="none").map(Q=>{var pe,ke;return u(fxe,{selected:((pe=Ue())==null?void 0:pe.milk)===Q.key,disabled:et("milk",Q.key),isProcessing:E[`milk_${C}`]&&((ke=Ue())==null?void 0:ke.milk)===Q.key,onClick:()=>!et("milk",Q.key)&&De(Q.key),children:Q.label},Q.key)})})]}),y(em,{children:[u(lg,{children:"配料選擇"}),u(I1,{columns:"repeat(3, 1fr)",children:t.map(Q=>{var pe,ke;return u(gxe,{selected:((ke=(pe=Ue())==null?void 0:pe.toppings)==null?void 0:ke.includes(Q))||!1,disabled:et("toppings",Q),onClick:()=>!et("toppings",Q)&&He("toppings",Q),children:Q},Q)})})]}),y(Dxe,{children:[u(lg,{children:"調味設定"}),y(Rxe,{children:[y("div",{style:{position:"relative"},onMouseEnter:()=>pt("sweetness")&&P(!0),onMouseLeave:()=>P(!1),children:[u(Yc,{selected:!!((q=Ue())!=null&&q.sweetness),disabled:et("sweetness",(X=Ue())==null?void 0:X.sweetness),children:((ie=Ue())==null?void 0:ie.sweetness)||"甜度"}),u(Ft,{children:T&&pt("sweetness")&&u(e6,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},children:n.map(Q=>u(t6,{onClick:()=>{et("sweetness",Q)||He("sweetness",Q),P(!1)},children:Q},Q))})})]}),y("div",{style:{position:"relative"},onMouseEnter:()=>pt("ice")&&R(!0),onMouseLeave:()=>R(!1),children:[u(Yc,{selected:!!((ne=Ue())!=null&&ne.ice),disabled:et("ice",(Te=Ue())==null?void 0:Te.ice),children:((Me=Ue())==null?void 0:Me.ice)||"冰塊"}),u(Ft,{children:O&&pt("ice")&&u(e6,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},children:r.map(Q=>u(t6,{onClick:()=>{et("ice",Q)||He("ice",Q),R(!1)},children:Q},Q))})})]})]}),u(Nxe,{children:u(Mxe,{disabled:C>=w.length||((st=Ue())==null?void 0:st.sealed),onClick:()=>{var Q;C<w.length&&!((Q=Ue())!=null&&Q.sealed)&&S(pe=>pe.map((ke,Be)=>Be===C?{...ke,base:"",milk:"",toppings:[],sweetness:"",ice:"",straw:"",sealed:!1,fillLevel:0}:ke))},children:(lt=Ue())!=null&&lt.sealed?"已封膜":"重新開始"})})]})]}),u(mxe,{children:u(Ft,{children:w.map((Q,pe)=>u(wxe,{isSelected:C===pe,isProcessing:E[`tea_${pe}`]||E[`milk_${pe}`],isSealing:E[`seal_${pe}`],onClick:()=>A(pe),initial:{x:300,opacity:0,scale:.8},animate:{x:Q.isExiting?-300:0,opacity:Q.isExiting?0:1,scale:Q.isExiting?.8:1},exit:{x:-300,opacity:0,scale:.8},transition:{type:"spring",stiffness:200,damping:25,duration:.8},children:y(Sxe,{children:[y(Cxe,{children:[u(kxe,{isProcessing:Q.isPouring,isSealing:E[`seal_${pe}`],children:u(Exe,{teaType:Q.base,milkType:Q.milk,fillLevel:Q.fillLevel,isPouring:Q.isPouring})}),E[`seal_${pe}`]&&y(Ne,{children:[u(n6,{className:"left",children:"搖"}),u(n6,{className:"right",children:"搖"})]})]}),y(Txe,{children:[y(Ixe,{children:["杯子 ",pe+1]}),u(Axe,{children:(Q.toppings||[]).map((ke,Be)=>u(Pxe,{type:ke,isNew:Q.newToppingIndex===Be,children:ke},`${ke}-${Be}`))}),y(Uxe,{children:[y(qxe,{children:[u(r6,{selected:Q.straw==="thin",disabled:Q.sealed,onClick:ke=>{ke.stopPropagation(),Q.sealed||S(Be=>Be.map((Pe,nt)=>nt===pe?{...Pe,straw:"thin"}:Pe))},children:"細吸管"}),u(r6,{selected:Q.straw==="thick",disabled:Q.sealed,onClick:ke=>{ke.stopPropagation(),Q.sealed||S(Be=>Be.map((Pe,nt)=>nt===pe?{...Pe,straw:"thick"}:Pe))},children:"粗吸管"})]}),u(Wxe,{sealed:Q.sealed,disabled:!Q.base||!Q.straw||Q.sealed||E[`seal_${pe}`]||E[`tea_${pe}`]||E[`milk_${pe}`],onClick:ke=>{ke.stopPropagation(),C===pe&&Ht()},children:E[`seal_${pe}`]?"封膜中...":Q.sealed?"已封膜":"封膜"})]})]})]})},Q.id))})}),u(Oxe,{children:u(cg,{onClick:at,disabled:!wt(),children:"送單完成"})})]}),u(Ft,{children:N&&u(zxe,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0},children:N})}),u(Ft,{children:Ce&&u(Vxe,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:y(jxe,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},children:[u("h2",{children:"🎉 高難度挑戰完成！"}),y("p",{children:["最終得分: ",p," 分",u("br",{}),"最高連續: ",h," 杯",u("br",{}),"完成訂單: ",_.size,"/",m.length," 杯"]}),y("div",{style:{display:"flex",gap:"16px",justifyContent:"center"},children:[u(cg,{onClick:gt,children:"再次挑戰"}),u(cg,{onClick:()=>window.location.href="/exams",style:{background:"#6b7280"},children:"返回選單"})]})]})})}),u(Ft,{children:G&&y(Hxe,{correct:G.correct,initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},transition:{type:"spring",stiffness:400,damping:30},children:[u("div",{className:"result",children:G.correct?"全部正確！":"有錯誤！"}),y("div",{className:"points",children:[G.correct?`+${G.points}`:`${G.points}`," 分"]}),y("div",{className:"time",children:["用時: ",G.timeTaken,"秒"]}),G.details&&G.details.length>0&&u("div",{className:"details",children:G.details.slice(0,3).map((Q,pe)=>u("div",{children:Q},pe))})]})}),u(Ft,{children:me.map(Q=>y(Gxe,{style:{left:Q.x,top:Q.y,color:Q.isCorrect?"#10b981":"#ef4444"},children:[Q.isCorrect?"+":"",Q.points]},Q.id))})]}):y(ZA,{children:[u(Ft,{children:s&&u($xe,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:y(Lxe,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},children:[u("h2",{style:{color:"#1e293b",marginBottom:"20px"},children:"🔥 高難度模式"}),y("p",{style:{color:"#64748b",marginBottom:"30px"},children:["挑戰更多茶類、奶類和配料組合！",u("br",{}),"更複雜的訂單正在等待您的完美製作。"]}),u(cg,{onClick:jt,children:"開始挑戰"})]})})}),u(Ft,{children:B&&u(Fxe,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:u(Bxe,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:2,opacity:0},children:j},j)})})]})}it`
  from { transform: translateX(100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
`;const $h=it`
  0% { 
    box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.9);
    border-color: #f59e0b;
  }
  50% { 
    box-shadow: 0 0 0 15px rgba(245, 158, 11, 0.3);
    border-color: #d97706;
  }
  100% { 
    box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.9);
    border-color: #f59e0b;
  }
`,Kxe=it`
  0% { 
    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.8);
    border-color: #3b82f6;
  }
  100% { 
    box-shadow: 0 0 0 15px rgba(59, 130, 246, 0);
    border-color: #1d4ed8;
  }
`,Xxe=it`
  0% { 
    transform: scale(0) rotate(0deg);
    opacity: 0;
  }
  50% { 
    transform: scale(1.3) rotate(180deg);
    opacity: 1;
  }
  100% { 
    transform: scale(1) rotate(360deg);
    opacity: 1;
  }
`,Qxe=it`
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
`,Jxe=it`
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
`,Zxe={macbookPro13:"(min-width: 1280px) and (max-width: 1440px) and (max-height: 900px)"},eye=b("div",{target:"e1aj6vi450"})({name:"16mlace",styles:"width:100vw;height:100vh;background:linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);position:fixed;top:0;left:0;overflow:hidden;font-family:'Inter','SF Pro Display',-apple-system,sans-serif;font-size:14px"}),tye=b("div",{target:"e1aj6vi449"})("width:100%;height:100%;display:grid;gap:0;grid-template-rows:80px 1fr 200px 100px;grid-template-columns:300px 1fr;@media ",Zxe.macbookPro13,"{grid-template-rows:80px 1fr 200px 100px;grid-template-columns:300px 1fr;}"),nye=b("div",{target:"e1aj6vi448"})({name:"s9do8c",styles:"grid-column:1/-1;background:linear-gradient(90deg, #1e293b 0%, #334155 100%);display:flex;justify-content:space-between;align-items:center;color:white;box-shadow:0 4px 20px rgba(0, 0, 0, 0.1);border-bottom:1px solid #475569;padding:0 32px"}),A1=b("div",{target:"e1aj6vi447"})({name:"1r8mxrf",styles:"display:flex;flex-direction:column;align-items:center;gap:4px;.label{font-size:12px;color:#94a3b8;font-weight:500;}.value{font-size:20px;font-weight:700;color:white;}"}),rye=b("div",{target:"e1aj6vi446"})({name:"r3nye8",styles:"background:white;border-right:1px solid #e2e8f0;position:relative;overflow-y:auto;box-shadow:2px 0 10px rgba(0, 0, 0, 0.05);padding:20px"}),iye=b("h3",{target:"e1aj6vi445"})({name:"54ue02",styles:"color:#1e293b;font-weight:700;margin-bottom:20px;text-align:center;letter-spacing:-0.025em;font-size:16px"});var oye={name:"7r5xb3",styles:"border-color:#3b82f6;background:#eff6ff"};const aye=b(Le.div,{target:"e1aj6vi444"})("background:white;border-radius:12px;margin-bottom:12px;box-shadow:0 2px 10px rgba(0, 0, 0, 0.08);border:1px solid #e2e8f0;position:relative;transition:all 0.3s ease;cursor:pointer;padding:16px;",e=>e.isHighlighted&&Ke("animation:",$h," 2s ease-in-out infinite;","")," ",e=>e.isActive&&oye," &:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(0, 0, 0, 0.12);}"),sye=b("div",{target:"e1aj6vi443"})({name:"1dcgnck",styles:"background:#6b7280;color:white;border-radius:6px;padding:2px 8px;font-weight:600;position:absolute;top:-6px;left:12px;letter-spacing:0.5px;font-size:10px"}),lye=b("h3",{target:"e1aj6vi442"})({name:"jelfmw",styles:"color:#1e293b;margin-bottom:4px;font-weight:600;letter-spacing:-0.025em;margin-top:6px;font-size:14px"}),cye=b("div",{target:"e1aj6vi441"})({name:"1jsezqd",styles:"background:#f8fafc;display:grid;grid-template-rows:1fr 1fr;grid-template-columns:1fr 1fr;overflow:hidden;padding:16px;gap:16px"}),tm=b("div",{target:"e1aj6vi440"})("background:white;border-radius:12px;box-shadow:0 2px 10px rgba(0, 0, 0, 0.05);display:flex;flex-direction:column;gap:12px;min-height:0;padding:16px;",e=>e.isHighlighted&&Ke("animation:",$h," 2s ease-in-out infinite;",""),";"),ug=b("h4",{target:"e1aj6vi439"})({name:"wstntr",styles:"color:#1e293b;font-weight:600;text-align:center;margin:0 0 8px 0;flex-shrink:0;font-size:16px"}),P1=b("div",{target:"e1aj6vi438"})("display:grid;grid-template-columns:",e=>e.columns||"repeat(2, 1fr)",";gap:8px;flex:1;min-height:0;align-content:start;"),Kc=b("div",{target:"e1aj6vi437"})("background:white;border-radius:8px;text-align:center;cursor:pointer;border:2px solid ",e=>e.disabled?"#f1f5f9":e.selected?"#3b82f6":"#e2e8f0",";color:",e=>e.disabled?"#94a3b8":e.selected?"#1d4ed8":"#1e293b",";font-weight:600;transition:all 0.3s ease;position:relative;box-shadow:0 2px 8px rgba(0, 0, 0, 0.05);display:flex;align-items:center;justify-content:center;opacity:",e=>e.disabled?.4:1,";pointer-events:",e=>e.disabled?"none":"auto",";padding:8px 12px;height:45px;font-size:13px;&:hover:not([disabled]){transform:translateY(-2px);box-shadow:0 6px 20px rgba(0, 0, 0, 0.12);border-color:",e=>(e.selected,"#3b82f6"),";}",e=>e.selected&&`
    background: #eff6ff;
    color: #1d4ed8;
  `," ",e=>e.isProcessing&&Ke("animation:",Kxe," 1.5s ease-in-out infinite!important;pointer-events:none!important;cursor:not-allowed!important;",""),";"),uye=b(Kc,{target:"e1aj6vi436"})(""),dye=b(Kc,{target:"e1aj6vi435"})(e=>e.selected&&`
    background: #ecfdf5;
    color: #047857;
    border-color: #10b981;
  `,";"),pye=b(Kc,{target:"e1aj6vi434"})(e=>e.selected&&`
    background: #f3f4f6;
    color: #7c3aed;
    border-color: #8b5cf6;
  `,";"),hye=b(tm,{target:"e1aj6vi433"})({name:"xs6ue",styles:"grid-template-rows:auto 1fr auto"}),fye=b("div",{target:"e1aj6vi432"})({name:"1vxtwg5",styles:"display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:12px"}),gye=b("div",{target:"e1aj6vi431"})({name:"zl1inp",styles:"display:flex;justify-content:center"}),mye=b(Kc,{target:"e1aj6vi430"})({name:"1cofnfw",styles:"background:white;color:#6b7280;width:100%;&:hover{background:#fef2f2;border-color:#ef4444;color:#dc2626;}"}),i6=b(Le.div,{target:"e1aj6vi429"})({name:"12nbnuw",styles:"position:absolute;top:-8px;left:50%;transform:translateX(-50%) translateY(-100%);background:white;border-radius:8px;box-shadow:0 10px 25px rgba(0, 0, 0, 0.2);display:grid;grid-template-columns:repeat(2, 1fr);z-index:1000;border:1px solid #e2e8f0;padding:8px;gap:4px;min-width:160px"}),o6=b("div",{target:"e1aj6vi428"})({name:"kc1p1i",styles:"background:#f8fafc;color:#1e293b;border-radius:6px;cursor:pointer;text-align:center;font-weight:500;transition:all 0.2s ease;padding:8px 12px;font-size:12px;&:hover{background:#3b82f6;color:white;transform:translateY(-1px);}"}),vye=b("div",{target:"e1aj6vi427"})({name:"1buc089",styles:"grid-column:1/-1;background:white;border-radius:16px;display:flex;justify-content:center;align-items:flex-start;box-shadow:0 4px 20px rgba(0, 0, 0, 0.08);border-top:1px solid #e2e8f0;overflow-x:auto;padding:20px;gap:40px"}),xye=b(Le.div,{target:"e1aj6vi426"})("display:flex;flex-direction:column;align-items:center;cursor:pointer;border-radius:12px;border:2px solid ",e=>e.isSelected?"#3b82f6":"transparent",";background:",e=>e.isSelected?"#eff6ff":"transparent",";transition:all 0.3s ease;padding:16px;gap:12px;min-width:180px;&:hover{background:#f8fafc;}",e=>e.isHighlighted&&Ke("animation:",$h," 2s ease-in-out infinite;",""),";"),yye=b("div",{target:"e1aj6vi425"})({name:"zpwk6d",styles:"display:flex;align-items:center;gap:16px;width:100%"}),bye=b("div",{target:"e1aj6vi424"})({name:"dxkoxo",styles:"position:relative;display:flex;align-items:center;justify-content:center"});var wye={name:"195n7n5",styles:"border-color:#10b981;background:#ecfdf5"};const Sye=b("div",{target:"e1aj6vi423"})("border:3px solid #374151;border-radius:0 0 6px 6px;position:relative;background:#f9fafb;overflow:hidden;flex-shrink:0;width:50px;height:70px;",e=>e.isCompleted&&wye,";"),Cye=b("div",{target:"e1aj6vi422"})("position:absolute;bottom:0;left:0;right:0;background:",e=>{if(e.milkType){if(e.teaType==="紅茶")return"#d2b48c";if(e.teaType==="綠茶")return"#90ee90";if(e.teaType==="烏龍茶")return"#daa520";if(e.teaType==="麥茶")return"#e6c8a3"}return e.teaType==="紅茶"?"#8b4513":e.teaType==="綠茶"?"#228b22":e.teaType==="烏龍茶"?"#b8860b":e.teaType==="麥茶"?"#cd853f":"transparent"},";height:",e=>e.fillLevel,"%;transition:height 0.6s ease-out,background 0.6s ease-out;"),_ye=b("div",{target:"e1aj6vi421"})({name:"phkdfo",styles:"display:flex;flex-direction:column;gap:9px;flex:1"}),kye=b("div",{target:"e1aj6vi420"})({name:"1qbd68o",styles:"font-weight:600;color:#374151;text-align:center;font-size:14px"}),Eye=b("div",{target:"e1aj6vi419"})({name:"283q6o",styles:"display:flex;gap:4px;flex-wrap:wrap;justify-content:center"}),Tye=b("div",{target:"e1aj6vi418"})("background:",e=>e.type==="珍珠"?"#2d1b69":e.type==="椰果"?"#ffffff":e.type==="波霸"?"#1a1a1a":e.type==="粉圓"?"#ff69b4":"#gray",";color:",e=>e.type==="椰果"?"#000":"#fff",";border:1px solid #666;border-radius:4px;font-weight:600;padding:3px 7px;font-size:10px;",e=>e.isNew&&Ke("animation:",Xxe," 0.6s ease-out;",""),";"),Iye=b("div",{target:"e1aj6vi417"})({name:"ify09q",styles:"display:flex;flex-direction:column;gap:8px;align-items:center"}),Aye=b("div",{target:"e1aj6vi416"})({name:"27ryvv",styles:"display:flex;gap:6px"}),a6=b("button",{target:"e1aj6vi415"})("background:",e=>e.selected?"#3b82f6":"white",";color:",e=>e.selected?"white":"#1e293b",";border:2px solid ",e=>e.selected?"#3b82f6":"#e2e8f0",";border-radius:6px;cursor:pointer;font-weight:600;transition:all 0.3s ease;padding:7px 14px;font-size:11px;&:hover{border-color:#3b82f6;}&:disabled{opacity:0.5;cursor:not-allowed;}"),Pye=b("button",{target:"e1aj6vi414"})("background:",e=>e.sealed?"#10b981":"#f59e0b",";color:white;border:none;border-radius:6px;cursor:pointer;font-weight:600;transition:all 0.3s ease;padding:9px 18px;font-size:12px;min-width:85px;&:hover{transform:translateY(-1px);}&:disabled{opacity:0.5;cursor:not-allowed;transform:none;}",e=>e.isHighlighted&&Ke("animation:",$h," 2s ease-in-out infinite;",""),";"),Dye=b("div",{target:"e1aj6vi413"})({name:"1afe4b8",styles:"grid-column:1/-1;background:white;display:flex;justify-content:center;align-items:center;border-top:1px solid #e2e8f0;box-shadow:0 -4px 20px rgba(0, 0, 0, 0.05);padding:20px;gap:24px"}),Rye=b(Le.button,{target:"e1aj6vi412"})("background:linear-gradient(45deg, #3b82f6 0%, #1d4ed8 100%);color:white;border:none;border-radius:8px;font-weight:600;cursor:pointer;box-shadow:0 4px 15px rgba(59, 130, 246, 0.3);transition:all 0.3s ease;padding:12px 24px;font-size:14px;&:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 25px rgba(59, 130, 246, 0.4);}&:disabled{opacity:0.5;cursor:not-allowed;transform:none;box-shadow:none;}",e=>e.isHighlighted&&Ke("animation:",$h," 2s ease-in-out infinite;",""),";"),s6=b(Le.div,{target:"e1aj6vi411"})({name:"vkawwv",styles:"position:fixed;z-index:1000;pointer-events:none;>*{pointer-events:auto;}"}),l6=b(Le.div,{target:"e1aj6vi410"})({name:"zftbxm",styles:"background:white;border-radius:20px;box-shadow:0 20px 60px rgba(0, 0, 0, 0.3);text-align:center;position:fixed;border:2px solid #3b82f6;transition:all 0.6s cubic-bezier(0.4, 0, 0.2, 1);padding:20px;max-width:380px;width:90%;max-height:70vh;overflow-y:auto"}),c6=b("h2",{target:"e1aj6vi49"})({name:"1d2fep5",styles:"color:#333;margin-bottom:15px;font-size:18px"}),u6=b("p",{target:"e1aj6vi48"})({name:"np6py5",styles:"color:#666;margin-bottom:20px;line-height:1.6;font-size:14px"}),d6=b("div",{target:"e1aj6vi47"})({name:"qzx86k",styles:"display:flex;gap:12px;justify-content:center"}),ed=b("button",{target:"e1aj6vi46"})({name:"1ol7ahr",styles:"border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all 0.3s ease;padding:8px 16px;font-size:12px;&.primary{background:#3b82f6;color:white;&:hover{background:#2563eb;transform:translateY(-1px);}}&.secondary{background:#f3f4f6;color:#6b7280;&:hover{background:#e5e7eb;transform:translateY(-1px);}}"}),Nye=b(Le.div,{target:"e1aj6vi45"})({name:"1u90x1y",styles:"position:fixed;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:1500;color:white"}),Mye=b("div",{target:"e1aj6vi44"})("width:60px;height:60px;border:4px solid rgba(255, 255, 255, 0.3);border-top:4px solid white;border-radius:50%;animation:",Qxe," 1s linear infinite;margin-bottom:30px;"),Oye=b("h2",{target:"e1aj6vi43"})({name:"itek4h",styles:"font-weight:700;margin-bottom:20px;text-align:center;font-size:32px"}),$ye=b("p",{target:"e1aj6vi42"})("text-align:center;line-height:1.6;max-width:600px;margin:0 20px 20px;animation:",Jxe," 2s ease-in-out infinite;font-size:18px;"),Lye=b("div",{target:"e1aj6vi41"})({name:"c0djwh",styles:"width:300px;height:6px;background:rgba(255, 255, 255, 0.3);border-radius:3px;overflow:hidden;margin:20px 0"}),Fye=b(Le.div,{target:"e1aj6vi40"})({name:"1t6swnk",styles:"height:100%;background:linear-gradient(90deg, #fff, #f0f8ff);border-radius:3px"});function Bye(){var ee,oe,he,we;const e=qt(),[t,n]=D.useState(0),[r,i]=D.useState(!0),[o,a]=D.useState("tutorial"),[s,l]=D.useState(1),[c,d]=D.useState(null),[p,f]=D.useState(new Set),[h,g]=D.useState(!1),[m,v]=D.useState({top:"20px",right:"20px"}),[w,S]=D.useState(!1),[C,A]=D.useState(!1),[_]=D.useState([{id:1,title:"珍珠奶茶",tea:"紅茶",milk:"奶精",toppings:["珍珠"],sweetness:"半糖",ice:"少冰",isActive:!0},{id:2,title:"珍珠紅茶拿鐵",tea:"紅茶",milk:"鮮奶",toppings:["珍珠"],sweetness:"微糖",ice:"正常冰",isActive:!1}]),[I,E]=D.useState([{id:1,tea:"",milk:"",toppings:[],sweetness:"",ice:"",straw:"",isSealed:!1,isCompleted:!1},{id:2,tea:"",milk:"",toppings:[],sweetness:"",ice:"",straw:"",isSealed:!1,isCompleted:!1}]),k=[{title:"歡迎來到飲料製作教學！",text:"讓我們學習如何製作美味的飲料。首先，請仔細觀察左側的訂單內容。第一杯是「珍珠奶茶」，我們開始製作第一杯！",highlight:".order-list",allowedInteractions:[]},{title:"選擇茶底",text:"很好！現在我們開始製作珍珠奶茶。根據訂單，這杯需要紅茶茶底。點擊紅茶按鈕。",highlight:".tea-controls",allowedInteractions:["tea-紅茶"]},{title:"添加奶類",text:"茶底準備好了！接下來添加奶類。珍珠奶茶需要奶精，點擊奶精按鈕。",highlight:".milk-controls",allowedInteractions:["milk-奶精"]},{title:"加入配料",text:"現在添加配料。這杯奶茶需要珍珠，點擊珍珠按鈕。",highlight:".topping-controls",allowedInteractions:["topping-珍珠"]},{title:"調整甜度",text:"配料加好了！現在調整甜度。將滑鼠移到甜度區域，選擇「半糖」。",highlight:".sweetness-controls",allowedInteractions:["sweetness-半糖"]},{title:"設定冰塊",text:"甜度設定完成！現在設定冰塊量。將滑鼠移到冰塊區域，選擇「少冰」。",highlight:".ice-controls",allowedInteractions:["ice-少冰"]},{title:"選擇吸管",text:"口味調好了！因為這杯有珍珠配料，所以需要用粗吸管。點擊「粗吸管」按鈕。",highlight:".straw-controls",allowedInteractions:["straw-粗吸管"]},{title:"封膜完成",text:"最後一步！點擊封膜按鈕來完成這杯飲料。",highlight:".seal-button",allowedInteractions:["seal"]},{title:"製作第二杯",text:"第一杯完成了！現在讓我們製作第二杯。觀察訂單：「珍珠紅茶拿鐵」需要紅茶茶底 + 鮮奶 + 珍珠 + 微糖 + 正常冰。點擊第二個杯子開始製作。",highlight:".cup-2",allowedInteractions:["cup-2"]},{title:"第二杯茶底",text:"這次也是紅茶拿鐵，先選擇紅茶作為茶底。",highlight:".tea-controls",allowedInteractions:["tea-紅茶"]},{title:"添加鮮奶",text:"紅茶拿鐵需要鮮奶，這與剛才的奶茶不同。點擊鮮奶按鈕。",highlight:".milk-controls",allowedInteractions:["milk-鮮奶"]},{title:"加入珍珠",text:"加入珍珠配料。",highlight:".topping-controls",allowedInteractions:["topping-珍珠"]},{title:"微糖設定",text:"選擇「微糖」。",highlight:".sweetness-controls",allowedInteractions:["sweetness-微糖"]},{title:"正常冰",text:"選擇「正常冰」。",highlight:".ice-controls",allowedInteractions:["ice-正常冰"]},{title:"粗吸管",text:"同樣因為有珍珠，需要用粗吸管。",highlight:".straw-controls",allowedInteractions:["straw-粗吸管"]},{title:"封膜",text:"封膜完成第二杯飲料！",highlight:".seal-button",allowedInteractions:["seal"]},{title:"完成訂單",text:"所有飲料都製作完成！現在可以送出訂單了。點擊「完成訂單」按鈕。",highlight:".submit-button",allowedInteractions:["submit"]}],T=k[t]||{};D.useEffect(()=>{if(T.allowedInteractions&&f(new Set(T.allowedInteractions)),t===0&&r){const W=setTimeout(()=>{O()},5e3);return()=>clearTimeout(W)}},[t]),D.useEffect(()=>{if(T.highlight){d(T.highlight);const W=ye(T.highlight);v(W)}else d(null),v({top:"20px",right:"20px"})},[t]);const P=W=>r?p.has(W):!0,O=()=>{t<k.length-1?n(t+1):(a("loading"),i(!1),setTimeout(()=>{e("/beverage-exam")},5e3))},R=()=>{g(!0)},N=()=>{i(!1),a("loading"),setTimeout(()=>{e("/beverage-exam")},5e3)},L=()=>{g(!1)},B=W=>{P(`order-${W}`)&&(l(W),r&&t===8&&setTimeout(()=>O(),1e3))},V=W=>{P(`cup-${W}`)&&(l(W),r&&t===8&&setTimeout(()=>O(),1e3))},j=W=>{P(`tea-${W}`)&&(s||l(1),E(I.map(ge=>ge.id===(s||1)?{...ge,tea:W}:ge)),r&&(t===1||t===9)&&setTimeout(()=>O(),1e3))},z=W=>{!P(`milk-${W}`)||!s||(E(I.map(ge=>ge.id===s?{...ge,milk:W}:ge)),r&&(t===2||t===10)&&setTimeout(()=>O(),1e3))},H=W=>{!P(`topping-${W}`)||!s||(E(I.map(ge=>{if(ge.id!==s)return ge;const fe=ge.toppings.includes(W)?ge.toppings.filter(ve=>ve!==W):[...ge.toppings,W];return{...ge,toppings:fe}})),r&&(t===3||t===11)&&setTimeout(()=>O(),1e3))},J=W=>{!P(`sweetness-${W}`)||!s||(E(I.map(ge=>ge.id===s?{...ge,sweetness:W}:ge)),S(!1),r&&(t===4||t===12)&&setTimeout(()=>O(),1e3))},de=W=>{!P(`ice-${W}`)||!s||(E(I.map(ge=>ge.id===s?{...ge,ice:W}:ge)),A(!1),r&&(t===5||t===13)&&setTimeout(()=>O(),1e3))},ae=W=>{!P(`straw-${W}`)||!s||(E(I.map(ge=>ge.id===s?{...ge,straw:W}:ge)),r&&(t===6||t===14)&&setTimeout(()=>O(),1e3))},Ce=()=>{if(!P("seal")||!s)return;const W=I.find(ge=>ge.id===s);W&&W.tea&&W.straw&&(E(I.map(ge=>ge.id===s?{...ge,isSealed:!0,isCompleted:!0}:ge)),r&&(t===7||t===15)&&setTimeout(()=>O(),1e3))},te=()=>{P("submit")&&K()&&r&&t===16&&setTimeout(()=>O(),1e3)},G=()=>I.find(W=>W.id===s),K=()=>I.every(W=>W.isCompleted),me=W=>c===W,ye=W=>{if(!W)return{top:"20px",right:"20px"};switch(W){case".order-list":return{top:"50%",right:"20px",transform:"translateY(-50%)"};case".tea-controls":return{top:"20px",right:"20px"};case".milk-controls":return{top:"20px",left:"20px"};case".topping-controls":return{top:"20px",left:"20px"};case".sweetness-controls":return{top:"20px",left:"20px"};case".ice-controls":return{top:"20px",left:"20px"};case".straw-controls":return{bottom:"200px",left:"20px"};case".seal-button":return{bottom:"200px",left:"20px"};case".cup-2":return{top:"50%",left:"20px",transform:"translateY(-50%)"};case".submit-button":return{top:"20px",right:"20px"};default:return{top:"20px",right:"20px"}}};return y(eye,{children:[y(tye,{children:[y(nye,{children:[y(A1,{children:[u("div",{className:"label",children:"教學步驟"}),y("div",{className:"value",children:[t+1,"/",k.length]})]}),y(A1,{children:[u("div",{className:"label",children:"當前指引"}),u("div",{className:"value",children:(T==null?void 0:T.title)||"開始教學"})]}),y(A1,{children:[u("div",{className:"label",children:"完成杯數"}),y("div",{className:"value",children:[I.filter(W=>W.isCompleted).length,"/",I.length]})]})]}),y(rye,{children:[u(iye,{children:"教學訂單"}),u("div",{className:"order-list",style:{border:me(".order-list")?"3px solid #f59e0b":"none",borderRadius:"12px",padding:me(".order-list")?"8px":"0",background:me(".order-list")?"rgba(245, 158, 11, 0.1)":"transparent"},children:_.map((W,ge)=>y(aye,{isActive:s===W.id,isHighlighted:me(`.order-${W.id}`),className:`order-${W.id}`,onClick:()=>B(W.id),initial:{x:300,opacity:0},animate:{x:0,opacity:1},transition:{delay:ge*.2},children:[y(sye,{children:["訂單 #",String(W.id).padStart(2,"0")]}),u(lye,{children:W.title}),y("div",{style:{fontSize:"0.75em",color:"#6b7280",marginTop:"8px",lineHeight:"1.4"},children:[y("div",{children:["茶底: ",W.tea]}),y("div",{children:["奶類: ",W.milk]}),y("div",{children:["配料: ",W.toppings.join(", ")||"無"]}),y("div",{children:["甜度: ",W.sweetness," | 冰塊: ",W.ice]})]})]},W.id))})]}),y(cye,{children:[y(tm,{isHighlighted:me(".tea-controls"),className:"tea-controls",children:[u(ug,{children:"茶飲基底"}),u(P1,{columns:"repeat(2, 1fr)",children:["紅茶","綠茶","烏龍茶","麥茶"].map(W=>{var ge;return u(uye,{selected:((ge=G())==null?void 0:ge.tea)===W,disabled:!P(`tea-${W}`),onClick:()=>j(W),children:W},W)})})]}),y(tm,{isHighlighted:me(".milk-controls"),className:"milk-controls",children:[u(ug,{children:"奶類選擇"}),u(P1,{columns:"repeat(1, 1fr)",children:["鮮奶","奶精"].map(W=>{var ge;return u(dye,{selected:((ge=G())==null?void 0:ge.milk)===W,disabled:!P(`milk-${W}`),onClick:()=>z(W),children:W},W)})})]}),y(tm,{isHighlighted:me(".topping-controls"),className:"topping-controls",children:[u(ug,{children:"配料選擇"}),u(P1,{columns:"repeat(2, 1fr)",children:["珍珠","椰果","波霸","粉圓"].map(W=>{var ge;return u(pye,{selected:(ge=G())==null?void 0:ge.toppings.includes(W),disabled:!P(`topping-${W}`),onClick:()=>H(W),children:W},W)})})]}),y(hye,{children:[u(ug,{children:"調味設定"}),y(fye,{children:[y("div",{style:{position:"relative"},className:"sweetness-controls",onMouseEnter:()=>{(P("sweetness-半糖")||P("sweetness-微糖"))&&S(!0)},onMouseLeave:()=>S(!1),children:[u(Kc,{selected:!!((ee=G())!=null&&ee.sweetness),disabled:!s,isHighlighted:me(".sweetness-controls"),children:((oe=G())==null?void 0:oe.sweetness)||"甜度"}),u(Ft,{children:w&&u(i6,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},children:["全糖","七分糖","半糖","微糖","無糖"].map(W=>u(o6,{onClick:()=>J(W),style:{opacity:P(`sweetness-${W}`)?1:.3,pointerEvents:P(`sweetness-${W}`)?"auto":"none"},children:W},W))})})]}),y("div",{style:{position:"relative"},className:"ice-controls",onMouseEnter:()=>{(P("ice-少冰")||P("ice-正常冰"))&&A(!0)},onMouseLeave:()=>A(!1),children:[u(Kc,{selected:!!((he=G())!=null&&he.ice),disabled:!s,isHighlighted:me(".ice-controls"),children:((we=G())==null?void 0:we.ice)||"冰塊"}),u(Ft,{children:C&&u(i6,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},children:["正常冰","少冰","微冰","去冰"].map(W=>u(o6,{onClick:()=>de(W),style:{opacity:P(`ice-${W}`)?1:.3,pointerEvents:P(`ice-${W}`)?"auto":"none"},children:W},W))})})]})]}),u(gye,{children:u(mye,{disabled:!s,onClick:()=>{s&&E(I.map(W=>W.id===s?{...W,tea:"",milk:"",toppings:[],sweetness:"",ice:"",straw:"",isSealed:!1,isCompleted:!1}:W))},children:"重新開始"})})]})]}),u(vye,{children:u(Ft,{children:I.map((W,ge)=>u(xye,{isSelected:s===W.id,onClick:()=>V(W.id),className:`cup-${W.id}`,isHighlighted:me(`.cup-${W.id}`),initial:{x:300,opacity:0,scale:.8},animate:{x:0,opacity:1,scale:1},transition:{delay:ge*.3,type:"spring",stiffness:200,damping:25},children:y(yye,{children:[u(bye,{children:u(Sye,{isCompleted:W.isCompleted,children:u(Cye,{teaType:W.tea,milkType:W.milk,fillLevel:W.tea?W.milk?80:60:0})})}),y(_ye,{children:[y(kye,{children:["杯子 ",W.id," ",W.isCompleted&&"✓"]}),u(Eye,{children:W.toppings.map((fe,ve)=>u(Tye,{type:fe,children:fe},`${fe}-${ve}`))}),y(Iye,{children:[y(Aye,{className:"straw-controls",children:[u(a6,{selected:W.straw==="細吸管",disabled:W.isCompleted||!P("straw-細吸管"),onClick:fe=>{fe.stopPropagation(),s===W.id&&ae("細吸管")},children:"細吸管"}),u(a6,{selected:W.straw==="粗吸管",disabled:W.isCompleted||!P("straw-粗吸管"),onClick:fe=>{fe.stopPropagation(),s===W.id&&ae("粗吸管")},children:"粗吸管"})]}),u(Pye,{sealed:W.isCompleted,disabled:!W.tea||!W.straw||W.isCompleted||!P("seal"),isHighlighted:me(".seal-button"),className:"seal-button",onClick:fe=>{fe.stopPropagation(),s===W.id&&Ce()},children:W.isCompleted?"已完成":"封膜"})]})]})]})},W.id))})}),u(Dye,{children:u(Rye,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:te,disabled:!K()||!P("submit"),isHighlighted:me(".submit-button"),className:"submit-button",children:"完成訂單"})})]}),u(Ft,{children:r&&u(s6,{children:y(l6,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.5,ease:"easeInOut"},style:{...m},children:[u(c6,{children:h?"⚠️ 跳過教學":T.title}),u(u6,{children:h?"您確定要跳過教學直接進入正式遊戲嗎？教學可以幫助您熟悉遊戲操作和評分機制。":T.text}),u(d6,{children:h?y(Ne,{children:[u(ed,{className:"secondary",onClick:L,children:"繼續教學"}),u(ed,{className:"primary",onClick:N,children:"直接開始遊戲"})]}):u(ed,{className:"secondary",onClick:R,children:"跳過教學"})})]},`tutorial-${t}`)})}),u(Ft,{children:o==="completed"&&u(s6,{children:y(l6,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",right:"auto"},children:[u(c6,{children:"🎉 教學完成！"}),u(u6,{children:"恭喜您完成了飲料製作教學！現在您已經掌握了基本的製作流程和多工處理技巧。 準備好挑戰正式模式了嗎？"}),y(d6,{children:[u(ed,{className:"secondary",onClick:()=>e("/exams"),children:"返回考試中心"}),u(ed,{className:"primary",onClick:()=>e("/beverage-exam"),children:"挑戰正式模式"})]})]})})}),u(Ft,{children:o==="loading"&&y(Nye,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:[u(Mye,{}),u(Oye,{children:"準備進入正式模式"}),y($ye,{children:["💡 小提醒：加茶加奶都需要六秒的等待時間，",u("br",{}),"不妨先做下一杯喔！合理安排時間可以提高效率。"]}),u(Lye,{children:u(Fye,{initial:{width:"0%"},animate:{width:`${(t+1)/k.length*100}%`},transition:{duration:5}})})]})})]})}const p6={"001_0_0":{courseId:"001",chapterIndex:0,sectionIndex:0,title:"門市設備與器具認識 - 小考",questions:[{question:"以下哪個設備是製作飲料時最重要的基本設備？",options:["收銀機","製冰機","音響設備","監視器"],correct:1,explanation:"製冰機是製作冷飲時不可或缺的設備，冰塊品質直接影響飲料口感。"},{question:"飲料器具使用前應該如何處理？",options:["直接使用","用清水沖洗","用洗劑清洗並消毒","用毛巾擦拭"],correct:2,explanation:"所有飲料器具在使用前都必須經過清洗和消毒，確保衛生安全。"},{question:"雪克杯的主要用途是什麼？",options:["盛裝飲料","調製搖飲","清洗工具","儲存茶葉"],correct:1,explanation:"雪克杯主要用於調製需要搖晃混合的飲料，如奶茶、果汁等。"},{question:"以下哪個不是常見的量杯刻度？",options:["50ml","100ml","250ml","1000ml"],correct:3,explanation:"一般門市使用的量杯通常為50ml、100ml、250ml等小容量，1000ml過大不實用。"},{question:"封膜機的溫度設定錯誤可能造成什麼問題？",options:["封膜太緊","封膜不牢","飲料變味","杯子破損"],correct:1,explanation:"封膜機溫度太低會導致封膜不牢，容易漏飲；溫度太高則可能燙壞薄膜。"}],passingScore:80,timeLimit:300,createdAt:new Date().toISOString()},"001_0_1":{courseId:"001",chapterIndex:0,sectionIndex:1,title:"飲料製作流程總覽 - 小考",questions:[{question:"標準的飲料製作流程第一步是什麼？",options:["準備器具","確認訂單","準備原料","清潔工作台"],correct:1,explanation:"製作飲料前必須先確認訂單內容，包括品項、甜度、冰塊等客製化需求。"},{question:"在製作過程中發現原料不足時應該怎麼做？",options:["繼續製作","更換其他原料","立即補充原料","取消訂單"],correct:2,explanation:"發現原料不足時應立即停止製作，先補充原料後再繼續，確保品質一致。"},{question:"飲料製作完成後的第一個檢查項目是什麼？",options:["外觀美觀度","溫度是否合適","分量是否正確","封膜是否完整"],correct:2,explanation:"飲料完成後首先要檢查分量是否達到標準，然後才檢查其他品質項目。"},{question:"多筆訂單同時製作時應該遵循什麼原則？",options:["先做簡單的","先做複雜的","按訂單順序","按飲料種類分組"],correct:2,explanation:"應該按照訂單順序製作，確保公平性和出餐效率。"},{question:"製作過程中最容易出錯的環節是什麼？",options:["選擇茶底","調整甜度","添加配料","溫度控制"],correct:1,explanation:"甜度調整是最容易出錯的環節，因為每位顧客的喜好不同，需要精確控制。"}],passingScore:80,timeLimit:300,createdAt:new Date().toISOString()},"002_0_0":{courseId:"002",chapterIndex:0,sectionIndex:0,title:"綠茶煮法 - 小考",questions:[{question:"綠茶的最佳沖泡水溫是多少？",options:["60-70°C","80-85°C","90-95°C","100°C"],correct:1,explanation:"綠茶應使用80-85°C的水溫沖泡，過高的溫度會破壞茶葉的清香。"},{question:"四季春茶葉的浸泡時間應該是多久？",options:["1-2分鐘","3-4分鐘","5-6分鐘","7-8分鐘"],correct:1,explanation:"四季春屬於清香型綠茶，浸泡3-4分鐘即可，時間過長會過於苦澀。"},{question:"煮好的綠茶應該在多久內使用完畢？",options:["1小時","2小時","4小時","8小時"],correct:2,explanation:"綠茶煮好後應在4小時內使用完畢，超過時間會影響口感和品質。"},{question:"綠茶出現苦澀味的主要原因是什麼？",options:["茶葉質量差","水溫過高","浸泡時間過長","以上皆是"],correct:3,explanation:"苦澀味可能由茶葉質量、水溫過高或浸泡時間過長等多種因素造成。"},{question:"烏龍茶和四季春在沖泡上的主要差異是什麼？",options:["水溫不同","時間不同","茶葉用量不同","沖泡方法完全不同"],correct:0,explanation:"烏龍茶需要較高的水溫（85-90°C），而四季春適合稍低的溫度（80-85°C）。"}],passingScore:80,timeLimit:300,createdAt:new Date().toISOString()},"003_0_0":{courseId:"003",chapterIndex:0,sectionIndex:0,title:"奶精與鮮奶差異 - 小考",questions:[{question:"奶精和鮮奶在成分上最主要的差異是什麼？",options:["脂肪含量","蛋白質含量","是否含乳成分","甜度不同"],correct:2,explanation:"奶精是植物性產品，不含真正的乳成分；鮮奶則是動物性乳製品。"},{question:"使用鮮奶製作奶茶時需要注意什麼？",options:["溫度控制","保存期限","過敏源標示","以上皆是"],correct:3,explanation:"使用鮮奶需要注意溫度控制避免結塊、保存期限較短、需標示過敏源。"},{question:"奶精的主要優點是什麼？",options:["營養價值高","口感更香濃","保存期限長","價格便宜"],correct:2,explanation:"奶精的主要優點是保存期限長，常溫保存即可，便於管理和使用。"},{question:"哪種情況下建議使用鮮奶而非奶精？",options:["成本考量","保存方便","追求天然健康","口感濃郁"],correct:2,explanation:"追求天然健康的消費者通常偏好使用真正的鮮奶製品。"},{question:"調製奶茶時，奶類與茶湯的黃金比例是多少？",options:["1:1","2:3","3:7","1:4"],correct:2,explanation:"一般奶茶的黃金比例是奶類3，茶湯7，可根據個人喜好微調。"}],passingScore:80,timeLimit:300,createdAt:new Date().toISOString()}},zye=async()=>{try{console.log("開始初始化考試資料...");const e=se(U,"exam_questions");if((await be(e)).size>0)return console.log("考試資料已存在，跳過初始化"),{success:!0,message:"考試資料已存在"};const n=Object.entries(p6).map(([r,i])=>{const o=Ie(U,"exam_questions",r);return zt(o,i)});return await Promise.all(n),console.log("考試資料初始化完成！"),{success:!0,message:`成功創建 ${Object.keys(p6).length} 個考試題目集合`}}catch(e){return console.error("初始化考試資料時發生錯誤:",e),{success:!1,error:e.message}}},h6=[{title:"第一章｜飲料基礎認識與作業環境",description:"建立觀念，了解環境與衛生是進店的第一步！",chapters:[{title:"門市設備與器具認識",icon:"ri-store-line"},{title:"飲料製作流程總覽",icon:"ri-flow-chart"},{title:"基本衛生與清潔規範",icon:"ri-hand-sanitizer-line"},{title:"冰塊、糖度與客製化規則介紹",icon:"ri-scales-line"}],icon:"ri-building-line",gradient:"#7C3AED, #3B82F6",category:"基礎訓練",level:"初級",duration:"2.5 小時"},{title:"第二章｜煮茶篇",description:"一壺好茶，是一切飲品的靈魂！",chapters:[{title:"綠茶煮法（烏龍、四季春）",icon:"ri-cup-line"},{title:"紅茶煮法（阿薩姆、錫蘭）",icon:"ri-cup-line"},{title:"烏龍茶煮法（鐵觀音、包種）",icon:"ri-cup-line"},{title:"茶湯保存與每日備茶流程",icon:"ri-flask-line"}],icon:"ri-cup-line",gradient:"#EC4899, #F472B6",category:"飲料製作",level:"初級",duration:"3 小時"},{title:"第三章｜調奶篇",description:"奶類搭配與技巧，決定你奶茶會不會爆單！",chapters:[{title:"奶精與鮮奶差異",icon:"ri-water-flash-line"},{title:"奶茶基本比例與沖泡技巧",icon:"ri-goblet-line"},{title:"奶類搭配範例（紅茶拿鐵、烏龍奶等）",icon:"ri-goblet-line"},{title:"奶泡製作與應用（抹茶奶蓋、奶霜）",icon:"ri-bubble-chart-line"}],icon:"ri-goblet-line",gradient:"#2563EB, #60A5FA",category:"飲料製作",level:"中級",duration:"2.5 小時"},{title:"第四章｜加料篇",description:"波霸不只是加進去，要煮得好、加得美！",chapters:[{title:"珍珠煮法（黑糖珍珠、白玉）",icon:"ri-scales-line"},{title:"愛玉、椰果、仙草等製備與保存",icon:"ri-fridge-line"},{title:"加料組合技巧（Q彈感、視覺美感）",icon:"ri-palette-line"},{title:"加料搭配實務與創意應用",icon:"ri-magic-line"}],icon:"ri-shapes-line",gradient:"#F59E0B, #FBBF24",category:"飲料製作",level:"中級",duration:"3 小時"},{title:"第五章｜果飲與冰沙篇",description:"清新果味，是夏天銷量保證！",chapters:[{title:"水果茶與鮮果打底飲品製作",icon:"ri-seedling-line"},{title:"果泥、果醬與果糖的使用技巧",icon:"ri-drop-line"},{title:"冰沙機器操作與濃稠度調整",icon:"ri-settings-line"},{title:"飲品分層與杯面美學（漸層果茶）",icon:"ri-brush-line"}],icon:"ri-seedling-line",gradient:"#10B981, #34D399",category:"飲料製作",level:"中級",duration:"3.5 小時"},{title:"第六章｜出杯與點單流程篇",description:"最後一哩，是與顧客溝通的藝術",chapters:[{title:"POS點餐機操作教學",icon:"ri-terminal-box-line"},{title:"出杯順序與杯標辨識",icon:"ri-stack-line"},{title:"外送平台點單與包裝流程",icon:"ri-bike-line"},{title:"高峰時段分工與出杯節奏管理",icon:"ri-team-line"}],icon:"ri-customer-service-line",gradient:"#8B5CF6, #C4B5FD",category:"店面管理",level:"初級",duration:"2 小時"},{title:"第七章｜進階職人技巧",description:"成為全能店長不是夢！",chapters:[{title:"顧客應對技巧與話術訓練",icon:"ri-chat-4-line"},{title:"飲品創新研發流程與命名技巧",icon:"ri-flask-line"},{title:"社群經營與品牌行銷",icon:"ri-instagram-line"},{title:"營業數據分析與進貨規劃基礎",icon:"ri-line-chart-line"}],icon:"ri-medal-line",gradient:"#EA580C, #FFA000",category:"行銷技巧",level:"高級",duration:"4 小時",advanced:!0}],Vye=b("div",{target:"e1yz2azl6"})({name:"x1uth8",styles:"max-width:800px;margin:0 auto;padding:40px 20px;font-family:'Noto Sans TC',sans-serif"}),jye=b("h1",{target:"e1yz2azl5"})({name:"1m74q06",styles:"text-align:center;color:#333;margin-bottom:30px"}),Uye=b("div",{target:"e1yz2azl4"})({name:"eop2c",styles:"background:#e3f2fd;border:1px solid #2196f3;border-radius:10px;padding:20px;margin-bottom:20px;h3{margin:0 0 10px 0;color:#1976d2;}p{margin:5px 0;color:#424242;font-size:14px;}"}),qye=b("div",{target:"e1yz2azl3"})({name:"19cjq5j",styles:"display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:20px"}),Mr=b("button",{target:"e1yz2azl2"})("background:",e=>e.color||"linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%)",";color:white;border:none;border-radius:10px;padding:15px 20px;font-size:14px;font-weight:600;cursor:pointer;transition:all 0.3s ease;&:hover{transform:translateY(-2px);box-shadow:0 4px 15px rgba(124, 58, 237, 0.3);}&:disabled{background:#ccc;cursor:not-allowed;transform:none;box-shadow:none;}"),Wye=b("div",{target:"e1yz2azl1"})({name:"1crwamc",styles:"background:#f8f9fa;border-radius:10px;padding:20px;min-height:300px;border:1px solid #e9ecef;font-family:'Monaco','Consolas',monospace;font-size:14px;line-height:1.5;max-height:500px;overflow-y:auto"}),f6=b("div",{target:"e1yz2azl0"})("margin-bottom:8px;color:",e=>e.type==="error"?"#dc3545":e.type==="success"?"#28a745":e.type==="warning"?"#ffc107":"#333",";"),Hye=()=>{const[e,t]=D.useState(!1),[n,r]=D.useState([]),i=qt(),o=(f,h="info")=>{const g=new Date().toLocaleTimeString();r(m=>[...m,{message:`[${g}] ${f}`,type:h}])},a=async()=>{if(!e){t(!0),r([]);try{o("開始重新組織課程ID，按照章節順序排列...","info");const[f,h]=await Promise.all([be(se(U,"courses")),be(se(U,"course_summaries"))]);o(`找到 ${f.size} 個課程和 ${h.size} 個課程摘要`,"info");const g=[],m=[];f.forEach(v=>{const w=v.data(),S=d(w.title);g.push({docId:v.id,data:w,chapterNumber:S})}),h.forEach(v=>{const w=v.data(),S=d(w.title);m.push({docId:v.id,data:w,chapterNumber:S})}),g.sort((v,w)=>v.chapterNumber-w.chapterNumber),m.sort((v,w)=>v.chapterNumber-w.chapterNumber),o("開始創建新的課程文檔，使用數字ID...","info");for(let v=0;v<g.length;v++){const w=String(v+1).padStart(3,"0"),S=g[v];o(`處理課程 ${w}: ${S.data.title}`,"info");const C={...S.data,id:w,numeric_id:v+1,updatedAt:new Date};await zt(Ie(U,"courses",w),C),S.docId!==w?(await si(Ie(U,"courses",S.docId)),o(`  ✅ 已將課程從 ${S.docId} 遷移到 ${w}`,"success")):o(`  ✅ 課程 ${w} 已更新`,"success")}for(let v=0;v<m.length;v++){const w=String(v+1).padStart(3,"0"),S=m[v],C={...S.data,id:w,numeric_id:v+1,updatedAt:new Date};await zt(Ie(U,"course_summaries",w),C),S.docId!==w&&await si(Ie(U,"course_summaries",S.docId))}o("🎉 課程ID重新組織完成！","success"),o("現在課程ID按照 001, 002, 003... 的順序排列","success")}catch(f){o(`❌ 重新組織課程ID時發生錯誤: ${f.message}`,"error")}finally{t(!1)}}},s=async()=>{if(!e){t(!0),r([]);try{o("開始更新 course_summaries，使用正確的小節資料...","info"),o(`準備更新 ${h6.length} 個課程的小節資訊`,"info");const f=await be(se(U,"course_summaries"));let h=0,g=0,m=[];f.forEach(v=>{const w=v.data(),S=h6.find(C=>C.title===w.title);S&&m.push({docId:v.id,existingData:w,correctData:S})}),o(`找到 ${m.length} 個匹配的課程需要更新`,"success");for(const v of m)try{o(`處理課程: ${v.correctData.title}`,"info");const w=[{title:v.correctData.title,description:v.correctData.description,icon:v.correctData.icon,order:1,subsections:v.correctData.chapters.map((C,A)=>({title:C.title,icon:C.icon,order:A+1}))}],S={description:v.correctData.description,duration:v.correctData.duration,gradient:v.correctData.gradient,icon:v.correctData.icon,category:v.correctData.category,level:v.correctData.level,chapters:w,updatedAt:new Date};await fn(Ie(U,"course_summaries",v.docId),S),o(`  ✅ 已更新，添加 ${v.correctData.chapters.length} 個小節`,"success"),v.correctData.chapters.forEach((C,A)=>{o(`    📖 小節 ${A+1}: ${C.title}`,"info")}),h++}catch(w){o(`  ❌ 更新課程 ${v.correctData.title} 時發生錯誤: ${w.message}`,"error"),g++}o("🎉 更新完成！","success"),o(`  - 已更新: ${h} 個課程`,"success"),o(`  - 發生錯誤: ${g} 個課程`,g>0?"warning":"info"),o(`  - 總計處理: ${h+g} 個課程`,"info"),h>0&&o("現在您可以到 /courses-internal 頁面查看更新後的小節內容！","success")}catch(f){o(`❌ 更新過程中發生錯誤: ${f.message}`,"error")}finally{t(!1)}}},l=async()=>{if(!e){t(!0),r([]);try{o("開始更新 users 集合，新增課程學習進度追蹤欄位...","info");const f=await be(se(U,"users"));o(`找到 ${f.size} 個用戶需要更新`,"info");let h=0;for(const g of f.docs)try{const m=g.data();o(`更新用戶: ${m.name||m.email||g.id}`,"info");const v={courseProgress:m.courseProgress||{},examRecords:m.examRecords||{},learningStats:m.learningStats||{totalCoursesStarted:0,totalCoursesCompleted:0,totalSectionsCompleted:0,totalExamsPassed:0,totalLearningTime:0,averageScore:0,lastActiveDate:null,streakDays:0},achievements:m.achievements||{badges:[],certificates:[],milestones:[]},updatedAt:new Date};await fn(Ie(U,"users",g.id),v),o("  ✅ 已更新用戶學習進度追蹤欄位","success"),h++}catch(m){o(`  ❌ 更新用戶 ${g.id} 時發生錯誤: ${m.message}`,"error")}o("🎉 users 集合更新完成！","success"),o(`  - 已更新: ${h} 個用戶`,"success"),o("新增的欄位包括：","info"),o("  📚 courseProgress - 課程完成狀況","info"),o("  📝 examRecords - 小考答題記錄","info"),o("  📊 learningStats - 學習統計","info"),o("  🏆 achievements - 成就和徽章","info")}catch(f){o(`❌ 更新 users 集合時發生錯誤: ${f.message}`,"error")}finally{t(!1)}}},c=async()=>{if(!e){t(!0),r([]);try{o("開始修復缺少 numeric_id 的課程...","info");const[f,h]=await Promise.all([be(se(U,"courses")),be(se(U,"course_summaries"))]);o(`找到 ${f.size} 個課程和 ${h.size} 個課程摘要`,"info");let g=0;for(const v of f.docs){const w=v.data();if(!w.numeric_id){const S=d(w.title);await fn(Ie(U,"courses",v.id),{numeric_id:S,updatedAt:new Date}),o(`✅ 已為課程 "${w.title}" 添加 numeric_id: ${S}`,"success"),g++}}let m=0;for(const v of h.docs){const w=v.data();if(!w.numeric_id){const S=d(w.title);await fn(Ie(U,"course_summaries",v.id),{numeric_id:S,updatedAt:new Date}),o(`✅ 已為課程摘要 "${w.title}" 添加 numeric_id: ${S}`,"success"),m++}}o("🎉 修復完成！","success"),o(`- 已更新 ${g} 個課程`,"success"),o(`- 已更新 ${m} 個課程摘要`,"success")}catch(f){o(`❌ 修復 numeric_id 時發生錯誤: ${f.message}`,"error")}finally{t(!1)}}},d=f=>{const h=f.match(/第([一二三四五六七八九十])章/);return h&&{一:1,二:2,三:3,四:4,五:5,六:6,七:7,八:8,九:9,十:10}[h[1]]||1};return y(Vye,{children:[u(jye,{children:"🔧 資料庫更新工具"}),y(Uye,{children:[u("h3",{children:"📋 更新選項"}),u("p",{children:"• 新課程系統管理：基於課程.md的完整課程系統，包含清除舊資料、上傳新課程、生成測驗題目"}),u("p",{children:"• 重新組織課程ID：將課程ID改為按順序排列的數字格式（001, 002, 003...）"}),u("p",{children:"• 更新課程小節：使用正確的小節資料更新 course_summaries"}),u("p",{children:"• 更新用戶結構：新增學習進度追蹤、小考記錄和成就系統"}),u("p",{children:"• 修復缺少的 numeric_id"}),u("p",{children:"• 初始化考試資料庫：創建 exam_questions 集合和預設考試題目"}),u("p",{children:"• 修復課程圖標：確保所有課程都有正確的圖標和漸層色彩"}),u("p",{children:"• 上傳第一章詳細內容：飲料基礎認識與作業環境"}),u("p",{children:"• 上傳第二章詳細內容：煮茶篇（綠茶、紅茶、烏龍茶、茶湯保存）"}),u("p",{children:"• 移除課程圖片：清除所有課程中的封面圖片和內容圖片"}),u("p",{children:"• 上傳測驗題目：將測驗.txt檔案內容轉換並上傳至 exam-questions 集合"})]}),y(qye,{children:[u(Mr,{onClick:()=>i("/new-course-system"),disabled:e,color:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",children:"🆕 新課程系統管理"}),u(Mr,{onClick:a,disabled:e,color:"linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%)",children:e?"⏳ 處理中...":"🔢 重新組織課程ID"}),u(Mr,{onClick:s,disabled:e,color:"linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%)",children:e?"⏳ 處理中...":"📚 更新課程小節"}),u(Mr,{onClick:l,disabled:e,color:"linear-gradient(135deg, #A8E6CF 0%, #88D8A3 100%)",style:{gridColumn:"span 2"},children:e?"⏳ 處理中...":"👥 更新用戶學習進度結構"}),u(Mr,{onClick:c,disabled:e,color:"linear-gradient(135deg, #EA580C 0%, #FFA000 100%)",children:e?"⏳ 處理中...":"🔢 修復缺少的 numeric_id"}),u(Mr,{onClick:()=>i("/initialize-exam"),disabled:e,color:"linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%)",children:e?"⏳ 處理中...":"🎲 初始化考試資料庫"}),u(Mr,{onClick:async()=>{if(!e){t(!0),r([]);try{o("開始檢查和修復所有課程的圖標設定...","info");const[f,h]=await Promise.all([be(se(U,"courses")),be(se(U,"course_summaries"))]);o(`找到 ${f.size} 個課程和 ${h.size} 個課程摘要`,"info");let g=0;for(const v of f.docs){const w=v.data(),S=v.id,C=Dp(w.category,w.title,w.numeric_id),A=Rp(w.category,w.title,w.numeric_id);!w.icon||!w.gradient||w.icon!==C||w.gradient!==A?(await fn(Ie(U,"courses",S),{icon:C,gradient:A,updatedAt:new Date}),o(`✅ 已更新課程 "${w.title}" 的圖標設定`,"success"),o(`   - 圖標: ${C}`,"info"),o(`   - 漸層: ${A}`,"info"),o(`   - 類別: ${w.category||"未設定"}`,"info"),g++):o(`✓ 課程 "${w.title}" 圖標設定正常`,"info")}let m=0;for(const v of h.docs){const w=v.data(),S=v.id,C=Dp(w.category,w.title,w.numeric_id),A=Rp(w.category,w.title,w.numeric_id);(!w.icon||!w.gradient||w.icon!==C||w.gradient!==A)&&(await fn(Ie(U,"course_summaries",S),{icon:C,gradient:A,updatedAt:new Date}),o(`✅ 已更新課程摘要 "${w.title}" 的圖標設定`,"success"),m++)}o("🎉 圖標修復完成！","success"),o(`- 已更新 ${g} 個課程`,"success"),o(`- 已更新 ${m} 個課程摘要`,"success"),o("現在所有課程都應該有正確的圖標和漸層色彩了！","success")}catch(f){o(`❌ 修復圖標時發生錯誤: ${f.message}`,"error")}finally{t(!1)}}},disabled:e,color:"linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%)",children:e?"⏳ 處理中...":"🎨 修復課程圖標"}),u(Mr,{onClick:()=>i("/debug-database"),disabled:e,color:"linear-gradient(135deg, #8B5CF6 0%, #A855F7 100%)",children:"🔍 調試資料庫內容"}),u(Mr,{onClick:()=>i("/debug-courses"),disabled:e,color:"linear-gradient(135deg, #F59E0B 0%, #D97706 100%)",children:"🩺 課程資料診斷工具"}),u(Mr,{onClick:()=>i("/upload-chapter1"),disabled:e,color:"linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%)",children:"📚 上傳第一章節詳細內容"}),u(Mr,{onClick:()=>i("/upload-chapter2"),disabled:e,color:"linear-gradient(135deg, #EC4899 0%, #F472B6 100%)",children:"☕ 上傳第二章節詳細內容"}),u(Mr,{onClick:()=>i("/remove-images-from-courses"),disabled:e,color:"linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%)",children:"🗑️ 移除課程圖片"}),u(Mr,{onClick:()=>i("/upload-exam-questions"),disabled:e,color:"linear-gradient(135deg, #10B981 0%, #34D399 100%)",children:"📝 上傳測驗題目 (第1-2章)"}),u(Mr,{onClick:()=>i("/upload-remaining-chapters"),disabled:e,color:"linear-gradient(135deg, #8B5CF6 0%, #C4B5FD 100%)",children:"📚 上傳測驗題目 (第3-7章)"})]}),u(Wye,{children:n.length===0?u(f6,{children:"準備就緒，點擊上方按鈕開始更新..."}):n.map((f,h)=>u(f6,{type:f.type,children:f.message},h))})]})},Gye=b("div",{target:"esscw0s5"})({name:"1lqcsuh",styles:"max-width:600px;margin:50px auto;padding:40px;padding-bottom:120px;background:white;border-radius:20px;box-shadow:0 10px 30px rgba(0, 0, 0, 0.1);text-align:center;font-family:'Noto Sans TC',sans-serif"}),Yye=b("h1",{target:"esscw0s4"})({name:"37u2zl",styles:"color:#333;margin-bottom:20px;font-size:28px"}),Kye=b("p",{target:"esscw0s3"})({name:"z06y2n",styles:"color:#666;margin-bottom:30px;line-height:1.6;font-size:16px"}),v9=b("button",{target:"esscw0s2"})({name:"baduo7",styles:"background:linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%);color:white;border:none;border-radius:10px;padding:15px 30px;font-size:16px;font-weight:600;cursor:pointer;transition:all 0.3s ease;margin:10px;&:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(124, 58, 237, 0.3);}&:disabled{background:#ccc;cursor:not-allowed;transform:none;box-shadow:none;}"}),Xye=b(v9,{target:"esscw0s1"})({name:"1jg29r8",styles:"background:#6c757d;&:hover{background:#5a6268;box-shadow:0 8px 20px rgba(108, 117, 125, 0.3);}"}),Qye=b("div",{target:"esscw0s0"})("background:",e=>e.success?"#d4edda":e.error?"#f8d7da":"#e2e3e5",";border:1px solid ",e=>e.success?"#c3e6cb":e.error?"#f5c6cb":"#d1ecf1",";color:",e=>e.success?"#155724":e.error?"#721c24":"#0c5460",";padding:15px;border-radius:10px;margin:20px 0;text-align:left;"),Jye=()=>{const[e,t]=D.useState(!1),[n,r]=D.useState({message:"",type:""}),i=qt(),o=async()=>{t(!0),r({message:"正在初始化考試資料庫...",type:"info"});try{const a=await zye();a.success?r({message:`✅ 成功！${a.message}

已創建以下考試題目：
• 門市設備與器具認識 小考
• 飲料製作流程總覽 小考
• 綠茶煮法 小考
• 奶精與鮮奶差異 小考

現在學員可以在課程頁面進行小考測驗了！`,type:"success"}):r({message:`❌ 初始化失敗：${a.error}`,type:"error"})}catch(a){r({message:`❌ 發生錯誤：${a.message}`,type:"error"})}finally{t(!1)}};return y(Gye,{children:[u(Yye,{children:"🎲 考試資料庫初始化"}),y(Kye,{children:["此工具將在 Firebase 中創建 ",u("code",{children:"exam_questions"})," 集合， 並新增預設的考試題目。這是讓學員能夠進行小考測驗的必要步驟。"]}),n.message&&u(Qye,{success:n.type==="success",error:n.type==="error",children:u("pre",{style:{margin:0,whiteSpace:"pre-wrap",fontFamily:"inherit"},children:n.message})}),y("div",{children:[u(v9,{onClick:o,disabled:e,children:e?"⏳ 初始化中...":"🚀 開始初始化"}),u(Xye,{onClick:()=>i("/update-database"),children:"← 返回資料庫管理"})]})]})},Zye=b("div",{target:"ec2mcyd9"})({name:"11cj5v5",styles:"padding:20px 0 80px;max-width:1200px;margin:0 auto;padding-left:20px;padding-right:20px"}),e1e=b("h1",{target:"ec2mcyd8"})("font-size:28px;font-weight:700;color:",e=>e.theme.text,";margin-bottom:20px;text-align:center;"),g6=b("div",{target:"ec2mcyd7"})("background:",e=>e.theme.cardBg,";border-radius:16px;padding:24px;margin-bottom:20px;box-shadow:0 4px 15px ",e=>e.theme.shadowColor,";",e=>e.theme.darkTheme&&`
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(124, 58, 237, 0.08));
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.08);
  `,";"),D1=b("h2",{target:"ec2mcyd6"})("font-size:20px;font-weight:600;color:",e=>e.theme.text,";margin-bottom:16px;"),dg=b("div",{target:"ec2mcyd5"})("display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid ",e=>e.theme.cardBorder,";&:last-child{border-bottom:none;}"),pg=b("span",{target:"ec2mcyd4"})("color:",e=>e.theme.textSecondary,";"),hg=b("span",{target:"ec2mcyd3"})("color:",e=>e.theme.text,";font-weight:500;"),m6=b("button",{target:"ec2mcyd2"})("background:linear-gradient(135deg, ",e=>e.color||"#7C3AED, #3B82F6",");color:white;border:none;border-radius:12px;padding:12px 24px;font-size:14px;font-weight:500;cursor:pointer;transition:all 0.3s ease;margin:8px;&:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(0, 0, 0, 0.2);}&:disabled{opacity:0.5;cursor:not-allowed;transform:none;}"),t1e=b("div",{target:"ec2mcyd1"})("background:",e=>e.theme.cardBg,";border-radius:12px;padding:20px;margin-top:20px;max-height:400px;overflow-y:auto;font-family:'Monaco','Menlo',monospace;font-size:12px;",e=>e.theme.darkTheme&&`
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.1);
  `,";"),v6=b("div",{target:"ec2mcyd0"})("margin-bottom:4px;color:",e=>{switch(e.type){case"success":return"#10B981";case"error":return"#EF4444";case"warning":return"#F59E0B";default:return e.theme.textSecondary}},";"),x6=[{title:"第一章｜飲料基礎認識與作業環境",description:"建立觀念，了解環境與衛生是進店的第一步！",chapters:[{title:"門市設備與器具認識",icon:"ri-store-line"},{title:"飲料製作流程總覽",icon:"ri-flow-chart"},{title:"基本衛生與清潔規範",icon:"ri-hand-sanitizer-line"},{title:"冰塊、糖度與客製化規則介紹",icon:"ri-scales-line"}],icon:"ri-building-line",gradient:"#7C3AED, #3B82F6",coverImage:"https://images.unsplash.com/photo-1545665277-5937489579f2?q=80&w=2070&auto=format&fit=crop",category:"基礎訓練",level:"初級",duration:"2.5 小時"},{title:"第二章｜煮茶篇",description:"一壺好茶，是一切飲品的靈魂！",chapters:[{title:"綠茶煮法（烏龍、四季春）",icon:"ri-cup-line"},{title:"紅茶煮法（阿薩姆、錫蘭）",icon:"ri-cup-line"},{title:"烏龍茶煮法（鐵觀音、包種）",icon:"ri-cup-line"},{title:"茶湯保存與每日備茶流程",icon:"ri-flask-line"}],icon:"ri-cup-line",gradient:"#EC4899, #F472B6",coverImage:"https://images.unsplash.com/photo-1564890369878-4be5a6074af0?q=80&w=2070&auto=format&fit=crop",category:"飲料製作",level:"初級",duration:"3 小時"},{title:"第三章｜調奶篇",description:"奶類搭配與技巧，決定你奶茶會不會爆單！",chapters:[{title:"奶精與鮮奶差異",icon:"ri-water-flash-line"},{title:"奶茶基本比例與沖泡技巧",icon:"ri-goblet-line"},{title:"奶類搭配範例（紅茶拿鐵、烏龍奶等）",icon:"ri-goblet-line"},{title:"奶泡製作與應用（抹茶奶蓋、奶霜）",icon:"ri-bubble-chart-line"}],icon:"ri-goblet-line",gradient:"#2563EB, #60A5FA",coverImage:"https://images.unsplash.com/photo-1569399078436-da10fbd60f12?q=80&w=1925&auto=format&fit=crop",category:"飲料製作",level:"中級",duration:"2.5 小時"}],n1e=()=>{const[e,t]=D.useState({coursesCount:0,summariesCount:0,examQuestionsCount:0,loading:!0}),[n,r]=D.useState([]),[i,o]=D.useState(!1),a=(c,d="info")=>{const p=new Date().toLocaleTimeString();r(f=>[...f,{message:`[${p}] ${c}`,type:d}])},s=async()=>{try{t(m=>({...m,loading:!0}));const d=(await be(se(U,"courses"))).size,f=(await be(se(U,"course_summaries"))).size,g=(await be(se(U,"exam_questions"))).size;t({coursesCount:d,summariesCount:f,examQuestionsCount:g,loading:!1}),a(`檢查完成: courses(${d}), summaries(${f}), exams(${g})`,"success"),d===0&&f===0&&a("⚠️ 沒有找到任何課程數據，建議創建示例課程","warning")}catch(c){a(`檢查資料庫時發生錯誤: ${c.message}`,"error"),t(d=>({...d,loading:!1}))}},l=async()=>{if(!i){o(!0),a("開始創建示例課程...","info");try{for(let c=0;c<x6.length;c++){const d=x6[c],p=String(c+1).padStart(3,"0"),f=At();a(`創建課程 ${p}: ${d.title}`,"info");const h=d.chapters.map((v,w)=>({title:v.title,description:"",icon:v.icon,order:w+1,subsections:[{title:"課程內容",icon:"ri-file-list-line",order:1}]})),g={id:p,title:d.title,description:d.description,coverImage:d.coverImage,category:d.category,level:d.level,duration:d.duration,prerequisites:"",objectives:"",chapters:h,status:"active",gradient:d.gradient,icon:d.icon,advanced:!1,viewCount:0,numeric_id:c+1,createdAt:f,updatedAt:f},m={id:p,title:d.title,subtitle:d.description,description:d.description,coverImage:d.coverImage,category:d.category,level:d.level,duration:d.duration,gradient:d.gradient,icon:d.icon,advanced:!1,chapters:h,viewCount:0,numeric_id:c+1,createdAt:f,updatedAt:f};await zt(Ie(U,"courses",p),g),await zt(Ie(U,"course_summaries",p),m),a(`✅ 已創建課程 ${p}`,"success")}a("🎉 所有示例課程創建完成！","success"),await s()}catch(c){a(`創建課程時發生錯誤: ${c.message}`,"error")}finally{o(!1)}}};return D.useEffect(()=>{s()},[]),y(Ne,{children:[u(Bt,{}),y(Zye,{children:[u(e1e,{children:"🔍 資料庫狀態檢查"}),y(g6,{children:[u(D1,{children:"資料庫集合狀態"}),e.loading?y(dg,{children:[u(pg,{children:"檢查中..."}),u(hg,{children:"⏳"})]}):y(Ne,{children:[y(dg,{children:[u(pg,{children:"courses 集合"}),y(hg,{children:[e.coursesCount," 個文檔"]})]}),y(dg,{children:[u(pg,{children:"course_summaries 集合"}),y(hg,{children:[e.summariesCount," 個文檔"]})]}),y(dg,{children:[u(pg,{children:"exam_questions 集合"}),y(hg,{children:[e.examQuestionsCount," 個文檔"]})]})]})]}),y(g6,{children:[u(D1,{children:"資料庫操作"}),y("div",{children:[u(m6,{onClick:s,disabled:i,color:"#10B981, #34D399",children:"🔄 重新檢查狀態"}),u(m6,{onClick:l,disabled:i||e.coursesCount>0&&e.summariesCount>0,color:"#7C3AED, #3B82F6",children:i?"⏳ 創建中...":"🚀 創建示例課程"})]})]}),y(t1e,{children:[u(D1,{children:"操作日誌"}),n.length===0?u(v6,{children:"等待操作..."}):n.map((c,d)=>u(v6,{type:c.type,children:c.message},d))]})]}),u(kn,{})]})},y6=b("div",{target:"ej5rtnm10"})({name:"apuqqm",styles:"max-width:1200px;margin:0 auto;padding:20px;font-family:'Noto Sans TC',sans-serif"}),b6=b("h1",{target:"ej5rtnm9"})({name:"1m74q06",styles:"text-align:center;color:#333;margin-bottom:30px"}),R1=b("div",{target:"ej5rtnm8"})({name:"1hr7hgp",styles:"margin-bottom:30px;background:#f5f5f5;border-radius:8px;padding:20px"}),N1=b("h2",{target:"ej5rtnm7"})({name:"17jmxzy",styles:"color:#2196F3;margin-bottom:15px;border-bottom:2px solid #2196F3;padding-bottom:10px"}),r1e=b("div",{target:"ej5rtnm6"})({name:"cga1re",styles:"background:white;border-radius:8px;padding:15px;margin-bottom:15px;box-shadow:0 2px 4px rgba(0,0,0,0.1)"}),i1e=b("h3",{target:"ej5rtnm5"})({name:"5miyfk",styles:"color:#333;margin-bottom:10px"}),o1e=b("div",{target:"ej5rtnm4"})({name:"18t37vn",styles:"display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:10px;margin-bottom:10px"}),zl=b("div",{target:"ej5rtnm3"})({name:"1of1m6q",styles:"background:#f0f0f0;padding:8px 12px;border-radius:4px;font-size:14px"}),a1e=b("div",{target:"ej5rtnm2"})("display:flex;align-items:center;gap:10px;margin-top:10px;padding:10px;background:",e=>e.gradient?`linear-gradient(135deg, ${e.gradient})`:"#ddd",";border-radius:6px;color:white;"),M1=b("button",{target:"ej5rtnm1"})({name:"baduo7",styles:"background:linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%);color:white;border:none;border-radius:10px;padding:15px 30px;font-size:16px;font-weight:600;cursor:pointer;transition:all 0.3s ease;margin:10px;&:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(124, 58, 237, 0.3);}&:disabled{background:#ccc;cursor:not-allowed;transform:none;box-shadow:none;}"}),s1e=b("div",{target:"ej5rtnm0"})({name:"5ag7g9",styles:"background:#f8f9fa;border:1px solid #e9ecef;border-radius:10px;padding:20px;margin:20px 0;font-family:'Courier New',monospace;white-space:pre-wrap;max-height:400px;overflow-y:auto"}),l1e=()=>{const[e,t]=D.useState([]),[n,r]=D.useState([]),[i,o]=D.useState(!0),[a,s]=D.useState(""),{user:l}=gi();D.useEffect(()=>{c()},[]);const c=async()=>{try{const v=(await be(se(U,"courses"))).docs.map(C=>({id:C.id,collection:"courses",...C.data()})),S=(await be(se(U,"course_summaries"))).docs.map(C=>({id:C.id,collection:"course_summaries",...C.data()}));t(v),r(S)}catch(m){console.error("獲取資料失敗:",m)}finally{o(!1)}},d=m=>{const v=Dp(m.category,m.title,m.numeric_id),w=Rp(m.category,m.title,m.numeric_id);return{icon:v,gradient:w}},p=m=>{const{icon:v,gradient:w}=d(m);return y(r1e,{children:[u(i1e,{children:m.title}),y(o1e,{children:[y(zl,{children:[u("strong",{children:"ID:"})," ",m.id]}),y(zl,{children:[u("strong",{children:"集合:"})," ",m.collection]}),y(zl,{children:[u("strong",{children:"類別:"})," ",m.category||"未設定"]}),y(zl,{children:[u("strong",{children:"數字ID:"})," ",m.numeric_id||"未設定"]}),y(zl,{children:[u("strong",{children:"描述:"})," ",m.description||"無"]}),y(zl,{children:[u("strong",{children:"原始圖標:"})," ",m.icon||"無"]})]}),y(a1e,{gradient:w,children:[u("i",{className:v,style:{fontSize:"20px"}}),y("div",{children:[y("div",{children:[u("strong",{children:"映射圖標:"})," ",v]}),y("div",{children:[u("strong",{children:"映射漸層:"})," ",w]})]})]})]},m.id)},f=async()=>{o(!0),s(`檢查 exam-questions 集合...

`);try{const m="001_1_1",v=Ie(U,"exam-questions",m),w=await In(v);if(w.exists()){const A=w.data();s(_=>_+`✅ 找到考試 ${m}:
`),s(_=>_+`標題: ${A.title}
`),s(_=>_+`類型: ${A.type}
`),s(_=>{var I;return _+`題目數量: ${((I=A.questions)==null?void 0:I.length)||0}
`}),A.questions&&A.questions.length>0&&(s(_=>_+`
題目預覽:
`),A.questions.slice(0,3).forEach((_,I)=>{s(E=>E+`${I+1}. ${_.question}
`),_.options.forEach((E,k)=>{const T=k===_.correctAnswer?" ✓":"";s(P=>P+`   ${String.fromCharCode(65+k)}. ${E}${T}
`)}),s(E=>E+`
`)}))}else s(A=>A+`❌ 找不到考試 ${m}
`),s(A=>A+`請先上傳考試資料！

`);const S=se(U,"exam-questions"),C=await be(S);s(A=>A+`
exam-questions 集合中共有 ${C.size} 個文檔:
`),C.docs.forEach(A=>{const _=A.data();s(I=>{var E;return I+`- ${A.id}: ${_.title||"無標題"} (${_.type||"unknown"}) - ${((E=_.questions)==null?void 0:E.length)||0} 題
`})})}catch(m){s(v=>v+`❌ 錯誤: ${m.message}
`),s(v=>v+`錯誤詳情: ${m.code||"未知錯誤"}
`),m.code==="permission-denied"&&(s(v=>v+`
💡 這可能是權限問題：
`),s(v=>v+`1. 確保您已登入
`),s(v=>v+`2. 檢查 Firebase 安全規則是否允許讀取 exam-questions 集合
`),s(v=>v+`3. 確保您的帳號有適當權限
`))}finally{o(!1)}},h=async()=>{o(!0),s(`檢查使用者認證狀態...

`);try{if(l){s(v=>v+`✅ 使用者已登入:
`),s(v=>v+`UID: ${l.uid}
`),s(v=>v+`Email: ${l.email}
`),s(v=>v+`Display Name: ${l.displayName||"未設定"}

`);const m=await l.getIdTokenResult();s(v=>v+`Token Claims:
`),s(v=>v+JSON.stringify(m.claims,null,2)+`

`)}else s(m=>m+`❌ 使用者未登入
`),s(m=>m+`請先登入再測試
`)}catch(m){s(v=>v+`❌ 認證檢查錯誤: ${m.message}
`)}finally{o(!1)}},g=async()=>{o(!0),s(`檢查 ID 格式一致性...

`);try{s(I=>I+`📁 檢查 section_contents 集合:
`);const v=(await be(se(U,"section_contents"))).docs.map(I=>({id:I.id,title:I.data().title||"無標題"}));s(I=>I+`找到 ${v.length} 個小節內容:
`),v.forEach(I=>{s(E=>E+`  - ${I.id}: ${I.title}
`)}),s(I=>I+`
`),s(I=>I+`📝 檢查 exam-questions 集合:
`);const S=(await be(se(U,"exam-questions"))).docs.map(I=>({id:I.id,title:I.data().title||"無標題",type:I.data().type||"unknown"}));s(I=>I+`找到 ${S.length} 個考試題目:
`),S.forEach(I=>{s(E=>E+`  - ${I.id} (${I.type}): ${I.title}
`)}),s(I=>I+`
`),s(I=>I+`🔍 ID 格式分析:
`);const C=S.filter(I=>I.type==="section"),A=v.map(I=>I.id);s(I=>I+`
📊 小節考試與內容匹配分析:
`),C.forEach(I=>{const E=A.find(k=>k===I.id);s(E?k=>k+`  ✅ ${I.id}: 考試與內容匹配
`:k=>k+`  ❌ ${I.id}: 找不到對應的內容
`)}),s(I=>I+`
📊 小節內容與考試匹配分析:
`),A.forEach(I=>{const E=C.find(k=>k.id===I);s(E?k=>k+`  ✅ ${I}: 內容與考試匹配
`:k=>k+`  ❌ ${I}: 找不到對應的考試
`)}),s(I=>I+`
🔄 測試前端請求格式轉換:
`),[{courseId:"001",chapterIndex:0,sectionIndex:0,expected:"001_1_1"},{courseId:"001",chapterIndex:1,sectionIndex:0,expected:"001_2_1"},{courseId:"001",chapterIndex:2,sectionIndex:0,expected:"001_3_1"},{courseId:"001",chapterIndex:3,sectionIndex:0,expected:"001_4_1"},{courseId:"001",chapterIndex:4,sectionIndex:0,expected:"001_5_1"},{courseId:"001",chapterIndex:5,sectionIndex:0,expected:"001_6_1"},{courseId:"001",chapterIndex:6,sectionIndex:0,expected:"001_7_1"}].forEach(I=>{const E=`${I.courseId}_${I.chapterIndex+1}_${I.sectionIndex+1}`,k=E===I.expected,T=A.includes(E),P=C.some(O=>O.id===E);s(O=>O+`  章節 ${I.chapterIndex+1} 小節 ${I.sectionIndex+1}:
`),s(O=>O+`    生成 ID: ${E} ${k?"✅":"❌"}
`),s(O=>O+`    內容存在: ${T?"✅":"❌"}
`),s(O=>O+`    考試存在: ${P?"✅":"❌"}
`)}),s(I=>I+`
🎯 檢查所有七章第一小節的完整性:
`);for(let I=1;I<=7;I++){const E=`001_${I}_1`,k=`001_${I}_1`,T=A.includes(E),P=C.some(O=>O.id===k);s(O=>O+`  第 ${I} 章第 1 節 (${E}):
`),s(O=>O+`    內容: ${T?"✅":"❌"}
`),s(O=>O+`    考試: ${P?"✅":"❌"}
`),(!T||!P)&&s(O=>O+`    ⚠️ 第 ${I} 章第 1 節缺少${T?"":"內容"}${!T&&!P?"和":""}${P?"":"考試"}
`)}}catch(m){s(v=>v+`❌ 檢查失敗: ${m.message}
`)}finally{o(!1)}};return i?u(y6,{children:u(b6,{children:"資料庫調試工具 - 載入中..."})}):y(y6,{children:[u(b6,{children:"資料庫調試工具"}),y(R1,{children:[y(N1,{children:["📚 courses 集合 (",e.length," 個課程)"]}),e.length===0?u("div",{children:"courses 集合為空"}):e.sort((m,v)=>(m.numeric_id||0)-(v.numeric_id||0)).map(p)]}),y(R1,{children:[y(N1,{children:["📋 course_summaries 集合 (",n.length," 個課程摘要)"]}),n.length===0?u("div",{children:"course_summaries 集合為空"}):n.sort((m,v)=>(m.numeric_id||0)-(v.numeric_id||0)).map(p)]}),y(R1,{children:[u(N1,{children:"🔍 問題分析"}),y("div",{style:{background:"white",padding:"15px",borderRadius:"6px"},children:[u("h4",{children:"找到的問題："}),y("ul",{children:[y("li",{children:[u("strong",{children:"第八章、第九章問題："}),e.concat(n).filter(m=>m.title&&(m.title.includes("第八章")||m.title.includes("第九章"))).length>0?"找到第八章或第九章":"沒有找到第八章或第九章 - 請檢查是否已正確添加到資料庫"]}),y("li",{children:[u("strong",{children:"缺少 category 的課程："}),e.concat(n).filter(m=>!m.category).length," 個"]}),y("li",{children:[u("strong",{children:"缺少 numeric_id 的課程："}),e.concat(n).filter(m=>!m.numeric_id).length," 個"]})]})]})]}),y("div",{style:{textAlign:"center",marginBottom:"20px"},children:[u(M1,{onClick:h,disabled:i,children:"檢查使用者認證"}),u(M1,{onClick:f,disabled:i,children:"檢查考試題目"}),u(M1,{onClick:g,disabled:i,children:"檢查 ID 格式一致性"})]}),a&&u(s1e,{children:a}),i&&u("div",{style:{textAlign:"center",margin:"20px 0"},children:"⏳ 處理中..."})]})},c1e=b("div",{target:"e3ye9bt5"})({name:"1wxo78s",styles:"padding:20px;padding-bottom:120px;max-width:800px;margin:0 auto"}),u1e=b("div",{target:"e3ye9bt4"})("background:",e=>e.theme.cardBg,";border-radius:12px;padding:30px;box-shadow:0 6px 15px rgba(0,0,0,0.05);margin-bottom:20px;"),d1e=b("h2",{target:"e3ye9bt3"})("color:",e=>e.theme.text,";margin-bottom:20px;"),w6=b("button",{target:"e3ye9bt2"})("padding:12px 24px;background:",e=>e.theme.primary,";color:white;border:none;border-radius:8px;font-size:16px;cursor:pointer;margin-right:10px;margin-bottom:10px;transition:opacity 0.3s;&:hover{opacity:0.9;}"),p1e=b("div",{target:"e3ye9bt1"})("margin-top:20px;padding:15px;border-radius:8px;background:",e=>e.success?e.theme.success+"20":e.theme.error+"20",";color:",e=>e.success?e.theme.success:e.theme.error,";"),fg=b(bt,{target:"e3ye9bt0"})("display:inline-block;padding:12px 24px;background:",e=>e.theme.info,";color:white;text-decoration:none;border-radius:8px;font-size:16px;margin-top:15px;margin-right:10px;transition:opacity 0.3s;&:hover{opacity:0.9;}"),h1e=()=>{const[e,t]=D.useState(""),[n,r]=D.useState(!1),[i,o]=D.useState(!1),a=[{title:"基礎產品知識",description:"學習公司產品的基礎知識和特點",order:1},{title:"銷售技巧",description:"學習有效的產品銷售技巧和客戶溝通方法",order:2},{title:"客戶服務",description:"提供優質客戶服務的方法和流程",order:3}],s=(h,g,m)=>[{title:`${g} - 基礎概念`,description:"了解基礎概念和術語",content:"這是小節的內容，包含了基礎概念和術語的詳細解釋。",chapterId:h,order:m*100+1},{title:`${g} - 應用技巧`,description:"學習如何應用所學知識",content:"這是小節的內容，包含了應用技巧的詳細解釋和示例。",chapterId:h,order:m*100+2},{title:`${g} - 實踐案例`,description:"通過案例學習實際運用",content:"這是小節的內容，包含了實踐案例和解決方案。",chapterId:h,order:m*100+3}],l=(h,g)=>[{questionText:"這是關於該小節的第一個測試問題？",options:["選項A - 正確答案","選項B - 錯誤答案","選項C - 錯誤答案","選項D - 錯誤答案"],correctOptionIndex:0,sectionId:h,chapterId:g},{questionText:"這是關於該小節的第二個測試問題？",options:["選項A - 錯誤答案","選項B - 正確答案","選項C - 錯誤答案","選項D - 錯誤答案"],correctOptionIndex:1,sectionId:h,chapterId:g},{questionText:"這是關於該小節的第三個測試問題？",options:["選項A - 錯誤答案","選項B - 錯誤答案","選項C - 正確答案","選項D - 錯誤答案"],correctOptionIndex:2,sectionId:h,chapterId:g}],c=(h,g)=>[{questionText:`${g} 章節大考 - 問題1？`,options:["選項A - 正確答案","選項B - 錯誤答案","選項C - 錯誤答案","選項D - 錯誤答案"],correctOptionIndex:0,chapterId:h,isChapterExam:!0},{questionText:`${g} 章節大考 - 問題2？`,options:["選項A - 錯誤答案","選項B - 正確答案","選項C - 錯誤答案","選項D - 錯誤答案"],correctOptionIndex:1,chapterId:h,isChapterExam:!0},{questionText:`${g} 章節大考 - 問題3？`,options:["選項A - 錯誤答案","選項B - 錯誤答案","選項C - 正確答案","選項D - 錯誤答案"],correctOptionIndex:2,chapterId:h,isChapterExam:!0},{questionText:`${g} 章節大考 - 問題4？`,options:["選項A - 錯誤答案","選項B - 錯誤答案","選項C - 錯誤答案","選項D - 正確答案"],correctOptionIndex:3,chapterId:h,isChapterExam:!0},{questionText:`${g} 章節大考 - 問題5？`,options:["選項A - 正確答案","選項B - 錯誤答案","選項C - 錯誤答案","選項D - 錯誤答案"],correctOptionIndex:0,chapterId:h,isChapterExam:!0}],d=async()=>{try{return!(await be(se(U,"chapters"))).empty}catch(h){throw console.error("檢查現有資料時出錯：",h),h}};return y(Ne,{children:[u(Bt,{title:"測試資料管理"}),u(c1e,{children:y(u1e,{children:[u(d1e,{children:"測試資料管理"}),u("p",{children:"這個頁面用於向 Firebase 添加考試測試資料，包括章節、小節和測驗題目。"}),u("p",{style:{marginTop:"10px",color:"#F44336"},children:"注意：您需要先登入，並且 Firebase 資料庫需要正確設置權限才能添加資料。"}),y("div",{style:{marginTop:"20px"},children:[u(w6,{onClick:async()=>{try{o(!0),t("開始添加測試資料...");try{if(await d()){t("資料庫中已有章節資料，請勿重複添加。"),r(!1),o(!1);return}}catch(g){console.error("檢查現有資料時出錯：",g),t(`檢查資料失敗：${g.message}。可能是權限問題，請確保您已登入並具有適當權限。`),r(!1),o(!1);return}t("新增章節中...");const h=[];try{for(const g of a){const m=await tr(se(U,"chapters"),{...g,createdAt:new Date().toISOString()});h.push({id:m.id,title:g.title,order:g.order})}}catch(g){console.error("添加章節時出錯：",g),t(`添加章節失敗：${g.message}。可能是權限問題，請確保您已登入並具有適當權限。`),r(!1),o(!1);return}t("新增小節和測驗題目中...");try{for(const g of h){const m=s(g.id,g.title,g.order);for(const w of m){const S=await tr(se(U,"sections"),{...w,createdAt:new Date().toISOString()}),C=l(S.id,g.id);for(const A of C)await tr(se(U,"questions"),{...A,createdAt:new Date().toISOString()})}const v=c(g.id,g.title);for(const w of v)await tr(se(U,"questions"),{...w,createdAt:new Date().toISOString()})}}catch(g){console.error("添加小節或題目時出錯：",g),t(`添加小節或題目失敗：${g.message}。可能是權限問題，請確保您已登入並具有適當權限。`),r(!1),o(!1);return}t("測試資料添加成功！現在您可以訪問考試頁面了。"),r(!0)}catch(h){console.error("添加測試資料出錯：",h),t(`添加測試資料失敗：${h.message}。可能是權限問題，請確保您已登入並具有適當權限。`),r(!1)}finally{o(!1)}},disabled:i,children:i?"處理中...":"添加測試資料"}),u(w6,{onClick:async()=>{if(window.confirm("確定要刪除所有測試資料嗎？此操作不可逆！"))try{o(!0),t("開始清除測試資料...");const h=await be(se(U,"questions"));let g=0;for(const w of h.docs)await si(w.ref),g++;t(`已刪除 ${g} 個問題...`),g=0;const m=await be(se(U,"sections"));for(const w of m.docs)await si(w.ref),g++;t(`已刪除 ${g} 個小節...`),g=0;const v=await be(se(U,"chapters"));for(const w of v.docs)await si(w.ref),g++;t("所有測試資料已清除完畢。"),r(!0)}catch(h){console.error("清除測試資料出錯：",h),t(`清除測試資料失敗：${h.message}`),r(!1)}finally{o(!1)}},disabled:i,style:{background:"#F44336"},children:"清除所有測試資料"}),u(fg,{to:"/firebase-rules",children:"查看 Firebase 安全規則設置指南"}),u(fg,{to:"/check-user-role",style:{background:"#2196F3",marginLeft:"10px"},children:"檢查用戶角色權限"})]}),e&&y(p1e,{success:n,children:[e,e.includes("權限問題")&&y("div",{style:{marginTop:"15px"},children:[u(fg,{to:"/firebase-rules",children:"查看 Firebase 安全規則設置指南"}),u(fg,{to:"/check-user-role",style:{background:"#2196F3",marginLeft:"10px"},children:"檢查用戶角色權限"})]})]})]})})]})},f1e=()=>{const[e,t]=D.useState(!1),[n,r]=D.useState("");return y("div",{style:{padding:"40px",maxWidth:"600px",margin:"0 auto",fontFamily:"Arial, sans-serif"},children:[u("h1",{style:{color:"#333",textAlign:"center"},children:"創建測試課程"}),u("div",{style:{textAlign:"center",marginBottom:"30px"},children:u("button",{onClick:async()=>{try{t(!0),r("正在創建測試課程..."),console.log("開始創建測試課程"),console.log("Firebase DB 實例:",U);const o=fo(),a={title:"React 基礎教學",description:"這是一個 React 基礎教學課程，將帶您從零開始學習 React 的核心概念。",authorUid:"test-author",createdAt:At(),viewCount:0,blocks:[{type:"heading",data:{text:"什麼是 React？"}},{type:"paragraph",data:{text:"React 是一個用於構建用戶界面的 JavaScript 函式庫。它由 Facebook 開發，現在被廣泛用於前端開發。React 的核心概念包括組件、狀態管理和虛擬 DOM。"}},{type:"heading",data:{text:"React 的主要特點"}},{type:"paragraph",data:{text:`1. 組件化架構：React 允許您將 UI 分解為可重用的組件。
2. 虛擬 DOM：提高了性能，減少了直接操作 DOM 的需要。
3. 單向數據流：使應用程序的狀態更可預測和易於調試。
4. 豐富的生態系統：有大量的第三方庫和工具可供使用。`}},{type:"image",data:{url:"https://images.unsplash.com/photo-1555066931-4365d14bab8c?q=80&w=2070&auto=format&fit=crop",caption:"React 開發環境示意圖"}},{type:"heading",data:{text:"開始學習 React"}},{type:"paragraph",data:{text:`要開始學習 React，您需要具備以下基礎知識：
• HTML 和 CSS 基礎
• JavaScript ES6+ 語法
• 命令行基本操作
• Node.js 和 npm 的基本了解

完成這個課程後，您將能够創建自己的 React 應用程序！`}}]};console.log("課程資料:",a);const s=Ie(U,"courses",o);console.log("開始寫入 Firestore..."),await zt(s,a),console.log("課程寫入成功"),r(`測試課程創建成功！課程 ID: ${o}`);const l=fo(),c={title:"JavaScript 進階技巧",description:"深入學習 JavaScript 的高級概念和技巧，包括閉包、原型鍊、異步編程等。",authorUid:"test-author",createdAt:At(),viewCount:5,blocks:[{type:"heading",data:{text:"JavaScript 進階概念"}},{type:"paragraph",data:{text:"JavaScript 是一門功能強大的編程語言，掌握其進階概念對於成為優秀的前端開發者至關重要。"}},{type:"heading",data:{text:"閉包 (Closure)"}},{type:"paragraph",data:{text:"閉包是 JavaScript 中一個重要的概念。它允許內部函數訪問外部函數的變量，即使外部函數已經執行完畢。閉包在模塊化、數據隱藏和回調函數中都有重要應用。"}},{type:"image",data:{url:"https://images.unsplash.com/photo-1592609931095-54a2168ae893?q=80&w=2070&auto=format&fit=crop",caption:"JavaScript 代碼示例"}}]},d=Ie(U,"courses",l);await zt(d,c),r(p=>p+`
第二個測試課程也創建成功！課程 ID: ${l}`)}catch(o){console.error("創建測試課程失敗:",o),r("創建測試課程失敗: "+o.message)}finally{t(!1)}},disabled:e,style:{padding:"12px 24px",fontSize:"16px",backgroundColor:e?"#ccc":"#007bff",color:"white",border:"none",borderRadius:"6px",cursor:e?"not-allowed":"pointer",transition:"background-color 0.3s"},children:e?"創建中...":"創建測試課程"})}),n&&u("div",{style:{padding:"15px",backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"6px",whiteSpace:"pre-line",fontFamily:"monospace",fontSize:"14px"},children:n}),y("div",{style:{marginTop:"30px",color:"#666"},children:[u("h3",{children:"說明："}),y("ul",{children:[u("li",{children:"此腳本將創建兩個測試課程到 Firestore"}),u("li",{children:"課程包含標題、段落和圖片區塊"}),u("li",{children:"創建完成後可以到 /courses 頁面查看"}),u("li",{children:"可以點擊課程卡片查看詳細內容"})]})]})]})},g1e=b("div",{target:"e2g3q6010"})({name:"182m2i3",styles:"padding:20px;max-width:800px;margin:0 auto"}),m1e=b("div",{target:"e2g3q609"})("background:",e=>e.theme.cardBg,";border-radius:12px;padding:30px;box-shadow:0 6px 15px rgba(0,0,0,0.05);margin-bottom:20px;"),v1e=b("h2",{target:"e2g3q608"})("color:",e=>e.theme.text,";margin-bottom:20px;"),O1=b("h3",{target:"e2g3q607"})("color:",e=>e.theme.text,";margin:25px 0 15px;"),x1e=b("p",{target:"e2g3q606"})({name:"5ly1xb",styles:"margin-bottom:15px;line-height:1.6"}),y1e=b("ul",{target:"e2g3q605"})({name:"1o47xjy",styles:"margin-bottom:20px;padding-left:20px;li{margin-bottom:8px;}"}),b1e=b("pre",{target:"e2g3q604"})("background:",e=>e.theme.codeBg||"#282a36",";padding:15px;border-radius:8px;overflow-x:auto;font-family:'Source Code Pro',monospace;font-size:14px;margin:15px 0;color:",e=>e.theme.codeText||"#f8f8f2",";"),gg=b("div",{target:"e2g3q603"})("margin-bottom:25px;padding-bottom:20px;border-bottom:1px solid ",e=>e.theme.borderColor,";&:last-child{border-bottom:none;}"),mg=b("div",{target:"e2g3q602"})("display:inline-block;width:30px;height:30px;background:",e=>e.theme.primary,";color:white;border-radius:50%;text-align:center;line-height:30px;margin-right:10px;font-weight:bold;"),$1=b(bt,{target:"e2g3q601"})("display:inline-block;padding:12px 24px;background:",e=>e.theme.primary,";color:white;text-decoration:none;border-radius:8px;font-size:16px;margin-top:20px;transition:opacity 0.3s;&:hover{opacity:0.9;}"),w1e=b("div",{target:"e2g3q600"})("padding:15px;background:",e=>e.theme.warning,"20;border-left:4px solid ",e=>e.theme.warning,";margin:15px 0;"),S1e=()=>y(Ne,{children:[u(Bt,{title:"Firebase 安全規則設置指南"}),u(g1e,{children:y(m1e,{children:[u(v1e,{children:"Firebase 安全規則設置指南"}),u(x1e,{children:"為了讓應用程序正常工作，您需要在 Firebase 控制台中設置正確的安全規則。 本指南將幫助您設置適當的 Firestore 安全規則，以便您可以添加和管理考試資料。"}),y(w1e,{children:[u("strong",{children:"重要提醒："})," 安全規則對於保護您的資料至關重要。本指南中的一些規則是寬鬆的，適合開發和測試環境。 在生產環境中，您應該根據實際需求制定更嚴格的規則。"]}),u(O1,{children:"設置步驟"}),y(gg,{children:[u(mg,{children:"1"}),u("span",{children:"登入 Firebase 控制台"}),y("p",{children:["訪問 ",u("a",{href:"https://console.firebase.google.com/",target:"_blank",rel:"noopener noreferrer",children:"Firebase 控制台"})," 並選擇您的專案。"]})]}),y(gg,{children:[u(mg,{children:"2"}),u("span",{children:"導航到 Cloud Firestore 安全規則"}),u("p",{children:'在左側導航菜單中，選擇 "Firestore Database"，然後點擊 "Rules" 標籤。'})]}),y(gg,{children:[u(mg,{children:"3"}),u("span",{children:"複製並粘貼以下規則"}),u("p",{children:"刪除現有規則，然後粘貼以下規則："}),u(b1e,{children:`rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // 允許任何人讀取課程、章節和小節資料
    match /courses/{courseId} {
      allow read: if true;
      allow write: if request.auth != null && (request.auth.token.admin == true || request.auth.token.enterprise == true);
    }
    
    match /chapters/{chapterId} {
      allow read: if true;
      allow write: if request.auth != null && (request.auth.token.admin == true || request.auth.token.enterprise == true);
    }
    
    match /sections/{sectionId} {
      allow read: if true;
      allow write: if request.auth != null && (request.auth.token.admin == true || request.auth.token.enterprise == true);
    }
    
    // 允許任何人讀取考試題目
    match /questions/{questionId} {
      allow read: if true;
      allow write: if request.auth != null && (request.auth.token.admin == true || request.auth.token.enterprise == true);
    }
    
    // 允許已登入用戶讀取和創建考試結果
    match /examResults/{resultId} {
      allow read: if request.auth != null && (
        resource.data.userId == request.auth.uid || 
        request.auth.token.admin == true || 
        request.auth.token.enterprise == true
      );
      allow create: if request.auth != null && request.resource.data.userId == request.auth.uid;
      allow update, delete: if request.auth != null && (
        resource.data.userId == request.auth.uid || 
        request.auth.token.admin == true || 
        request.auth.token.enterprise == true
      );
    }
    
    // 測試資料 - 僅供測試使用
    // 在生產環境中，您應該移除這些規則或限制它們
    match /chapters/{document=**} {
      allow read, write: if request.auth != null;
    }
    
    match /sections/{document=**} {
      allow read, write: if request.auth != null;
    }
    
    match /questions/{document=**} {
      allow read, write: if request.auth != null;
    }
    
    match /examResults/{document=**} {
      allow read, write: if request.auth != null;
    }
    
    // 其他集合的默認規則
    match /{document=**} {
      allow read, write: if request.auth != null && (request.auth.token.admin == true);
    }
  }
}`})]}),y(gg,{children:[u(mg,{children:"4"}),u("span",{children:"發布規則"}),u("p",{children:'點擊 "Publish" 按鈕來發布這些規則。'})]}),u(O1,{children:"規則說明"}),u("p",{children:"以上規則執行以下權限控制："}),y(y1e,{children:[u("li",{children:"允許所有用戶讀取課程、章節、小節和問題資料。"}),u("li",{children:"只允許管理員或企業用戶創建和修改課程、章節、小節和問題資料。"}),u("li",{children:"允許已登入用戶讀取和創建他們自己的考試結果。"}),u("li",{children:"為測試目的，允許任何已登入用戶寫入測試資料。"})]}),u(O1,{children:"自定義聲明"}),u("p",{children:"這些規則使用自定義聲明（Custom Claims）來確定用戶角色。您需要使用 Firebase Admin SDK 或 Cloud Functions 來為用戶設置這些聲明。在我們的應用中，我們已經設置了相關功能。"}),u($1,{to:"/set-admin-role",children:"設置用戶角色（測試用）"}),u($1,{to:"/check-user-role",style:{background:"#2196F3",marginLeft:"15px"},children:"檢查當前用戶角色"}),u($1,{to:"/seed-exam-data",style:{background:"#4CAF50",marginLeft:"15px"},children:"返回測試資料管理"})]})})]}),L1=b("div",{target:"e1igaqhy6"})({name:"182m2i3",styles:"padding:20px;max-width:800px;margin:0 auto"}),S6=b("div",{target:"e1igaqhy5"})("background:",e=>e.theme.cardBg,";border-radius:12px;padding:30px;box-shadow:0 6px 15px rgba(0,0,0,0.05);margin-bottom:20px;"),F1=b("h2",{target:"e1igaqhy4"})("color:",e=>e.theme.text,";margin-bottom:20px;"),$o=b("div",{target:"e1igaqhy3"})("margin-bottom:15px;padding:10px;background:",e=>e.theme.grayLight,";border-radius:8px;"),Lo=b("span",{target:"e1igaqhy2"})({name:"62oniz",styles:"font-weight:bold;margin-right:10px"}),Ia=b("span",{target:"e1igaqhy1"})("color:",e=>e.theme.textSecondary,";"),C1e=b("button",{target:"e1igaqhy0"})("padding:12px 24px;background:",e=>e.theme.primary,";color:white;border:none;border-radius:8px;font-size:16px;cursor:pointer;margin-top:20px;transition:opacity 0.3s;&:hover{opacity:0.9;}"),_1e=()=>{const[e,t]=zv(Fi),[n,r]=D.useState(null),[i,o]=D.useState(null);D.useEffect(()=>{e&&a()},[e]);const a=async()=>{try{const l=await e.getIdTokenResult();o(l);const c=l.claims;r(c),console.log("用戶聲明:",c)}catch(l){console.error("獲取用戶聲明失敗:",l)}},s=async()=>{try{await Fi.currentUser.getIdToken(!0),await a(),alert("令牌已刷新！")}catch(l){console.error("刷新令牌失敗:",l),alert("刷新令牌失敗: "+l.message)}};return t?y(Ne,{children:[u(Bt,{title:"用戶角色檢查"}),u(L1,{children:u("p",{children:"載入中..."})})]}):e?y(Ne,{children:[u(Bt,{title:"用戶角色檢查"}),u(L1,{children:y(S6,{children:[u(F1,{children:"用戶信息"}),y($o,{children:[u(Lo,{children:"用戶 ID:"}),u(Ia,{children:e.uid})]}),y($o,{children:[u(Lo,{children:"電子郵件:"}),u(Ia,{children:e.email})]}),y($o,{children:[u(Lo,{children:"顯示名稱:"}),u(Ia,{children:e.displayName||"未設置"})]}),y($o,{children:[u(Lo,{children:"電子郵件驗證:"}),u(Ia,{children:e.emailVerified?"已驗證":"未驗證"})]}),u(F1,{style:{marginTop:"30px"},children:"用戶角色和聲明"}),n?y(Ne,{children:[y($o,{children:[u(Lo,{children:"管理員權限:"}),u(Ia,{children:n.admin?"是":"否"})]}),y($o,{children:[u(Lo,{children:"企業用戶權限:"}),u(Ia,{children:n.enterprise?"是":"否"})]}),y($o,{children:[u(Lo,{children:"所有聲明:"}),u("pre",{style:{marginTop:"10px",overflow:"auto"},children:JSON.stringify(n,null,2)})]}),i&&y($o,{children:[u(Lo,{children:"令牌發行時間:"}),u(Ia,{children:new Date(i.issuedAtTime).toLocaleString()})]}),i&&y($o,{children:[u(Lo,{children:"令牌過期時間:"}),u(Ia,{children:new Date(i.expirationTime).toLocaleString()})]})]}):u("p",{children:"獲取用戶聲明中..."}),u(C1e,{onClick:s,children:"刷新令牌"})]})})]}):y(Ne,{children:[u(Bt,{title:"用戶角色檢查"}),u(L1,{children:y(S6,{children:[u(F1,{children:"未登入"}),u("p",{children:"請先登入以查看您的角色信息。"})]})})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1e="type.googleapis.com/google.protobuf.Int64Value",E1e="type.googleapis.com/google.protobuf.UInt64Value";function x9(e,t){const n={};for(const r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function p0(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>p0(t));if(typeof e=="function"||typeof e=="object")return x9(e,t=>p0(t));throw new Error("Data cannot be encoded in JSON: "+e)}function Xc(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case k1e:case E1e:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>Xc(t)):typeof e=="function"||typeof e=="object"?x9(e,t=>Xc(t)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ur extends to{constructor(t,n,r){super(`${WC}/${t}`,n||""),this.details=r,Object.setPrototypeOf(this,Ur.prototype)}}function T1e(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function h0(e,t){let n=T1e(e),r=n,i;try{const o=t&&t.error;if(o){const a=o.status;if(typeof a=="string"){if(!C6[a])return new Ur("internal","internal");n=C6[a],r=a}const s=o.message;typeof s=="string"&&(r=s),i=o.details,i!==void 0&&(i=Xc(i))}}catch{}return n==="ok"?null:new Ur(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let I1e=class{constructor(t,n,r,i){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Br(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||i==null||i.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(t){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(t);return{authToken:n,messagingToken:r,appCheckToken:i}}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="us-central1",A1e=/^data: (.*?)(?:\n|$)/;function P1e(e){let t=null;return{promise:new Promise((n,r)=>{t=setTimeout(()=>{r(new Ur("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class D1e{constructor(t,n,r,i,o=iw,a=(...s)=>fetch(...s)){this.app=t,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new I1e(t,n,r,i),this.cancelAllRequests=new Promise(s=>{this.deleteService=()=>Promise.resolve(s())});try{const s=new URL(o);this.customDomain=s.origin+(s.pathname==="/"?"":s.pathname),this.region=iw}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(t){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${n}.cloudfunctions.net/${t}`}}function R1e(e,t,n){const r=Es(t);e.emulatorOrigin=`http${r?"s":""}://${t}:${n}`,r&&(J0(e.emulatorOrigin),Z0("Functions",!0))}function N1e(e,t,n){const r=i=>O1e(e,t,i,{});return r.stream=(i,o)=>L1e(e,t,i,o),r}async function M1e(e,t,n,r){n["Content-Type"]="application/json";let i;try{i=await r(e,{method:"POST",body:JSON.stringify(t),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function y9(e,t){const n={},r=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function O1e(e,t,n,r){const i=e._url(t);return $1e(e,i,n,r)}async function $1e(e,t,n,r){n=p0(n);const i={data:n},o=await y9(e,r),a=r.timeout||7e4,s=P1e(a),l=await Promise.race([M1e(t,i,o,e.fetchImpl),s.promise,e.cancelAllRequests]);if(s.cancel(),!l)throw new Ur("cancelled","Firebase Functions instance was deleted.");const c=h0(l.status,l.json);if(c)throw c;if(!l.json)throw new Ur("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new Ur("internal","Response is missing data field.");return{data:Xc(d)}}function L1e(e,t,n,r){const i=e._url(t);return F1e(e,i,n,r||{})}async function F1e(e,t,n,r){var i;n=p0(n);const o={data:n},a=await y9(e,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let s;try{s=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(o),headers:a,signal:r==null?void 0:r.signal})}catch(h){if(h instanceof Error&&h.name==="AbortError"){const m=new Ur("cancelled","Request was cancelled.");return{data:Promise.reject(m),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(m)}}}}}}const g=h0(0,null);return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}let l,c;const d=new Promise((h,g)=>{l=h,c=g});(i=r==null?void 0:r.signal)===null||i===void 0||i.addEventListener("abort",()=>{const h=new Ur("cancelled","Request was cancelled.");c(h)});const p=s.body.getReader(),f=B1e(p,l,c,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const h=f.getReader();return{async next(){const{value:g,done:m}=await h.read();return{value:g,done:m}},async return(){return await h.cancel(),{done:!0,value:void 0}}}}},data:d}}function B1e(e,t,n,r){const i=(a,s)=>{const l=a.match(A1e);if(!l)return;const c=l[1];try{const d=JSON.parse(c);if("result"in d){t(Xc(d.result));return}if("message"in d){s.enqueue(Xc(d.message));return}if("error"in d){const p=h0(0,d);s.error(p),n(p);return}}catch(d){if(d instanceof Ur){s.error(d),n(d);return}}},o=new TextDecoder;return new ReadableStream({start(a){let s="";return l();async function l(){if(r!=null&&r.aborted){const c=new Ur("cancelled","Request was cancelled");return a.error(c),n(c),Promise.resolve()}try{const{value:c,done:d}=await e.read();if(d){s.trim()&&i(s.trim(),a),a.close();return}if(r!=null&&r.aborted){const f=new Ur("cancelled","Request was cancelled");a.error(f),n(f),await e.cancel();return}s+=o.decode(c,{stream:!0});const p=s.split(`
`);s=p.pop()||"";for(const f of p)f.trim()&&i(f.trim(),a);return l()}catch(c){const d=c instanceof Ur?c:h0(0,null);a.error(d),n(d)}}},cancel(){return e.cancel()}})}const _6="@firebase/functions",k6="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1e="auth-internal",V1e="app-check-internal",j1e="messaging-internal";function U1e(e){const t=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),o=n.getProvider(z1e),a=n.getProvider(j1e),s=n.getProvider(V1e);return new D1e(i,o,a,s,r)};ds(new ea(WC,t,"PUBLIC").setMultipleInstances(!0)),Ni(_6,k6,e),Ni(_6,k6,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1e(e=ev(),t=iw){const r=rh(Vt(e),WC).getImmediate({identifier:t}),i=S5("functions");return i&&W1e(r,...i),r}function W1e(e,t,n){R1e(Vt(e),t,n)}function H1e(e,t,n){return N1e(Vt(e),t)}U1e();const G1e=b("div",{target:"eqnim4d8"})({name:"182m2i3",styles:"padding:20px;max-width:800px;margin:0 auto"}),Y1e=b("div",{target:"eqnim4d7"})("background:",e=>e.theme.cardBg,";border-radius:12px;padding:30px;box-shadow:0 6px 15px rgba(0,0,0,0.05);margin-bottom:20px;"),K1e=b("h2",{target:"eqnim4d6"})("color:",e=>e.theme.text,";margin-bottom:20px;"),X1e=b("form",{target:"eqnim4d5"})({name:"1b1z0gh",styles:"display:grid;gap:15px"}),Q1e=b("input",{target:"eqnim4d4"})("padding:12px;border:1px solid ",e=>e.theme.borderColor,";border-radius:8px;font-size:16px;"),J1e=b("button",{target:"eqnim4d3"})("padding:12px 24px;background:",e=>e.theme.primary,";color:white;border:none;border-radius:8px;font-size:16px;cursor:pointer;transition:opacity 0.3s;&:hover{opacity:0.9;}&:disabled{opacity:0.5;cursor:not-allowed;}"),E6=b("select",{target:"eqnim4d2"})("padding:12px;border:1px solid ",e=>e.theme.borderColor,";border-radius:8px;font-size:16px;"),Z1e=b("div",{target:"eqnim4d1"})("margin-top:20px;padding:15px;border-radius:8px;background:",e=>e.success?e.theme.success+"20":e.theme.error+"20",";color:",e=>e.success?e.theme.success:e.theme.error,";"),ebe=b("div",{target:"eqnim4d0"})("margin-bottom:20px;padding:15px;border-radius:8px;background:",e=>e.theme.warning+"20",";color:",e=>e.theme.warning,";border:1px solid ",e=>e.theme.warning,";"),tbe=()=>{const[e,t]=D.useState(""),[n,r]=D.useState("admin"),[i,o]=D.useState(!0),[a,s]=D.useState(!1),[l,c]=D.useState(""),[d,p]=D.useState(!1);return y(Ne,{children:[u(Bt,{title:"設置用戶角色"}),u(G1e,{children:y(Y1e,{children:[u(K1e,{children:"設置用戶角色"}),y(ebe,{children:[u("strong",{children:"警告："})," 此功能僅供測試使用。在生產環境中，您應該通過適當的管理界面來管理用戶角色。"]}),u("p",{children:"使用此頁面可以設置用戶的管理員或企業用戶權限。用戶需要重新登入才能使新的權限生效。"}),y(X1e,{onSubmit:async h=>{if(h.preventDefault(),!e){c("請輸入電子郵件地址"),p(!1);return}s(!0),c("");try{const g=q1e(),v=await H1e(g,"setCustomClaim")({email:e,role:n,value:i});console.log("設置角色結果:",v.data),c(`成功設置用戶 ${e} 的 ${n} 角色為 ${i?"啟用":"禁用"}。用戶需要重新登入才能生效。`),p(!0)}catch(g){console.error("設置角色失敗:",g),c(`設置角色失敗: ${g.message}`),p(!1)}finally{s(!1)}},children:[u(Q1e,{type:"email",placeholder:"用戶電子郵件",value:e,onChange:h=>t(h.target.value),required:!0}),y(E6,{value:n,onChange:h=>r(h.target.value),children:[u("option",{value:"admin",children:"管理員"}),u("option",{value:"enterprise",children:"企業用戶"})]}),y(E6,{value:i.toString(),onChange:h=>o(h.target.value==="true"),children:[u("option",{value:"true",children:"啟用"}),u("option",{value:"false",children:"禁用"})]}),u(J1e,{type:"submit",disabled:a,children:a?"處理中...":"設置角色"})]}),l&&u(Z1e,{success:d,children:l})]})})]})},T6=[{title:"第一章｜飲料基礎認識與作業環境",description:"建立觀念，了解環境與衛生是進店的第一步！",chapters:[{title:"門市設備與器具認識",icon:"ri-store-line"},{title:"飲料製作流程總覽",icon:"ri-flow-chart"},{title:"基本衛生與清潔規範",icon:"ri-hand-sanitizer-line"},{title:"冰塊、糖度與客製化規則介紹",icon:"ri-scales-line"}],icon:"ri-building-line",gradient:"#7C3AED, #3B82F6",coverImage:"https://images.unsplash.com/photo-1545665277-5937489579f2?q=80&w=2070&auto=format&fit=crop",category:"基礎訓練",level:"初級",duration:"2.5 小時"},{title:"第二章｜煮茶篇",description:"一壺好茶，是一切飲品的靈魂！",chapters:[{title:"綠茶煮法（烏龍、四季春）",icon:"ri-cup-line"},{title:"紅茶煮法（阿薩姆、錫蘭）",icon:"ri-cup-line"},{title:"烏龍茶煮法（鐵觀音、包種）",icon:"ri-cup-line"},{title:"茶湯保存與每日備茶流程",icon:"ri-flask-line"}],icon:"ri-cup-line",gradient:"#EC4899, #F472B6",coverImage:"https://images.unsplash.com/photo-1564890369878-4be5a6074af0?q=80&w=2070&auto=format&fit=crop",category:"飲料製作",level:"初級",duration:"3 小時"},{title:"第三章｜調奶篇",description:"奶類搭配與技巧，決定你奶茶會不會爆單！",chapters:[{title:"奶精與鮮奶差異",icon:"ri-water-flash-line"},{title:"奶茶基本比例與沖泡技巧",icon:"ri-goblet-line"},{title:"奶類搭配範例（紅茶拿鐵、烏龍奶等）",icon:"ri-goblet-line"},{title:"奶泡製作與應用（抹茶奶蓋、奶霜）",icon:"ri-bubble-chart-line"}],icon:"ri-goblet-line",gradient:"#2563EB, #60A5FA",coverImage:"https://images.unsplash.com/photo-1569399078436-da10fbd60f12?q=80&w=1925&auto=format&fit=crop",category:"飲料製作",level:"中級",duration:"2.5 小時"},{title:"第四章｜加料篇",description:"波霸不只是加進去，要煮得好、加得美！",chapters:[{title:"珍珠煮法（黑糖珍珠、白玉）",icon:"ri-scales-line"},{title:"愛玉、椰果、仙草等製備與保存",icon:"ri-fridge-line"},{title:"加料組合技巧（Q彈感、視覺美感）",icon:"ri-palette-line"},{title:"加料搭配實務與創意應用",icon:"ri-magic-line"}],icon:"ri-shapes-line",gradient:"#F59E0B, #FBBF24",coverImage:"https://images.unsplash.com/photo-1575879911904-f2562c68c16c?q=80&w=1932&auto=format&fit=crop",category:"飲料製作",level:"中級",duration:"3 小時"},{title:"第五章｜果飲與冰沙篇",description:"清新果味，是夏天銷量保證！",chapters:[{title:"水果茶與鮮果打底飲品製作",icon:"ri-seedling-line"},{title:"果泥、果醬與果糖的使用技巧",icon:"ri-drop-line"},{title:"冰沙機器操作與濃稠度調整",icon:"ri-settings-line"},{title:"飲品分層與杯面美學（漸層果茶）",icon:"ri-brush-line"}],icon:"ri-seedling-line",gradient:"#10B981, #34D399",coverImage:"https://images.unsplash.com/photo-1504675099198-7023dd80d5e3?q=80&w=1974&auto=format&fit=crop",category:"飲料製作",level:"中級",duration:"3.5 小時"},{title:"第六章｜出杯與點單流程篇",description:"最後一哩，是與顧客溝通的藝術",chapters:[{title:"POS點餐機操作教學",icon:"ri-terminal-box-line"},{title:"出杯順序與杯標辨識",icon:"ri-stack-line"},{title:"外送平台點單與包裝流程",icon:"ri-bike-line"},{title:"高峰時段分工與出杯節奏管理",icon:"ri-team-line"}],icon:"ri-customer-service-line",gradient:"#8B5CF6, #C4B5FD",coverImage:"https://images.unsplash.com/photo-1577354087137-fd19bd23d139?q=80&w=1976&auto=format&fit=crop",category:"店面管理",level:"初級",duration:"2 小時"},{title:"第七章｜進階職人技巧",description:"成為全能店長不是夢！",chapters:[{title:"顧客應對技巧與話術訓練",icon:"ri-chat-4-line"},{title:"飲品創新研發流程與命名技巧",icon:"ri-flask-line"},{title:"社群經營與品牌行銷",icon:"ri-instagram-line"},{title:"營業數據分析與進貨規劃基礎",icon:"ri-line-chart-line"}],icon:"ri-medal-line",gradient:"#EA580C, #FFA000",coverImage:"https://images.unsplash.com/photo-1578574577315-3fbeb0cecdc2?q=80&w=2072&auto=format&fit=crop",category:"行銷技巧",level:"高級",duration:"4 小時",advanced:!0}],nbe=async()=>{try{console.log("開始上傳課程數據到 Firestore...");for(let e=0;e<T6.length;e++){const t=T6[e],n=fo(),r=At(),i=t.chapters.map((s,l)=>({title:s.title,description:"",icon:s.icon,order:l+1,subsections:[{title:"正在撰寫中...",icon:"ri-file-list-line",order:1}]})),o={id:n,title:t.title,description:t.description,coverImage:t.coverImage,category:t.category,level:t.level,duration:t.duration,prerequisites:"",objectives:"",chapters:i,status:"active",gradient:t.gradient,icon:t.icon,advanced:t.advanced||!1,viewCount:0,createdAt:r,updatedAt:r},a={id:n,title:t.title,subtitle:t.description,description:t.description,coverImage:t.coverImage,category:t.category,level:t.level,duration:t.duration,gradient:t.gradient,icon:t.icon,advanced:t.advanced||!1,chapters:i,viewCount:0,createdAt:r,updatedAt:r};await zt(Ie(U,"courses",n),o),console.log(`✅ 已上傳課程: ${t.title}`),await zt(Ie(U,"course_summaries",n),a),console.log(`✅ 已上傳課程概覽: ${t.title}`)}console.log("✅ 所有課程數據已成功上傳到 Firestore!")}catch(e){console.error("❌ 上傳課程數據時發生錯誤:",e)}},rbe=b("div",{target:"e8rx0s010"})({name:"1jrwjrm",styles:"padding:20px 0 80px"}),ibe=b("div",{target:"e8rx0s09"})({name:"1fzx4th",styles:"max-width:800px;margin:0 auto;padding:0 24px"}),obe=b("div",{target:"e8rx0s08"})("background-color:",e=>e.theme.cardBg,";border-radius:15px;box-shadow:0 8px 20px ",e=>e.theme.shadowColor,";padding:30px;margin-bottom:30px;position:relative;overflow:hidden;"),abe=b("h2",{target:"e8rx0s07"})("font-size:24px;font-weight:600;color:",e=>e.theme.text,";margin-bottom:25px;padding-bottom:15px;border-bottom:1px solid ",e=>e.theme.gray,"30;display:flex;align-items:center;i{margin-right:12px;font-size:24px;color:",e=>e.theme.primary,";}"),I6=b("p",{target:"e8rx0s06"})("color:",e=>e.theme.textSecondary,";font-size:15px;line-height:1.6;margin-bottom:25px;"),sbe=b("button",{target:"e8rx0s05"})({name:"opsgi4",styles:"padding:12px 24px;border-radius:8px;font-size:15px;font-weight:500;cursor:pointer;transition:all 0.3s ease;display:flex;align-items:center;justify-content:center;i{margin-right:8px;}&:disabled{opacity:0.5;cursor:not-allowed;}"}),B1=b(sbe,{target:"e8rx0s04"})({name:"nletrb",styles:"background:linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%);color:white;border:none;box-shadow:0 4px 10px rgba(124, 58, 237, 0.3);&:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 15px rgba(124, 58, 237, 0.4);}"}),lbe=b("div",{target:"e8rx0s03"})("padding:15px;border-radius:8px;margin-bottom:20px;background-color:",e=>e.isError?"#FEE2E2":"#ECFDF5",";color:",e=>e.isError?"#B91C1C":"#047857",";font-size:14px;display:flex;align-items:center;i{margin-right:8px;font-size:18px;}"),cbe=b("div",{target:"e8rx0s02"})("background-color:",e=>e.theme.bgHover,";border-radius:10px;padding:15px;margin-top:20px;max-height:300px;overflow-y:auto;border:1px solid ",e=>e.theme.gray,"30;"),ube=b("div",{target:"e8rx0s01"})("font-family:monospace;font-size:14px;padding:6px 0;color:",e=>e.isError?"#B91C1C":e.theme.text,";&:not(:last-child){border-bottom:1px solid ",e=>e.theme.gray,"20;}"),dbe=b("div",{target:"e8rx0s00"})({name:"1ausffd",styles:"display:flex;gap:15px;margin-bottom:20px"}),A6=[{title:"第一章｜飲料基礎認識與作業環境",description:"建立觀念，了解環境與衛生是進店的第一步！",chapters:[{title:"門市設備與器具認識",icon:"ri-store-line"},{title:"飲料製作流程總覽",icon:"ri-flow-chart"},{title:"基本衛生與清潔規範",icon:"ri-hand-sanitizer-line"},{title:"冰塊、糖度與客製化規則介紹",icon:"ri-scales-line"}],icon:"ri-building-line",gradient:"#7C3AED, #3B82F6",coverImage:"https://images.unsplash.com/photo-1545665277-5937489579f2?q=80&w=2070&auto=format&fit=crop",category:"基礎訓練",level:"初級",duration:"2.5 小時"},{title:"第二章｜煮茶篇",description:"一壺好茶，是一切飲品的靈魂！",chapters:[{title:"綠茶煮法（烏龍、四季春）",icon:"ri-cup-line"},{title:"紅茶煮法（阿薩姆、錫蘭）",icon:"ri-cup-line"},{title:"烏龍茶煮法（鐵觀音、包種）",icon:"ri-cup-line"},{title:"茶湯保存與每日備茶流程",icon:"ri-flask-line"}],icon:"ri-cup-line",gradient:"#EC4899, #F472B6",coverImage:"https://images.unsplash.com/photo-1564890369878-4be5a6074af0?q=80&w=2070&auto=format&fit=crop",category:"飲料製作",level:"初級",duration:"3 小時"},{title:"第三章｜調奶篇",description:"奶類搭配與技巧，決定你奶茶會不會爆單！",chapters:[{title:"奶精與鮮奶差異",icon:"ri-water-flash-line"},{title:"奶茶基本比例與沖泡技巧",icon:"ri-goblet-line"},{title:"奶類搭配範例（紅茶拿鐵、烏龍奶等）",icon:"ri-goblet-line"},{title:"奶泡製作與應用（抹茶奶蓋、奶霜）",icon:"ri-bubble-chart-line"}],icon:"ri-goblet-line",gradient:"#2563EB, #60A5FA",coverImage:"https://images.unsplash.com/photo-1569399078436-da10fbd60f12?q=80&w=1925&auto=format&fit=crop",category:"飲料製作",level:"中級",duration:"2.5 小時"},{title:"第四章｜加料篇",description:"波霸不只是加進去，要煮得好、加得美！",chapters:[{title:"珍珠煮法（黑糖珍珠、白玉）",icon:"ri-scales-line"},{title:"愛玉、椰果、仙草等製備與保存",icon:"ri-fridge-line"},{title:"加料組合技巧（Q彈感、視覺美感）",icon:"ri-palette-line"},{title:"加料搭配實務與創意應用",icon:"ri-magic-line"}],icon:"ri-shapes-line",gradient:"#F59E0B, #FBBF24",coverImage:"https://images.unsplash.com/photo-1575879911904-f2562c68c16c?q=80&w=1932&auto=format&fit=crop",category:"飲料製作",level:"中級",duration:"3 小時"},{title:"第五章｜果飲與冰沙篇",description:"清新果味，是夏天銷量保證！",chapters:[{title:"水果茶與鮮果打底飲品製作",icon:"ri-seedling-line"},{title:"果泥、果醬與果糖的使用技巧",icon:"ri-drop-line"},{title:"冰沙機器操作與濃稠度調整",icon:"ri-settings-line"},{title:"飲品分層與杯面美學（漸層果茶）",icon:"ri-brush-line"}],icon:"ri-seedling-line",gradient:"#10B981, #34D399",coverImage:"https://images.unsplash.com/photo-1504675099198-7023dd80d5e3?q=80&w=1974&auto=format&fit=crop",category:"飲料製作",level:"中級",duration:"3.5 小時"},{title:"第六章｜出杯與點單流程篇",description:"最後一哩，是與顧客溝通的藝術",chapters:[{title:"POS點餐機操作教學",icon:"ri-terminal-box-line"},{title:"出杯順序與杯標辨識",icon:"ri-stack-line"},{title:"外送平台點單與包裝流程",icon:"ri-bike-line"},{title:"高峰時段分工與出杯節奏管理",icon:"ri-team-line"}],icon:"ri-customer-service-line",gradient:"#8B5CF6, #C4B5FD",coverImage:"https://images.unsplash.com/photo-1577354087137-fd19bd23d139?q=80&w=1976&auto=format&fit=crop",category:"店面管理",level:"初級",duration:"2 小時"},{title:"第七章｜進階職人技巧",description:"成為全能店長不是夢！",chapters:[{title:"顧客應對技巧與話術訓練",icon:"ri-chat-4-line"},{title:"飲品創新研發流程與命名技巧",icon:"ri-flask-line"},{title:"社群經營與品牌行銷",icon:"ri-instagram-line"},{title:"營業數據分析與進貨規劃基礎",icon:"ri-line-chart-line"}],icon:"ri-medal-line",gradient:"#EA580C, #FFA000",coverImage:"https://images.unsplash.com/photo-1578574577315-3fbeb0cecdc2?q=80&w=2072&auto=format&fit=crop",category:"行銷技巧",level:"高級",duration:"4 小時",advanced:!0}],pbe=()=>{const[e,t]=D.useState(!1),[n,r]=D.useState(null),[i,o]=D.useState([]),[a,s]=D.useState({courses:0,summaries:0}),l=qt();D.useEffect(()=>{(async()=>{try{const g=await be(tt(se(U,"courses"))),m=await be(tt(se(U,"course_summaries")));s({courses:g.size,summaries:m.size})}catch(g){console.error("獲取課程數量時發生錯誤:",g)}})()},[]);const c=()=>{const h=console.log,g=console.error;return console.log=(...m)=>{h.apply(console,m),o(v=>[...v,{message:m.join(" "),isError:!1,timestamp:new Date}])},console.error=(...m)=>{g.apply(console,m),o(v=>[...v,{message:m.join(" "),isError:!0,timestamp:new Date}])},()=>{console.log=h,console.error=g}},d=async()=>{t(!0),r(null),o([]);const h=c();try{console.log("開始直接上傳課程數據到 Firestore...");for(let v=0;v<A6.length;v++){const w=A6[v],S=fo(),C=At(),A=w.chapters.map((E,k)=>({title:E.title,description:"",icon:E.icon,order:k+1,subsections:[{title:"正在撰寫中...",icon:"ri-file-list-line",order:1}]})),_={id:S,title:w.title,description:w.description,coverImage:w.coverImage,category:w.category,level:w.level,duration:w.duration,prerequisites:"",objectives:"",chapters:A,status:"active",gradient:w.gradient,icon:w.icon,advanced:w.advanced||!1,viewCount:0,createdAt:C,updatedAt:C},I={id:S,title:w.title,subtitle:w.description,coverImage:w.coverImage,category:w.category,level:w.level,gradient:w.gradient,icon:w.icon,advanced:w.advanced||!1,viewCount:0,createdAt:C,updatedAt:C};await zt(Ie(U,"courses",S),_),console.log(`✅ 已上傳課程: ${w.title}`),await zt(Ie(U,"course_summaries",S),I),console.log(`✅ 已上傳課程概覽: ${w.title}`)}r({isError:!1,message:"課程數據已成功上傳到 Firestore!"});const g=await be(tt(se(U,"courses"))),m=await be(tt(se(U,"course_summaries")));s({courses:g.size,summaries:m.size}),console.log("✅ 所有課程數據已成功上傳到 Firestore!")}catch(g){console.error("❌ 上傳課程數據時發生錯誤:",g),r({isError:!0,message:"上傳課程數據時發生錯誤: "+g.message})}finally{t(!1),h()}},p=async()=>{t(!0),r(null),o([]);const h=c();try{await nbe(),r({isError:!1,message:"課程數據已成功上傳到 Firestore!"})}catch(g){r({isError:!0,message:"上傳課程數據時發生錯誤: "+g.message}),console.error(g)}finally{t(!1),h()}},f=()=>{l("/courses-internal")};return y(Ne,{children:[u(Bt,{title:"數據上傳",tagline:"將課程數據上傳到 Firestore"}),u(rbe,{children:u(ibe,{children:y(obe,{children:[y(abe,{children:[u("i",{className:"ri-upload-cloud-line"}),"上傳課程數據"]}),u(I6,{children:"這個工具將會把預設的課程數據上傳到 Firestore 數據庫中。這個操作只需要執行一次，重複執行將會創建重複的課程記錄。"}),y(I6,{children:["當前數據庫狀態: 課程集合中有 ",a.courses," 筆記錄，課程概覽集合中有 ",a.summaries," 筆記錄。"]}),n&&y(lbe,{isError:n.isError,children:[u("i",{className:n.isError?"ri-error-warning-line":"ri-check-double-line"}),n.message]}),y(dbe,{children:[y(B1,{onClick:d,disabled:e,style:{background:"linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%)"},children:[u("i",{className:"ri-upload-cloud-fill"}),e?"上傳中...":"直接上傳數據"]}),y(B1,{onClick:p,disabled:e,style:{background:"linear-gradient(135deg, #EC4899 0%, #F472B6 100%)"},children:[u("i",{className:"ri-upload-cloud-line"}),e?"上傳中...":"使用腳本上傳"]}),y(B1,{onClick:f,disabled:e,style:{background:"linear-gradient(135deg, #10B981 0%, #34D399 100%)"},children:[u("i",{className:"ri-book-open-line"}),"查看課程"]})]}),i.length>0&&u(cbe,{children:i.map((h,g)=>y(ube,{isError:h.isError,children:[h.timestamp.toLocaleTimeString()," - ",h.message]},g))})]})})}),u(kn,{})]})},P6=[{title:"第一章｜飲料基礎認識與作業環境",description:"建立觀念，了解環境與衛生是進店的第一步！",chapters:[{title:"門市設備與器具認識",icon:"ri-store-line"},{title:"飲料製作流程總覽",icon:"ri-flow-chart"},{title:"基本衛生與清潔規範",icon:"ri-hand-sanitizer-line"},{title:"冰塊、糖度與客製化規則介紹",icon:"ri-scales-line"}],icon:"ri-building-line",gradient:"#7C3AED, #3B82F6",coverImage:"https://images.unsplash.com/photo-1545665277-5937489579f2?q=80&w=2070&auto=format&fit=crop",category:"基礎訓練",level:"初級",duration:"2.5 小時"},{title:"第二章｜煮茶篇",description:"一壺好茶，是一切飲品的靈魂！",chapters:[{title:"綠茶煮法（烏龍、四季春）",icon:"ri-cup-line"},{title:"紅茶煮法（阿薩姆、錫蘭）",icon:"ri-cup-line"},{title:"烏龍茶煮法（鐵觀音、包種）",icon:"ri-cup-line"},{title:"茶湯保存與每日備茶流程",icon:"ri-flask-line"}],icon:"ri-cup-line",gradient:"#EC4899, #F472B6",coverImage:"https://images.unsplash.com/photo-1564890369878-4be5a6074af0?q=80&w=2070&auto=format&fit=crop",category:"飲料製作",level:"初級",duration:"3 小時"},{title:"第三章｜調奶篇",description:"奶類搭配與技巧，決定你奶茶會不會爆單！",chapters:[{title:"奶精與鮮奶差異",icon:"ri-water-flash-line"},{title:"奶茶基本比例與沖泡技巧",icon:"ri-goblet-line"},{title:"奶類搭配範例（紅茶拿鐵、烏龍奶等）",icon:"ri-goblet-line"},{title:"奶泡製作與應用（抹茶奶蓋、奶霜）",icon:"ri-bubble-chart-line"}],icon:"ri-goblet-line",gradient:"#2563EB, #60A5FA",coverImage:"https://images.unsplash.com/photo-1569399078436-da10fbd60f12?q=80&w=1925&auto=format&fit=crop",category:"飲料製作",level:"中級",duration:"2.5 小時"},{title:"第四章｜加料篇",description:"波霸不只是加進去，要煮得好、加得美！",chapters:[{title:"珍珠煮法（黑糖珍珠、白玉）",icon:"ri-scales-line"},{title:"愛玉、椰果、仙草等製備與保存",icon:"ri-fridge-line"},{title:"加料組合技巧（Q彈感、視覺美感）",icon:"ri-palette-line"},{title:"加料搭配實務與創意應用",icon:"ri-magic-line"}],icon:"ri-shapes-line",gradient:"#F59E0B, #FBBF24",coverImage:"https://images.unsplash.com/photo-1575879911904-f2562c68c16c?q=80&w=1932&auto=format&fit=crop",category:"飲料製作",level:"中級",duration:"3 小時"},{title:"第五章｜果飲與冰沙篇",description:"清新果味，是夏天銷量保證！",chapters:[{title:"水果茶與鮮果打底飲品製作",icon:"ri-seedling-line"},{title:"果泥、果醬與果糖的使用技巧",icon:"ri-drop-line"},{title:"冰沙機器操作與濃稠度調整",icon:"ri-settings-line"},{title:"飲品分層與杯面美學（漸層果茶）",icon:"ri-brush-line"}],icon:"ri-seedling-line",gradient:"#10B981, #34D399",coverImage:"https://images.unsplash.com/photo-1504675099198-7023dd80d5e3?q=80&w=1974&auto=format&fit=crop",category:"飲料製作",level:"中級",duration:"3.5 小時"},{title:"第六章｜出杯與點單流程篇",description:"最後一哩，是與顧客溝通的藝術",chapters:[{title:"POS點餐機操作教學",icon:"ri-terminal-box-line"},{title:"出杯順序與杯標辨識",icon:"ri-stack-line"},{title:"外送平台點單與包裝流程",icon:"ri-bike-line"},{title:"高峰時段分工與出杯節奏管理",icon:"ri-team-line"}],icon:"ri-customer-service-line",gradient:"#8B5CF6, #C4B5FD",coverImage:"https://images.unsplash.com/photo-1577354087137-fd19bd23d139?q=80&w=1976&auto=format&fit=crop",category:"店面管理",level:"初級",duration:"2 小時"},{title:"第七章｜進階職人技巧",description:"成為全能店長不是夢！",chapters:[{title:"顧客應對技巧與話術訓練",icon:"ri-chat-4-line"},{title:"飲品創新研發流程與命名技巧",icon:"ri-flask-line"},{title:"社群經營與品牌行銷",icon:"ri-instagram-line"},{title:"營業數據分析與進貨規劃基礎",icon:"ri-line-chart-line"}],icon:"ri-medal-line",gradient:"#EA580C, #FFA000",coverImage:"https://images.unsplash.com/photo-1578574577315-3fbeb0cecdc2?q=80&w=2072&auto=format&fit=crop",category:"行銷技巧",level:"高級",duration:"4 小時",advanced:!0}],hbe=ut.forwardRef((e,t)=>{const[n,r]=D.useState(!1),[i,o]=D.useState([]),[a,s]=D.useState({show:!1,isError:!1,message:""}),[l,c]=D.useState({courses:0,summaries:0});ut.useImperativeHandle(t,()=>({deleteAllCourses:f}));const d=(g,m=!1)=>{console.log(g),o(v=>[...v,{message:g,isError:m,timestamp:new Date}])},p=async()=>{try{const g=await be(tt(se(U,"courses"))),m=await be(tt(se(U,"course_summaries")));return c({courses:g.size,summaries:m.size}),d(`當前數據庫狀態: 課程集合中有 ${g.size} 筆記錄，課程概覽集合中有 ${m.size} 筆記錄。`),{courses:g.size,summaries:m.size}}catch(g){return console.error("獲取課程數量時發生錯誤:",g),d("獲取課程數量時發生錯誤: "+g.message,!0),{courses:0,summaries:0}}},f=async()=>{if(!n&&window.confirm("確定要刪除所有課程資料嗎？此操作無法復原。")){r(!0),o([]),s({show:!1,isError:!1,message:""});try{d("開始刪除所有課程資料...");const g=await be(tt(se(U,"courses"))),m=await be(tt(se(U,"course_summaries")));let v=0;for(const S of g.docs)await si(Ie(U,"courses",S.id)),v++,d(`✅ 已刪除課程: ${S.id}`);let w=0;for(const S of m.docs)await si(Ie(U,"course_summaries",S.id)),w++,d(`✅ 已刪除課程概覽: ${S.id}`);d(`✅ 成功刪除 ${v} 筆課程資料和 ${w} 筆課程概覽資料`),s({show:!0,isError:!1,message:`成功刪除 ${v} 筆課程資料和 ${w} 筆課程概覽資料`}),await p()}catch(g){console.error("❌ 刪除課程資料時發生錯誤:",g),d("❌ 刪除課程資料時發生錯誤: "+g.message,!0),s({show:!0,isError:!0,message:"刪除課程資料時發生錯誤: "+g.message})}finally{r(!1)}}},h=async()=>{if(!n){r(!0),o([]),s({show:!1,isError:!1,message:""});try{d("開始上傳課程數據到 Firestore...");let m=(await p()).courses;for(let v=0;v<P6.length;v++){const w=m+v+1,S=w.toString().padStart(3,"0"),C=P6[v],A=At(),_=C.chapters.map((k,T)=>({title:k.title,description:"",icon:k.icon,order:T+1,subsections:[{title:"正在撰寫中...",icon:"ri-file-list-line",order:1}]})),I={id:S,title:C.title,description:C.description,coverImage:C.coverImage,category:C.category,level:C.level,duration:C.duration,prerequisites:"",objectives:"",chapters:_,status:"active",gradient:C.gradient,icon:C.icon,advanced:C.advanced||!1,viewCount:0,createdAt:A,updatedAt:A,numeric_id:w},E={id:S,title:C.title,subtitle:C.description,coverImage:C.coverImage,category:C.category,level:C.level,gradient:C.gradient,icon:C.icon,advanced:C.advanced||!1,viewCount:0,createdAt:A,updatedAt:A,numeric_id:w};await zt(Ie(U,"courses",S),I),d(`✅ 已上傳課程: ${C.title}，ID: ${S}`),await zt(Ie(U,"course_summaries",S),E),d(`✅ 已上傳課程概覽: ${C.title}，ID: ${S}`)}d("✅ 所有課程數據已成功上傳到 Firestore!"),s({show:!0,isError:!1,message:"課程數據已成功上傳到 Firestore!"}),await p()}catch(g){console.error("❌ 上傳課程數據時發生錯誤:",g),d("❌ 上傳課程數據時發生錯誤: "+g.message,!0),s({show:!0,isError:!0,message:"上傳課程數據時發生錯誤: "+g.message})}finally{r(!1)}}};return ut.useEffect(()=>{p()},[]),y("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto",backgroundColor:"#fff",borderRadius:"10px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},children:[u("h2",{style:{fontSize:"24px",marginBottom:"20px"},children:"課程數據上傳工具"}),u("div",{style:{marginBottom:"20px"},children:y("p",{children:["當前數據庫狀態: 課程集合中有 ",l.courses," 筆記錄，課程概覽集合中有 ",l.summaries," 筆記錄。"]})}),a.show&&u("div",{style:{padding:"15px",backgroundColor:a.isError?"#FEE2E2":"#ECFDF5",color:a.isError?"#B91C1C":"#047857",borderRadius:"8px",marginBottom:"20px"},children:a.message}),u("button",{onClick:h,disabled:n,style:{backgroundColor:"#7C3AED",color:"white",padding:"12px 24px",border:"none",borderRadius:"8px",fontSize:"16px",cursor:n?"not-allowed":"pointer",opacity:n?.7:1,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"20px"},children:n?"上傳中...":"開始上傳課程數據"}),i.length>0&&u("div",{style:{backgroundColor:"#F9FAFB",borderRadius:"8px",padding:"15px",maxHeight:"300px",overflowY:"auto",border:"1px solid #E5E7EB"},children:i.map((g,m)=>y("div",{style:{padding:"6px 0",color:g.isError?"#B91C1C":"#1F2937",borderBottom:m<i.length-1?"1px solid #F3F4F6":"none",fontFamily:"monospace"},children:[g.timestamp.toLocaleTimeString()," - ",g.message]},m))})]})}),fbe=()=>{const[e,t]=D.useState(!1),n=ut.useRef();return y(Ne,{children:[u(Bt,{title:"快速上傳",tagline:"將課程數據上傳到 Firestore"}),y("div",{style:{padding:"20px 0 80px"},children:[y("div",{style:{maxWidth:"800px",margin:"0 auto 20px",backgroundColor:"#EEF2FF",padding:"15px",borderRadius:"10px",border:"1px solid #C7D2FE"},children:[u("h3",{style:{fontSize:"18px",marginBottom:"10px",color:"#4F46E5"},children:"系統更新提示"}),u("p",{style:{fontSize:"14px",color:"#4B5563",marginBottom:"5px"},children:"• 已優化課程章節排序功能，各章節將按照正確的數字順序顯示"}),u("p",{style:{fontSize:"14px",color:"#4B5563",marginBottom:"5px"},children:"• ID格式已更改為數字格式：001、002、003，保持順序性"}),u("p",{style:{fontSize:"14px",color:"#4B5563",marginBottom:"5px"},children:"• 若要全新開始，可使用「刪除全部課程」功能清空現有資料"})]}),u("div",{style:{maxWidth:"800px",margin:"0 auto 20px",display:"flex",justifyContent:"flex-end"},children:u("button",{onClick:()=>t(!0),style:{backgroundColor:"#EF4444",color:"white",padding:"10px 16px",border:"none",borderRadius:"8px",fontSize:"14px",cursor:"pointer",marginBottom:"20px"},children:"刪除全部課程資料"})}),u(hbe,{ref:n}),e&&u("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:y("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"8px",maxWidth:"400px",textAlign:"center"},children:[u("h3",{style:{marginTop:0,color:"#111827"},children:"確認刪除"}),u("p",{style:{color:"#4B5563"},children:"您即將刪除所有課程資料。此操作無法撤消，確定要繼續嗎？"}),y("div",{style:{display:"flex",justifyContent:"center",gap:"12px",marginTop:"20px"},children:[u("button",{onClick:()=>t(!1),style:{backgroundColor:"#9CA3AF",color:"white",padding:"8px 16px",border:"none",borderRadius:"6px",fontSize:"14px",cursor:"pointer"},children:"取消"}),u("button",{onClick:()=>{n.current&&n.current.deleteAllCourses&&n.current.deleteAllCourses(),t(!1)},style:{backgroundColor:"#EF4444",color:"white",padding:"8px 16px",border:"none",borderRadius:"6px",fontSize:"14px",cursor:"pointer"},children:"確認刪除"})]})]})})]}),u(kn,{})]})},gbe=()=>{const[e,t]=D.useState(""),[n,r]=D.useState(!1);return y("div",{style:{padding:"40px",maxWidth:"600px",margin:"0 auto",fontFamily:"Arial, sans-serif"},children:[u("h1",{style:{color:"#333",textAlign:"center"},children:"Firebase 連接測試"}),u("div",{style:{textAlign:"center",marginBottom:"30px"},children:u("button",{onClick:async()=>{try{r(!0),t("正在測試 Firebase 連接..."),console.log("Firebase DB:",U);const o=se(U,"test"),a=await tr(o,{message:"Hello Firebase!",timestamp:At()});console.log("測試文檔寫入成功，ID:",a.id),t(l=>l+`
✅ 寫入測試成功`);const s=await be(se(U,"test"));console.log("讀取到的文檔數量:",s.size),t(l=>l+`
✅ 讀取測試成功，共 ${s.size} 個文檔`),t(l=>l+`
🎉 Firebase 連接正常！`)}catch(o){console.error("Firebase 測試失敗:",o),t("❌ Firebase 測試失敗: "+o.message)}finally{r(!1)}},disabled:n,style:{padding:"12px 24px",fontSize:"16px",backgroundColor:n?"#ccc":"#007bff",color:"white",border:"none",borderRadius:"6px",cursor:n?"not-allowed":"pointer",transition:"background-color 0.3s"},children:n?"測試中...":"測試 Firebase 連接"})}),e&&u("div",{style:{padding:"15px",backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"6px",whiteSpace:"pre-line",fontFamily:"monospace",fontSize:"14px"},children:e}),y("div",{style:{marginTop:"30px",color:"#666"},children:[u("h3",{children:"測試步驟："}),y("ol",{children:[u("li",{children:"檢查 Firebase 配置"}),u("li",{children:"測試寫入 Firestore"}),u("li",{children:"測試讀取 Firestore"}),u("li",{children:"驗證連接狀態"})]})]})]})},mbe=b("div",{target:"eg637d55"})({name:"1g4dmdv",styles:"max-width:800px;margin:50px auto;padding:20px;font-family:'Arial',sans-serif"}),vbe=b("h1",{target:"eg637d54"})({name:"n5qs07",styles:"color:#333;text-align:center;margin-bottom:30px"}),td=b("div",{target:"eg637d53"})({name:"19kwcpq",styles:"background:#f5f5f5;padding:20px;margin:20px 0;border-radius:8px;border-left:4px solid #007bff"}),nd=b("button",{target:"eg637d52"})({name:"y3xa09",styles:"background:#007bff;color:white;border:none;padding:12px 24px;border-radius:6px;cursor:pointer;margin:10px 10px 10px 0;font-size:16px;&:hover{background:#0056b3;}&:disabled{background:#cccccc;cursor:not-allowed;}"}),D6=b("div",{target:"eg637d51"})("background:",e=>e.success?"#d4edda":"#f8d7da",";color:",e=>e.success?"#155724":"#721c24",";padding:12px;border-radius:6px;margin:10px 0;white-space:pre-wrap;"),xbe=b("pre",{target:"eg637d50"})({name:"v6zk02",styles:"background:#2d3748;color:#e2e8f0;padding:16px;border-radius:6px;overflow-x:auto;margin:10px 0;font-size:14px"}),ybe=()=>{var f,h,g,m,v,w,S,C;const[e,t]=D.useState(""),[n,r]=D.useState(!1),[i,o]=D.useState(null),a=(A,_=!0)=>{console.log(A),t(I=>I+(I?`
`:"")+A),o({message:A,isSuccess:_})},s=()=>{t(""),o(null)};return y(mbe,{children:[u(vbe,{children:"Firebase 連接測試與課程資料庫創建"}),y(td,{children:[u("h3",{children:"📋 測試步驟"}),y("ol",{children:[u("li",{children:"測試 Firebase 基本連接"}),u("li",{children:"創建課程資料庫和示例數據"}),u("li",{children:"讀取課程數據驗證"}),u("li",{children:"清理測試數據（可選）"})]})]}),y(td,{children:[u("h3",{children:"🔧 測試控制"}),u(nd,{onClick:async()=>{try{r(!0),s(),a("🔄 正在測試 Firebase 連接...");const A=se(U,"test"),_=await tr(A,{message:"Hello Firebase!",timestamp:At(),testType:"connection"});a(`✅ 成功寫入測試文檔，ID: ${_.id}`);const I=await be(se(U,"test"));a(`✅ 成功讀取 ${I.size} 個測試文檔`),a("🎉 Firebase 連接測試成功！")}catch(A){console.error("Firebase 連接測試失敗:",A),a(`❌ Firebase 連接失敗: ${A.message}`,!1)}finally{r(!1)}},disabled:n,children:"1. 測試 Firebase 連接"}),u(nd,{onClick:async()=>{try{r(!0),s(),a("🔄 正在創建課程資料庫...");const A={title:"React 基礎入門",description:"從零開始學習 React 的完整課程",instructor:"範例講師",createdAt:At(),updatedAt:At(),published:!0,duration:"8小時",level:"初級",tags:["React","JavaScript","前端開發"],thumbnail:"",enrollmentCount:0,rating:0,chapters:[{title:"第一章：React 介紹",description:"了解 React 的基本概念",order:1,lessons:[{title:"什麼是 React？",type:"video",duration:"10分鐘",order:1},{title:"React 的優勢",type:"text",duration:"5分鐘",order:2}]},{title:"第二章：環境設置",description:"設置 React 開發環境",order:2,lessons:[{title:"安裝 Node.js",type:"video",duration:"8分鐘",order:1}]}]},_=Ie(se(U,"courses"));await zt(_,A),a(`✅ 成功創建課程: ${A.title}`),a(`📄 課程 ID: ${_.id}`);const I={title:"JavaScript 進階技巧",description:"掌握 JavaScript 的高級特性",instructor:"進階講師",createdAt:At(),updatedAt:At(),published:!0,duration:"12小時",level:"中級",tags:["JavaScript","ES6+","進階技巧"],thumbnail:"",enrollmentCount:0,rating:0,chapters:[{title:"第一章：閉包與作用域",description:"深入理解 JavaScript 的閉包機制",order:1,lessons:[{title:"理解閉包",type:"video",duration:"15分鐘",order:1}]}]},E=Ie(se(U,"courses"));await zt(E,I),a(`✅ 成功創建課程: ${I.title}`),a(`📄 課程 ID: ${E.id}`),a("🎉 課程資料庫創建成功！")}catch(A){console.error("創建課程資料庫失敗:",A),a(`❌ 創建課程資料庫失敗: ${A.message}`,!1)}finally{r(!1)}},disabled:n,children:"2. 創建課程資料庫"}),u(nd,{onClick:async()=>{try{r(!0),s(),a("🔄 正在讀取課程資料庫...");const A=await be(se(U,"courses"));if(A.empty){a("📝 課程資料庫是空的，請先創建課程數據");return}a(`📚 找到 ${A.size} 個課程:`),A.forEach(_=>{var E;const I=_.data();a(`
📖 課程: ${I.title}`),a(`   ID: ${_.id}`),a(`   講師: ${I.instructor}`),a(`   級別: ${I.level}`),a(`   章節數: ${((E=I.chapters)==null?void 0:E.length)||0}`)}),a(`
✅ 課程資料庫讀取成功！`)}catch(A){console.error("讀取課程資料庫失敗:",A),a(`❌ 讀取課程資料庫失敗: ${A.message}`,!1)}finally{r(!1)}},disabled:n,children:"3. 讀取課程資料庫"}),u(nd,{onClick:async()=>{try{r(!0),s(),a("🔄 正在清理測試數據..."),a("ℹ️  請手動在 Firebase 控制台中清理測試數據"),a("✅ 清理完成（需要手動清理）")}catch(A){console.error("清理失敗:",A),a(`❌ 清理失敗: ${A.message}`,!1)}finally{r(!1)}},disabled:n,children:"4. 清理測試數據"}),u(nd,{onClick:s,disabled:n,children:"清除結果"})]}),n&&u(D6,{success:!0,children:"⏳ 正在執行測試，請稍候..."}),e&&y(td,{children:[u("h3",{children:"📊 測試結果"}),u(D6,{success:(i==null?void 0:i.isSuccess)!==!1,children:e})]}),y(td,{children:[u("h3",{children:"🔗 有用的連結"}),y("ul",{children:[u("li",{children:u("a",{href:"http://localhost:5190/",target:"_blank",rel:"noopener noreferrer",children:"回到主應用程序"})}),u("li",{children:u("a",{href:"https://console.firebase.google.com",target:"_blank",rel:"noopener noreferrer",children:"Firebase 控制台"})}),u("li",{children:u("a",{href:"http://localhost:5190/create-test-course",target:"_blank",rel:"noopener noreferrer",children:"創建測試課程腳本"})})]})]}),y(td,{children:[u("h3",{children:"📝 Firebase 配置信息"}),u(xbe,{children:`當前 Firebase 項目配置:
- 項目 ID: ${((h=(f=U==null?void 0:U.app)==null?void 0:f.options)==null?void 0:h.projectId)||"未知"}
- 數據庫 URL: ${((m=(g=U==null?void 0:U.app)==null?void 0:g.options)==null?void 0:m.databaseURL)||"無"}
- 儲存桶: ${((w=(v=U==null?void 0:U.app)==null?void 0:v.options)==null?void 0:w.storageBucket)||"未知"}
- API 密鑰: ${(C=(S=U==null?void 0:U.app)==null?void 0:S.options)!=null&&C.apiKey?"已設置":"未設置"}`})]})]})},bbe=b("div",{target:"e1ai0eo220"})({name:"cbboua",styles:"max-width:1200px;margin:0 auto;padding:40px 20px 80px;font-family:'Noto Sans TC',sans-serif"}),wbe=b("div",{target:"e1ai0eo219"})({name:"b4oioe",styles:"display:flex;justify-content:center;margin-bottom:30px;background:#f8f9fa;padding:4px;border-radius:12px;width:fit-content;margin-left:auto;margin-right:auto"}),R6=b("button",{target:"e1ai0eo218"})("background:",e=>e.active?"linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%)":"transparent",";color:",e=>e.active?"white":"#666",";border:none;padding:12px 24px;border-radius:8px;font-weight:600;cursor:pointer;transition:all 0.3s ease;&:hover{background:",e=>e.active?"linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%)":"#e9ecef",";}"),z1=b("div",{target:"e1ai0eo217"})({name:"16a72tr",styles:"background:white;border-radius:15px;padding:30px;box-shadow:0 8px 20px rgba(0, 0, 0, 0.1);margin-bottom:20px"}),N6=b("h2",{target:"e1ai0eo216"})({name:"amgw9x",styles:"color:#333;margin-bottom:20px;display:flex;align-items:center;i{margin-right:12px;color:#7C3AED;}"}),Vl=b("div",{target:"e1ai0eo215"})({name:"1azpx8r",styles:"margin-bottom:20px"}),jl=b("label",{target:"e1ai0eo214"})({name:"1g8hbcz",styles:"display:block;font-weight:600;margin-bottom:8px;color:#333"}),M6=b("input",{target:"e1ai0eo213"})({name:"mn8jj2",styles:"width:100%;padding:12px;border:1px solid #ddd;border-radius:8px;font-size:16px;&:focus{outline:none;border-color:#7C3AED;box-shadow:0 0 0 3px rgba(124, 58, 237, 0.1);}"}),Sbe=b("textarea",{target:"e1ai0eo212"})({name:"ics70w",styles:"width:100%;padding:12px;border:1px solid #ddd;border-radius:8px;font-size:16px;min-height:100px;resize:vertical;&:focus{outline:none;border-color:#7C3AED;box-shadow:0 0 0 3px rgba(124, 58, 237, 0.1);}"}),O6=b("select",{target:"e1ai0eo211"})({name:"mn8jj2",styles:"width:100%;padding:12px;border:1px solid #ddd;border-radius:8px;font-size:16px;&:focus{outline:none;border-color:#7C3AED;box-shadow:0 0 0 3px rgba(124, 58, 237, 0.1);}"}),Cbe=b("div",{target:"e1ai0eo210"})({name:"5bno9i",styles:"margin-top:15px"}),_be=b("div",{target:"e1ai0eo29"})({name:"1hmt5dr",styles:"display:flex;align-items:center;margin-bottom:10px;padding:10px;background:#f8f9fa;border-radius:8px"}),kbe=b("input",{target:"e1ai0eo28"})({name:"1cqykw",styles:"flex:1;padding:8px 12px;border:1px solid #ddd;border-radius:6px;margin-right:10px"}),Ebe=b("input",{target:"e1ai0eo27"})({name:"nkt64x",styles:"margin-right:10px"}),rd=b("button",{target:"e1ai0eo26"})("background:",e=>e.variant==="danger"?"#dc3545":"linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%)",";color:white;border:none;padding:12px 24px;border-radius:8px;font-weight:600;cursor:pointer;transition:all 0.3s ease;margin-right:10px;&:hover{transform:translateY(-2px);box-shadow:0 4px 15px rgba(124, 58, 237, 0.3);}&:disabled{background:#ccc;cursor:not-allowed;transform:none;}"),Tbe=b("div",{target:"e1ai0eo25"})({name:"1bkpu5b",styles:"margin-top:30px"}),Ibe=b("div",{target:"e1ai0eo24"})({name:"2ziw6p",styles:"background:#f8f9fa;border-radius:12px;padding:20px;margin-bottom:15px;border-left:4px solid #7C3AED"}),Abe=b("div",{target:"e1ai0eo23"})({name:"ws6nwy",styles:"display:flex;justify-content:between;align-items:flex-start;margin-bottom:15px"}),Pbe=b("h4",{target:"e1ai0eo22"})({name:"16ubkvi",styles:"color:#333;margin:0;flex:1"}),Dbe=b("div",{target:"e1ai0eo21"})({name:"5ik2gp",styles:"font-size:12px;color:#666;margin-bottom:10px"}),Rbe=b("div",{target:"e1ai0eo20"})("margin-bottom:5px;padding-left:20px;color:",e=>e.correct?"#28a745":"#666",";font-weight:",e=>e.correct?"600":"normal",";&::before{content:'",e=>e.correct?"✓":"•","';margin-right:8px;color:",e=>e.correct?"#28a745":"#999",";}"),Nbe=()=>{var I,E;const[e,t]=D.useState("create"),[n,r]=D.useState([]),[i,o]=D.useState([]),[a,s]=D.useState(!1),{user:l,userRole:c}=Bi(),d=qt(),[p,f]=D.useState({courseId:"",chapterIndex:"",sectionIndex:"",questionText:"",options:["","","",""],correctOption:0,difficulty:"medium"});D.useEffect(()=>{if(l&&c!=="enterprise"){We.error("此頁面僅限企業用戶訪問"),d("/");return}h(),g()},[l,c,d]);const h=async()=>{try{const k=tt(se(U,"course_summaries"),Ot("numeric_id")),P=(await be(k)).docs.map(O=>({id:O.id,...O.data()}));r(P)}catch(k){console.error("獲取課程列表失敗:",k),We.error("獲取課程列表失敗")}},g=async()=>{try{const k=tt(se(U,"exam_questions"),Ot("createdAt","desc")),P=(await be(k)).docs.map(O=>({id:O.id,...O.data()}));o(P)}catch(k){console.error("獲取題目列表失敗:",k),We.error("獲取題目列表失敗")}},m=(k,T)=>{f(P=>({...P,[k]:T}))},v=(k,T)=>{const P=[...p.options];P[k]=T,f(O=>({...O,options:P}))},w=()=>{f(k=>({...k,options:[...k.options,""]}))},S=k=>{if(p.options.length<=2){We.warning("至少需要兩個選項");return}const T=p.options.filter((P,O)=>O!==k);f(P=>({...P,options:T,correctOption:P.correctOption>=T.length?0:P.correctOption}))},C=async k=>{if(k.preventDefault(),!p.courseId||!p.questionText){We.error("請填寫課程和題目內容");return}if(p.options.some(T=>!T.trim())){We.error("請填寫所有選項");return}s(!0);try{const T=`${p.courseId}_${p.chapterIndex}_${p.sectionIndex}`;await tr(se(U,"exam_questions"),{...p,examId:T,createdAt:new Date,createdBy:l.uid}),We.success("題目新增成功！"),f({courseId:"",chapterIndex:"",sectionIndex:"",questionText:"",options:["","","",""],correctOption:0,difficulty:"medium"}),g()}catch(T){console.error("新增題目失敗:",T),We.error("新增題目失敗")}finally{s(!1)}},A=async k=>{if(confirm("確定要刪除這個題目嗎？"))try{await si(Ie(U,"exam_questions",k)),We.success("題目已刪除"),g()}catch(T){console.error("刪除題目失敗:",T),We.error("刪除題目失敗")}},_=n.find(k=>k.id===p.courseId);return y(Ne,{children:[u(Bt,{title:"小考管理系統",tagline:"建立和管理課程測驗題目"}),y(bbe,{children:[y(wbe,{children:[u(R6,{active:e==="create",onClick:()=>t("create"),children:"新增題目"}),u(R6,{active:e==="manage",onClick:()=>t("manage"),children:"管理題目"})]}),u(z1,{style:{marginBottom:"20px",background:"linear-gradient(135deg, #f8f9ff 0%, #e8f4f8 100%)",border:"2px solid #7C3AED"},children:y("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"15px"},children:[y("div",{children:[y("h3",{style:{margin:"0 0 8px 0",color:"#7C3AED",fontSize:"18px",display:"flex",alignItems:"center",gap:"8px"},children:[u("i",{className:"ri-rocket-line"}),"快速批量上傳"]}),u("p",{style:{margin:0,color:"#666",fontSize:"14px"},children:"一鍵上傳完整的第一章考試題目 (4個小節考試 + 1個章節大考，共17題)"})]}),y(rd,{type:"button",onClick:()=>d("/upload-chapter1-exams"),style:{background:"linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%)",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"8px"},children:[u("i",{className:"ri-upload-line"}),"上傳第一章題目"]})]})}),e==="create"&&y(z1,{children:[y(N6,{children:[u("i",{className:"ri-add-circle-line"}),"新增小考題目"]}),y("form",{onSubmit:C,children:[y(Vl,{children:[u(jl,{children:"選擇課程"}),y(O6,{value:p.courseId,onChange:k=>m("courseId",k.target.value),required:!0,children:[u("option",{value:"",children:"請選擇課程"}),n.map(k=>u("option",{value:k.id,children:k.title},k.id))]})]}),_&&y(Ne,{children:[y(Vl,{children:[y(jl,{children:["章節索引 (0-",(((I=_.chapters)==null?void 0:I.length)||1)-1,")"]}),u(M6,{type:"number",min:"0",max:(((E=_.chapters)==null?void 0:E.length)||1)-1,value:p.chapterIndex,onChange:k=>m("chapterIndex",k.target.value),placeholder:"輸入章節索引 (從0開始)",required:!0})]}),y(Vl,{children:[u(jl,{children:"小節索引 (0-3)"}),u(M6,{type:"number",min:"0",max:"3",value:p.sectionIndex,onChange:k=>m("sectionIndex",k.target.value),placeholder:"輸入小節索引 (從0開始)",required:!0})]})]}),y(Vl,{children:[u(jl,{children:"題目內容"}),u(Sbe,{value:p.questionText,onChange:k=>m("questionText",k.target.value),placeholder:"輸入題目內容...",required:!0})]}),y(Vl,{children:[u(jl,{children:"選項設定"}),u(Cbe,{children:p.options.map((k,T)=>y(_be,{children:[u(Ebe,{type:"radio",name:"correctOption",checked:p.correctOption===T,onChange:()=>m("correctOption",T)}),u(kbe,{value:k,onChange:P=>v(T,P.target.value),placeholder:`選項 ${String.fromCharCode(65+T)}`,required:!0}),p.options.length>2&&u(rd,{type:"button",variant:"danger",onClick:()=>S(T),children:"刪除"})]},T))}),p.options.length<6&&u(rd,{type:"button",onClick:w,children:"新增選項"})]}),y(Vl,{children:[u(jl,{children:"難度等級"}),y(O6,{value:p.difficulty,onChange:k=>m("difficulty",k.target.value),children:[u("option",{value:"easy",children:"簡單"}),u("option",{value:"medium",children:"中等"}),u("option",{value:"hard",children:"困難"})]})]}),u(rd,{type:"submit",disabled:a,children:a?"新增中...":"新增題目"})]})]}),e==="manage"&&y(z1,{children:[y(N6,{children:[u("i",{className:"ri-settings-line"}),"題目管理 (",i.length," 題)"]}),y(Tbe,{children:[i.map(k=>{var T,P,O;return y(Ibe,{children:[y(Abe,{children:[u(Pbe,{children:k.questionText}),u(rd,{variant:"danger",onClick:()=>A(k.id),children:"刪除"})]}),y(Dbe,{children:["考試ID: ",k.examId," | 難度: ",k.difficulty," | 建立時間: ",((O=(P=(T=k.createdAt)==null?void 0:T.toDate)==null?void 0:P.call(T))==null?void 0:O.toLocaleDateString())||"未知"]}),k.options.map((R,N)=>y(Rbe,{correct:N===k.correctOption,children:[String.fromCharCode(65+N),". ",R]},N))]},k.id)}),i.length===0&&y("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:[u("i",{className:"ri-file-list-line",style:{fontSize:"48px",display:"block",marginBottom:"16px"}}),"尚無題目，請先新增一些題目"]})]})]})]}),u(kn,{})]})},b9={chapterTitle:"第一章｜飲料基礎認識與作業環境",lessons:[{id:"1.1",title:"門市設備與器具認識（詳細版）",description:"學員能夠準確辨識門市設備與器具，理解其功能、常見故障、清潔頻率及安全使用規範。",coverImage:"https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3",duration:"45分鐘",objectives:["學員能夠準確辨識門市設備與器具","理解各設備功能與操作重點","掌握清潔頻率及安全使用規範","能夠進行基本故障排除"],content:{sections:[{title:"門市空間功能分區",subsections:[{title:"出杯區",items:["封膜機","杯架","備料桌"],description:"負責最終出杯作業的核心區域"},{title:"備料區",items:["茶桶","冰桶","糖機","奶精桶"],description:"原料準備與調配的重要區域"},{title:"冷藏區",items:["保鮮食材","鮮奶存放","果泥"],description:"需要低溫保存的原料儲存區"},{title:"熱區",items:["煮茶鍋","保溫桶","高溫熱水機"],description:"熱飲製作與茶湯準備區域"}]},{title:"設備功能與操作重點",subsections:[{title:"封膜機",items:["自動與半自動","加熱溫度設定","注意手指安全"],description:"關鍵出杯設備，需熟悉操作與安全規範"},{title:"定量糖機",items:["設定模式切換","如何校正出糖量"],description:"確保甜度一致性的重要設備"},{title:"茶桶（茶桶+茶濾網）",items:["固定溫控時間","內膽定期清洗"],description:"茶湯保存與出茶的核心設備"},{title:"冰沙機 / 冰塊桶",items:["每日洗桶","碎冰片不可殘留"],description:"冰品製作與冰塊儲存設備"},{title:"POS機",items:["設備保護（防水）","印單機紙卡補充"],description:"點餐與收銀的核心系統"}]},{title:"耗材器具分類",subsections:[{title:"杯型規格",items:["M / L / XL尺寸","飲料杯/熱飲杯/奶蓋杯"],description:"不同容量與用途的杯型選擇"},{title:"吸管種類",items:["直吸","寬吸","奶蓋專用扁吸"],description:"配合不同飲品的吸管選擇"},{title:"清潔器具",items:["沖洗網","壓料棒","杯刷","濾渣袋"],description:"維持衛生標準的清潔用具"}]}],activities:["「設備大圖＋點擊介紹」互動教材","演練：封膜機實機模擬操作（影片＋測驗）","設備保養排程練習：安排誰在何時清洗哪些設備"],quiz:[{question:"下列哪一項屬於每日關店後才需清洗的設備？",type:"multiple_choice",options:["出杯區檯面","茶桶內膽","冰桶","POS機螢幕"],correct:1,points:5},{question:"封膜機操作時最重要的安全注意事項是什麼？",type:"multiple_choice",options:["保持機器清潔","注意手指安全","控制溫度","定期檢查"],correct:1,points:5},{question:"門市設備檢查應該在什麼時候進行？",type:"multiple_choice",options:["營業中","每日開店前","每週一次","有問題才檢查"],correct:1,points:5}]}},{id:"1.2",title:"飲料製作流程總覽（下單 → 出杯）",description:"學員能掌握飲料製作流程的節奏與重點，理解不同飲品會如何影響製作順序與時間管理。",coverImage:"https://images.unsplash.com/photo-1544949833-6e8be1ad80b0?q=80&w=2069&auto=format&fit=crop&ixlib=rb-4.0.3",duration:"40分鐘",objectives:["掌握完整的飲料製作流程","理解不同品項的製作差異","學會操作節奏管理技巧","建立錯單預防機制"],content:{sections:[{title:"從點單到出杯的完整流程",subsections:[{title:"基本流程",items:["POS 點單 → 列印標籤 → 依照標籤抓料"],description:"標準化的起始流程"},{title:"製作流程",items:["杯型選擇 → 加料（依順序）→ 加冰 → 倒茶 → 封膜 → 擺放交杯台"],description:"逐步完成飲料製作"},{title:"交杯確認",items:["顧客領杯後對照杯標（建立錯單預防機制）"],description:"最後的品質確認步驟"}]},{title:"不同品項的製作差異",subsections:[{title:"奶蓋系列",items:["奶蓋需最後加且不能封膜"],description:"特殊的製作順序與包裝方式"},{title:"冰沙系列",items:["需先打泥後加入配料（時間長）"],description:"耗時較長的製作流程"},{title:"熱飲",items:["不能封膜 → 蓋熱飲蓋 → 需加保護套"],description:"熱飲專用的包裝方式"}]},{title:"操作節奏管理",subsections:[{title:"高峰期管理",items:["單杯與多杯製作差異"],description:"忙碌時段的效率優化"},{title:"團隊協作",items:["雙人協作流程（A備料 B出杯）"],description:"多人合作的工作分配"},{title:"品質控制",items:["減少漏單／錯單的習慣建立（念標籤→自檢→擺放）"],description:"確保準確性的作業習慣"}]}],activities:["拖拉排序練習：打亂 10 個流程步驟，要求排序","多品項出杯模擬：選 2~3 種飲品，判斷製作先後","小組討論：若客人說「奶蓋加少一點但還是封膜」怎麼處理？"],quiz:[{question:"熱飲製作時不能使用哪種包裝方式？",type:"multiple_choice",options:["不能封膜","蓋熱飲蓋","加保護套","使用吸管"],correct:0,points:5},{question:"製作奶蓋飲品時，奶蓋應該在什麼時候添加？",type:"multiple_choice",options:["最開始","加茶之前","最後階段","封膜之後"],correct:2,points:5},{question:"冰沙類飲品製作時間較長的主要原因是？",type:"multiple_choice",options:["需要特殊杯子","需要先打泥","需要更多配料","需要特殊溫度"],correct:1,points:5}]}},{id:"1.3",title:"基本衛生與清潔規範",description:"讓學員能遵循門市衛生守則，理解食品安全基本知識並執行每日清潔 SOP。",coverImage:"https://images.unsplash.com/photo-1584464491033-06628f3a6b7b?q=80&w=2069&auto=format&fit=crop&ixlib=rb-4.0.3",duration:"35分鐘",objectives:["遵循門市衛生守則","理解食品安全基本知識","執行每日清潔 SOP","避免常見違規行為"],content:{sections:[{title:"員工個人衛生守則",subsections:[{title:"基本要求",items:["指甲清潔","制服整潔","上班前洗手流程"],description:"員工個人衛生的基本標準"},{title:"工作規範",items:["禁止佩戴首飾","手套多久更換一次"],description:"工作期間的衛生規範"}]},{title:"食品安全四不原則",subsections:[{title:"四不原則",items:["不交叉","不過期","不未洗","不裸放"],description:"食品安全的核心原則"},{title:"食材管理",items:["食材分類存放：熟與生、乾與濕、奶與果"],description:"正確的食材儲存方式"},{title:"保存規範",items:["加蓋保存","標示製造時間與開封日期"],description:"確保食材新鮮度的作法"}]},{title:"設備與場域清潔表",subsections:[{title:"早班清潔",items:["地板","茶桶蓋","機台擦拭"],description:"開店前的基本清潔工作"},{title:"午班清潔",items:["出杯區檯面清潔","配料補料","冰桶換冰"],description:"營業中段的維護工作"},{title:"晚班清潔",items:["徹底清洗封膜機","茶桶內膽","冷藏設備"],description:"收店前的深度清潔"}]}],activities:["「圖片錯誤挑戰」找出 3 個衛生問題","「每日清潔打卡任務」表格記錄練習","教學影片：正確洗手流程與清潔順序"],quiz:[{question:"處理生食材後必須立即執行什麼動作？",type:"multiple_choice",options:["換手套","洗手","消毒工具","更換圍裙"],correct:1,points:5},{question:"食材儲存時最重要的原則是什麼？",type:"multiple_choice",options:["節省空間","方便取用","生熟分離","美觀整齊"],correct:2,points:5},{question:"茶桶內膽應該多久清洗一次？",type:"multiple_choice",options:["每小時","營業中","每日收店後","每週一次"],correct:2,points:5}]}},{id:"1.4",title:"冰塊、糖度與客製化規則介紹",description:"讓學員能正確應對客製化選項，並理解其背後的實作邏輯與常見陷阱。",coverImage:"https://images.unsplash.com/photo-1541167760496-1628856ab772?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3",duration:"40分鐘",objectives:["正確應對客製化選項","理解糖度邏輯與健康意識","掌握冰塊處理技巧","學會客製標記與操作SOP"],content:{sections:[{title:"糖度邏輯與健康意識教育",subsections:[{title:"糖度標準",items:["全糖：100%（標準）","少糖：70%","半糖：50%","微糖：30%","無糖：0%"],description:"標準化的糖度比例設定"},{title:"健康趨勢",items:["健康飲食趨勢：鼓勵主動詢問糖冰偏好"],description:"配合現代健康意識的服務"}]},{title:"冰塊處理與飲品口感關係",subsections:[{title:"去冰處理",items:["會改變濃度比例","是否補水視飲品而定（茶類可補，奶類不建議）"],description:"去冰時的技術處理方式"},{title:"微冰控制",items:["需控制冰塊大小與量","避免過冷或太水"],description:"微冰的精準控制技巧"}]},{title:"客製標記與操作 SOP",subsections:[{title:"標記系統",items:["POS選項搭配：自動生成標籤 or 手寫標記（小心符號一致性）"],description:"確保客製化資訊的正確傳達"},{title:"實作範例",items:["例：L奶茶 + 少冰微糖 + 珍珠 → 正確流程順序為何？"],description:"複合客製化的操作順序"},{title:"難度分級",items:["製作難度排序：冰沙 > 奶蓋 > 熱飲 > 正常冰茶飲"],description:"不同客製化的複雜程度"}]}],activities:["模擬點單系統：練習輸入多種客製條件","視覺訓練題：根據客製標籤，準確製作飲品","錯誤案例分析：學員挑出錯在哪裡（冰量誤配、糖度漏加）"],quiz:[{question:"客人要求「少糖」時，糖度應該設定為多少？",type:"multiple_choice",options:["50%","70%","30%","80%"],correct:1,points:5},{question:"去冰飲品是否需要補水？",type:"multiple_choice",options:["一律補水","茶類可補，奶類不建議","一律不補水","看客人要求"],correct:1,points:5},{question:"客製化標記最重要的目的是什麼？",type:"multiple_choice",options:["美觀整齊","節省時間","確保準確性","方便計價"],correct:2,points:5}]}}]},Mbe=e=>{if(!e||!e.sections)return"";let t="";return e.sections.forEach(n=>{t+=`<h3>📚 ${n.title}</h3>`,n.subsections.forEach(r=>{t+=`<h4>${r.title}</h4>`,r.description&&(t+=`<p>${r.description}</p>`),r.items&&r.items.length>0&&(t+="<ul>",r.items.forEach(i=>{t+=`<li>${i}</li>`}),t+="</ul>")})}),e.activities&&e.activities.length>0&&(t+="<h3>🎯 學習活動</h3><ul>",e.activities.forEach(n=>{t+=`<li>${n}</li>`}),t+="</ul>"),t},Obe=e=>{if(!e||e.length===0)return{question:"此課程尚未設置測驗題目",options:["請繼續學習下一個章節"],correctAnswer:0,explanation:"課程內容已學習完成，您可以繼續學習下一個章節的內容。"};const n=e.find(r=>r.type==="multiple_choice")||e[0];if(n.type==="multiple_choice"&&n.options){let r=n.correct;return Array.isArray(r)&&(r=r[0]),{question:n.question,options:n.options,correctAnswer:r,explanation:`此題目分數：${n.points}分。請仔細思考後選擇正確答案。`}}else return{question:n.question,options:["這是一道問答題","請思考後回答","參考課程內容","提交您的答案"],correctAnswer:0,explanation:`此為問答題，分數：${n.points}分。請根據課程內容提供詳細回答。`}},$be=async()=>{try{console.log("開始上傳第一章節詳細課程內容到 Firestore...");const e=tt(se(U,"course_summaries"),tn("title","==","第一章｜飲料基礎認識與作業環境")),t=await be(e);if(t.empty){console.error("❌ 找不到第一章課程，請先上傳基本課程資料");return}const r=t.docs[0].id;console.log(`✅ 找到第一章課程 ID: ${r}`);for(const i of b9.lessons){const o=At(),a=parseInt(i.id.split(".")[1])-1,s=0,l=`${r}_${s}_${a}`,c={title:i.title,subtitle:i.description,content:{text:Mbe(i.content),image:i.coverImage,quiz:Obe(i.content.quiz)},progress:25*(a+1),navigation:{prev:a>0?`/section/${r}/${s}/${a-1}`:null,next:a<3?`/section/${r}/${s}/${a+1}`:null},estimatedTime:i.duration,difficulty:"初級",courseId:r,chapterIndex:s,sectionIndex:a,objectives:i.objectives,createdAt:o,updatedAt:o};await zt(Ie(U,"section_contents",l),c),console.log(`✅ 已上傳課程: ${i.title} (ID: ${l})`)}console.log("✅ 第一章節所有詳細課程內容已成功上傳到 Firestore!")}catch(e){console.error("❌ 上傳第一章節課程內容時發生錯誤:",e)}},Lbe=b("div",{target:"e1c6sx5y9"})({name:"zkl6v3",styles:"max-width:1000px;margin:0 auto;padding:40px 20px;font-family:'Noto Sans TC',sans-serif"}),Fbe=b("h1",{target:"e1c6sx5y8"})({name:"nvini2",styles:"text-align:center;color:#333;margin-bottom:30px;font-size:32px;font-weight:700"}),Bbe=b("h2",{target:"e1c6sx5y7"})({name:"wt5kyv",styles:"color:#666;margin-bottom:20px;font-size:24px"}),zbe=b("div",{target:"e1c6sx5y6"})({name:"11an9mu",styles:"background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);color:white;border-radius:15px;padding:30px;margin-bottom:30px;box-shadow:0 10px 30px rgba(102, 126, 234, 0.3);h3{margin:0 0 15px 0;font-size:20px;font-weight:600;}p{margin:8px 0;font-size:16px;line-height:1.6;opacity:0.9;}"}),Vbe=b("div",{target:"e1c6sx5y5"})({name:"17vh47i",styles:"display:grid;grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));gap:20px;margin-bottom:30px"}),jbe=b("div",{target:"e1c6sx5y4"})({name:"i1qc4b",styles:"background:white;border-radius:12px;padding:20px;box-shadow:0 4px 15px rgba(0, 0, 0, 0.1);border:1px solid #e2e8f0;.course-id{color:#7c3aed;font-weight:600;font-size:14px;margin-bottom:8px;}.course-title{color:#1a202c;font-weight:700;font-size:18px;margin-bottom:10px;}.course-description{color:#4a5568;font-size:14px;margin-bottom:15px;line-height:1.5;}.course-meta{display:flex;gap:10px;margin-bottom:15px;span{background:#f7fafc;color:#4a5568;padding:4px 8px;border-radius:6px;font-size:12px;font-weight:500;}}.course-objectives{margin-bottom:15px;h4{color:#2d3748;font-size:14px;font-weight:600;margin-bottom:8px;}ul{margin:0;padding-left:20px;li{color:#4a5568;font-size:13px;margin-bottom:4px;line-height:1.4;}}}.course-image{width:100%;height:120px;object-fit:cover;border-radius:8px;margin-top:10px;}"}),w9=b("button",{target:"e1c6sx5y3"})({name:"16i9fgk",styles:"background:linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%);color:white;border:none;border-radius:12px;padding:15px 30px;font-size:16px;font-weight:600;cursor:pointer;transition:all 0.3s ease;margin-right:15px;box-shadow:0 4px 15px rgba(124, 58, 237, 0.3);&:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 25px rgba(124, 58, 237, 0.4);}&:disabled{background:#cbd5e0;cursor:not-allowed;transform:none;box-shadow:none;}"}),Ube=b(w9,{target:"e1c6sx5y2"})({name:"or6z2f",styles:"background:linear-gradient(135deg, #6b7280 0%, #4b5563 100%);box-shadow:0 4px 15px rgba(107, 114, 128, 0.3);&:hover:not(:disabled){box-shadow:0 8px 25px rgba(107, 114, 128, 0.4);}"}),qbe=b("div",{target:"e1c6sx5y1"})({name:"1d82lzj",styles:"background:#1a202c;color:#e2e8f0;border-radius:12px;padding:20px;min-height:300px;font-family:'Monaco','Consolas',monospace;font-size:14px;line-height:1.6;max-height:500px;overflow-y:auto;margin-top:20px;border:1px solid #2d3748"}),Wbe=b("div",{target:"e1c6sx5y0"})("margin-bottom:8px;color:",e=>e.type==="error"?"#f56565":e.type==="success"?"#48bb78":e.type==="warning"?"#ed8936":"#e2e8f0",";&::before{content:'[",e=>new Date().toLocaleTimeString(),"] ';color:#a0aec0;font-size:12px;}");function Hbe(){const e=qt(),[t,n]=D.useState(!1),[r,i]=D.useState([]),o=(s,l="info")=>{i(c=>[...c,{message:s,type:l,timestamp:Date.now()}])},a=async()=>{n(!0),i([]),o("🚀 開始上傳第一章節詳細課程內容...","info");try{const s=console.log,l=console.error;console.log=c=>{s(c),c.includes("✅")?o(c,"success"):c.includes("❌")?o(c,"error"):o(c,"info")},console.error=c=>{l(c),o(c,"error")},await $be(),console.log=s,console.error=l,o("🎉 所有課程內容上傳完成！","success")}catch(s){o(`❌ 上傳失敗: ${s.message}`,"error")}n(!1)};return y(Lbe,{children:[u(Fbe,{children:"📚 第一章節詳細課程內容上傳"}),y(zbe,{children:[u("h3",{children:"🎯 即將上傳的內容"}),u("p",{children:"• 第一章｜飲料基礎認識與作業環境"}),u("p",{children:"• 包含 4 個詳細課程，每個課程都有完整的教學內容、活動設計和測驗"}),u("p",{children:"• 所有課程都配有高品質的 Unsplash 圖片"}),u("p",{children:"• 將儲存到 Firebase Firestore 的 lesson_details 集合中"})]}),u(Bbe,{children:"📖 課程預覽"}),u(Vbe,{children:b9.lessons.map(s=>y(jbe,{children:[u("div",{className:"course-id",children:s.id}),u("div",{className:"course-title",children:s.title}),u("div",{className:"course-description",children:s.description}),y("div",{className:"course-meta",children:[y("span",{children:["⏱️ ",s.duration]}),y("span",{children:["📊 ",s.content.quiz.length," 道測驗"]}),y("span",{children:["🎯 ",s.objectives.length," 個目標"]})]}),y("div",{className:"course-objectives",children:[u("h4",{children:"📋 學習目標："}),y("ul",{children:[s.objectives.slice(0,2).map((l,c)=>u("li",{children:l},c)),s.objectives.length>2&&y("li",{children:["...等 ",s.objectives.length," 項"]})]})]}),u("img",{src:s.coverImage,alt:s.title,className:"course-image"})]},s.id))}),y("div",{style:{textAlign:"center",marginBottom:"20px"},children:[u(w9,{onClick:a,disabled:t,children:t?"📤 上傳中...":"🚀 開始上傳課程內容"}),u(Ube,{onClick:()=>e("/update-database"),children:"← 返回資料庫管理"})]}),r.length>0&&y(qbe,{children:[u("h3",{style:{color:"#e2e8f0",marginBottom:"15px"},children:"📋 上傳日誌"}),r.map((s,l)=>u(Wbe,{type:s.type,children:s.message},l))]})]})}const Gbe={"001_0_0":{courseId:"001",chapterIndex:0,sectionIndex:0,title:"門市設備與器具認識 - 小考",questions:[{question:"以下哪一項設備是用來封住飲料杯口的？",type:"single_choice",options:["定量糖機","冰沙機","封膜機","奶蓋機"],correct:2,explanation:"封膜機是專門用來封住飲料杯口的設備，確保飲料密封不外漏。",points:20},{question:"封膜機加熱溫度太高，可能會導致塑膠膜焦黑並影響飲品安全。",type:"true_false",options:["正確","錯誤"],correct:0,explanation:"封膜機溫度過高確實會導致塑膠膜焦黑，影響食品安全和美觀。",points:20},{question:"以下哪些器具屬於「每日開店前」應檢查的項目？",type:"multiple_choice",options:["茶桶蓋是否乾淨","POS 是否正常連線","手套是否備齊","封膜機開關未打開"],correct:[0,1,2,3],explanation:"所有選項都是每日開店前必須檢查的重要項目，確保營業順利進行。",points:20}],passingScore:60,timeLimit:300,createdAt:new Date().toISOString()},"001_0_1":{courseId:"001",chapterIndex:0,sectionIndex:1,title:"飲料製作流程總覽 - 小考",questions:[{question:"請依照下列步驟排序一杯基本奶茶製作流程：a. 加冰塊 b. 倒入紅茶 c. 封膜 d. 貼上標籤 e. 加入配料",type:"ordering",options:["d → e → a → b → c","a → b → c → d → e","b → a → e → c → d","e → d → a → b → c"],correct:0,explanation:"正確順序：貼標籤 → 加配料 → 加冰塊 → 倒茶 → 封膜，這樣可確保最佳品質和效率。",points:25},{question:"顧客點了一杯「少冰半糖珍奶」，哪一個步驟不需要調整？",type:"single_choice",options:["糖度設定","冰塊份量","配料加入時間","奶茶比例"],correct:2,explanation:"配料加入時間通常不因客製化需求而改變，其他項目都需要根據客人要求調整。",points:25},{question:"哪一種飲品的出杯流程不需要封膜？",type:"single_choice",options:["抹茶奶蓋","烏龍鮮奶茶","黑糖珍珠奶茶","百香果綠茶"],correct:0,explanation:"抹茶奶蓋等奶蓋系列飲品通常使用圓頂蓋，而不是封膜。",points:25}],passingScore:60,timeLimit:300,createdAt:new Date().toISOString()},"001_0_2":{courseId:"001",chapterIndex:0,sectionIndex:2,title:"基本衛生與清潔規範 - 小考",questions:[{question:"哪一個清潔項目應於「每次班別交接時」進行？",type:"single_choice",options:["冷藏機器除霜","地板拖洗","冰桶換冰","熱水器內膽清潔"],correct:2,explanation:"冰桶換冰應在每次班別交接時進行，確保冰塊新鮮衛生。",points:25},{question:"只要戴手套就可以不用洗手。",type:"true_false",options:["正確","錯誤"],correct:1,explanation:"戴手套前後都需要洗手，手套只是額外的防護措施，不能替代洗手。",points:25},{question:"以下哪些作法可能會違反門市衛生規定？",type:"multiple_choice",options:["茶桶沒蓋蓋子","抹布與手套共用","食材直接放桌上","吸管散落置於操作檯"],correct:[0,1,2,3],explanation:"所有選項都違反了基本的衛生規定，可能造成食品污染。",points:25}],passingScore:60,timeLimit:300,createdAt:new Date().toISOString()},"001_0_3":{courseId:"001",chapterIndex:0,sectionIndex:3,title:"冰塊、糖度與客製化規則 - 小考",questions:[{question:"若客人點「無糖去冰奶茶」，下列哪一個步驟需特別注意？",type:"single_choice",options:["確認是否補糖","是否需要補水","杯子尺寸變更","改用透明封膜紙"],correct:1,explanation:"去冰奶類飲品通常不補水，因為奶類本身有足夠的液體量。",points:25},{question:"客人表示「我想要不太甜但也不要完全沒味道」，你應推薦？",type:"single_choice",options:["微糖（30%）","無糖（0%）","全糖（100%）","少糖（70%）"],correct:0,explanation:"微糖（30%）最符合「不太甜但有味道」的需求。",points:25},{question:"「熱飲也能使用封膜機，只要調整溫度即可。」",type:"true_false",options:["正確","錯誤"],correct:1,explanation:"熱飲不能使用封膜機，會導致塑膠膜變形或產生有害物質，應使用專用的熱飲杯蓋。",points:25}],passingScore:60,timeLimit:300,createdAt:new Date().toISOString()},"001_chapter_exam":{courseId:"001",chapterIndex:0,isChapterExam:!0,title:"第一章｜飲料基礎認識與作業環境 - 章節大考",questions:[{question:"飲料出杯時，哪個順序是正確的？",type:"single_choice",options:["加料 → 貼標籤 → 加冰 → 倒茶 → 封膜","倒茶 → 加料 → 封膜 → 加冰 → 貼標","貼標籤 → 加料 → 倒茶 → 加冰 → 封膜","加冰 → 倒茶 → 加料 → 貼標籤 → 封膜"],correct:0,explanation:"正確順序是：加料 → 貼標籤 → 加冰 → 倒茶 → 封膜，確保效率和品質。",points:20},{question:"以下哪些是每日開店前的基本準備項目？",type:"multiple_choice",options:["試封封膜機","手套數量確認","茶湯保溫檢查","廚餘桶放置在備料桌上"],correct:[0,1,2],explanation:"廚餘桶不應放置在備料桌上，這違反衛生規定。其他都是正確的準備項目。",points:20},{question:"顧客點了一杯「微冰微糖珍奶」，你忘記加糖，已經封膜，下一步應是？",type:"single_choice",options:["加糖補救再封膜一次","重做整杯","打開封膜再補糖","向顧客道歉後加奶霜掩蓋味道"],correct:1,explanation:"已經封膜的飲品如果有錯誤，最好的解決方式是重做整杯，確保品質和衛生。",points:20},{question:"哪一種錯誤屬於「衛生違規」而非操作失誤？",type:"single_choice",options:["封錯杯","奶精加入過多","抹布放在茶桶上","忘記貼標"],correct:2,explanation:"抹布放在茶桶上屬於衛生違規，可能造成污染。其他屬於操作失誤。",points:20},{question:"只要每日清潔做到，茶桶蓋子可以不蓋沒關係。",type:"true_false",options:["正確","錯誤"],correct:1,explanation:"茶桶蓋子必須隨時蓋好，防止灰塵、細菌和異物掉入，即使每日清潔也不例外。",points:20}],passingScore:70,timeLimit:600,createdAt:new Date().toISOString()}},Ybe=async()=>{try{console.log("開始添加第一章考試題目...");const e=se(U,"exam_questions"),t=await be(e);let n=0,r=0;for(const[i,o]of Object.entries(Gbe))try{const a=Ie(U,"exam_questions",i);t.docs.find(l=>l.id===i)?(await zt(a,{...o,updatedAt:new Date().toISOString()},{merge:!0}),r++,console.log(`更新考試題目: ${i}`)):(await zt(a,o),n++,console.log(`新增考試題目: ${i}`))}catch(a){console.error(`處理考試題目 ${i} 時發生錯誤:`,a)}return console.log("第一章考試題目處理完成！"),{success:!0,message:`成功處理第一章考試題目 - 新增: ${n} 個，更新: ${r} 個`}}catch(e){return console.error("添加第一章考試題目時發生錯誤:",e),{success:!1,error:e.message}}},Kbe=b("div",{target:"e1qgjuds7"})({name:"kboc8v",styles:"max-width:800px;margin:50px auto;padding:40px;padding-bottom:120px;background:white;border-radius:20px;box-shadow:0 10px 30px rgba(0, 0, 0, 0.1);text-align:center;font-family:'Noto Sans TC',sans-serif"}),Xbe=b("h1",{target:"e1qgjuds6"})({name:"1qkuy2e",styles:"color:#333;margin-bottom:20px;font-size:28px;display:flex;align-items:center;justify-content:center;gap:12px;i{color:#7C3AED;font-size:32px;}"}),Qbe=b("div",{target:"e1qgjuds5"})({name:"7zhcaq",styles:"color:#666;margin-bottom:30px;line-height:1.6;font-size:16px;text-align:left;h3{color:#333;margin-top:25px;margin-bottom:15px;display:flex;align-items:center;gap:8px;i{color:#7C3AED;}}ul{margin:15px 0;padding-left:20px;li{margin-bottom:8px;color:#555;}}"}),Jbe=b("div",{target:"e1qgjuds4"})({name:"1b14uxl",styles:"background:linear-gradient(135deg, #f8f9ff 0%, #e8f4f8 100%);border-radius:12px;padding:20px;margin:20px 0;border-left:4px solid #7C3AED"}),id=b("div",{target:"e1qgjuds3"})({name:"b4cy12",styles:"background:white;border-radius:8px;padding:15px;margin:10px 0;box-shadow:0 2px 8px rgba(0, 0, 0, 0.1);text-align:left;h4{color:#7C3AED;margin-bottom:8px;font-size:16px;}p{color:#666;font-size:14px;margin:4px 0;}"}),S9=b("button",{target:"e1qgjuds2"})({name:"baduo7",styles:"background:linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%);color:white;border:none;border-radius:10px;padding:15px 30px;font-size:16px;font-weight:600;cursor:pointer;transition:all 0.3s ease;margin:10px;&:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(124, 58, 237, 0.3);}&:disabled{background:#ccc;cursor:not-allowed;transform:none;box-shadow:none;}"}),Zbe=b(S9,{target:"e1qgjuds1"})({name:"1jg29r8",styles:"background:#6c757d;&:hover{background:#5a6268;box-shadow:0 8px 20px rgba(108, 117, 125, 0.3);}"}),e2e=b("div",{target:"e1qgjuds0"})("background:",e=>e.success?"#d4edda":e.error?"#f8d7da":"#e2e3e5",";border:1px solid ",e=>e.success?"#c3e6cb":e.error?"#f5c6cb":"#d1ecf1",";color:",e=>e.success?"#155724":e.error?"#721c24":"#0c5460",";padding:15px;border-radius:10px;margin:20px 0;text-align:left;"),t2e=()=>{const[e,t]=D.useState(!1),[n,r]=D.useState({message:"",type:""}),i=qt(),o=async()=>{t(!0),r({message:"正在上傳第一章考試題目...",type:"info"});try{const a=await Ybe();a.success?r({message:`✅ 成功！${a.message}

已創建以下考試：
• 小章節 1.1：門市設備與器具認識 - 小考 (3題)
• 小章節 1.2：飲料製作流程總覽 - 小考 (3題)
• 小章節 1.3：基本衛生與清潔規範 - 小考 (3題)
• 小章節 1.4：冰塊、糖度與客製化規則 - 小考 (3題)
• 第一章：章節大考 (5題)

現在學員可以在考試中心進行這些考試了！`,type:"success"}):r({message:`❌ 上傳失敗：${a.error}`,type:"error"})}catch(a){r({message:`❌ 發生錯誤：${a.message}`,type:"error"})}finally{t(!1)}};return y(Ne,{children:[u(Bt,{title:"第一章考試題目上傳"}),y(Kbe,{children:[y(Xbe,{children:[u("i",{className:"ri-file-edit-line"}),"第一章考試題目上傳"]}),y(Qbe,{children:[y("p",{children:["此工具將在 Firebase 的 ",u("code",{children:"exam_questions"})," 集合中添加完整的第一章節考試題目。 包含4個小節考試和1個章節大考，共計17道題目。"]}),y(Jbe,{children:[y("h3",{children:[u("i",{className:"ri-bookmark-line"}),"第一章｜飲料基礎認識與作業環境"]}),y(id,{children:[u("h4",{children:"📘 小章節 1.1｜門市設備與器具認識"}),u("p",{children:"• 3道題目：單選、判斷、多選"}),u("p",{children:"• 通過分數：60分 | 時限：5分鐘"})]}),y(id,{children:[u("h4",{children:"📘 小章節 1.2｜飲料製作流程總覽"}),u("p",{children:"• 3道題目：排序、情境單選"}),u("p",{children:"• 通過分數：60分 | 時限：5分鐘"})]}),y(id,{children:[u("h4",{children:"📘 小章節 1.3｜基本衛生與清潔規範"}),u("p",{children:"• 3道題目：單選、判斷、多選"}),u("p",{children:"• 通過分數：60分 | 時限：5分鐘"})]}),y(id,{children:[u("h4",{children:"📘 小章節 1.4｜冰塊、糖度與客製化規則"}),u("p",{children:"• 3道題目：情境單選、判斷"}),u("p",{children:"• 通過分數：60分 | 時限：5分鐘"})]}),y(id,{children:[u("h4",{children:"🧾 第一章｜章節大考（綜合測驗）"}),u("p",{children:"• 5道題目：綜合性題目，涵蓋所有小節內容"}),u("p",{children:"• 通過分數：70分 | 時限：10分鐘"})]})]}),y("h3",{children:[u("i",{className:"ri-checkbox-circle-line"}),"題目特色"]}),y("ul",{children:[u("li",{children:"涵蓋門市設備認識、製作流程、衛生規範、客製化規則"}),u("li",{children:"包含單選、多選、判斷、排序等多種題型"}),u("li",{children:"每題都有詳細的解釋說明"}),u("li",{children:"情境式題目貼近實際工作場景"}),u("li",{children:"漸進式難度設計，從基礎到應用"})]})]}),n.message&&u(e2e,{success:n.type==="success",error:n.type==="error",children:u("pre",{style:{margin:0,whiteSpace:"pre-wrap",fontFamily:"inherit"},children:n.message})}),y("div",{children:[u(S9,{onClick:o,disabled:e,children:e?"⏳ 上傳中...":"🚀 開始上傳考試題目"}),u(Zbe,{onClick:()=>i("/exam-management"),children:"← 返回考試管理"})]})]})]})},n2e=b("div",{target:"e1yerh3a6"})({name:"1vp78a0",styles:"max-width:1000px;margin:50px auto;padding:40px;background:white;border-radius:20px;box-shadow:0 10px 30px rgba(0, 0, 0, 0.1);text-align:center;font-family:'Noto Sans TC',sans-serif"}),r2e=b("h1",{target:"e1yerh3a5"})({name:"rv3ib9",styles:"color:#333;margin-bottom:20px;font-size:32px;display:flex;align-items:center;justify-content:center;gap:15px;i{color:#EC4899;font-size:36px;}"}),i2e=b("div",{target:"e1yerh3a4"})({name:"1i4se75",styles:"background:linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%);border:2px solid #FF9800;border-radius:12px;padding:20px;margin:20px 0;text-align:left;h3{color:#E65100;margin-bottom:12px;display:flex;align-items:center;gap:8px;i{color:#FF9800;}}p{color:#BF360C;margin:8px 0;font-size:14px;}"}),C9=b("button",{target:"e1yerh3a3"})("background:",e=>e.danger?"linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%)":"linear-gradient(135deg, #EC4899 0%, #F472B6 100%)",";color:white;border:none;border-radius:10px;padding:15px 30px;font-size:16px;font-weight:600;cursor:pointer;transition:all 0.3s ease;margin:10px;&:hover{transform:translateY(-2px);box-shadow:",e=>e.danger?"0 8px 20px rgba(255, 107, 107, 0.3)":"0 8px 20px rgba(236, 72, 153, 0.3)",";}&:disabled{background:#ccc;cursor:not-allowed;transform:none;box-shadow:none;}"),o2e=b(C9,{target:"e1yerh3a2"})({name:"1jg29r8",styles:"background:#6c757d;&:hover{background:#5a6268;box-shadow:0 8px 20px rgba(108, 117, 125, 0.3);}"}),a2e=b("div",{target:"e1yerh3a1"})("background:",e=>e.success?"#d4edda":e.error?"#f8d7da":"#e2e3e5",";border:1px solid ",e=>e.success?"#c3e6cb":e.error?"#f5c6cb":"#d1ecf1",";color:",e=>e.success?"#155724":e.error?"#721c24":"#0c5460",";padding:15px;border-radius:10px;margin:20px 0;text-align:left;white-space:pre-wrap;max-height:400px;overflow-y:auto;"),s2e=b("div",{target:"e1yerh3a0"})({name:"1pkrypn",styles:'background:white;border:2px solid #EC4899;border-radius:12px;padding:20px;margin:15px 0;text-align:left;box-shadow:0 4px 15px rgba(236, 72, 153, 0.1);h4{color:#EC4899;margin-bottom:10px;font-size:18px;}.content-preview{background:#f8f9fa;padding:10px;border-radius:8px;margin:10px 0;font-size:14px;max-height:200px;overflow:hidden;position:relative;&::after{content:"...";position:absolute;bottom:0;right:10px;background:linear-gradient(90deg, transparent, #f8f9fa);padding-left:20px;}}'}),Ul={chapterNumber:2,chapterTitle:"第二章｜煮茶篇",sections:[{id:"002_0_0",sectionNumber:1,title:"2.1 綠茶煮法（烏龍、四季春）",subtitle:"煮出一鍋翠綠的溫柔——綠茶沖泡法",content:`綠茶是手搖飲中清爽系的代表，像是四季春與清烏龍，主打「不苦不澀、香氣清新」。本節將帶你理解綠茶背後的製茶邏輯與沖泡精髓。

🍃 重點一：綠茶的特性

綠茶屬於「半發酵茶」類型，風味溫潤、茶湯清亮。

• 四季春：帶有淡淡茉莉香，色澤偏黃綠
• 烏龍茶（清香型）：發酵略低，口感柔順

🌡️ 重點二：沖泡原則

• 茶葉與水比例約為 1:100（10g 茶葉：1000ml 水）
• 建議水溫約 85～90°C
• 浸泡時間約 3~5 分鐘，中間需悶蒸提香
• 濾出茶湯後，避免茶葉繼續泡著，以防苦味釋出

👁️ 重點三：辨別好茶的訣竅

• 茶湯呈淡黃綠、透亮
• 味道不澀，尾韻帶清甜
• 若過濃、偏苦、茶色偏褐，代表泡過頭`,duration:"45分鐘",difficulty:"初級",objectives:["理解綠茶的基本特性與分類","掌握綠茶沖泡的標準比例與流程","學會辨別茶湯品質的好壞","避免常見的沖泡錯誤"],imageUrl:"https://images.unsplash.com/photo-1544787219-7f47ccb76574?q=80&w=2070&auto=format&fit=crop"},{id:"002_0_1",sectionNumber:2,title:"2.2 紅茶煮法（阿薩姆、錫蘭）",subtitle:"全發酵的溫厚魅力——紅茶煮製入門",content:`紅茶是製作奶茶的靈魂，特別是阿薩姆與錫蘭這兩大明星。紅茶擁有強烈的茶香與深紅茶湯，是搭配奶類的完美搭檔。

☕ 重點一：紅茶的特性

• 阿薩姆：印度產地，茶味厚重，適合奶茶
• 錫蘭：斯里蘭卡產地，香氣奔放，適合清飲或水果茶

🔥 重點二：沖泡與悶蒸技巧

• 建議水溫為 95～100°C
• 悶蒸時間約 5 分鐘
• 茶葉充分舒展後即可濾出，避免過度浸泡
• 沖泡完成後建議快速降溫（避免苦味釋放），可用冰鎮法或冷水浸鋼杯外層

🎨 重點三：茶湯的色澤與風味辨識

• 阿薩姆茶湯深紅帶棕；錫蘭茶湯偏橘紅
• 味道圓潤而不苦澀為佳
• 若出現澀感或過濃，表示泡過頭或茶葉品質不穩`,duration:"50分鐘",difficulty:"初級",objectives:["區分阿薩姆與錫蘭紅茶的特性","掌握紅茶的高溫沖泡技巧","學會快速降溫的處理方法","辨識紅茶茶湯的品質標準"],imageUrl:"https://images.unsplash.com/photo-1564890369878-4be5a6074af0?q=80&w=2070&auto=format&fit=crop"},{id:"002_0_2",sectionNumber:3,title:"2.3 烏龍茶煮法（鐵觀音、包種）",subtitle:"在焙火與發酵之間——烏龍茶的平衡藝術",content:`烏龍茶是一個充滿變化的品項，從重焙的鐵觀音到清香的包種茶，不同焙火與發酵程度，決定了它的風味層次。

🫖 重點一：認識兩種烏龍茶

• 鐵觀音：屬重焙火茶，茶湯較深，帶堅果香與厚重尾韻
• 包種茶：輕發酵茶，香氣清揚，常被誤認為綠茶

⚖️ 重點二：沖泡方式調整

• 鐵觀音適合使用高溫（95°C）與較長時間（5分鐘）悶泡
• 包種茶建議用 85～90°C 水，時間約 3 分鐘
• 可採「先潤後泡」：沖一次熱水倒掉，再正式沖泡

🍵 重點三：口感與茶湯辨識

• 鐵觀音：茶湯深褐、厚重有香
• 包種茶：色澤黃綠，入口清香柔和
• 若烏龍泡出苦澀味，通常是悶泡時間過長`,duration:"40分鐘",difficulty:"中級",objectives:["分辨重焙與輕發酵烏龍茶的差異","掌握不同烏龍茶的個別沖泡技巧","學會「先潤後泡」的進階技法","根據茶湯顏色判斷沖泡是否得當"],imageUrl:"https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?q=80&w=2070&auto=format&fit=crop"},{id:"002_0_3",sectionNumber:4,title:"2.4 茶湯保存與每日備茶流程",subtitle:"茶不是永恆的——從備茶到保鮮的日常 SOP",content:`再好的茶也敵不過時間。良好的備茶流程與保存方法，是確保每杯出品品質穩定的關鍵。

❄️ 重點一：茶湯保存標準

• 冷藏保存溫度：7°C 以下
• 每一桶茶湯最多使用 8 小時內
• 所有茶桶必須貼上「製作時間標籤」
• 開封後若未標示，視為逾期即丟棄

📅 重點二：每日備茶排程建議

• 以銷量數據預估製茶量（可依時段做差異化備料）
• 熱銷品項（紅茶）可早煮；冷門品項（包種）後煮
• 每日開店：檢查茶桶衛生 → 備料 → 記錄時間 → 試喝確認風味

⚠️ 重點三：異常處理 SOP

• 茶湯出現濁色、浮渣、異味，禁止使用
• 若剩餘未使用完，不得混入下一鍋茶
• 備茶員工需每日簽名負責紀錄（提升責任感與透明度）`,duration:"35分鐘",difficulty:"初級",objectives:["建立正確的茶湯保存觀念","學會製作時間標籤與記錄系統","掌握每日備茶的完整流程","熟悉異常狀況的處理程序"],imageUrl:"https://images.unsplash.com/photo-1587049352851-8d4e89133924?q=80&w=2070&auto=format&fit=crop"}]},l2e=()=>{const[e,t]=D.useState(!1),[n,r]=D.useState({message:"",type:""}),i=qt(),o=async()=>{t(!0),r({message:"開始上傳第二章｜煮茶篇詳細內容...",type:"info"});try{let a=0,s=Ul.sections.length;for(const l of Ul.sections){const c={courseId:"002",chapterNumber:Ul.chapterNumber,chapterTitle:Ul.chapterTitle,sectionNumber:l.sectionNumber,id:l.id,title:l.title,subtitle:l.subtitle,content:l.content,duration:l.duration,difficulty:l.difficulty,objectives:l.objectives,imageUrl:l.imageUrl,createdAt:At(),updatedAt:At(),authorUid:"admin",isPublished:!0},d=Ie(U,"section_contents",l.id);await zt(d,c),a++,r(p=>({...p,message:p.message+`
✅ 已上傳：${l.title}`}))}r({message:`🎉 第二章｜煮茶篇內容上傳完成！

📊 上傳統計：
• 成功上傳：${a}/${s} 個小節
• 課程ID：002
• 章節編號：${Ul.chapterNumber}

現在學員可以在課程頁面查看詳細的煮茶教學內容了！`,type:"success"})}catch(a){console.error("上傳失敗:",a),r({message:`❌ 上傳失敗：${a.message}

請檢查：
• 網路連線是否正常
• Firebase 權限是否足夠
• Firestore 安全規則是否允許寫入`,type:"error"})}finally{t(!1)}};return y(n2e,{children:[y(r2e,{children:[u("i",{className:"ri-cup-line"}),"第二章｜煮茶篇詳細內容上傳"]}),y(i2e,{children:[y("h3",{children:[u("i",{className:"ri-information-line"}),"上傳內容說明"]}),u("p",{children:"• 第二章｜煮茶篇包含 4 個詳細小節"}),u("p",{children:"• 每個小節都有完整的教學內容、學習目標和配圖"}),u("p",{children:"• 內容涵蓋綠茶、紅茶、烏龍茶的沖泡技巧與茶湯保存"}),u("p",{children:"• 將儲存到 Firebase Firestore 的 section_contents 集合中"})]}),u("h3",{style:{color:"#EC4899",margin:"30px 0 20px 0"},children:"📚 章節內容預覽"}),Ul.sections.map(a=>y(s2e,{children:[u("h4",{children:a.title}),y("p",{children:[u("strong",{children:"副標題："}),a.subtitle]}),y("p",{children:[u("strong",{children:"時間："}),a.duration," | ",u("strong",{children:"難度："}),a.difficulty]}),y("div",{className:"content-preview",children:[a.content.substring(0,300),"..."]}),u("p",{children:u("strong",{children:"學習目標："})}),y("ul",{children:[a.objectives.slice(0,2).map((s,l)=>u("li",{children:s},l)),a.objectives.length>2&&y("li",{children:["...等 ",a.objectives.length," 項目標"]})]})]},a.id)),n.message&&u(a2e,{success:n.type==="success",error:n.type==="error",children:n.message}),y("div",{children:[u(C9,{onClick:o,disabled:e,children:e?"⏳ 上傳中...":"☕ 上傳第二章詳細內容"}),u(o2e,{onClick:()=>i("/update-database"),children:"← 返回資料庫管理"})]})]})},c2e=b("div",{target:"e1gk9mb8"})({name:"1vf7snf",styles:"max-width:800px;margin:50px auto;padding:40px;background:white;border-radius:20px;box-shadow:0 10px 30px rgba(0, 0, 0, 0.1);text-align:center;font-family:'Noto Sans TC',sans-serif"}),u2e=b("h1",{target:"e1gk9mb7"})({name:"vrcu28",styles:"color:#333;margin-bottom:20px;font-size:28px;display:flex;align-items:center;justify-content:center;gap:12px;i{color:#FF6B6B;font-size:32px;}"}),d2e=b("div",{target:"e1gk9mb6"})({name:"c3r543",styles:"color:#666;margin-bottom:30px;line-height:1.6;font-size:16px;text-align:left;h3{color:#333;margin-top:25px;margin-bottom:15px;display:flex;align-items:center;gap:8px;i{color:#FF6B6B;}}ul{margin:15px 0;padding-left:20px;li{margin-bottom:8px;color:#555;}}"}),p2e=b("div",{target:"e1gk9mb5"})({name:"1pmqfcb",styles:"background:linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);border:2px solid #ffc107;border-radius:12px;padding:20px;margin:20px 0;text-align:left;h4{color:#856404;margin-bottom:12px;display:flex;align-items:center;gap:8px;i{color:#ffc107;}}p{color:#856404;margin:8px 0;font-size:14px;}"}),ow=b("button",{target:"e1gk9mb4"})("background:",e=>e.danger?"linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%)":"linear-gradient(135deg, #7C3AED 0%, #3B82F6 100%)",";color:white;border:none;border-radius:10px;padding:15px 30px;font-size:16px;font-weight:600;cursor:pointer;transition:all 0.3s ease;margin:10px;&:hover{transform:translateY(-2px);box-shadow:",e=>e.danger?"0 8px 20px rgba(255, 107, 107, 0.3)":"0 8px 20px rgba(124, 58, 237, 0.3)",";}&:disabled{background:#ccc;cursor:not-allowed;transform:none;box-shadow:none;}"),h2e=b(ow,{target:"e1gk9mb3"})({name:"1jg29r8",styles:"background:#6c757d;&:hover{background:#5a6268;box-shadow:0 8px 20px rgba(108, 117, 125, 0.3);}"}),f2e=b("div",{target:"e1gk9mb2"})("background:",e=>e.success?"#d4edda":e.error?"#f8d7da":"#e2e3e5",";border:1px solid ",e=>e.success?"#c3e6cb":e.error?"#f5c6cb":"#d1ecf1",";color:",e=>e.success?"#155724":e.error?"#721c24":"#0c5460",";padding:15px;border-radius:10px;margin:20px 0;text-align:left;white-space:pre-wrap;max-height:400px;overflow-y:auto;"),g2e=b("div",{target:"e1gk9mb1"})({name:"h87dem",styles:"width:100%;height:20px;background:#e9ecef;border-radius:10px;overflow:hidden;margin:15px 0"}),m2e=b("div",{target:"e1gk9mb0"})("height:100%;background:linear-gradient(135deg, #28a745 0%, #20c997 100%);width:",e=>e.value,"%;transition:width 0.3s ease;display:flex;align-items:center;justify-content:center;color:white;font-size:12px;font-weight:600;"),v2e=()=>{const[e,t]=D.useState(!1),[n,r]=D.useState({message:"",type:""}),[i,o]=D.useState(0),{user:a}=gi(),s=qt(),l=async()=>{if(!a){r({message:"請先登入！",type:"error"});return}if(window.confirm(`⚠️ 確定要移除所有課程中的圖片嗎？

此操作包括：
- 移除封面圖片 (coverImage)
- 移除課程內容中的所有圖片區塊
- 此操作無法復原！

請確認您要繼續。`)){t(!0),o(0),r({message:"開始處理課程圖片移除...",type:"info"});try{const p=["courses","course_summaries"];let f=0,h=0,g=0;for(const m of p){const v=await be(se(U,m));g+=v.size}r(m=>({...m,message:m.message+`

📊 找到 ${g} 個課程文檔需要處理`}));for(const m of p){r(S=>({...S,message:S.message+`

🔄 正在處理 ${m} 集合...`}));const w=(await be(se(U,m))).docs;for(let S=0;S<w.length;S++){const C=w[S],A=C.data();let _=!1,I=0;const E={};if(A.coverImage&&(E.coverImage="",_=!0,I++),A.imageUrl&&(E.imageUrl="",_=!0,I++),A.blocks&&Array.isArray(A.blocks)){const k=A.blocks.filter(T=>T.type==="image"?(I++,!1):!0);k.length!==A.blocks.length&&(E.blocks=k,_=!0)}if(_){const k=Ie(U,m,C.id);await fn(k,E),h+=I,r(T=>({...T,message:T.message+`
✅ ${C.id}: 移除了 ${I} 個圖片`}))}else r(k=>({...k,message:k.message+`
⚪ ${C.id}: 沒有找到圖片`}));f++,o(Math.round(f/g*100))}}r({message:`✅ 圖片移除完成！

📈 處理統計：
• 處理的課程文檔: ${f} 個
• 移除的圖片總數: ${h} 個
• 處理的集合: ${p.join(", ")}

🎉 所有課程圖片已成功移除！`,type:"success"}),o(100)}catch(p){console.error("移除圖片失敗:",p),r({message:`❌ 移除失敗：${p.message}

請檢查：
• 網路連線是否正常
• Firebase 權限是否足夠
• 您是否有修改課程的權限`,type:"error"})}finally{t(!1)}}},c=async()=>{t(!0),r({message:"正在掃描課程中的圖片...",type:"info"});try{const d=["courses","course_summaries"];let p=0,f=0,h="";for(const g of d){const v=(await be(se(U,g))).docs;f+=v.length,h+=`

📂 ${g} 集合 (${v.length} 個文檔):
`;for(const w of v){const S=w.data();let C=0,A=[];if(S.coverImage&&(C++,A.push("封面圖片")),S.imageUrl&&(C++,A.push("圖片URL")),S.blocks&&Array.isArray(S.blocks)){const _=S.blocks.filter(I=>I.type==="image");_.length>0&&(C+=_.length,A.push(`${_.length}個內容圖片`))}p+=C,C>0?h+=`  • ${w.id}: ${C} 個圖片 (${A.join(", ")})
`:h+=`  • ${w.id}: 無圖片
`}}r({message:`🔍 圖片掃描完成！

📊 掃描結果：
• 總課程數: ${f} 個
• 總圖片數: ${p} 個${h}`,type:"success"})}catch(d){console.error("掃描失敗:",d),r({message:`❌ 掃描失敗：${d.message}`,type:"error"})}finally{t(!1)}};return y(c2e,{children:[y(u2e,{children:[u("i",{className:"ri-delete-bin-line"}),"移除課程圖片工具"]}),y(d2e,{children:[u("p",{children:"此工具將幫助您移除所有課程中的圖片，包括封面圖片和內容中的圖片區塊。 這對於減少存儲空間使用或統一課程風格很有用。"}),y(p2e,{children:[y("h4",{children:[u("i",{className:"ri-alert-line"}),"重要警告"]}),u("p",{children:"• 此操作將永久移除所有課程中的圖片"}),u("p",{children:"• 包括封面圖片 (coverImage) 和內容區塊中的圖片"}),u("p",{children:"• 此操作無法復原，請謹慎使用"}),u("p",{children:"• 建議先進行掃描，了解將被移除的圖片數量"})]}),y("h3",{children:[u("i",{className:"ri-settings-line"}),"操作說明"]}),y("ul",{children:[u("li",{children:"點擊「掃描圖片」先查看有多少圖片會被移除"}),u("li",{children:"確認無誤後，點擊「移除所有圖片」執行移除操作"}),u("li",{children:"系統會處理 courses 和 course_summaries 兩個集合"}),u("li",{children:"移除完成後會顯示詳細的處理報告"})]})]}),e&&i>0&&u(g2e,{children:y(m2e,{value:i,children:[i,"%"]})}),n.message&&u(f2e,{success:n.type==="success",error:n.type==="error",children:n.message}),y("div",{children:[u(ow,{onClick:c,disabled:e,children:e?"⏳ 掃描中...":"🔍 掃描圖片"}),u(ow,{danger:!0,onClick:l,disabled:e,children:e?"⏳ 移除中...":"🗑️ 移除所有圖片"}),u(h2e,{onClick:()=>s("/update-database"),children:"← 返回資料庫管理"})]})]})},vg={chapters:[{id:"001",title:"第一章｜飲料基礎認識與作業環境",description:"學習門市設備、製作流程、衛生規範與客製化規則",color:"#3b82f6",gradientColor:"#2563eb",icon:"ri-store-line",sections:[{id:"001_1_1",title:"1.1 門市設備與器具認識",subtitle:"🔧 門市裡的夥伴們——設備與器具總動員",content:`一間飲料店的日常，從「備料區」到「出杯檯」都充滿了各種專業設備，它們不是冰冷的工具，而是每天幫你完成百杯好茶的好夥伴。認識它們，是每個店員的第一課。

🔹 **重點一：門市空間配置與動線設計**
- 前台（出杯區）：封膜機、飲品展示架、收銀機
- 中台（備料區）：糖機、配料台、奶精桶、冰塊桶  
- 後台（茶水區）：茶桶、煮茶鍋、冷水機、冰箱

🔹 **重點二：核心設備與使用方式**
- 🌀 **封膜機**：高溫封口，需注意加熱溫度與手指安全
- 💧 **定量糖機**：可快速出糖，需定期校正 ml 數
- 🔥 **熱水器/煮茶鍋**：煮茶、泡配料的熱源
- 🧊 **冰沙機/製冰機**：製作冰沙、碎冰飲品
- 🖨️ **POS點餐機**：接單、列印標籤、管理出杯順序

🔹 **重點三：常見耗材與分類**
- 杯型：M杯、L杯、熱飲杯、奶蓋杯
- 吸管：一般吸管、珍珠吸管、奶蓋扁吸
- 配料道具：量杯、壓珍珠棒、冰勺、奶精泵頭

💡 **小提醒：** 每樣設備都需「定期檢查 + 日常清潔 + 正確操作」，否則容易影響飲品品質與作業效率。`,duration:"45分鐘",difficulty:"初級"},{id:"001_1_2",title:"1.2 飲料製作流程總覽（下單 → 出杯）",subtitle:"🛠️ 一杯誕生的旅程——從點單到出杯",content:`「一杯珍奶怎麼做出來的？」——這不只是倒茶加料那麼簡單，而是一段從點單、客製、製作到交付的精密流程。掌握這個流程，是每位飲料人不可或缺的核心能力！

🔹 **重點一：點單與標籤流程**
- 客人點飲料 → POS 點單 → 印出標籤 → 貼於杯上
- 標籤資訊：品項、糖冰、配料、數量、時間

🔹 **重點二：製作五大步驟**
1️⃣ 取杯貼標
2️⃣ 加配料（珍珠、椰果、奶蓋等）
3️⃣ 加冰糖（依客製）
4️⃣ 倒茶/奶類（根據品項）
5️⃣ 封膜/加蓋 → 擺上出杯台

🔹 **重點三：不同品項的製作差異**
- 🍓 果茶系列：先糖 → 再果醬 → 再茶
- 🧋 奶蓋系列：茶先加 → 奶蓋最後上 → 不封膜
- 🍧 冰沙系列：果泥與冰沙需用機器現打

💡 **小提醒：** 高峰期時，需搭配隊友協作，分區操作、標籤對位、出杯速度都會影響整體流程順暢度！`,duration:"50分鐘",difficulty:"初級"},{id:"001_1_3",title:"1.3 基本衛生與清潔規範",subtitle:"🧼 給顧客一杯安心——衛生與清潔的日常習慣",content:`在飲品品質之外，最被忽視卻最重要的，就是「衛生」。只要一個環節沒做好，就可能讓整杯飲品「看起來好喝，但實際危險」。

🔹 **重點一：個人衛生守則**
- 👕 穿著乾淨制服，綁起長髮
- 🖐️ 每次操作前、上廁所後、換配料後都需洗手
- 🧤 使用手套時不可觸碰未消毒物品，並定期更換

🔹 **重點二：環境與設備清潔規則**
- 每日清潔三階段：開店、營業中、打烊
- 重點區域：茶桶內外、配料區檯面、封膜機下方、冰桶
- 擦拭道具需分類（桌布/地拖/茶具擦）

🔹 **重點三：食材保存與食安規範**
- 配料與茶湯皆須貼上開封與製作時間
- 冷藏區保持 0–7°C，乾濕分離
- 未使用完食材不得「混批回桶」或「延時再用」

💡 **小提醒：** 乾淨不是打掃的結果，是一種習慣的體現。懂得預防，才是衛生的最高境界。`,duration:"40分鐘",difficulty:"初級"},{id:"001_1_4",title:"1.4 冰塊、糖度與客製化規則介紹",subtitle:"🧊 一杯不只甜不甜——客製化飲品的秘密",content:`在這個飲品能「微冰去糖少椰果加布丁」的時代，客製化不只是選項，更是我們服務的核心。學會如何聽懂與處理客製需求，是你進階職人之路的第一關。

🔹 **重點一：糖度邏輯**
- 全糖（100%）
- 少糖（70%）
- 半糖（50%）
- 微糖（30%）
- 無糖（0%）
➡️ 一般以糖水定量機控制，奶蓋與果醬類須個別調整。

🔹 **重點二：冰塊設定**
- 正常冰
- 少冰
- 微冰
- 去冰（視飲品是否可補水）
- 溫/熱（不可封膜，需用熱飲杯蓋）

🔹 **重點三：常見配料組合與出杯順序**
- 🧋 基本珍奶：加珍珠 → 加冰 → 加奶 → 封膜
- 🌰 雙Q系列：加椰果/粉圓 → 加茶 → 封膜
- 🍓 果醬類果茶：先加糖果醬 → 再加茶 → 再加冰

💡 **小提醒：** 當顧客出現不熟悉選項時，適時提供建議或比喻說明（例如「半糖約是全糖的一半甜」）會提升服務品質！`,duration:"35分鐘",difficulty:"初級"}]},{id:"002",title:"第二章｜煮茶篇",description:"掌握綠茶、紅茶、烏龍茶的正確沖泡技法與保存方式",color:"#22c55e",gradientColor:"#16a34a",icon:"ri-cup-line",sections:[{id:"002_2_1",title:"2.1 綠茶煮法（烏龍、四季春）",subtitle:"🌿 煮出一鍋翠綠的溫柔——綠茶沖泡法",content:`綠茶，是手搖飲中最輕盈的存在。它不像紅茶濃烈，也不像烏龍厚重，反而清香淡雅、回甘無聲。想煮好一鍋四季春或清香烏龍，就要把握「溫度」、「時間」與「比例」這三個關鍵詞。

🔹 **重點一：綠茶的性格**
- 四季春：半發酵，香氣偏花香，湯色偏黃綠
- 清香烏龍：介於綠與烏龍之間，風味輕盈不澀
- 發酵程度：介於 20%–40%，適合低溫沖泡保留香氣

🔹 **重點二：沖泡流程**
- 建議水溫：85°C～90°C（太熱易失香）
- 茶葉比例：10g 茶葉 / 1000ml 水（1:100）
- 沖泡時間：3–5 分鐘，第一分鐘中需輕搖促進茶葉展開
- 濾出：完成後立即過濾，避免苦澀物質持續釋放

🔹 **重點三：品質判別與常見錯誤**
- 好的茶湯應呈**淡黃透亮**、香氣飄揚
- 若呈暗黃、帶苦澀，可能是時間過長或茶葉氧化
- 可嘗試「聞香」與「觀色」法進行自我檢查

💡 **小提醒：** 綠茶要像對待一位脆弱的老朋友一樣，用剛剛好的溫柔對待，才能煮出一杯真正動人的風味。`,duration:"45分鐘",difficulty:"初級"},{id:"002_2_2",title:"2.2 紅茶煮法（阿薩姆、錫蘭）",subtitle:"🔥 茶香濃郁，來自高溫悶煮的深層能量——紅茶煮法",content:`紅茶，是許多人手搖初戀中的「珍珠奶茶基底」。這類全發酵茶葉，擁有溫厚的身體感與渾厚的香氣，煮起來要敢用高溫、懂得降溫，才能泡得夠濃、夠香、又不苦！

🔹 **重點一：紅茶家族的個性比較**
- 阿薩姆紅茶：厚實有力，與鮮奶絕配
- 錫蘭紅茶：香氣細緻，適合與果類搭配
- 發酵程度高達 90–100%，需要高溫悶煮才能完全釋放風味

🔹 **重點二：煮法三步驟**
1️⃣ 水溫需達 95–100°C
2️⃣ 茶葉悶煮時間建議 5 分鐘
3️⃣ 悶煮完畢需快速過濾並冰鎮，否則會釋出過多單寧酸導致澀味

🔹 **重點三：保存技巧與注意事項**
- 茶湯必須在**8 小時內**使用完畢
- 冰鎮後立即冷藏，且**不能再次加熱使用**
- 若色澤變混濁、聞起來有酸味，即判定不合格

💡 **小提醒：** 紅茶需要的不是溫柔，是果斷與果敢。悶煮不夠，香氣不起；悶過頭，澀到無情。`,duration:"50分鐘",difficulty:"初級"},{id:"002_2_3",title:"2.3 烏龍茶煮法（鐵觀音、包種）",subtitle:"🔥🌸 在火與花之間尋找平衡——烏龍的兩種極端",content:`烏龍，是最有個性的茶類。它可以是如包種般清香淡雅，也可以是像鐵觀音那樣濃烈沉穩。不同焙火與發酵程度，讓烏龍成為變化最多的茶類。

🔹 **重點一：品種特性與風味定位**
- 鐵觀音：中重焙火、茶湯深紅棕、帶有炭焙與堅果香氣
- 包種茶：輕焙、茶湯清綠、花香明顯，適合清飲
- 發酵程度差異大（30%～70%），直接影響泡法

🔹 **重點二：沖泡策略與參數調整**
- 鐵觀音：建議水溫 95°C，悶泡 5–6 分鐘
- 包種茶：水溫 85–90°C，悶泡約 3–4 分鐘
- 建議使用「潤茶」流程（第一次注水倒掉）來去除雜味

🔹 **重點三：錯誤與修正機會**
- 茶湯過苦：泡太久、茶葉過量、未即時過濾
- 香氣不夠：水溫過低、未悶出茶葉油分
- 湯色灰濁：茶葉受潮或氧化，可立即更換新料

💡 **小提醒：** 煮烏龍像在談一段戀愛，你得懂得它的極端，才能在溫度與時間裡找到平衡。`,duration:"40分鐘",difficulty:"中級"},{id:"002_2_4",title:"2.4 茶湯保存與每日備茶流程",subtitle:"📅 好茶不等人——備茶與保存，是每天的儀式",content:`一杯再完美的茶，如果保存錯誤，也可能毀於保存的環節。本單元將帶你學會如何科學地安排每日備茶計畫，以及正確的保存條件。

🔹 **重點一：保存基本守則**
- 茶湯必須冷藏（7°C 以下）
- 保存時間上限為 **8 小時**，不可延用
- 每桶茶湯需貼上「製作時間 + 負責人簽名」

🔹 **重點二：每日備茶的三原則**
1️⃣ 根據前一天銷量與當日天氣預估製茶量
2️⃣ 優先備好熱銷茶（紅茶、綠茶）
3️⃣ 須準備預備茶（備用桶），應對突發高峰

🔹 **重點三：保存錯誤案例與 SOP 處理**
- 茶湯變色（偏暗、濁）→ 全桶丟棄、重煮
- 未貼標 → 視為過期處理
- 發現異味 → 通報主管並全桶更換

💡 **小提醒：** 備茶不只是流程，更是一種對品質的尊重與專業的體現。記得：好茶，只應在黃金時間內飲用。`,duration:"35分鐘",difficulty:"初級"}]},{id:"003",title:"第三章｜調奶篇",description:"學習奶精與鮮奶應用、奶茶比例調配與奶泡製作技巧",color:"#f59e0b",gradientColor:"#d97706",icon:"ri-cup-fill",sections:[{id:"003_3_1",title:"3.1 奶精與鮮奶差異",subtitle:"🥛 是奶還是「精」？你分得清嗎？",content:`在飲料界，「奶」的選擇會決定飲品的靈魂。你知道什麼是奶精？又知道鮮奶和奶精的差別在哪裡嗎？本節將幫你釐清常見觀念，也讓你學會在正確的時機選擇適合的「奶」。

🔹 **重點一：奶精是什麼？**
- 奶精（Creamer）是植物性或動物性脂肪粉末
- 優點：保存久、穩定性高、不易分離
- 缺點：風味較「厚重」但不夠自然，常搭配紅茶、烏龍茶使用

🔹 **重點二：鮮奶特性**
- 多為全脂鮮乳，蛋白質、乳糖含量高
- 味道清新、自然香甜，適合搭配茶底較淡者
- 缺點：保存期短、易因高溫分離或結塊

🔹 **重點三：使用時機與飲品風格搭配**
- 奶精：適合「奶茶系列」，如珍奶、烏龍奶
- 鮮奶：適合「鮮奶茶」與「抹茶拿鐵」等高質感品項
- 請避免混用：奶精＋鮮奶會產生油水分離與異味

💡 **小提醒：** 想做出「厚奶感」？可以用奶精；想做出「清爽感」？就選鮮奶！`,duration:"30分鐘",difficulty:"初級"},{id:"003_3_2",title:"3.2 奶茶基本比例與沖泡技巧",subtitle:"📏 奶與茶的黃金比例法則",content:`調一杯完美的奶茶，從來不是隨便加點奶就結束了，而是根據茶底強弱、奶的厚度、糖的甜感去微調，達到最佳口感平衡。這節教你調奶茶的黃金比例，讓每一杯都濃而不膩、順口無比！

🔹 **重點一：奶茶的基本比例**
- 常見比例為：**茶湯 : 奶精/鮮奶 = 7 : 3 或 6 : 4**
- 奶精需要先以熱水溶解再混入茶湯
- 鮮奶建議最後加入，避免高溫破壞蛋白質

🔹 **重點二：糖度的互動**
- 奶類會中和茶的澀味，若過甜會掩蓋茶香
- 建議：全糖適合奶精奶茶；鮮奶建議用半糖或微糖

🔹 **重點三：沖泡技巧細節**
- 使用 **搖杯手法** 混合茶與奶，讓口感更綿密
- 防止結塊：奶精需完全溶解，不可懸浮
- 若使用冰塊，應將奶最後加以避免油水分離

💡 **小提醒：** 每一口奶茶，都是一場比例的藝術。不是只要「加奶」，而是要「對味」。`,duration:"45分鐘",difficulty:"初級"}]},{id:"004",title:"第四章｜加料篇",description:"掌握珍珠、配料製備技巧與創意搭配應用",color:"#8b5cf6",gradientColor:"#7c3aed",icon:"ri-bubble-chart-line",sections:[{id:"004_4_1",title:"4.1 珍珠煮法（黑糖珍珠、白玉）",subtitle:"⚫ 一顆珍珠的誕生——Q彈背後的火候藝術",content:`珍珠，是大眾對手搖飲最熟悉的代表符號。煮得好，Q 彈順口；煮不好，變硬變粉或糊爛。這節課要教你如何煮出一鍋鍋完美的黑糖珍珠與白玉珍珠。

🔹 **重點一：珍珠種類比較**
- 黑糖珍珠：色深、味甜、咀嚼感強，常搭奶茶
- 白玉珍珠：淡色、無糖、Q 感強，適合果茶、奶蓋
- 有些品牌使用「蜜糖波霸」、「彩色珍珠」需特別標記保存方式

🔹 **重點二：正確煮法流程**
1️⃣ 清洗：過濾雜質，避免粉霧殘留
2️⃣ 水煮：大量沸水煮約 20–30 分鐘（每種品牌略異）
3️⃣ 悶煮：關火悶約 20 分鐘，讓中心熟透
4️⃣ 冷卻：沖冷水至不燙手，避免黏塊
5️⃣ 蜜漬：加黑糖/糖水密封醃製提升風味

🔹 **重點三：常見錯誤與矯正**
- 粉心：煮不透，時間不足
- 過軟：火太小或悶太久
- 黏鍋：攪拌不夠，需全程注意底層翻動

💡 **小提醒：** 珍珠就像觀眾最期待的主角，要出場就要完美 Q 彈、閃閃發光，絕不容錯！`,duration:"50分鐘",difficulty:"中級"},{id:"004_4_2",title:"4.2 愛玉、椰果、仙草等製備與保存",subtitle:"🍮 不是煮的，卻不能錯的——果凍型配料的正確處理法",content:`與珍珠不同，果凍型配料（愛玉、椰果、仙草）並不需要煮，但它們對切法、保存與出杯口感要求卻一點都不輕鬆。

🔹 **重點一：各配料特性簡介**
- 愛玉：滑嫩、帶檸檬香氣，易碎，適合搭配檸檬茶
- 椰果：爽脆有彈性，易吸汁，搭配果茶最受歡迎
- 仙草：口感軟滑，適合奶茶、鮮奶飲品、冬季熱飲

🔹 **重點二：正確備料與保存方式**
- 愛玉：通常使用桶裝或自製原塊 → 切丁後密封冷藏
- 椰果：需浸泡糖水稀釋 → 避免過甜影響整體口感
- 仙草：冷藏保存並避免長時間曝露，易氧化變色

🔹 **重點三：切配技巧與衛生**
- 使用乾淨、專用刀具與砧板（避免與茶類交叉）
- 切塊大小需符合吸管吸力（太小會漏、太大吸不上）
- 儲存需每日更新、貼標記時間，超過 12 小時丟棄

💡 **小提醒：** 果凍型配料就是飲品的「調情師」，適量、分明、爽口，就是它們存在的藝術！`,duration:"40分鐘",difficulty:"初級"}]},{id:"005",title:"第五章｜果飲與冰沙篇",description:"掌握水果茶調製、果泥應用與冰沙製作技巧",color:"#10b981",gradientColor:"#34d399",icon:"ri-seedling-line",sections:[{id:"005_5_1",title:"5.1 水果茶與鮮果打底飲品製作",subtitle:"🍊 一杯茶裡的果園——學會果茶魔法",content:`水果茶是將茶與果融合的藝術。這一小節將教你如何使用新鮮水果、茶湯與果糖/果泥調出黃金比例的經典果茶！

🔹 **重點一：經典水果茶組合**
- 百香果紅：紅茶 + 百香果泥 + 橙片
- 芒果綠：綠茶 + 芒果泥 + 冰角
- 柚子青：青茶 + 手打柚子果醬 + 少糖

🔹 **重點二：果茶基底調製原則**
- 使用去皮切丁水果（如蘋果、鳳梨）+ 果泥提升濃度
- 茶湯不可太澀，選用清香系（綠茶、青茶）最穩妥
- 加入少量果糖提升整體風味融合

🔹 **重點三：攪拌與出杯技巧**
- 順序：果 → 果泥 → 茶湯 → 冰塊 → 搖杯
- 搖杯建議上下 5~8 次，避免氣泡過多影響色澤
- 杯面可加果片（檸檬/柳橙）提升視覺層次

💡 **小提醒：** 果茶不只是「有果的茶」，而是「喝得出季節的味道」！`,duration:"50分鐘",difficulty:"中級"},{id:"005_5_2",title:"5.2 果泥、果醬與果糖的使用技巧",subtitle:"🥄 泥，是點綴還是靈魂？果感濃度的平衡術",content:`市售果飲多仰賴果泥與果醬來穩定風味，本節將教你如何區分這三者的功能與搭配策略，做出穩定又有層次的果飲基底。

🔹 **果泥 vs 果醬 vs 果糖**
- 果泥：新鮮水果打成糊狀，口感厚重，視覺濃郁
- 果醬：多糖煮成果粒感，甜感強、保存佳
- 果糖：單純增加甜度，不帶果味（常與果醬混用）

🔹 **搭配技巧與比例建議**
- 果泥 + 果茶：提升濃稠度與果香感
- 果醬 + 奶類飲品：口感黏稠、層次分明
- 果糖使用比例：建議每杯不超過 30 ml，避免過甜搶味

🔹 **攪拌與層次控制**
- 果泥需事先稀釋（約 1:1 水或茶湯），避免太濃無法流動
- 層次飲品先加果醬 → 加冰塊 → 再加茶湯（勿混勻）

💡 **小提醒：** 果醬是穩定、果泥是新鮮、果糖是甜感。三者搭配得宜，才是一杯穩定出品的果飲！`,duration:"45分鐘",difficulty:"中級"},{id:"005_5_3",title:"5.3 冰沙機器操作與濃稠度調整",subtitle:"🧊 攪出一杯雲霧——冰沙調配的工程術",content:`冰沙不是「碎冰」那麼簡單，而是精準比例與時間的機器戰。這節課你將學會如何操作冰沙機、調控質地與升級視覺層次！

🔹 **常見冰沙基底**
- 芒果冰沙：芒果泥 + 糖水 + 冰塊
- 草莓冰沙：果醬 + 冰塊 + 奶蓋
- 抹茶冰沙：抹茶粉 + 鮮奶 + 蜂蜜冰角

🔹 **冰沙機器操作要點**
- 先加入液體類（果泥/果醬）→ 才加冰塊
- 攪拌時間視品牌而定（一般約 25~40 秒）
- 鋸齒型刀片較適合製作含果泥冰沙

🔹 **濃稠度調整技巧**
- 太稀：再加入碎冰攪拌一次
- 太濃：可補茶湯/鮮奶稀釋
- 最佳口感為：吸管可吸、但不會直接滑入

💡 **小提醒：** 冰沙的靈魂在於「口感持久度」與「視覺厚實感」！學會控冰，你就掌握了冰沙的靈魂。`,duration:"55分鐘",difficulty:"中級"},{id:"005_5_4",title:"5.4 飲品分層與杯面美學（漸層果茶）",subtitle:"🌈 看得見的風味——飲品分層的秘密公式",content:`一杯「會拍照」的飲品不只吸睛，更能提升品牌價值。漸層果飲的關鍵在於比重差、倒法技巧與杯面設計，本節教你視覺＋味覺雙滿足！

🔹 **分層的原理：密度差**
- 糖水 > 果泥 > 茶湯 > 鮮奶
- 先倒密的、後倒輕的，才會有漂亮漸層
- 冰塊可當作分隔牆，防止混濁

🔹 **經典視覺設計飲品**
- 百香多多綠（黃-白-綠）
- 芒果鮮奶綠（黃-白-綠）
- 紫薯鮮奶茶（紫-白-褐）

🔹 **杯面設計小技巧**
- 加浮片水果（檸檬片、莓果）
- 奶霜輕舖 → 撒粉（可可/抹茶）
- 撒顆粒糖/寒天球提亮

🔹 **攝影建議：**
- 背光45度角最適合拍攝漸層
- 加冰塊可讓顏色更清澈通透

💡 **小提醒：** 一杯「能上 IG 的飲料」，不靠濾鏡，而是靠你的分層技術與美感直覺！`,duration:"40分鐘",difficulty:"高級"}]},{id:"006",title:"第六章｜出杯與點單流程篇",description:"學習POS操作、出杯管理與外送平台應用",color:"#8b5cf6",gradientColor:"#a855f7",icon:"ri-customer-service-line",sections:[{id:"006_6_1",title:"6.1 POS點餐機操作教學",subtitle:"🖥️ 點對一單，贏一局！POS操作快速上手術",content:`POS是每位飲料店員工的入門關卡。熟練操作能提高點餐效率、避免錯誤，並與出杯流程完美銜接。

🔹 **POS系統基本架構**
- 商品分類：飲品類別（茶、奶、果）＋加料項目
- 自訂選項：冰量、糖度、備註（去茶渣、加豆漿）
- 顯示欄：點餐記錄、總金額、折扣欄位

🔹 **操作流程教學**
1. 選擇飲品 → 加選配料 → 設定糖/冰 → 確認送單
2. 若為外帶／內用／外送，需正確選擇取餐類型
3. 完成後自動列印杯標與出單單據

🔹 **錯誤排除實例**
- 點錯品項：使用刪除鍵後重新操作
- 無法輸出杯標：確認印表機是否連線與標籤紙正確擺放
- 畫面卡住：登出重啟，並通報主管或技術支援

💡 **小提醒：** POS不只是「收錢機」，而是你與顧客之間第一個溝通橋樑！`,duration:"40分鐘",difficulty:"初級"},{id:"006_6_2",title:"6.2 出杯順序與杯標辨識",subtitle:"🥤 出杯不亂，客人才不翻桌！掌握杯標與順序管理",content:`正確讀懂杯標與安排出杯順序，是確保每位顧客拿到正確飲料的關鍵。這節課教你如何「有邏輯」地完成出杯流程。

🔹 **杯標資訊辨識**
- 必看資訊：飲品名、配料、糖冰、序號、備註（如「微糖不搖」）
- 識別碼：系統內編號（單號、客戶名）以利出杯核對
- 杯型：大杯/中杯/熱杯之圖示或英文字（M/L/H）

🔹 **出杯順序安排邏輯**
- 同一單 → 先全做完再一起出
- 冰品 → 優先出杯，避免融化
- 加料多的 → 視情況與加料檯同步

🔹 **實務技巧**
- 使用托盤整合一筆訂單，避免混亂
- 每張單杯標可用色筆輕標註（同筆訂單可圈數字編碼）

💡 **小提醒：** 一杯杯標就是一份信任，不出錯，就是最快的服務！`,duration:"35分鐘",difficulty:"初級"},{id:"006_6_3",title:"6.3 外送平台點單與包裝流程",subtitle:"🚚 騎士不是快遞，他是你的代言人",content:`外送平台已成為手搖飲重要通路。掌握外送訂單處理與包裝技巧，確保飲品送達時仍保持完美品質。

🔹 **外送平台操作要點**
- 平台接單：Uber Eats、foodpanda等平台設定
- 備餐時間：需考慮製作+等待騎士時間
- 訂單確認：核對品項、地址、聯絡電話

🔹 **包裝防護技巧**
- 杯蓋密封：確保封膜完整，避免外漏
- 袋裝分隔：冰飲與熱飲分袋裝置
- 防碰撞：使用杯托或填充物固定位置

🔹 **品質維護要點**
- 冰飲適度減冰：避免運送過程融化過度
- 配料調整：珍珠等配料避免久放變硬
- 時間控制：製作完成到交付不超過15分鐘

💡 **小提醒：** 外送的飲品代表你的品牌形象，包裝用心，口碑自然好！`,duration:"45分鐘",difficulty:"初級"},{id:"006_6_4",title:"6.4 高峰時段分工與出杯節奏管理",subtitle:"🎯 人多不慌，配合有術——高效團隊作戰法",content:`高峰時段的順暢出杯需要完美的團隊協作。學會分工配置與節奏控制，即使再忙碌也能維持服務品質。

🔹 **分工配置策略**
- 點餐手：專責POS操作與客戶溝通
- 調茶手：負責茶底、糖水、基本飲品
- 配料手：處理珍珠、奶蓋、複雜加料
- 出杯手：封膜、檢查、叫號出杯

🔹 **節奏管理技巧**
- 預先準備：高峰前備好茶湯、配料
- 批次製作：相同飲品一起調製
- 優先順序：冰品>熱飲>複雜飲品

🔹 **溝通協作要點**
- 明確指令：「三杯珍奶加料完成」
- 狀況回報：「紅茶不足，需要補充」
- 互相支援：忙碌時段彈性調整分工

💡 **小提醒：** 團隊合作的節奏感，決定了高峰時段的成敗！`,duration:"50分鐘",difficulty:"中級"}]},{id:"007",title:"第七章｜進階職人技巧",description:"提升服務技巧、創新研發與經營管理能力",color:"#ea580c",gradientColor:"#ffa000",icon:"ri-medal-line",sections:[{id:"007_7_1",title:"7.1 顧客應對技巧與話術訓練",subtitle:"💬 溝通是技術，服務是藝術",content:`優秀的顧客服務不只是禮貌，更需要技巧與智慧。學會讀懂顧客需求，用對話術解決問題，提升顧客滿意度。

🔹 **基本應對原則**
- 主動招呼：「歡迎光臨，需要推薦嗎？」
- 耐心解釋：詳細說明飲品特色與製作方式
- 積極建議：根據天氣、時節推薦合適飲品

🔹 **常見狀況話術**
- 猶豫不決：「這杯XX很受歡迎，口感清爽適合現在的天氣」
- 客製需求：「當然可以，我們可以調整成您喜歡的口感」
- 投訴處理：「很抱歉讓您不滿意，我們立即重新製作」

🔹 **銷售技巧應用**
- 升級建議：「大杯只要多10元，CP值更高喔」
- 搭配推薦：「配珍珠會更有層次，要不要試試？」
- 季節限定：「這是新品，錯過要等明年了」

💡 **小提醒：** 真誠的服務態度，比任何話術都更有效果！`,duration:"45分鐘",difficulty:"高級"},{id:"007_7_2",title:"7.2 飲品創新研發流程與命名技巧",subtitle:"🧪 從想法到爆款——新品開發的秘密",content:`創新是手搖飲業的生命力。學會系統性的研發流程與命名技巧，讓你的創意變成熱銷商品。

🔹 **研發流程步驟**
1. 市場觀察：分析流行趨勢與競品動向
2. 概念發想：結合季節、文化、健康元素
3. 配方測試：多次調試找出最佳比例
4. 成本評估：計算原料成本與售價定位
5. 試賣測試：小量推出收集顧客反饋

🔹 **口味創新方向**
- 健康取向：減糖、無咖啡因、植物奶
- 文化融合：中式茶+西式配料
- 季節限定：春櫻、夏芒、秋栗、冬薑

🔹 **命名技巧法則**
- 簡潔好記：2-4個字最佳
- 意境聯想：「初戀的酸甜」「午後陽光」
- 功能描述：「燃脂綠茶」「美肌果飲」

💡 **小提醒：** 好的創新來自對顧客需求的深度理解！`,duration:"60分鐘",difficulty:"高級"},{id:"007_7_3",title:"7.3 社群經營與品牌行銷",subtitle:"📱 一杯飲料的網路人生——社群行銷策略",content:`現代手搖飲經營離不開社群媒體。學會用IG、FB等平台建立品牌形象，與顧客建立情感連結。

🔹 **社群平台策略**
- Instagram：視覺系飲品照片、限時動態
- Facebook：活動公告、顧客互動、評價回覆
- LINE@：會員經營、優惠推播、客服功能

🔹 **內容創作技巧**
- 美食攝影：善用自然光、45度角、道具搭配
- 文案撰寫：生活化語調、情境描述、引導互動
- 影片製作：製作過程、員工介紹、幕後花絮

🔹 **行銷活動規劃**
- 節慶促銷：情人節、母親節、聖誕節
- 打卡活動：「分享照片送飲品」
- 會員制度：集點優惠、生日禮、VIP專屬

💡 **小提醒：** 社群經營要真實自然，過度商業化會適得其反！`,duration:"50分鐘",difficulty:"高級"},{id:"007_7_4",title:"7.4 營業數據分析與進貨規劃基礎",subtitle:"📊 數字會說話——用數據驅動經營決策",content:`成功的手搖飲店需要數據支撐。學會分析銷售數據、控制成本，做出明智的經營決策。

🔹 **關鍵數據指標**
- 營業額：日/週/月銷售總額分析
- 熱銷品項：Top 10商品銷量排行
- 客單價：平均每位顧客消費金額
- 成本率：原料成本佔營業額比例

🔹 **進貨規劃原則**
- 需求預測：根據歷史數據預估用量
- 安全庫存：避免缺貨但不過度囤積
- 季節調整：夏天多備冰品材料，冬天增加熱飲

🔹 **數據分析應用**
- 調整菜單：淘汰滯銷品項，主推熱銷商品
- 人力配置：根據忙碌時段安排班表
- 促銷策略：針對銷量下滑商品設計優惠

💡 **小提醒：** 數據是工具，但直覺和經驗同樣重要！`,duration:"55分鐘",difficulty:"高級"}]}]},x2e={chapter1:{title:"第一章｜飲料基礎認識與作業環境",sections:[{id:"001_1_1",title:"1.1 門市設備與器具認識",quiz:{question:"在門市設備中，封膜機使用時最需要注意的安全事項是什麼？",type:"single_choice",options:["電源插座位置","高溫封口時的手指安全","機器擺放高度","封膜材料品質"],correctAnswer:1,explanation:"封膜機在高溫封口過程中容易燙傷手指，這是操作時最需要注意的安全事項。課程中明確提到「封膜機：高溫封口，需注意加熱溫度與手指安全」。"}},{id:"001_1_2",title:"1.2 飲料製作流程總覽",quiz:{question:"飲料製作的正確五大步驟順序是什麼？",type:"ordering",options:["封膜/加蓋→擺上出杯台","取杯貼標","倒茶/奶類（根據品項）","加配料（珍珠、椰果、奶蓋等）","加冰糖（依客製）"],correctOrder:[1,3,4,2,0],explanation:"正確順序為：1.取杯貼標 → 2.加配料 → 3.加冰糖 → 4.倒茶/奶類 → 5.封膜/加蓋→擺上出杯台。這個流程確保飲品品質與製作效率。"}},{id:"001_1_3",title:"1.3 基本衛生與清潔規範",quiz:{question:"根據衛生規範，配料與茶湯的保存要求是？",type:"multiple_choice",options:["配料與茶湯皆須貼上開封與製作時間","冷藏區保持0-7°C","未使用完食材可以混批回桶再用","乾濕分離保存"],correctAnswers:[0,1,3],explanation:"配料與茶湯必須貼上時間標籤、冷藏保持0-7°C、乾濕分離。但絕對不可將未使用完的食材混批回桶，這違反食安規範。"}},{id:"001_1_4",title:"1.4 冰塊、糖度與客製化規則介紹",quiz:{question:"半糖的糖度比例是多少？",type:"single_choice",options:["30%","50%","70%","100%"],correctAnswer:1,explanation:"半糖是50%的糖度。課程中明確說明糖度邏輯：全糖(100%)、少糖(70%)、半糖(50%)、微糖(30%)、無糖(0%)。"}}]},chapter2:{title:"第二章｜煮茶篇",sections:[{id:"002_2_1",title:"2.1 綠茶煮法（烏龍、四季春）",quiz:{question:"綠茶沖泡的建議水溫範圍是？",type:"single_choice",options:["95-100°C","85-90°C","75-80°C","100°C以上"],correctAnswer:1,explanation:"綠茶建議水溫為85-90°C。太熱的水會破壞綠茶的香氣，課程中提到「建議水溫約85～90°C（太熱易失香）」。"}},{id:"002_2_2",title:"2.2 紅茶煮法（阿薩姆、錫蘭）",quiz:{question:"紅茶悶煮完畢後的正確處理方式是？",type:"single_choice",options:["繼續保溫","快速過濾並冰鎮","延長悶煮時間","加入更多茶葉"],correctAnswer:1,explanation:"紅茶悶煮完畢需快速過濾並冰鎮，否則會釋出過多單寧酸導致澀味。課程強調「悶煮完畢需快速過濾並冰鎮，否則會釋出過多單寧酸導致澀味」。"}},{id:"002_2_3",title:"2.3 烏龍茶煮法（鐵觀音、包種）",quiz:{question:"鐵觀音和包種茶的沖泡差異是？",type:"true_false",statement:"鐵觀音適合用95°C水溫悶泡5-6分鐘，包種茶適合用85-90°C水溫悶泡3-4分鐘",correctAnswer:!0,explanation:"正確。鐵觀音屬重焙火茶需要高溫長時間，包種茶屬輕發酵茶適合較低溫短時間。課程中明確說明這兩種茶的不同沖泡策略。"}},{id:"002_2_4",title:"2.4 茶湯保存與每日備茶流程",quiz:{question:"茶湯保存的時間上限是多少小時？",type:"single_choice",options:["4小時","6小時","8小時","12小時"],correctAnswer:2,explanation:"茶湯保存時間上限為8小時，不可延用。課程中明確提到「保存時間上限為8小時，不可延用」，這是食品安全的重要規範。"}}]},chapter3:{title:"第三章｜調奶篇",sections:[{id:"003_3_1",title:"3.1 奶精與鮮奶差異",quiz:{question:"奶精和鮮奶在使用上的主要差異是？",type:"multiple_choice",options:["奶精保存久、穩定性高","鮮奶味道清新、自然香甜","奶精適合奶茶系列","兩者可以混用增加風味"],correctAnswers:[0,1,2],explanation:"奶精具有保存久、穩定性高的特點，適合奶茶系列；鮮奶味道清新自然，適合鮮奶茶。但課程明確提到「請避免混用：奶精＋鮮奶會產生油水分離與異味」。"}},{id:"003_3_2",title:"3.2 奶茶基本比例與沖泡技巧",quiz:{question:"奶茶的基本比例中，茶湯與奶精/鮮奶的常見比例是？",type:"single_choice",options:["5:5","8:2","7:3或6:4","9:1"],correctAnswer:2,explanation:"奶茶的基本比例為茶湯:奶精/鮮奶=7:3或6:4。這個比例可以確保茶香與奶香的平衡，課程中明確說明這是常見的黃金比例。"}},{id:"003_3_3",title:"3.3 奶類搭配範例",quiz:{question:"紅茶拿鐵的製作中，建議使用什麼比例的鮮奶？",type:"single_choice",options:["2/10","4/10","6/10","8/10"],correctAnswer:1,explanation:"紅茶拿鐵建議使用4/10比例的全脂鮮奶配微糖，這樣可以達到濃厚茶香配鮮奶順口的效果。"}},{id:"003_3_4",title:"3.4 奶泡製作與應用",quiz:{question:"奶蓋和奶霜的主要差異是什麼？",type:"true_false",statement:"奶蓋是鹹奶油打發口感厚重，奶霜是甜感較高口感輕盈",correctAnswer:!0,explanation:"正確。奶蓋使用鹹奶油打發，需加入奶油起司和海鹽，口感厚重；奶霜甜感較高，常加入鮮奶油、鮮奶和糖，口感輕盈。"}}]},chapter4:{title:"第四章｜加料篇",sections:[{id:"004_4_1",title:"4.1 珍珠煮法（黑糖珍珠、白玉）",quiz:{question:"珍珠煮法的正確流程順序是？",type:"ordering",options:["蜜漬：加黑糖/糖水密封醃製","清洗：過濾雜質","悶煮：關火悶約20分鐘","水煮：大量沸水煮約20-30分鐘","冷卻：沖冷水至不燙手"],correctOrder:[1,3,2,4,0],explanation:"正確順序：清洗→水煮→悶煮→冷卻→蜜漬。這個流程確保珍珠Q彈不粉心，並具有良好的風味。"}},{id:"004_4_2",title:"4.2 愛玉、椰果、仙草等製備與保存",quiz:{question:"果凍型配料的保存時間限制是？",type:"single_choice",options:["6小時","8小時","12小時","24小時"],correctAnswer:2,explanation:"果凍型配料需每日更新、貼標記時間，超過12小時需丟棄。這比茶湯的8小時稍長，但仍需嚴格控制以確保食品安全。"}},{id:"004_4_3",title:"4.3 加料組合技巧",quiz:{question:"配料組合設計中需要避免的視覺搭配是？",type:"single_choice",options:["珍珠+仙草","椰果+奶霜","黑糖珍珠+烏龍茶","白玉+愛玉"],correctAnswer:2,explanation:"應該避免「深+深」組合，如黑糖珍珠+烏龍茶，這會讓視覺效果混濁不清。課程中特別提到要避免這種配色組合。"}},{id:"004_4_4",title:"4.4 加料搭配實務與創意應用",quiz:{question:"經典不敗的加料組合是？",type:"single_choice",options:["愛玉+檸檬綠","椰果+蜂蜜紅","黑糖珍珠+奶茶","奶霜+小芋圓+鐵觀音"],correctAnswer:2,explanation:"黑糖珍珠+奶茶是經典不敗組合。課程中明確將其列為「不敗經典」，這個組合在手搖飲市場中最受歡迎且歷久不衰。"}}]}},y2e=b("div",{target:"eks7l5j5"})({name:"138tmvk",styles:"max-width:1200px;margin:50px auto;padding:40px;background:white;border-radius:20px;box-shadow:0 10px 30px rgba(0, 0, 0, 0.1);font-family:'Noto Sans TC',sans-serif"}),b2e=b("h1",{target:"eks7l5j4"})({name:"17qgt1e",styles:"color:#1f2937;margin-bottom:30px;font-size:32px;display:flex;align-items:center;justify-content:center;gap:15px;i{color:#3b82f6;font-size:36px;}"}),w2e=b("div",{target:"eks7l5j3"})({name:"in70fl",styles:"display:grid;grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));gap:20px;margin:30px 0"}),xg=b("div",{target:"eks7l5j2"})("background:linear-gradient(135deg, ",e=>e.bgColor||"#f3f4f6"," 0%, ",e=>e.bgColor2||"#e5e7eb"," 100%);border-radius:16px;padding:25px;box-shadow:0 4px 15px rgba(0, 0, 0, 0.1);border:2px solid ",e=>e.borderColor||"#d1d5db",";h3{color:",e=>e.textColor||"#1f2937",";margin-bottom:15px;font-size:20px;display:flex;align-items:center;gap:10px;}p{color:",e=>e.textColor||"#374151",";margin-bottom:20px;font-size:14px;line-height:1.6;}"),od=b("button",{target:"eks7l5j1"})("background:",e=>e.danger?"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)":e.primary?"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)":"linear-gradient(135deg, #10b981 0%, #059669 100%)",";color:white;border:none;border-radius:10px;padding:12px 25px;font-size:14px;font-weight:600;cursor:pointer;transition:all 0.3s ease;width:100%;&:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(0, 0, 0, 0.2);}&:disabled{background:#9ca3af;cursor:not-allowed;transform:none;box-shadow:none;}"),S2e=b("div",{target:"eks7l5j0"})("background:",e=>e.success?"#dcfce7":e.error?"#fef2f2":"#f0f9ff",";border:1px solid ",e=>e.success?"#bbf7d0":e.error?"#fecaca":"#bae6fd",";color:",e=>e.success?"#166534":e.error?"#991b1b":"#0c4a6e",";padding:20px;border-radius:12px;margin:20px 0;white-space:pre-wrap;max-height:400px;overflow-y:auto;font-size:14px;line-height:1.5;"),C2e=()=>{const[e,t]=D.useState(!1),[n,r]=D.useState({message:"",type:""}),i=qt();return y(y2e,{children:[y(b2e,{children:[u("i",{className:"ri-book-open-line"}),"新課程系統管理中心"]}),y(w2e,{children:[y(xg,{bgColor:"#ddd6fe",bgColor2:"#c4b5fd",borderColor:"#8b5cf6",textColor:"#1f2937",children:[y("h3",{children:[u("i",{className:"ri-delete-bin-line"}),"清除舊課程內容"]}),y("p",{children:["清除現有的課程內容資料：",u("br",{}),"• section_contents 集合中的所有小節內容",u("br",{}),"• 保留課程基本架構與用戶資料",u("br",{}),"• 準備上傳新的詳細課程內容"]}),u(od,{danger:!0,onClick:async()=>{if(window.confirm("⚠️ 確定要清除所有舊課程內容嗎？此操作無法恢復！")){t(!0),r({message:"開始清除舊課程內容...",type:"info"});try{const c=["section_contents"];let d=0;for(const p of c){const f=await be(se(U,p)),h=f.docs.map(g=>si(g.ref));await Promise.all(h),d+=f.docs.length,r(g=>({...g,message:g.message+`
✅ 已清除 ${p}: ${f.docs.length} 筆資料`}))}r({message:`🎉 清除完成！

📊 清除統計：
• 總計清除：${d} 筆課程內容資料
• 清除集合：section_contents
• 課程基本資料保留

現在可以上傳新的課程內容了！`,type:"success"})}catch(c){console.error("清除失敗:",c),r({message:`❌ 清除失敗：${c.message}

請檢查：
• 網路連線是否正常
• Firebase 權限是否足夠`,type:"error"})}finally{t(!1)}}},disabled:e,children:"⚠️ 清除舊內容"})]}),y(xg,{bgColor:"#bbf7d0",bgColor2:"#86efac",borderColor:"#22c55e",textColor:"#1f2937",children:[y("h3",{children:[u("i",{className:"ri-upload-cloud-line"}),"上傳新課程內容"]}),y("p",{children:["根據課程.md文件上傳完整的七章課程：",u("br",{}),"• 第一章：飲料基礎認識與作業環境",u("br",{}),"• 第二章：煮茶篇",u("br",{}),"• 第三章：調奶篇",u("br",{}),"• 第四章：加料篇",u("br",{}),"• 第五章：果飲與冰沙篇",u("br",{}),"• 第六章：出杯與點單流程篇",u("br",{}),"• 第七章：進階職人技巧"]}),u(od,{onClick:async()=>{t(!0),r({message:"開始上傳新課程內容...",type:"info"});try{let c=0,d=0;for(const p of vg.chapters){const f={id:p.id,title:p.title,description:p.description,color:p.color,gradientColor:p.gradientColor,icon:p.icon,sections:p.sections.length,createdAt:At(),isPublished:!0};await zt(Ie(U,"courses",p.id),f),c++;for(const h of p.sections){const g={...h,courseId:p.id,chapterTitle:p.title,createdAt:At(),isPublished:!0};await zt(Ie(U,"section_contents",h.id),g),d++}r(h=>({...h,message:h.message+`
✅ 已上傳：${p.title} (${p.sections.length}小節)`}))}r({message:`🎉 新課程上傳完成！

📊 上傳統計：
• 課程章節：${c} 章
• 課程小節：${d} 節
• 課程內容：基於課程.md完整設計
• UI配色：採用Dashboard風格

學員現在可以開始學習新的課程內容了！`,type:"success"})}catch(c){console.error("上傳失敗:",c),r({message:`❌ 上傳失敗：${c.message}

請檢查：
• 網路連線是否正常
• Firebase 權限是否足夠
• Firestore 安全規則是否正確`,type:"error"})}finally{t(!1)}},disabled:e,children:"📚 上傳新課程"})]}),y(xg,{bgColor:"#fde68a",bgColor2:"#fbbf24",borderColor:"#f59e0b",textColor:"#1f2937",children:[y("h3",{children:[u("i",{className:"ri-question-line"}),"生成小考題目"]}),y("p",{children:["為每個小節生成重要的測驗題目：",u("br",{}),"• 基於課程內容的關鍵知識點",u("br",{}),"• 包含單選、多選、判斷題",u("br",{}),"• 提供詳細的答案解析"]}),u(od,{primary:!0,onClick:async()=>{t(!0),r({message:"開始生成課程測驗題目...",type:"info"});try{let c=0;for(const[d,p]of Object.entries(x2e)){for(const f of p.sections){const h={sectionId:f.id,sectionTitle:f.title,chapterTitle:p.title,quiz:f.quiz,createdAt:At(),isActive:!0};await zt(Ie(U,"section_quizzes",f.id),h),c++}r(f=>({...f,message:f.message+`
✅ 已生成：${p.title} 測驗題目`}))}r({message:`🎉 測驗題目生成完成！

📊 生成統計：
• 測驗題目：${c} 題
• 題型包含：單選、多選、判斷、排序
• 每題都有詳細解析
• 基於課程.md重點內容設計

學員現在可以進行課程測驗了！`,type:"success"})}catch(c){console.error("生成失敗:",c),r({message:`❌ 生成失敗：${c.message}

請檢查：
• 網路連線是否正常
• Firebase 權限是否足夠`,type:"error"})}finally{t(!1)}},disabled:e,children:"🎯 生成測驗題目"})]}),y(xg,{bgColor:"#fed7d7",bgColor2:"#fc8181",borderColor:"#f56565",textColor:"#1f2937",children:[y("h3",{children:[u("i",{className:"ri-eye-line"}),"預覽課程結構"]}),y("p",{children:["查看即將上傳的課程結構：",u("br",{}),"• 7章完整課程培訓體系",u("br",{}),"• 每個小節包含完整內容與學習目標",u("br",{}),"• 基於dashboard配色的UI設計"]}),u(od,{onClick:()=>{const c=vg.chapters.reduce((d,p)=>d+p.sections.length,0);r({message:`📚 新課程結構預覽

${vg.chapters.map(d=>`${d.title}
${d.sections.map(p=>`  └ ${p.title} (${p.duration}, ${p.difficulty})`).join(`
`)}`).join(`

`)}

📊 統計資訊：
• 總章節：${vg.chapters.length} 章
• 總小節：${c} 節
• 配色方案：基於Dashboard設計
• 內容來源：課程.md文件`,type:"info"})},disabled:e,children:"👀 預覽結構"})]})]}),n.message&&u(S2e,{success:n.type==="success",error:n.type==="error",children:n.message}),u("div",{style:{textAlign:"center",marginTop:"30px"},children:u(od,{onClick:()=>i("/update-database"),style:{width:"auto",padding:"12px 30px"},children:"← 返回資料庫管理"})})]})},_2e=b("div",{target:"e1orq7bk7"})({name:"1xpt3qf",styles:"min-height:100vh;padding:20px;background:#f5f5f5;font-family:'Noto Sans TC',sans-serif"}),k2e=b("div",{target:"e1orq7bk6"})({name:"f6l4px",styles:"max-width:1200px;margin:0 auto;background:white;border-radius:12px;padding:30px;box-shadow:0 4px 12px rgba(0, 0, 0, 0.1)"}),E2e=b("h1",{target:"e1orq7bk5"})({name:"1gfxrid",styles:"color:#333;margin-bottom:30px;text-align:center"}),T2e=b("div",{target:"e1orq7bk4"})({name:"cl5lqu",styles:"background:#1e1e1e;color:#00ff00;padding:20px;border-radius:8px;font-family:'Courier New',monospace;font-size:14px;line-height:1.5;max-height:500px;overflow-y:auto;margin:20px 0;white-space:pre-wrap"}),Bs=b("button",{target:"e1orq7bk3"})({name:"2hy1cd",styles:"background:linear-gradient(135deg, #7C3AED, #3B82F6);color:white;border:none;padding:12px 24px;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;margin:10px;transition:all 0.3s ease;&:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(124, 58, 237, 0.3);}&:disabled{background:#ccc;cursor:not-allowed;transform:none;box-shadow:none;}"}),V1=b("div",{target:"e1orq7bk2"})({name:"40ouoi",styles:"margin:20px 0;padding:20px;border:1px solid #e0e0e0;border-radius:8px"}),j1=b("h3",{target:"e1orq7bk1"})({name:"12esnym",styles:"color:#7C3AED;margin:0 0 15px 0"}),ad=b("div",{target:"e1orq7bk0"})("padding:15px;border-radius:8px;margin:15px 0;background:",e=>{switch(e.type){case"success":return"#d4edda";case"error":return"#f8d7da";case"warning":return"#fff3cd";default:return"#d1ecf1"}},";color:",e=>{switch(e.type){case"success":return"#155724";case"error":return"#721c24";case"warning":return"#856404";default:return"#0c5460"}},";border:1px solid ",e=>{switch(e.type){case"success":return"#c3e6cb";case"error":return"#f5c6cb";case"warning":return"#ffeaa7";default:return"#bee5eb"}},";"),I2e=()=>{const[e,t]=D.useState(""),[n,r]=D.useState(!1),[i,o]=D.useState({}),a=(m,v="info")=>{const w=new Date().toLocaleTimeString(),S={info:"📝",success:"✅",error:"❌",warning:"⚠️"}[v]||"📝";t(C=>C+`[${w}] ${S} ${m}
`)},s=()=>{t(""),o({})},l=async()=>{r(!0),a("🚀 開始測試 Firebase 連接...");try{a("📡 測試 Firestore 連接...");const m=tt(se(U,"test"));await be(m),a("✅ Firestore 連接正常","success"),o(v=>({...v,firebaseConnection:"success"}))}catch(m){a(`❌ Firebase 連接失敗: ${m.message}`,"error"),a(`錯誤代碼: ${m.code}`,"error"),o(v=>({...v,firebaseConnection:"error"}))}r(!1)},c=async()=>{r(!0),a("🚀 開始測試 courses 集合...");try{a("📚 查詢 courses 集合...");const m=await be(tt(se(U,"courses"),Ot("id","asc")));a(`📊 courses 集合查詢結果: ${m.size} 筆記錄`,"success"),m.size>0?(a("📝 前 3 筆課程資料:"),m.docs.slice(0,3).forEach((v,w)=>{const S=v.data();a(`  ${w+1}. ID: ${v.id}`),a(`     標題: ${S.title||"未命名"}`),a(`     描述: ${S.description||"無描述"}`),a(`     小節數: ${S.sections?S.sections.length:0}`)}),o(v=>({...v,coursesCollection:"success"}))):(a("⚠️ courses 集合為空","warning"),o(v=>({...v,coursesCollection:"empty"})))}catch(m){a(`❌ 查詢 courses 集合失敗: ${m.message}`,"error"),o(v=>({...v,coursesCollection:"error"}))}r(!1)},d=async()=>{r(!0),a("🚀 開始測試 course_summaries 集合...");try{a("📚 查詢 course_summaries 集合...");const m=await be(tt(se(U,"course_summaries"),Ot("numeric_id","asc")));a(`📊 course_summaries 集合查詢結果: ${m.size} 筆記錄`,"success"),m.size>0?(a("📝 前 3 筆概覽資料:"),m.docs.slice(0,3).forEach((v,w)=>{const S=v.data();a(`  ${w+1}. ID: ${v.id}`),a(`     標題: ${S.title||"未命名"}`),a(`     類別: ${S.category||"無類別"}`),a(`     數字ID: ${S.numeric_id||"無"}`)}),o(v=>({...v,courseSummariesCollection:"success"}))):(a("⚠️ course_summaries 集合為空","warning"),o(v=>({...v,courseSummariesCollection:"empty"})))}catch(m){a(`❌ 查詢 course_summaries 集合失敗: ${m.message}`,"error"),o(v=>({...v,courseSummariesCollection:"error"}))}r(!1)},p=async()=>{r(!0),a("🚀 開始測試 section_contents 集合...");try{a("📚 查詢 section_contents 集合...");const m=await be(se(U,"section_contents"));if(a(`📊 section_contents 集合查詢結果: ${m.size} 筆記錄`,"success"),m.size>0){a("📝 詳細文檔ID列表:"),m.docs.forEach((w,S)=>{const C=w.data();if(a(`  ${S+1}. 文檔ID: ${w.id}`),a(`     標題: ${C.title||"未命名"}`),C.courseId&&C.chapterIndex!==void 0&&C.sectionIndex!==void 0){a(`     組件: courseId=${C.courseId}, chapterIndex=${C.chapterIndex}, sectionIndex=${C.sectionIndex}`);const A=`${C.courseId}_${C.chapterIndex}_${C.sectionIndex}`;a(`     構建ID: ${A}`),a(`     ID匹配: ${A===w.id?"✅ 匹配":"❌ 不匹配"}`)}else a("     ⚠️ 缺少ID組件資料");C.content?typeof C.content=="string"?a(`     內容類型: 字串 (${C.content.length} 字元)`):typeof C.content=="object"&&(a(`     內容類型: 物件 (${Object.keys(C.content).join(", ")})`),C.content.text&&a(`     文字內容: ${typeof C.content.text} (${C.content.text.length} 字元)`)):a("     ⚠️ 沒有 content 屬性"),a("")}),a("🔍 檢查特定ID: 001_0_0");const v=m.docs.find(w=>w.id==="001_0_0");if(v){const w=v.data();a("✅ 找到 001_0_0:","success"),a(`   標題: ${w.title}`),a(`   內容存在: ${w.content?"是":"否"}`)}else a("❌ 未找到 001_0_0","error"),a("🔍 檢查可能的相似ID:"),m.docs.forEach(w=>{w.id.includes("001")&&a(`   相似ID: ${w.id} - ${w.data().title||"未命名"}`)});o(w=>({...w,sectionContentsCollection:"success"}))}else a("⚠️ section_contents 集合為空","warning"),o(v=>({...v,sectionContentsCollection:"empty"}))}catch(m){a(`❌ 查詢 section_contents 集合失敗: ${m.message}`,"error"),o(v=>({...v,sectionContentsCollection:"error"}))}r(!1)},f=async()=>{r(!0),a("🔍 開始詳細檢查課程資料結構...");try{a("📚 查詢 course_summaries 集合進行詳細結構分析...");const m=await be(tt(se(U,"course_summaries"),Ot("numeric_id","asc")));if(a(`📊 course_summaries 集合找到 ${m.size} 筆課程記錄`,"success"),m.size>0)a("🔍 詳細分析每個課程的小節結構:"),m.docs.forEach((v,w)=>{const S=v.data();a(`
📖 課程 ${w+1}: ${S.title||"未命名"}`),a(`   - 文檔ID: ${v.id}`),a(`   - 數據鍵: ${Object.keys(S).join(", ")}`),S.chapters?(a(`   - chapters 類型: ${typeof S.chapters}`),a(`   - chapters 是否為數組: ${Array.isArray(S.chapters)}`),Array.isArray(S.chapters)?(a(`   - chapters 數量: ${S.chapters.length}`),S.chapters.forEach((C,A)=>{a(`     第 ${A+1} 章: ${C.title||"未命名"}`),C.subsections?(a(`       - subsections 類型: ${typeof C.subsections}`),a(`       - subsections 是否為數組: ${Array.isArray(C.subsections)}`),Array.isArray(C.subsections)?(a(`       - 小節數量: ${C.subsections.length}`),C.subsections.slice(0,3).forEach((_,I)=>{a(`         ${I+1}. ${_.title||"未命名"} (ID: ${_.id||"無"})`)})):a(`       - subsections 內容: ${JSON.stringify(C.subsections).substring(0,100)}...`)):a("       - ⚠️ 沒有 subsections 屬性")})):a(`   - chapters 內容: ${JSON.stringify(S.chapters).substring(0,200)}...`)):a("   - ⚠️ 沒有 chapters 屬性"),S.subsections&&a(`   - 直接的 subsections 屬性: ${Array.isArray(S.subsections)?`${S.subsections.length} 個`:"非數組"}`)}),o(v=>({...v,courseStructureInspection:"success"}));else{a("⚠️ course_summaries 集合為空，檢查 courses 集合...","warning");const v=await be(tt(se(U,"courses"),Ot("id","asc")));a(`📊 courses 集合找到 ${v.size} 筆記錄`),v.size>0&&(a("🔍 檢查 courses 集合的資料結構:"),v.docs.slice(0,3).forEach((w,S)=>{const C=w.data();a(`
📖 courses 課程 ${S+1}: ${C.title||"未命名"}`),a(`   - 文檔ID: ${w.id}`),a(`   - 數據鍵: ${Object.keys(C).join(", ")}`),C.sections&&a(`   - sections 類型: ${typeof C.sections}, 是否為數組: ${Array.isArray(C.sections)}`),C.chapters&&a(`   - chapters 類型: ${typeof C.chapters}, 是否為數組: ${Array.isArray(C.chapters)}`)})),o(w=>({...w,courseStructureInspection:"empty"}))}}catch(m){a(`❌ 檢查課程結構失敗: ${m.message}`,"error"),o(v=>({...v,courseStructureInspection:"error"}))}r(!1)},h=async()=>{s(),a("🔍 開始執行完整診斷..."),await l(),await c(),await d(),await p(),await f(),a("🎉 診斷完成！","success")},g=m=>{switch(m){case"success":return"success";case"error":return"error";case"empty":return"warning";default:return"info"}};return u(_2e,{children:y(k2e,{children:[u(E2e,{children:"🔧 課程資料庫診斷工具"}),y(V1,{children:[u(j1,{children:"診斷狀態"}),Object.keys(i).length>0&&y(Ne,{children:[y(ad,{type:g(i.firebaseConnection),children:["Firebase 連接: ",i.firebaseConnection==="success"?"正常":"異常"]}),y(ad,{type:g(i.coursesCollection),children:["courses 集合: ",i.coursesCollection==="success"?"有資料":i.coursesCollection==="empty"?"空集合":"查詢失敗"]}),y(ad,{type:g(i.courseSummariesCollection),children:["course_summaries 集合: ",i.courseSummariesCollection==="success"?"有資料":i.courseSummariesCollection==="empty"?"空集合":"查詢失敗"]}),y(ad,{type:g(i.sectionContentsCollection),children:["section_contents 集合: ",i.sectionContentsCollection==="success"?"有資料":i.sectionContentsCollection==="empty"?"空集合":"查詢失敗"]}),y(ad,{type:g(i.courseStructureInspection),children:["course_structure 檢查: ",i.courseStructureInspection==="success"?"成功":i.courseStructureInspection==="empty"?"空集合":"檢查失敗"]})]})]}),y(V1,{children:[u(j1,{children:"診斷工具"}),u(Bs,{onClick:h,disabled:n,children:n?"診斷中...":"🔍 執行完整診斷"}),u(Bs,{onClick:l,disabled:n,children:"📡 測試 Firebase 連接"}),u(Bs,{onClick:c,disabled:n,children:"📚 測試 courses 集合"}),u(Bs,{onClick:d,disabled:n,children:"📝 測試 course_summaries 集合"}),u(Bs,{onClick:p,disabled:n,children:"📄 測試 section_contents 集合"}),u(Bs,{onClick:f,disabled:n,children:"🔍 詳細檢查課程資料結構"}),u(Bs,{onClick:s,children:"🗑️ 清除日誌"})]}),y(V1,{children:[u(j1,{children:"診斷日誌"}),u(T2e,{children:e||"點擊上方按鈕開始診斷..."})]})]})})},A2e=b("div",{target:"e1ueqz464"})({name:"6v9f6q",styles:"padding:20px;max-width:800px;margin:0 auto;font-family:'Noto Sans TC',sans-serif"}),P2e=b("h1",{target:"e1ueqz463"})({name:"5x8jip",styles:"color:#2d3748;margin-bottom:20px"}),$6=b("button",{target:"e1ueqz462"})({name:"4js0ha",styles:"background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);color:white;border:none;border-radius:8px;padding:12px 24px;font-size:16px;font-weight:600;cursor:pointer;margin:10px;&:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0, 0, 0, 0.15);}&:disabled{opacity:0.6;cursor:not-allowed;}"}),D2e=b("div",{target:"e1ueqz461"})({name:"1isovd6",styles:"background:#f7fafc;border:1px solid #e2e8f0;border-radius:8px;padding:20px;margin-top:20px;max-height:400px;overflow-y:auto"}),R2e=b("div",{target:"e1ueqz460"})({name:"gyxmv",styles:"margin:5px 0;padding:5px;border-radius:4px;font-size:14px;&.success{background:#f0fff4;color:#22543d;}&.error{background:#fed7d7;color:#c53030;}&.info{background:#ebf8ff;color:#2a69ac;}"}),N2e=()=>{const[e,t]=D.useState([]),[n,r]=D.useState(!1),i=(l,c="info")=>{t(d=>[...d,{message:l,type:c,timestamp:new Date().toLocaleTimeString()}])},o=()=>({"001_1_1":{title:"門市設備與器具認識",type:"section",courseId:"001",chapterIndex:1,sectionIndex:1,questions:[{question:"哪一項設備主要用來快速加熱水、煮茶使用？",options:["冷水機","熱水爐","冰沙機","封膜機"],correctAnswer:1,explanation:"熱水爐是煮茶與沖泡飲品不可或缺的熱源設備。"},{question:"以下哪一項設備主要用於密封飲料杯？",options:["奶泡機","攪拌機","封膜機","POS 系統"],correctAnswer:2,explanation:""},{question:"製作冰沙或冰果茶時，最常使用哪一類器具？",options:["打蛋器","冰沙機","茶桶","洗碗槽"],correctAnswer:1,explanation:""},{question:"哪一項不是常見的門市製作區工具？",options:["封膜機","冰箱","投影機","奶精罐"],correctAnswer:2,explanation:""},{question:"飲料店中，下列哪一項為「可移動式配料容器」？",options:["大冰箱","茶桶","配料盒","POS 機"],correctAnswer:2,explanation:""}]},"001_1_2":{title:"飲料製作流程總覽（下單 → 出杯）",type:"section",courseId:"001",chapterIndex:1,sectionIndex:2,questions:[{question:"製作一杯飲料的流程順序為？",options:["製作 → 出杯 → 點單","點單 → 製作 → 出杯","出杯 → 配料 → 點單","點單 → 加料 → 出杯"],correctAnswer:1,explanation:""},{question:"以下哪一個動作「不」包含在製作流程中？",options:["糖度調整","攪拌飲品","收銀點餐","加料搭配"],correctAnswer:2,explanation:"收銀點餐屬於點單流程"},{question:"出杯流程中，封膜與貼杯標屬於哪一階段？",options:["點單前","製作中","出杯中","原料備料時"],correctAnswer:2,explanation:""},{question:"點單完畢後，第一個製作的步驟通常是？",options:["出杯","清潔桌面","準備原料與加料","設定 POS 系統"],correctAnswer:2,explanation:""},{question:"哪一項是出杯階段的重要任務？",options:["調整價格","貼杯標與確認品項","計算庫存","清洗茶桶"],correctAnswer:1,explanation:""}]},"001_1_3":{title:"基本衛生與清潔規範",type:"section",courseId:"001",chapterIndex:1,sectionIndex:3,questions:[{question:"製作飲品前，第一件應做的衛生動作是？",options:["燙手器具","清理地板","洗手","擦拭杯子"],correctAnswer:2,explanation:""},{question:"哪一項是符合衛生規定的穿著？",options:["涼鞋＋短褲","工作服＋髮網＋口罩","個人便服","拖鞋＋毛巾"],correctAnswer:1,explanation:""},{question:"下列哪一項清潔行為應該「每日至少一次」？",options:["洗刷外送包裝袋","拖地","刷牆壁","清除空瓶堆疊"],correctAnswer:1,explanation:""},{question:"遇到原料掉落地面，正確作法為？",options:["撿起繼續使用","擦乾後放回桶內","丟棄並清理該區域","請他人撿起"],correctAnswer:2,explanation:""},{question:"清潔區與製作區之間的最大原則為？",options:["輪流使用","可以合併空間","明確分區，工具不得混用","使用相同抹布擦拭"],correctAnswer:2,explanation:""}]},"001_1_4":{title:"冰塊、糖度與客製化規則介紹",type:"section",courseId:"001",chapterIndex:1,sectionIndex:4,questions:[{question:"顧客點「微糖」飲料時，糖度約為？",options:["100%","70%","30%","10%"],correctAnswer:2,explanation:""},{question:"若顧客說「我要無糖少冰」，應如何處理？",options:["糖度30%，冰塊50%","不加糖，加冰","不加糖、冰塊減半","正常糖，少冰"],correctAnswer:2,explanation:""},{question:"哪一個客製化選項通常不可變更？",options:["杯型","糖度","冰塊","加料"],correctAnswer:0,explanation:"多為固定設計"},{question:"顧客點餐時說「去冰」，是什麼意思？",options:["使用熱飲杯","冰塊加至七分","完全不加冰塊","冰塊增加"],correctAnswer:2,explanation:""},{question:"客製化搭配錯誤的是哪一項？",options:["少糖配珍珠","無糖配奶蓋","正常冰配冰沙","無糖配仙草凍"],correctAnswer:2,explanation:"冰沙無法調整冰量"}]},"001_chapter":{title:"第一章｜飲料基礎認識與作業環境 - 章節大考",type:"chapter",courseId:"001",chapterIndex:1,questions:[{question:"在飲料門市中，哪一項設備主要功能為「將飲品密封防止溢出」？",options:["POS 機","冰箱","封膜機","打蛋器"],correctAnswer:2,explanation:"封膜機是飲品出杯前用來封口的設備，防止飲品灑出。"},{question:"請問以下哪一項不屬於飲料製作流程的一環？",options:["確認點單內容","備料與加料","店面裝潢設計","封膜出杯"],correctAnswer:2,explanation:""},{question:"關於製作飲品的衛生規範，下列何者正確？",options:["戴手套即可不用洗手","使用同一塊抹布清潔所有區域","製作前務必洗手並穿戴整齊","個人衣物可隨意穿著"],correctAnswer:2,explanation:""},{question:"顧客要求「半糖去冰」的飲料，正確做法是？",options:["糖度 50%，不加冰塊","糖度 30%，冰塊減半","正常糖，去冰","半糖，正常冰"],correctAnswer:0,explanation:""},{question:"熱水爐在飲料店的主要用途是？",options:["保溫飲品","煮茶與加熱水","製作冰沙","清洗器具"],correctAnswer:1,explanation:""},{question:"出杯順序的基本原則為何？",options:["熱飲優先出杯","冰飲優先出杯","複雜飲品先做","簡單飲品先做"],correctAnswer:1,explanation:"避免冰飲融化"},{question:"關於門市清潔，下列何者應該每日執行？",options:["重新裝潢","更換設備","拖地清潔","粉刷牆壁"],correctAnswer:2,explanation:""},{question:"製作區的配料盒主要特色是？",options:["固定不可移動","必須透明材質","可移動式設計","只能放珍珠"],correctAnswer:2,explanation:""},{question:"飲料店的基本製作流程順序是？",options:["出杯 → 點單 → 製作","點單 → 製作 → 出杯","製作 → 點單 → 出杯","隨機順序"],correctAnswer:1,explanation:""},{question:"關於客製化服務，下列何者通常無法調整？",options:["糖度比例","冰塊分量","杯子尺寸","加料種類"],correctAnswer:2,explanation:""}]},"001_2_1":{title:"綠茶煮法（烏龍、四季春）",type:"section",courseId:"001",chapterIndex:2,sectionIndex:1,questions:[{question:"綠茶類的最佳沖泡水溫約為？",options:["100°C","85-90°C","70-75°C","60°C"],correctAnswer:1,explanation:""},{question:"四季春茶葉的沖泡時間建議為？",options:["1-2分鐘","3-4分鐘","5-6分鐘","8-10分鐘"],correctAnswer:1,explanation:""},{question:"烏龍茶與綠茶的主要差異是？",options:["發酵程度","產地不同","價格差異","包裝方式"],correctAnswer:0,explanation:""},{question:"綠茶沖泡時，茶葉與水的比例約為？",options:["1:10","1:20","1:50","1:100"],correctAnswer:2,explanation:""},{question:"綠茶沖泡完成後，最佳保存時間為？",options:["24小時","8-12小時","4-6小時","2-3小時"],correctAnswer:2,explanation:""}]},"001_2_2":{title:"紅茶煮法（阿薩姆、錫蘭）",type:"section",courseId:"001",chapterIndex:2,sectionIndex:2,questions:[{question:"阿薩姆紅茶的最佳沖泡水溫為？",options:["85°C","90°C","95-100°C","70°C"],correctAnswer:2,explanation:""},{question:"錫蘭紅茶的特色是？",options:["口感厚重","清香淡雅","帶有柑橘香","苦澀味重"],correctAnswer:2,explanation:""},{question:"紅茶的沖泡時間建議為？",options:["1-2分鐘","3-5分鐘","6-8分鐘","10分鐘以上"],correctAnswer:1,explanation:""},{question:"製作奶茶時，應選用哪種紅茶？",options:["淡味紅茶","濃郁紅茶","花茶","綠茶"],correctAnswer:1,explanation:""},{question:"紅茶沖泡後的最佳飲用溫度為？",options:["100°C","60-70°C","40-50°C","室溫"],correctAnswer:1,explanation:""}]},"001_2_3":{title:"烏龍茶煮法（鐵觀音、包種）",type:"section",courseId:"001",chapterIndex:2,sectionIndex:3,questions:[{question:"鐵觀音茶的發酵程度約為？",options:["不發酵","半發酵","全發酵","後發酵"],correctAnswer:1,explanation:""},{question:"包種茶的特色香氣為？",options:["花香型","果香型","蜜香型","焦糖香"],correctAnswer:0,explanation:""},{question:"烏龍茶的最佳沖泡水溫為？",options:["80°C","90-95°C","100°C","70°C"],correctAnswer:1,explanation:""},{question:"烏龍茶可重複沖泡的次數約為？",options:["1-2次","3-4次","5-7次","無限次"],correctAnswer:2,explanation:""},{question:"烏龍茶的茶葉外觀特色是？",options:["完整葉片","碎茶葉","粉末狀","顆粒狀"],correctAnswer:0,explanation:""}]},"001_2_4":{title:"茶湯保存與每日備茶流程",type:"section",courseId:"001",chapterIndex:2,sectionIndex:4,questions:[{question:"煮好的茶湯應在多長時間內使用完畢？",options:["2小時","4小時","8小時","24小時"],correctAnswer:2,explanation:""},{question:"茶湯的最佳保存溫度為？",options:["室溫","冷藏保存","保溫狀態","冷凍保存"],correctAnswer:2,explanation:""},{question:"每日備茶的第一步驟是？",options:["準備茶葉","清洗茶桶","加熱熱水","計算用量"],correctAnswer:1,explanation:""},{question:"茶桶使用前必須？",options:["加熱","清洗消毒","添加香料","測試溫度"],correctAnswer:1,explanation:""},{question:"過夜茶湯的處理方式是？",options:["繼續使用","重新加熱","倒掉重煮","加水稀釋"],correctAnswer:2,explanation:""}]},"002_chapter":{title:"第二章｜煮茶篇 - 章節大考",type:"chapter",courseId:"001",chapterIndex:2,questions:[{question:"綠茶類飲品的最佳沖泡水溫範圍是？",options:["70-75°C","80-85°C","85-90°C","95-100°C"],correctAnswer:2,explanation:""},{question:"阿薩姆紅茶適合製作哪類飲品？",options:["清淡茶飲","奶茶類飲品","冰茶","花茶"],correctAnswer:1,explanation:""},{question:"烏龍茶的發酵程度分類為？",options:["不發酵茶","半發酵茶","全發酵茶","後發酵茶"],correctAnswer:1,explanation:""},{question:"茶湯的最佳保存期限為？",options:["2-4小時","6-8小時","12小時","24小時"],correctAnswer:1,explanation:""},{question:"每日備茶前，茶桶的處理是？",options:["直接使用","簡單沖洗","徹底清洗消毒","只需擦拭"],correctAnswer:2,explanation:""},{question:"四季春茶葉屬於哪一類茶？",options:["紅茶","綠茶","烏龍茶","白茶"],correctAnswer:2,explanation:""},{question:"錫蘭紅茶的主要特色是？",options:["味道厚重","帶有柑橘香","苦澀味重","顏色較淡"],correctAnswer:1,explanation:""},{question:"包種茶的主要香氣特色是？",options:["花香型","果香型","焦糖香","蜜香型"],correctAnswer:0,explanation:""},{question:"過夜的茶湯應該如何處理？",options:["繼續使用","重新加熱","倒掉重新煮","稀釋後使用"],correctAnswer:2,explanation:""},{question:"茶葉與水的標準比例約為？",options:["1:10","1:30","1:50","1:100"],correctAnswer:2,explanation:""}]}});return y(A2e,{children:[u(P2e,{children:"📚 測驗題目上傳工具 (第一、二章)"}),y("div",{children:[u($6,{onClick:async()=>{r(!0),i("🚀 開始上傳測驗題目到資料庫...","info");try{const l=o();let c=0,d=0;for(const[p,f]of Object.entries(l))try{await zt(Ie(U,"exam-questions",p),{...f,createdAt:new Date,updatedAt:new Date}),c++,i(`✅ 成功上傳: ${f.title} (ID: ${p})`,"success")}catch(h){d++,i(`❌ 上傳失敗: ${f.title} (ID: ${p}) - ${h.message}`,"error")}i(`🎉 第一、二章上傳完成！成功: ${c} 項，失敗: ${d} 項`,"success"),i("📝 接下來需要添加第三到七章的內容...","info")}catch(l){i(`💥 上傳過程發生錯誤: ${l.message}`,"error")}finally{r(!1)}},disabled:n,children:n?"上傳中...":"🚀 上傳第一、二章測驗題目"}),u($6,{onClick:()=>{t([])},children:"🧹 清空日誌"})]}),y(D2e,{children:[u("h3",{children:"上傳日誌："}),e.length===0?u("div",{children:"點擊上傳按鈕開始..."}):e.map((l,c)=>y(R2e,{className:l.type,children:["[",l.timestamp,"] ",l.message]},c))]})]})},M2e=b("div",{target:"eij4h1s4"})({name:"6v9f6q",styles:"padding:20px;max-width:800px;margin:0 auto;font-family:'Noto Sans TC',sans-serif"}),O2e=b("h1",{target:"eij4h1s3"})({name:"5x8jip",styles:"color:#2d3748;margin-bottom:20px"}),L6=b("button",{target:"eij4h1s2"})({name:"4js0ha",styles:"background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);color:white;border:none;border-radius:8px;padding:12px 24px;font-size:16px;font-weight:600;cursor:pointer;margin:10px;&:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0, 0, 0, 0.15);}&:disabled{opacity:0.6;cursor:not-allowed;}"}),$2e=b("div",{target:"eij4h1s1"})({name:"1isovd6",styles:"background:#f7fafc;border:1px solid #e2e8f0;border-radius:8px;padding:20px;margin-top:20px;max-height:400px;overflow-y:auto"}),L2e=b("div",{target:"eij4h1s0"})({name:"gyxmv",styles:"margin:5px 0;padding:5px;border-radius:4px;font-size:14px;&.success{background:#f0fff4;color:#22543d;}&.error{background:#fed7d7;color:#c53030;}&.info{background:#ebf8ff;color:#2a69ac;}"}),F2e=()=>{const[e,t]=D.useState([]),[n,r]=D.useState(!1),i=(l,c="info")=>{t(d=>[...d,{message:l,type:c,timestamp:new Date().toLocaleTimeString()}])},o=()=>({"001_3_1":{title:"奶精差異與選擇指南",type:"section",courseId:"001",chapterIndex:3,sectionIndex:1,questions:[{question:"植物奶精與動物奶精的主要差異是？",options:["價格不同","口感與成分","保存期限","包裝方式"],correctAnswer:1,explanation:""},{question:"製作奶茶時，奶精的添加順序應該是？",options:["最後加入","與茶同時","先加奶精後加茶","隨意添加"],correctAnswer:2,explanation:""},{question:"冷飲用奶精與熱飲用奶精的差異在於？",options:["溶解速度","味道濃度","顏色深淺","保存方式"],correctAnswer:0,explanation:""},{question:"奶精開封後的最佳保存期限為？",options:["7天","15天","30天","90天"],correctAnswer:1,explanation:""},{question:"判斷奶精品質的主要指標是？",options:["顏色深淺","溶解性與口感","價格高低","包裝精美"],correctAnswer:1,explanation:""}]},"001_3_2":{title:"奶茶比例調配技巧",type:"section",courseId:"001",chapterIndex:3,sectionIndex:2,questions:[{question:"標準奶茶的茶與奶精比例約為？",options:["1:1","2:1","3:1","4:1"],correctAnswer:2,explanation:""},{question:"濃郁奶茶的調配重點是？",options:["增加糖分","增加奶精比例","延長沖泡時間","提高水溫"],correctAnswer:1,explanation:""},{question:"製作大杯奶茶時，材料比例應該？",options:["等比例放大","奶精比例減少","茶湯比例增加","糖分加倍"],correctAnswer:0,explanation:""},{question:"奶茶調製的最佳順序是？",options:["茶→糖→奶精","奶精→茶→糖","糖→奶精→茶","奶精→糖→茶"],correctAnswer:3,explanation:""},{question:"調製奶茶時，攪拌的重要性在於？",options:["增加口感","均勻混合","降低溫度","增加甜度"],correctAnswer:1,explanation:""}]},"001_3_3":{title:"各種奶類搭配與應用",type:"section",courseId:"001",chapterIndex:3,sectionIndex:3,questions:[{question:"鮮奶與奶精在奶茶中的效果差異？",options:["鮮奶更香濃","奶精更天然","鮮奶更清爽","沒有差異"],correctAnswer:2,explanation:""},{question:"豆漿適合搭配哪種茶類？",options:["紅茶","綠茶","烏龍茶","所有茶類"],correctAnswer:0,explanation:""},{question:"椰奶的特色風味是？",options:["濃郁奶香","清淡甘甜","椰子香味","酸甜口感"],correctAnswer:2,explanation:""},{question:"燕麥奶的主要特點是？",options:["高蛋白","低熱量","天然甜味","高纖維"],correctAnswer:3,explanation:""},{question:"選擇奶類的考量因素不包括？",options:["顧客偏好","成本控制","營養價值","包裝顏色"],correctAnswer:3,explanation:""}]},"001_3_4":{title:"奶泡製作與拉花基礎",type:"section",courseId:"001",chapterIndex:3,sectionIndex:4,questions:[{question:"製作奶泡的最佳牛奶溫度為？",options:["4-6°C","10-15°C","20-25°C","60-65°C"],correctAnswer:0,explanation:""},{question:"奶泡的理想質地是？",options:["粗糙多泡","細膩綿密","稀薄液狀","硬挺固體"],correctAnswer:1,explanation:""},{question:"蒸氣棒的正確操作是？",options:["完全插入牛奶","表面輕觸","插入一半深度","懸空操作"],correctAnswer:2,explanation:""},{question:"奶泡製作失敗的常見原因是？",options:["牛奶太新鮮","溫度過高","攪拌過度","時間太短"],correctAnswer:1,explanation:""},{question:"簡單拉花的基本技巧是？",options:["快速倒入","緩慢注入","高處倒下","分層倒入"],correctAnswer:1,explanation:""}]},"003_chapter":{title:"第三章｜調奶篇 - 章節大考",type:"chapter",courseId:"001",chapterIndex:3,questions:[{question:"製作標準奶茶時，茶與奶精的理想比例是？",options:["1:1","2:1","3:1","4:1"],correctAnswer:2,explanation:""},{question:"植物奶精與動物奶精的主要差異在於？",options:["價格","口感與成分","顏色","保存期限"],correctAnswer:1,explanation:""},{question:"鮮奶與奶精在飲品中的效果差異是？",options:["鮮奶更香濃","奶精更天然","鮮奶更清爽","沒有明顯差異"],correctAnswer:2,explanation:""},{question:"製作奶泡時，牛奶的最佳溫度為？",options:["室溫","冷藏溫度","微溫","熱牛奶"],correctAnswer:1,explanation:""},{question:"奶茶調製的正確順序是？",options:["茶→糖→奶精","奶精→茶→糖","糖→奶精→茶","奶精→糖→茶"],correctAnswer:3,explanation:""},{question:"椰奶的主要特色是？",options:["濃郁奶香","清淡甘甜","椰子香味","酸甜口感"],correctAnswer:2,explanation:""},{question:"豆漿最適合搭配的茶類是？",options:["綠茶","紅茶","烏龍茶","普洱茶"],correctAnswer:1,explanation:""},{question:"奶泡的理想質地應該是？",options:["粗糙多泡","細膩綿密","稀薄液狀","硬挺固體"],correctAnswer:1,explanation:""},{question:"奶精開封後的建議使用期限為？",options:["7天","15天","30天","90天"],correctAnswer:1,explanation:""},{question:"燕麥奶的主要特點是？",options:["高蛋白","低熱量","天然甜味","高纖維"],correctAnswer:3,explanation:""}]},"001_4_1":{title:"珍珠煮法與保存技巧",type:"section",courseId:"001",chapterIndex:4,sectionIndex:1,questions:[{question:"珍珠的標準煮製時間約為？",options:["15-20分鐘","30-40分鐘","45-60分鐘","60-90分鐘"],correctAnswer:1,explanation:""},{question:"煮珍珠時水與珍珠的比例應為？",options:["3:1","5:1","8:1","10:1"],correctAnswer:2,explanation:""},{question:"珍珠煮好後的保存時間最長為？",options:["2小時","4小時","6小時","8小時"],correctAnswer:2,explanation:""},{question:"判斷珍珠是否煮好的標準是？",options:["顏色變深","浮起水面","Q彈有嚼勁","完全透明"],correctAnswer:2,explanation:""},{question:"珍珠的保溫方式應該是？",options:["常溫保存","冷藏保存","糖漿浸泡","乾燥保存"],correctAnswer:2,explanation:""}]},"001_4_2":{title:"愛玉、椰果、仙草凍製作",type:"section",courseId:"001",chapterIndex:4,sectionIndex:2,questions:[{question:"愛玉的主要特色是？",options:["香甜可口","清爽滑嫩","有嚼勁","酸甜口感"],correctAnswer:1,explanation:""},{question:"椰果的保存期限約為？",options:["3天","7天","15天","30天"],correctAnswer:2,explanation:""},{question:"仙草凍的切法影響？",options:["保存期限","口感體驗","營養價值","成本控制"],correctAnswer:1,explanation:""},{question:"配料的添加順序建議為？",options:["先重後輕","先輕後重","同時添加","隨意順序"],correctAnswer:0,explanation:""},{question:"多種配料搭配的原則是？",options:["顏色搭配","口感層次","成本考量","製作方便"],correctAnswer:1,explanation:""}]},"001_4_3":{title:"芋圓、地瓜圓製作與保存",type:"section",courseId:"001",chapterIndex:4,sectionIndex:3,questions:[{question:"芋圓的最佳煮製時間為？",options:["5-8分鐘","10-15分鐘","20-25分鐘","30分鐘以上"],correctAnswer:1,explanation:""},{question:"地瓜圓煮好的判斷標準是？",options:["顏色變深","全部浮起","變軟爛","時間到達"],correctAnswer:1,explanation:""},{question:"芋圓地瓜圓的保存方式是？",options:["常溫乾放","冷水浸泡","糖水保溫","冷藏密封"],correctAnswer:2,explanation:""},{question:"芋圓變硬的主要原因是？",options:["煮太久","溫度過低","缺乏糖分","接觸空氣"],correctAnswer:1,explanation:""},{question:"芋圓地瓜圓的最佳食用時間為？",options:["剛煮好","放涼後","隔夜後","3小時內"],correctAnswer:3,explanation:""}]},"001_4_4":{title:"布丁、奶酪等配料應用",type:"section",courseId:"001",chapterIndex:4,sectionIndex:4,questions:[{question:"布丁的最佳保存溫度為？",options:["常溫","冷藏","冷凍","保溫"],correctAnswer:1,explanation:""},{question:"奶酪配料的特色是？",options:["Q彈有嚼勁","綿密滑順","清爽解膩","酸甜可口"],correctAnswer:1,explanation:""},{question:"布丁切塊的最佳尺寸為？",options:["越小越好","1公分立方","2-3公分立方","整塊不切"],correctAnswer:2,explanation:""},{question:"配料搭配的色彩原則是？",options:["單一色系","對比強烈","層次豐富","隨意搭配"],correctAnswer:2,explanation:""},{question:"特殊配料的介紹重點是？",options:["價格說明","製作過程","口感特色","營養成分"],correctAnswer:2,explanation:""}]},"004_chapter":{title:"第四章｜加料篇 - 章節大考",type:"chapter",courseId:"001",chapterIndex:4,questions:[{question:"珍珠的標準煮製時間約為？",options:["15-20分鐘","30-40分鐘","45-60分鐘","60-90分鐘"],correctAnswer:1,explanation:""},{question:"煮珍珠時，水與珍珠的理想比例是？",options:["3:1","5:1","8:1","10:1"],correctAnswer:2,explanation:""},{question:"珍珠煮好後可保存多長時間？",options:["2小時","4小時","6小時","8小時"],correctAnswer:2,explanation:""},{question:"愛玉的主要口感特色是？",options:["香甜可口","清爽滑嫩","Q彈有嚼勁","酸甜口感"],correctAnswer:1,explanation:""},{question:"椰果開封後的建議保存期限為？",options:["3天","7天","15天","30天"],correctAnswer:2,explanation:""},{question:"判斷珍珠煮好的標準是？",options:["顏色變深","浮起水面","Q彈有嚼勁","完全透明"],correctAnswer:2,explanation:""},{question:"仙草凍的切法主要影響？",options:["保存期限","口感體驗","營養價值","成本控制"],correctAnswer:1,explanation:""},{question:"珍珠的保溫方式應該是？",options:["常溫保存","冷藏保存","糖漿浸泡","乾燥保存"],correctAnswer:2,explanation:""},{question:"配料添加的理想順序是？",options:["先重後輕","先輕後重","同時添加","隨意順序"],correctAnswer:0,explanation:""},{question:"多種配料搭配的主要原則是？",options:["顏色搭配","口感層次","成本考量","製作方便"],correctAnswer:1,explanation:""}]},"001_5_1":{title:"水果茶製作流程與技巧",type:"section",courseId:"001",chapterIndex:5,sectionIndex:1,questions:[{question:"製作水果茶的最佳茶底是？",options:["紅茶","綠茶","烏龍茶","白茶"],correctAnswer:0,explanation:""},{question:"水果的切法對飲品的影響是？",options:["只影響美觀","影響出汁量","不重要","只影響成本"],correctAnswer:1,explanation:""},{question:"製作水果茶時，水果的添加時機是？",options:["最後加入","與茶同時","先加水果","隨時都可"],correctAnswer:0,explanation:""},{question:"檸檬在水果茶中的作用是？",options:["增加甜味","提升酸度","增加香氣","以上皆是"],correctAnswer:3,explanation:""},{question:"新鮮水果與果汁的差異在於？",options:["口感層次","保存期限","成本考量","以上皆是"],correctAnswer:3,explanation:""}]},"001_5_2":{title:"果泥、果醬調配技巧",type:"section",courseId:"001",chapterIndex:5,sectionIndex:2,questions:[{question:"果泥與果醬的主要差異是？",options:["甜度不同","質地濃稠度","保存方式","價格差異"],correctAnswer:1,explanation:""},{question:"果泥的最佳保存溫度為？",options:["常溫","冷藏","冷凍","高溫"],correctAnswer:1,explanation:""},{question:"調配果飲時的比例原則是？",options:["果味越濃越好","平衡酸甜","只重甜味","只重酸味"],correctAnswer:1,explanation:""},{question:"季節水果的運用原則是？",options:["全年供應","配合時令","價格考量","隨意選擇"],correctAnswer:1,explanation:""},{question:"果醬開封後的保存期限約為？",options:["3天","7天","15天","30天"],correctAnswer:2,explanation:""}]},"001_5_3":{title:"冰沙製作技巧與口感調控",type:"section",courseId:"001",chapterIndex:5,sectionIndex:3,questions:[{question:"製作冰沙的最佳冰塊比例為？",options:["30%","50%","70%","90%"],correctAnswer:2,explanation:""},{question:"冰沙機操作的重要事項是？",options:["高速運轉","分段攪打","持續攪拌","低溫處理"],correctAnswer:1,explanation:""},{question:"冰沙的理想質地是？",options:["粗糙顆粒","細緻綿密","流質狀","硬塊狀"],correctAnswer:1,explanation:""},{question:"調整冰沙濃稠度的方法是？",options:["調整冰量","調整液體","調整攪拌時間","以上皆是"],correctAnswer:3,explanation:""},{question:"冰沙的最佳飲用時間為？",options:["製作後立即","放置10分鐘","放置30分鐘","隔夜飲用"],correctAnswer:0,explanation:""}]},"001_5_4":{title:"季節限定果飲開發與推廣",type:"section",courseId:"001",chapterIndex:5,sectionIndex:4,questions:[{question:"春季水果的代表是？",options:["草莓","西瓜","柿子","橘子"],correctAnswer:0,explanation:""},{question:"夏季果飲的特色應該是？",options:["溫潤滋補","清爽解渴","厚重濃郁","香甜溫暖"],correctAnswer:1,explanation:""},{question:"季節限定的行銷重點是？",options:["價格優勢","限時限量","常年供應","成本考量"],correctAnswer:1,explanation:""},{question:"秋冬季節適合的水果組合是？",options:["檸檬薄荷","蘋果肉桂","西瓜檸檬","草莓奇異果"],correctAnswer:1,explanation:""},{question:"季節性果飲的成本控制關鍵是？",options:["固定價格","預估需求","大量採購","減少種類"],correctAnswer:1,explanation:""}]},"005_chapter":{title:"第五章｜果飲與冰沙篇 - 章節大考",type:"chapter",courseId:"001",chapterIndex:5,questions:[{question:"製作水果茶的最佳茶底選擇是？",options:["綠茶","紅茶","烏龍茶","白茶"],correctAnswer:1,explanation:""},{question:"水果的切法主要影響什麼？",options:["美觀程度","出汁效果","保存期限","成本控制"],correctAnswer:1,explanation:""},{question:"檸檬在水果茶中的主要作用是？",options:["增加甜味","提升酸度和香氣","增加顏色","降低成本"],correctAnswer:1,explanation:""},{question:"果泥與果醬的主要差異在於？",options:["甜度","質地濃稠度","顏色","價格"],correctAnswer:1,explanation:""},{question:"新鮮水果相比果汁的優勢是？",options:["成本更低","保存更久","口感層次更豐富","製作更簡單"],correctAnswer:2,explanation:""},{question:"果泥的最佳保存方式是？",options:["常溫保存","冷藏保存","冷凍保存","高溫保存"],correctAnswer:1,explanation:""},{question:"調配果飲時的比例原則是？",options:["果味越濃越好","平衡酸甜口感","只重視甜味","隨意調配"],correctAnswer:1,explanation:""},{question:"季節水果的運用原則是？",options:["全年統一供應","配合時令變化","只考慮價格","隨機選擇"],correctAnswer:1,explanation:""},{question:"製作水果茶時，水果的添加時機是？",options:["最先加入","與茶同時","最後加入","隨時都可以"],correctAnswer:2,explanation:""},{question:"果醬開封後的建議使用期限為？",options:["3天","7天","15天","30天"],correctAnswer:2,explanation:""}]},"001_6_1":{title:"POS系統操作與點單流程",type:"section",courseId:"001",chapterIndex:6,sectionIndex:1,questions:[{question:"POS系統的主要功能是？",options:["只能收銀","點單與結帳","庫存管理","以上皆是"],correctAnswer:3,explanation:""},{question:"點單時的首要步驟是？",options:["確認飲品","收取費用","詢問客製化","確認顧客需求"],correctAnswer:3,explanation:""},{question:"處理客製化需求的正確態度是？",options:["拒絕變更","耐心詢問","隨意處理","不予理會"],correctAnswer:1,explanation:""},{question:"POS系統當機時應該？",options:["停止營業","手工記錄","重新開機","呼叫主管"],correctAnswer:3,explanation:""},{question:"點單完成後應該？",options:["立即收銀","確認訂單內容","開始製作","等待付款"],correctAnswer:1,explanation:""}]},"001_6_2":{title:"出杯順序與杯標辨識",type:"section",courseId:"001",chapterIndex:6,sectionIndex:2,questions:[{question:"出杯的基本原則是？",options:["先進先出","簡單的先做","熱飲優先","隨機出杯"],correctAnswer:0,explanation:""},{question:"杯標上最重要的資訊是？",options:["顧客姓名","飲品種類","製作時間","價格"],correctAnswer:1,explanation:""},{question:"高峰時段的出杯策略是？",options:["按順序慢慢做","同類飲品批量製作","只做簡單的","暫停服務"],correctAnswer:1,explanation:""},{question:"冰飲與熱飲的出杯順序為？",options:["熱飲先出","冰飲先出","同時出杯","沒有順序"],correctAnswer:1,explanation:""},{question:"杯標貼錯時的處理方式是？",options:["將錯就錯","重新製作","口頭告知顧客","修改杯標"],correctAnswer:1,explanation:""}]},"001_6_3":{title:"高峰時段應對與效率管理",type:"section",courseId:"001",chapterIndex:6,sectionIndex:3,questions:[{question:"高峰時段的人員配置原則是？",options:["全員製作","分工合作","輪流休息","隨意安排"],correctAnswer:1,explanation:""},{question:"提升製作效率的關鍵是？",options:["加快動作","標準化流程","減少品項","降低品質"],correctAnswer:1,explanation:""},{question:"處理排隊顧客的最佳方式是？",options:["視而不見","主動溝通","要求等待","轉移注意力"],correctAnswer:1,explanation:""},{question:"高峰期間的品質管理是？",options:["可以降低","維持標準","提高要求","看情況調整"],correctAnswer:1,explanation:""},{question:"預測高峰時段的依據是？",options:["隨機猜測","歷史資料","個人經驗","天氣變化"],correctAnswer:1,explanation:""}]},"001_6_4":{title:"外送服務流程與包裝技巧",type:"section",courseId:"001",chapterIndex:6,sectionIndex:4,questions:[{question:"外送飲品的包裝重點是？",options:["美觀精緻","防漏防撒","成本最低","環保材質"],correctAnswer:1,explanation:""},{question:"熱飲外送的注意事項是？",options:["保溫措施","降溫處理","常溫配送","冷藏運輸"],correctAnswer:0,explanation:""},{question:"外送訂單的確認重點是？",options:["配送地址","聯絡電話","訂單內容","以上皆是"],correctAnswer:3,explanation:""},{question:"外送時間的預估原則是？",options:["越短越好","實際可達成","顧客要求","平台標準"],correctAnswer:1,explanation:""},{question:"外送品質的保證方式是？",options:["降低要求","特殊包裝","快速配送","價格調整"],correctAnswer:1,explanation:""}]},"006_chapter":{title:"第六章｜出杯與點單流程篇 - 章節大考",type:"chapter",courseId:"001",chapterIndex:6,questions:[{question:"POS系統的主要功能包括？",options:["只能收銀","點單與結帳","庫存管理","以上皆是"],correctAnswer:3,explanation:""},{question:"點單流程的首要步驟是？",options:["確認飲品種類","收取費用","詢問客製化需求","確認顧客完整需求"],correctAnswer:3,explanation:""},{question:"出杯的基本原則是？",options:["先進先出","簡單飲品優先","熱飲優先出杯","隨機出杯順序"],correctAnswer:0,explanation:""},{question:"杯標上最關鍵的資訊是？",options:["顧客姓名","飲品詳細資訊","製作時間","價格金額"],correctAnswer:1,explanation:""},{question:"處理客製化需求的正確態度是？",options:["直接拒絕變更","耐心詢問確認","隨意處理","不予理會"],correctAnswer:1,explanation:""},{question:"高峰時段的出杯策略是？",options:["按順序慢慢製作","同類飲品批量製作","只做簡單飲品","暫停接單服務"],correctAnswer:1,explanation:""},{question:"冰飲與熱飲的出杯優先順序為？",options:["熱飲優先","冰飲優先","同時出杯","沒有特定順序"],correctAnswer:1,explanation:""},{question:"POS系統故障時應該？",options:["停止營業","手工記錄","重新開機","立即通知主管"],correctAnswer:3,explanation:""},{question:"杯標貼錯時的正確處理方式是？",options:["將錯就錯","重新製作飲品","口頭告知顧客","手動修改杯標"],correctAnswer:1,explanation:""},{question:"點單完成後的下一步驟應該是？",options:["立即收銀","再次確認訂單內容","開始製作飲品","等待顧客付款"],correctAnswer:1,explanation:""}]},"001_7_1":{title:"顧客應對技巧與話術訓練",type:"section",courseId:"001",chapterIndex:7,sectionIndex:1,questions:[{question:"當顧客抱怨飲料不好喝時，最佳回應是？",options:["這是標準作法","向顧客道歉並了解問題","建議顧客下次不要來","解釋製作過程"],correctAnswer:1,explanation:""},{question:"推薦商品給顧客時，應該？",options:["推薦最貴的","了解顧客喜好再推薦","隨意推薦","不主動推薦"],correctAnswer:1,explanation:""},{question:"遇到難纏顧客時，正確做法是？",options:["據理力爭","保持冷靜並尋求主管協助","直接拒絕服務","與顧客爭論"],correctAnswer:1,explanation:""},{question:"顧客詢問不熟悉的商品時，應該？",options:["隨便回答","誠實說不知道並請教同事","網路搜尋","推薦其他商品"],correctAnswer:1,explanation:""},{question:"處理顧客投訴的第一步是？",options:["解釋原因","傾聽並理解問題","提供解決方案","轉交主管"],correctAnswer:1,explanation:""}]},"001_7_2":{title:"飲品創新研發流程與命名技巧",type:"section",courseId:"001",chapterIndex:7,sectionIndex:2,questions:[{question:"飲品研發的第一步是？",options:["成本計算","市場調查","口味調配","包裝設計"],correctAnswer:1,explanation:""},{question:"新飲品命名的原則是？",options:["越長越好","簡潔易記","使用英文","隨意命名"],correctAnswer:1,explanation:""},{question:"試做新品時的記錄重點是？",options:["配方比例","製作時間","成本分析","以上皆是"],correctAnswer:3,explanation:""},{question:"季節性飲品的特色是？",options:["全年供應","限時供應","價格昂貴","製作複雜"],correctAnswer:1,explanation:""},{question:"創新飲品的測試對象應該是？",options:["員工","常客","多元族群","朋友"],correctAnswer:2,explanation:""}]},"001_7_3":{title:"成本控制與利潤分析",type:"section",courseId:"001",chapterIndex:7,sectionIndex:3,questions:[{question:"飲品成本計算應包含？",options:["只算原料","原料加人工","全部成本","固定成本"],correctAnswer:2,explanation:""},{question:"提升利潤的方法是？",options:["提高售價","降低成本","提升效率","以上皆是"],correctAnswer:3,explanation:""},{question:"成本控制的重點時期是？",options:["淡季","旺季","全年度","週末"],correctAnswer:2,explanation:""},{question:"原料損耗的控制方法是？",options:["嚴格管理","定期盤點","教育訓練","以上皆是"],correctAnswer:3,explanation:""},{question:"利潤分析的頻率應該是？",options:["每日","每週","每月","每季"],correctAnswer:2,explanation:""}]},"001_7_4":{title:"團隊領導與店面管理",type:"section",courseId:"001",chapterIndex:7,sectionIndex:4,questions:[{question:"團隊管理的核心是？",options:["嚴格紀律","有效溝通","績效考核","薪資管理"],correctAnswer:1,explanation:""},{question:"員工培訓的重點是？",options:["技能提升","態度養成","團隊合作","以上皆是"],correctAnswer:3,explanation:""},{question:"處理員工衝突的方式是？",options:["忽視問題","公開批評","私下溝通","直接處罰"],correctAnswer:2,explanation:""},{question:"激勵員工的最佳方式是？",options:["金錢獎勵","認同讚美","升職機會","因人而異"],correctAnswer:3,explanation:""},{question:"店面管理的日常重點是？",options:["清潔衛生","服務品質","營運效率","以上皆是"],correctAnswer:3,explanation:""}]},"007_chapter":{title:"第七章｜進階職人技巧篇 - 章節大考",type:"chapter",courseId:"001",chapterIndex:7,questions:[{question:"當顧客抱怨飲料品質時，最佳應對方式是？",options:["堅持標準作法","主動道歉並了解問題","建議顧客換店","詳細解釋製程"],correctAnswer:1,explanation:""},{question:"推薦新品給顧客的正確方式是？",options:["推薦最昂貴的","了解喜好後推薦","隨意推薦","避免主動推薦"],correctAnswer:1,explanation:""},{question:"面對困難顧客時應該？",options:["據理力爭到底","保持冷靜尋求協助","拒絕提供服務","與其爭論對錯"],correctAnswer:1,explanation:""},{question:"飲品創新研發的首要步驟是？",options:["計算成本","市場調查","調配口味","設計包裝"],correctAnswer:1,explanation:""},{question:"新飲品命名的基本原則是？",options:["名稱越長越好","簡潔易記","全用英文","可以隨意命名"],correctAnswer:1,explanation:""},{question:"顧客詢問不熟悉商品時應該？",options:["隨便回答","誠實承認並求助","上網查詢","推薦其他商品"],correctAnswer:1,explanation:""},{question:"試做新品的記錄重點包括？",options:["配方比例","製作時間","成本分析","以上皆是"],correctAnswer:3,explanation:""},{question:"處理投訴的第一步驟是？",options:["解釋造成原因","耐心傾聽問題","提供解決方案","轉交給主管"],correctAnswer:1,explanation:""},{question:"季節性飲品的主要特色是？",options:["全年度供應","限時限量供應","價格特別昂貴","製作工序複雜"],correctAnswer:1,explanation:""},{question:"創新飲品的理想測試對象是？",options:["內部員工","忠實常客","多元化族群","親朋好友"],correctAnswer:2,explanation:""}]}});return y(M2e,{children:[u(O2e,{children:"📚 第三到七章測驗題目上傳工具"}),y("div",{children:[u(L6,{onClick:async()=>{r(!0),i("🚀 開始上傳第三到七章測驗題目...","info");try{const l=o();let c=0,d=0;for(const[p,f]of Object.entries(l))try{await zt(Ie(U,"exam-questions",p),{...f,createdAt:new Date,updatedAt:new Date}),c++,i(`✅ 成功上傳: ${f.title} (ID: ${p})`,"success")}catch(h){d++,i(`❌ 上傳失敗: ${f.title} (ID: ${p}) - ${h.message}`,"error")}i(`🎉 第三到七章上傳完成！成功: ${c} 項，失敗: ${d} 項`,"success")}catch(l){i(`💥 上傳過程發生錯誤: ${l.message}`,"error")}finally{r(!1)}},disabled:n,children:n?"上傳中...":"🚀 上傳第三到七章測驗題目"}),u(L6,{onClick:()=>{t([])},children:"🧹 清空日誌"})]}),y($2e,{children:[u("h3",{children:"上傳日誌："}),e.length===0?u("div",{children:"點擊上傳按鈕開始..."}):e.map((l,c)=>y(L2e,{className:l.type,children:["[",l.timestamp,"] ",l.message]},c))]})]})},B2e=b("div",{target:"e1es7yih33"})({name:"1ushq9l",styles:"min-height:100vh;background:radial-gradient(circle at 20% 30%, rgba(0, 255, 255, 0.03) 0%, transparent 50%),radial-gradient(circle at 80% 70%, rgba(255, 0, 255, 0.03) 0%, transparent 50%),linear-gradient(135deg, #0a0a0a 0%, #1a0a1a 50%, #0a1a0a 100%);display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;position:relative;overflow:hidden;&::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:radial-gradient(circle at 10% 20%, rgba(0, 255, 255, 0.02) 0%, transparent 40%),radial-gradient(circle at 90% 80%, rgba(255, 0, 255, 0.02) 0%, transparent 40%),radial-gradient(circle at 50% 50%, rgba(0, 255, 127, 0.01) 0%, transparent 60%);pointer-events:none;animation:backgroundPulse 8s ease-in-out infinite alternate;}@keyframes backgroundPulse{0%{opacity:0.3;}100%{opacity:0.8;}}@media (min-width: 1024px){flex-direction:row;gap:40px;align-items:center;justify-content:center;}"}),z2e=b(Le.div,{target:"e1es7yih32"})({name:"trwbly",styles:"background:rgba(10, 10, 15, 0.9);border-radius:20px;padding:30px;backdrop-filter:blur(20px);border:1px solid rgba(0, 255, 255, 0.2);position:relative;z-index:1;max-width:500px;width:100%;box-shadow:0 0 40px rgba(0, 255, 255, 0.1),inset 0 0 20px rgba(255, 0, 255, 0.05);@media (min-width: 1024px){max-width:600px;}"}),V2e=e=>Ke("background:",e.player==="X"?"linear-gradient(135deg, rgba(255, 0, 100, 0.15), rgba(255, 50, 50, 0.1))":"linear-gradient(135deg, rgba(0, 255, 255, 0.15), rgba(0, 200, 255, 0.1))",";border:2px solid ",e.player==="X"?"rgba(255, 0, 100, 0.4)":"rgba(0, 255, 255, 0.4)",";box-shadow:0 0 30px ",e.player==="X"?"rgba(255, 0, 100, 0.2)":"rgba(0, 255, 255, 0.2)",",inset 0 0 20px rgba(255, 255, 255, 0.05);opacity:",e.isActive?1:.5,";transform:",e.isActive?"scale(1.05)":"scale(1)",";&::before{background:",e.isActive?e.player==="X"?"radial-gradient(circle, rgba(255, 0, 100, 0.3) 0%, transparent 70%)":"radial-gradient(circle, rgba(0, 255, 255, 0.3) 0%, transparent 70%)":"none",";animation:",e.isActive?"auraWave 2s ease-in-out infinite":"none",";}",""),F6=b(Le.div,{target:"e1es7yih31"})(V2e," border-radius:20px;padding:30px;backdrop-filter:blur(20px);width:280px;text-align:center;transition:all 0.3s ease;position:relative;&::before{content:'';position:absolute;top:-20px;left:-20px;right:-20px;bottom:-20px;border-radius:30px;z-index:-1;pointer-events:none;}@keyframes auraWave{0%,100%{transform:scale(1);opacity:0.7;}50%{transform:scale(1.2);opacity:0.3;}}@media (max-width: 1023px){display:none;}"),j2e=e=>Ke("color:",e.player==="X"?"#ff0064":"#00ffff",";text-shadow:0 0 20px ",e.player==="X"?"#ff0064":"#00ffff",";",""),B6=b("h2",{target:"e1es7yih30"})(j2e," font-size:32px;font-weight:bold;margin-bottom:20px;letter-spacing:2px;"),U2e=b("div",{target:"e1es7yih29"})({name:"1p5r6ff",styles:"text-align:center;margin-bottom:30px"}),q2e=b("h1",{target:"e1es7yih28"})({name:"1qncff2",styles:"font-size:32px;font-weight:bold;background:linear-gradient(135deg, #00ffff, #ff00ff, #00ff7f);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:10px;text-shadow:0 0 30px rgba(0, 255, 255, 0.5);letter-spacing:3px"}),W2e=b("p",{target:"e1es7yih27"})({name:"3m1i4e",styles:"color:rgba(255, 255, 255, 0.7);font-size:16px;margin:0;text-shadow:0 0 10px rgba(255, 255, 255, 0.3)"}),H2e=e=>Ke("background:",e.currentPlayer==="X"?"linear-gradient(135deg, rgba(255, 0, 100, 0.2), rgba(255, 50, 50, 0.15))":"linear-gradient(135deg, rgba(0, 255, 255, 0.2), rgba(0, 200, 255, 0.15))",";border:1px solid ",e.currentPlayer==="X"?"rgba(255, 0, 100, 0.4)":"rgba(0, 255, 255, 0.4)",";color:",e.currentPlayer==="X"?"#ff0064":"#00ffff",";box-shadow:0 0 20px ",e.currentPlayer==="X"?"rgba(255, 0, 100, 0.3)":"rgba(0, 255, 255, 0.3)",";",""),G2e=b(Le.div,{target:"e1es7yih26"})(H2e," display:flex;justify-content:center;align-items:center;margin-bottom:25px;padding:15px 25px;border-radius:15px;font-size:20px;font-weight:bold;text-shadow:0 0 10px currentColor;@media (min-width: 1024px){display:none;}"),Y2e=b("div",{target:"e1es7yih25"})({name:"1329y82",styles:"position:relative;display:flex;justify-content:center;align-items:center;margin:25px 0"}),K2e=e=>Ke("color:",e.currentPlayer==="X"?"rgba(255, 0, 100, 0.1)":"rgba(0, 255, 255, 0.1)",";text-shadow:0 0 100px ",e.currentPlayer==="X"?"rgba(255, 0, 100, 0.3)":"rgba(0, 255, 255, 0.3)",";",""),X2e=b(Le.div,{target:"e1es7yih24"})(K2e," position:absolute;font-size:300px;font-weight:bold;z-index:0;user-select:none;pointer-events:none;@media (min-width: 1024px){font-size:400px;}"),Q2e=b("div",{target:"e1es7yih23"})({name:"1l9uuvh",styles:"display:grid;grid-template-columns:repeat(3, 1fr);gap:8px;background:rgba(0, 0, 0, 0.4);padding:12px;border-radius:16px;box-shadow:inset 0 0 20px rgba(0, 0, 0, 0.5),0 0 40px rgba(0, 255, 255, 0.1);border:1px solid rgba(255, 255, 255, 0.1);backdrop-filter:blur(10px);position:relative;z-index:1"}),J2e=e=>Ke("background:",e.winner==="X"?"linear-gradient(90deg, transparent, #ff0064, transparent)":"linear-gradient(90deg, transparent, #00ffff, transparent)",";box-shadow:0 0 20px ",e.winner==="X"?"#ff0064":"#00ffff",";",""),Z2e=b(Le.div,{target:"e1es7yih22"})(J2e," position:absolute;border-radius:3px;z-index:10;");var ewe={name:"ncyz1l",styles:"color:#00ffff;text-shadow:0 0 20px #00ffff;border-color:rgba(0, 255, 255, 0.4);background:rgba(0, 255, 255, 0.1)"},twe={name:"1j6dj2x",styles:"color:#ff0064;text-shadow:0 0 20px #ff0064;border-color:rgba(255, 0, 100, 0.4);background:rgba(255, 0, 100, 0.1)"};const nwe=e=>Ke("background:rgba(10, 10, 20, 0.8);border:2px solid rgba(255, 255, 255, 0.2);font-size:",e.isDesktop?"48px":"32px",";",e.value==="X"&&twe," ",e.value==="O"&&ewe,";",""),rwe=b(Le.button,{target:"e1es7yih21"})(nwe," aspect-ratio:1;border-radius:12px;font-weight:900;font-family:'Courier New','Arial',monospace;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.3s ease;position:relative;backdrop-filter:blur(10px);box-shadow:0 4px 20px rgba(0, 0, 0, 0.3),inset 0 0 10px rgba(255, 255, 255, 0.05);min-height:60px;min-width:60px;&:hover:not(:disabled){transform:scale(1.05);background:rgba(255, 255, 255, 0.1);box-shadow:0 6px 25px rgba(0, 0, 0, 0.4),0 0 20px rgba(0, 255, 255, 0.3);border-color:rgba(0, 255, 255, 0.5);}&:disabled{cursor:not-allowed;}"),iwe=b("div",{target:"e1es7yih20"})({name:"188wnkq",styles:"display:flex;justify-content:space-between;margin:20px 0;gap:15px;@media (min-width: 1024px){display:none;}"}),owe=e=>Ke("background:",e.player==="X"?"linear-gradient(135deg, rgba(255, 0, 100, 0.15), rgba(255, 50, 50, 0.1))":"linear-gradient(135deg, rgba(0, 255, 255, 0.15), rgba(0, 200, 255, 0.1))",";border:2px solid ",e.player==="X"?"rgba(255, 0, 100, 0.4)":"rgba(0, 255, 255, 0.4)",";box-shadow:0 0 20px ",e.player==="X"?"rgba(255, 0, 100, 0.2)":"rgba(0, 255, 255, 0.2)",",inset 0 0 10px rgba(255, 255, 255, 0.05);",""),z6=b("div",{target:"e1es7yih19"})(owe," flex:1;border-radius:12px;padding:15px;text-align:center;backdrop-filter:blur(10px);"),awe=e=>Ke("color:",e.player==="X"?"#ff0064":"#00ffff",";",""),V6=b("div",{target:"e1es7yih18"})(awe," font-size:18px;font-weight:bold;margin-bottom:8px;text-shadow:0 0 10px currentColor;"),j6=b("div",{target:"e1es7yih17"})({name:"1ugv50u",styles:"display:flex;justify-content:center;gap:5px;flex-wrap:wrap"}),swe=e=>Ke("background:",e.player==="X"?"linear-gradient(135deg, #ff0064, #ff3380)":"linear-gradient(135deg, #00ffff, #33ccff)",";box-shadow:0 0 15px ",e.player==="X"?"#ff0064":"#00ffff",",inset 0 0 5px rgba(255, 255, 255, 0.3);opacity:",e.isActive?1:.3,";",""),U6=b(Le.div,{target:"e1es7yih16"})(swe," width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:12px;font-weight:bold;border:1px solid rgba(255, 255, 255, 0.3);text-shadow:0 0 5px currentColor;"),q6=b("div",{target:"e1es7yih15"})({name:"1okvlpj",styles:"display:flex;justify-content:center;gap:10px;margin-top:20px;@media (max-width: 1023px){display:none;}"}),lwe=e=>Ke("background:",e.player==="X"?"linear-gradient(135deg, #ff0064, #ff3380)":"linear-gradient(135deg, #00ffff, #33ccff)",";box-shadow:0 0 20px ",e.player==="X"?"#ff0064":"#00ffff",",inset 0 0 8px rgba(255, 255, 255, 0.3);opacity:",e.isActive?1:.3,";",""),W6=b(Le.div,{target:"e1es7yih14"})(lwe," width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:20px;font-weight:bold;border:2px solid rgba(255, 255, 255, 0.4);text-shadow:0 0 8px currentColor;"),H6=b("div",{target:"e1es7yih13"})({name:"9dk1lr",styles:"display:flex;gap:15px;margin-top:25px"});var cwe={name:"1gctnzp",styles:"background:rgba(255, 255, 255, 0.1);color:rgba(255, 255, 255, 0.8);border:1px solid rgba(255, 255, 255, 0.2);&:hover{background:rgba(255, 255, 255, 0.2);transform:translateY(-1px);}"},uwe={name:"8bdvvy",styles:"background:linear-gradient(135deg, rgba(0, 255, 255, 0.2), rgba(0, 200, 255, 0.15));color:#00ffff;border:1px solid rgba(0, 255, 255, 0.4);box-shadow:0 0 20px rgba(0, 255, 255, 0.3);text-shadow:0 0 10px #00ffff;&:hover{transform:translateY(-2px);box-shadow:0 0 30px rgba(0, 255, 255, 0.5);background:linear-gradient(135deg, rgba(0, 255, 255, 0.3), rgba(0, 200, 255, 0.2));}"};const dwe=e=>Ke(e.primary?uwe:cwe,";",""),yg=b(Le.button,{target:"e1es7yih12"})(dwe," flex:1;padding:12px 20px;border:none;border-radius:10px;font-size:16px;font-weight:600;cursor:pointer;transition:all 0.3s ease;backdrop-filter:blur(10px);"),pwe=b(Le.div,{target:"e1es7yih11"})({name:"etadx6",styles:"position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0, 0, 0, 0.9);display:flex;justify-content:center;align-items:center;z-index:1000;backdrop-filter:blur(10px)"}),hwe=b(Le.div,{target:"e1es7yih10"})({name:"j8dj8n",styles:"background:linear-gradient(135deg, rgba(10, 10, 20, 0.95), rgba(20, 10, 30, 0.95));border-radius:20px;padding:40px;text-align:center;box-shadow:0 0 60px rgba(0, 255, 255, 0.3),inset 0 0 30px rgba(255, 255, 255, 0.05);border:1px solid rgba(0, 255, 255, 0.3);max-width:400px;width:90%;backdrop-filter:blur(20px)"}),fwe=e=>Ke("color:",e.winner==="X"?"#ff0064":"#00ffff",";text-shadow:0 0 30px ",e.winner==="X"?"#ff0064":"#00ffff",";",""),gwe=b("h2",{target:"e1es7yih9"})(fwe," font-size:32px;font-weight:bold;margin-bottom:20px;"),mwe=b("p",{target:"e1es7yih8"})({name:"zvv7xk",styles:"color:rgba(255, 255, 255, 0.8);margin-bottom:25px;font-size:18px"}),vwe=b(Le.button,{target:"e1es7yih7"})({name:"jgdjvh",styles:"position:absolute;top:20px;left:20px;background:rgba(0, 0, 0, 0.7);border:1px solid rgba(255, 255, 255, 0.3);border-radius:50%;width:50px;height:50px;display:flex;align-items:center;justify-content:center;font-size:20px;color:rgba(255, 255, 255, 0.8);cursor:pointer;backdrop-filter:blur(10px);box-shadow:0 0 20px rgba(0, 0, 0, 0.5);z-index:10;&:hover{background:rgba(0, 255, 255, 0.2);color:#00ffff;border-color:rgba(0, 255, 255, 0.5);box-shadow:0 0 30px rgba(0, 255, 255, 0.3);}"}),xwe=b(Le.div,{target:"e1es7yih6"})({name:"1oxhmtd",styles:"position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0, 0, 0, 0.9);display:flex;justify-content:center;align-items:center;z-index:2000;backdrop-filter:blur(10px)"}),ywe=b(Le.div,{target:"e1es7yih5"})({name:"a3p4nf",styles:"background:linear-gradient(135deg, rgba(10, 10, 20, 0.95), rgba(20, 10, 30, 0.95));border-radius:20px;padding:40px;text-align:center;box-shadow:0 0 60px rgba(0, 255, 255, 0.3),inset 0 0 30px rgba(255, 255, 255, 0.05);border:1px solid rgba(0, 255, 255, 0.3);backdrop-filter:blur(20px);min-width:400px"}),bwe=b(Le.div,{target:"e1es7yih4"})({name:"s5qj1t",styles:`width:300px;height:200px;background:linear-gradient(135deg, #001122, #002244);border:3px solid #00ffff;border-radius:10px;margin:20px auto;position:relative;overflow:hidden;box-shadow:0 0 20px rgba(0, 255, 255, 0.5),inset 0 0 10px rgba(0, 255, 255, 0.2);&::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(0, 255, 255, 0.03) 2px,
      rgba(0, 255, 255, 0.03) 4px
    );pointer-events:none;}`}),wwe=b(Le.div,{target:"e1es7yih3"})({name:"n1i6i9",styles:"position:absolute;top:10px;left:10px;right:10px;bottom:50px;font-family:'Courier New',monospace;font-size:12px;color:#00ff00;line-height:1.2;overflow:hidden;text-shadow:0 0 5px #00ff00"}),Swe=b(Le.div,{target:"e1es7yih2"})({name:"1j9b0hy",styles:"position:absolute;bottom:10px;left:10px;right:10px;height:35px;background:rgba(0, 0, 0, 0.7);border:1px solid #00ffff;border-radius:5px;display:flex;align-items:center;justify-content:center;font-family:'Courier New',monospace;font-size:18px;font-weight:bold;color:#00ffff;text-shadow:0 0 10px #00ffff"}),Cwe=b("h3",{target:"e1es7yih1"})({name:"14ft57t",styles:"color:#00ffff;font-size:24px;margin-bottom:20px;text-shadow:0 0 20px #00ffff"}),_we=b("p",{target:"e1es7yih0"})({name:"73lfjo",styles:"color:rgba(255, 255, 255, 0.7);margin-top:20px;font-family:'Courier New',monospace"}),G6=()=>{const e=qt(),[t,n]=D.useState(Array(9).fill(null)),[r,i]=D.useState("X"),[o,a]=D.useState({X:[],O:[]}),[s,l]=D.useState(null),[c,d]=D.useState(!1),[p,f]=D.useState(!1),[h,g]=D.useState(!0),[m,v]=D.useState(null),[w,S]=D.useState(!1),[C,A]=D.useState(""),[_,I]=D.useState(""),[E,k]=D.useState(!1);D.useEffect(()=>{const V=()=>{f(window.innerWidth>=1024)};return V(),window.addEventListener("resize",V),()=>window.removeEventListener("resize",V)},[]);const T=()=>{let z="";for(let H=0;H<12;H++){for(let J=0;J<32;J++)z+=Math.random()>.5?"1":"0",J%8===7&&(z+=" ");z+=`
`}return z},P=()=>{k(!0),I("正在初始化..."),setTimeout(()=>{I("生成隨機種子...");const V=setInterval(()=>{A(T())},150);setTimeout(()=>{I("計算隨機結果...")},1e3),setTimeout(()=>{I("分析數據模式...")},2e3),setTimeout(()=>{clearInterval(V);const j=Math.random(),z=j<.5?"X":"O";I(`結果: ${z} 先手 (${(j*100).toFixed(2)}%)`),A(`隨機值: ${j.toFixed(8)}
選擇結果: 陣營 ${z}

系統準備完成...
正在載入遊戲...`),setTimeout(()=>{i(z),g(!1),k(!1)},2e3)},3e3)},500)};D.useEffect(()=>{h&&P()},[h]);const O=V=>{const j=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let z=0;z<j.length;z++){const[H,J,de]=j[z];if(V[H]&&V[H]===V[J]&&V[H]===V[de])return{winner:V[H],line:z,positions:[H,J,de]}}return null},R=V=>{const j=p?80:70,z=8;return{0:{top:j/2,left:0,width:"100%",height:"6px",transform:"translateY(-50%)"},1:{top:j*1.5+z,left:0,width:"100%",height:"6px",transform:"translateY(-50%)"},2:{top:j*2.5+z*2,left:0,width:"100%",height:"6px",transform:"translateY(-50%)"},3:{top:0,left:j/2,width:"6px",height:"100%",transform:"translateX(-50%)"},4:{top:0,left:j*1.5+z,width:"6px",height:"100%",transform:"translateX(-50%)"},5:{top:0,left:j*2.5+z*2,width:"6px",height:"100%",transform:"translateX(-50%)"},6:{top:"50%",left:"50%",width:"6px",height:"141%",transform:"translate(-50%, -50%) rotate(45deg)",transformOrigin:"center"},7:{top:"50%",left:"50%",width:"6px",height:"141%",transform:"translate(-50%, -50%) rotate(-45deg)",transformOrigin:"center"}}[V]},N=V=>{if(t[V]||c||h)return;const j=[...t],z={...o};if(j[V]=r,z[r]=[...z[r],V],z[r].length>3){const J=z[r].shift();j[J]=null}n(j),a(z);const H=O(j);H?(v(H.line),S(!0),setTimeout(()=>{l(H.winner),d(!0)},1e3)):i(r==="X"?"O":"X")},L=()=>{n(Array(9).fill(null)),i("X"),a({X:[],O:[]}),l(null),d(!1),v(null),S(!1),A(""),I(""),k(!1),g(!0)},B=()=>{e("/profile")};return y(B2e,{children:[u(vwe,{onClick:B,whileHover:{scale:1.1},whileTap:{scale:.9},title:"返回個人頁面",children:"←"}),u(Ft,{children:h&&u(xwe,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:y(ywe,{initial:{scale:.5},animate:{scale:1},transition:{duration:.5},children:[u(Cwe,{children:"電腦隨機選擇先手"}),y(bwe,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[u(wwe,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},children:C},C),u(Swe,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:_})]}),u(_we,{children:"系統正在生成隨機數據..."})]})})}),p&&!h&&y(F6,{player:"X",isActive:r==="X",initial:{x:-100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5},children:[u(B6,{player:"X",children:"陣營 X"}),u(q6,{children:[0,1,2].map(V=>u(W6,{player:"X",isActive:V<o.X.length,initial:{scale:0},animate:{scale:V<o.X.length?1:.5},transition:{duration:.3},children:"X"},V))})]}),!h&&y(z2e,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:[y(U2e,{children:[u(q2e,{children:"動態井字棋"}),u(W2e,{children:"每位玩家最多同時存在3顆棋子"})]}),y(G2e,{currentPlayer:r,layout:!0,transition:{duration:.3},children:["目前輪到：陣營 ",r]}),y(Y2e,{children:[u(X2e,{currentPlayer:r,initial:{x:r==="X"?-100:100,opacity:0,scale:.5},animate:{x:0,opacity:1,scale:1},exit:{x:r==="X"?100:-100,opacity:0,scale:.5},transition:{duration:.5},children:r},r),y(Q2e,{children:[u(Ft,{children:w&&m!==null&&u(Z2e,{winner:s,style:R(m),initial:{scaleX:0,scaleY:0},animate:{scaleX:1,scaleY:1},transition:{duration:.5}})}),t.map((V,j)=>u(rwe,{value:V,onClick:()=>N(j),disabled:V!==null||c||h,isDesktop:p,whileHover:{scale:V?1:1.05},whileTap:{scale:.95},initial:{opacity:0},animate:{opacity:1},transition:{duration:.2,delay:j*.05},children:u(Ft,{children:V&&u(Le.span,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{duration:.3},style:{display:"block",lineHeight:1,fontWeight:900},children:V==="X"?"✕":V==="O"?"◯":V})})},j))]})]}),y(iwe,{children:[y(z6,{player:"X",children:[u(V6,{player:"X",children:"陣營 X"}),u(j6,{children:[0,1,2].map(V=>u(U6,{player:"X",isActive:V<o.X.length,initial:{scale:0},animate:{scale:V<o.X.length?1:.5},transition:{duration:.2},children:"X"},V))})]}),y(z6,{player:"O",children:[u(V6,{player:"O",children:"陣營 O"}),u(j6,{children:[0,1,2].map(V=>u(U6,{player:"O",isActive:V<o.O.length,initial:{scale:0},animate:{scale:V<o.O.length?1:.5},transition:{duration:.2},children:"O"},V))})]})]}),y(H6,{children:[u(yg,{onClick:L,children:"重新開始"}),u(yg,{primary:!0,onClick:B,children:"返回主頁"})]})]}),p&&!h&&y(F6,{player:"O",isActive:r==="O",initial:{x:100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5},children:[u(B6,{player:"O",children:"陣營 O"}),u(q6,{children:[0,1,2].map(V=>u(W6,{player:"O",isActive:V<o.O.length,initial:{scale:0},animate:{scale:V<o.O.length?1:.5},transition:{duration:.3},children:"O"},V))})]}),u(Ft,{children:s&&u(pwe,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:y(hwe,{initial:{scale:.5,y:50},animate:{scale:1,y:0},exit:{scale:.5,y:50},transition:{duration:.3},children:[y(gwe,{winner:s,children:["陣營 ",s," 獲勝！"]}),u(mwe,{children:"恭喜成功連線三顆棋子！"}),y(H6,{children:[u(yg,{onClick:L,children:"再玩一次"}),u(yg,{primary:!0,onClick:B,children:"返回主頁"})]})]})})})]})};var _9={exports:{}};/*!
 * matter-js 0.20.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(e,t){(function(r,i){e.exports=i()})(_d,function(){return function(n){var r={};function i(o){if(r[o])return r[o].exports;var a=r[o]={i:o,l:!1,exports:{}};return n[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=n,i.c=r,i.d=function(o,a,s){i.o(o,a)||Object.defineProperty(o,a,{enumerable:!0,get:s})},i.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,a){if(a&1&&(o=i(o)),a&8||a&4&&typeof o=="object"&&o&&o.__esModule)return o;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:o}),a&2&&typeof o!="string")for(var l in o)i.d(s,l,(function(c){return o[c]}).bind(null,l));return s},i.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(a,"a",a),a},i.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},i.p="",i(i.s=20)}([function(n,r){var i={};n.exports=i,function(){i._baseDelta=1e3/60,i._nextId=0,i._seed=0,i._nowStartTime=+new Date,i._warnedOnce={},i._decomp=null,i.extend=function(a,s){var l,c;typeof s=="boolean"?(l=2,c=s):(l=1,c=!0);for(var d=l;d<arguments.length;d++){var p=arguments[d];if(p)for(var f in p)c&&p[f]&&p[f].constructor===Object&&(!a[f]||a[f].constructor===Object)?(a[f]=a[f]||{},i.extend(a[f],c,p[f])):a[f]=p[f]}return a},i.clone=function(a,s){return i.extend({},s,a)},i.keys=function(a){if(Object.keys)return Object.keys(a);var s=[];for(var l in a)s.push(l);return s},i.values=function(a){var s=[];if(Object.keys){for(var l=Object.keys(a),c=0;c<l.length;c++)s.push(a[l[c]]);return s}for(var d in a)s.push(a[d]);return s},i.get=function(a,s,l,c){s=s.split(".").slice(l,c);for(var d=0;d<s.length;d+=1)a=a[s[d]];return a},i.set=function(a,s,l,c,d){var p=s.split(".").slice(c,d);return i.get(a,s,0,-1)[p[p.length-1]]=l,l},i.shuffle=function(a){for(var s=a.length-1;s>0;s--){var l=Math.floor(i.random()*(s+1)),c=a[s];a[s]=a[l],a[l]=c}return a},i.choose=function(a){return a[Math.floor(i.random()*a.length)]},i.isElement=function(a){return typeof HTMLElement<"u"?a instanceof HTMLElement:!!(a&&a.nodeType&&a.nodeName)},i.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"},i.isFunction=function(a){return typeof a=="function"},i.isPlainObject=function(a){return typeof a=="object"&&a.constructor===Object},i.isString=function(a){return toString.call(a)==="[object String]"},i.clamp=function(a,s,l){return a<s?s:a>l?l:a},i.sign=function(a){return a<0?-1:1},i.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-i._nowStartTime},i.random=function(a,s){return a=typeof a<"u"?a:0,s=typeof s<"u"?s:1,a+o()*(s-a)};var o=function(){return i._seed=(i._seed*9301+49297)%233280,i._seed/233280};i.colorToNumber=function(a){return a=a.replace("#",""),a.length==3&&(a=a.charAt(0)+a.charAt(0)+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2)),parseInt(a,16)},i.logLevel=1,i.log=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.info=function(){console&&i.logLevel>0&&i.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warn=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warnOnce=function(){var a=Array.prototype.slice.call(arguments).join(" ");i._warnedOnce[a]||(i.warn(a),i._warnedOnce[a]=!0)},i.deprecated=function(a,s,l){a[s]=i.chain(function(){i.warnOnce("🔅 deprecated 🔅",l)},a[s])},i.nextId=function(){return i._nextId++},i.indexOf=function(a,s){if(a.indexOf)return a.indexOf(s);for(var l=0;l<a.length;l++)if(a[l]===s)return l;return-1},i.map=function(a,s){if(a.map)return a.map(s);for(var l=[],c=0;c<a.length;c+=1)l.push(s(a[c]));return l},i.topologicalSort=function(a){var s=[],l=[],c=[];for(var d in a)!l[d]&&!c[d]&&i._topologicalSort(d,l,c,a,s);return s},i._topologicalSort=function(a,s,l,c,d){var p=c[a]||[];l[a]=!0;for(var f=0;f<p.length;f+=1){var h=p[f];l[h]||s[h]||i._topologicalSort(h,s,l,c,d)}l[a]=!1,s[a]=!0,d.push(a)},i.chain=function(){for(var a=[],s=0;s<arguments.length;s+=1){var l=arguments[s];l._chained?a.push.apply(a,l._chained):a.push(l)}var c=function(){for(var d,p=new Array(arguments.length),f=0,h=arguments.length;f<h;f++)p[f]=arguments[f];for(f=0;f<a.length;f+=1){var g=a[f].apply(d,p);typeof g<"u"&&(d=g)}return d};return c._chained=a,c},i.chainPathBefore=function(a,s,l){return i.set(a,s,i.chain(l,i.get(a,s)))},i.chainPathAfter=function(a,s,l){return i.set(a,s,i.chain(i.get(a,s),l))},i.setDecomp=function(a){i._decomp=a},i.getDecomp=function(){var a=i._decomp;try{!a&&typeof window<"u"&&(a=window.decomp),!a&&typeof _d<"u"&&(a=_d.decomp)}catch{a=null}return a}}()},function(n,r){var i={};n.exports=i,function(){i.create=function(o){var a={min:{x:0,y:0},max:{x:0,y:0}};return o&&i.update(a,o),a},i.update=function(o,a,s){o.min.x=1/0,o.max.x=-1/0,o.min.y=1/0,o.max.y=-1/0;for(var l=0;l<a.length;l++){var c=a[l];c.x>o.max.x&&(o.max.x=c.x),c.x<o.min.x&&(o.min.x=c.x),c.y>o.max.y&&(o.max.y=c.y),c.y<o.min.y&&(o.min.y=c.y)}s&&(s.x>0?o.max.x+=s.x:o.min.x+=s.x,s.y>0?o.max.y+=s.y:o.min.y+=s.y)},i.contains=function(o,a){return a.x>=o.min.x&&a.x<=o.max.x&&a.y>=o.min.y&&a.y<=o.max.y},i.overlaps=function(o,a){return o.min.x<=a.max.x&&o.max.x>=a.min.x&&o.max.y>=a.min.y&&o.min.y<=a.max.y},i.translate=function(o,a){o.min.x+=a.x,o.max.x+=a.x,o.min.y+=a.y,o.max.y+=a.y},i.shift=function(o,a){var s=o.max.x-o.min.x,l=o.max.y-o.min.y;o.min.x=a.x,o.max.x=a.x+s,o.min.y=a.y,o.max.y=a.y+l}}()},function(n,r){var i={};n.exports=i,function(){i.create=function(o,a){return{x:o||0,y:a||0}},i.clone=function(o){return{x:o.x,y:o.y}},i.magnitude=function(o){return Math.sqrt(o.x*o.x+o.y*o.y)},i.magnitudeSquared=function(o){return o.x*o.x+o.y*o.y},i.rotate=function(o,a,s){var l=Math.cos(a),c=Math.sin(a);s||(s={});var d=o.x*l-o.y*c;return s.y=o.x*c+o.y*l,s.x=d,s},i.rotateAbout=function(o,a,s,l){var c=Math.cos(a),d=Math.sin(a);l||(l={});var p=s.x+((o.x-s.x)*c-(o.y-s.y)*d);return l.y=s.y+((o.x-s.x)*d+(o.y-s.y)*c),l.x=p,l},i.normalise=function(o){var a=i.magnitude(o);return a===0?{x:0,y:0}:{x:o.x/a,y:o.y/a}},i.dot=function(o,a){return o.x*a.x+o.y*a.y},i.cross=function(o,a){return o.x*a.y-o.y*a.x},i.cross3=function(o,a,s){return(a.x-o.x)*(s.y-o.y)-(a.y-o.y)*(s.x-o.x)},i.add=function(o,a,s){return s||(s={}),s.x=o.x+a.x,s.y=o.y+a.y,s},i.sub=function(o,a,s){return s||(s={}),s.x=o.x-a.x,s.y=o.y-a.y,s},i.mult=function(o,a){return{x:o.x*a,y:o.y*a}},i.div=function(o,a){return{x:o.x/a,y:o.y/a}},i.perp=function(o,a){return a=a===!0?-1:1,{x:a*-o.y,y:a*o.x}},i.neg=function(o){return{x:-o.x,y:-o.y}},i.angle=function(o,a){return Math.atan2(a.y-o.y,a.x-o.x)},i._temp=[i.create(),i.create(),i.create(),i.create(),i.create(),i.create()]}()},function(n,r,i){var o={};n.exports=o;var a=i(2),s=i(0);(function(){o.create=function(l,c){for(var d=[],p=0;p<l.length;p++){var f=l[p],h={x:f.x,y:f.y,index:p,body:c,isInternal:!1};d.push(h)}return d},o.fromPath=function(l,c){var d=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,p=[];return l.replace(d,function(f,h,g){p.push({x:parseFloat(h),y:parseFloat(g)})}),o.create(p,c)},o.centre=function(l){for(var c=o.area(l,!0),d={x:0,y:0},p,f,h,g=0;g<l.length;g++)h=(g+1)%l.length,p=a.cross(l[g],l[h]),f=a.mult(a.add(l[g],l[h]),p),d=a.add(d,f);return a.div(d,6*c)},o.mean=function(l){for(var c={x:0,y:0},d=0;d<l.length;d++)c.x+=l[d].x,c.y+=l[d].y;return a.div(c,l.length)},o.area=function(l,c){for(var d=0,p=l.length-1,f=0;f<l.length;f++)d+=(l[p].x-l[f].x)*(l[p].y+l[f].y),p=f;return c?d/2:Math.abs(d)/2},o.inertia=function(l,c){for(var d=0,p=0,f=l,h,g,m=0;m<f.length;m++)g=(m+1)%f.length,h=Math.abs(a.cross(f[g],f[m])),d+=h*(a.dot(f[g],f[g])+a.dot(f[g],f[m])+a.dot(f[m],f[m])),p+=h;return c/6*(d/p)},o.translate=function(l,c,d){d=typeof d<"u"?d:1;var p=l.length,f=c.x*d,h=c.y*d,g;for(g=0;g<p;g++)l[g].x+=f,l[g].y+=h;return l},o.rotate=function(l,c,d){if(c!==0){var p=Math.cos(c),f=Math.sin(c),h=d.x,g=d.y,m=l.length,v,w,S,C;for(C=0;C<m;C++)v=l[C],w=v.x-h,S=v.y-g,v.x=h+(w*p-S*f),v.y=g+(w*f+S*p);return l}},o.contains=function(l,c){for(var d=c.x,p=c.y,f=l.length,h=l[f-1],g,m=0;m<f;m++){if(g=l[m],(d-h.x)*(g.y-h.y)+(p-h.y)*(h.x-g.x)>0)return!1;h=g}return!0},o.scale=function(l,c,d,p){if(c===1&&d===1)return l;p=p||o.centre(l);for(var f,h,g=0;g<l.length;g++)f=l[g],h=a.sub(f,p),l[g].x=p.x+h.x*c,l[g].y=p.y+h.y*d;return l},o.chamfer=function(l,c,d,p,f){typeof c=="number"?c=[c]:c=c||[8],d=typeof d<"u"?d:-1,p=p||2,f=f||14;for(var h=[],g=0;g<l.length;g++){var m=l[g-1>=0?g-1:l.length-1],v=l[g],w=l[(g+1)%l.length],S=c[g<c.length?g:c.length-1];if(S===0){h.push(v);continue}var C=a.normalise({x:v.y-m.y,y:m.x-v.x}),A=a.normalise({x:w.y-v.y,y:v.x-w.x}),_=Math.sqrt(2*Math.pow(S,2)),I=a.mult(s.clone(C),S),E=a.normalise(a.mult(a.add(C,A),.5)),k=a.sub(v,a.mult(E,_)),T=d;d===-1&&(T=Math.pow(S,.32)*1.75),T=s.clamp(T,p,f),T%2===1&&(T+=1);for(var P=Math.acos(a.dot(C,A)),O=P/T,R=0;R<T;R++)h.push(a.add(a.rotate(I,O*R),k))}return h},o.clockwiseSort=function(l){var c=o.mean(l);return l.sort(function(d,p){return a.angle(c,d)-a.angle(c,p)}),l},o.isConvex=function(l){var c=0,d=l.length,p,f,h,g;if(d<3)return null;for(p=0;p<d;p++)if(f=(p+1)%d,h=(p+2)%d,g=(l[f].x-l[p].x)*(l[h].y-l[f].y),g-=(l[f].y-l[p].y)*(l[h].x-l[f].x),g<0?c|=1:g>0&&(c|=2),c===3)return!1;return c!==0?!0:null},o.hull=function(l){var c=[],d=[],p,f;for(l=l.slice(0),l.sort(function(h,g){var m=h.x-g.x;return m!==0?m:h.y-g.y}),f=0;f<l.length;f+=1){for(p=l[f];d.length>=2&&a.cross3(d[d.length-2],d[d.length-1],p)<=0;)d.pop();d.push(p)}for(f=l.length-1;f>=0;f-=1){for(p=l[f];c.length>=2&&a.cross3(c[c.length-2],c[c.length-1],p)<=0;)c.pop();c.push(p)}return c.pop(),d.pop(),c.concat(d)}})()},function(n,r,i){var o={};n.exports=o;var a=i(3),s=i(2),l=i(7),c=i(0),d=i(1),p=i(11);(function(){o._timeCorrection=!0,o._inertiaScale=4,o._nextCollidingGroupId=1,o._nextNonCollidingGroupId=-1,o._nextCategory=1,o._baseDelta=1e3/60,o.create=function(h){var g={id:c.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:a.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},m=c.extend(g,h);return f(m,h),m},o.nextGroup=function(h){return h?o._nextNonCollidingGroupId--:o._nextCollidingGroupId++},o.nextCategory=function(){return o._nextCategory=o._nextCategory<<1,o._nextCategory};var f=function(h,g){g=g||{},o.set(h,{bounds:h.bounds||d.create(h.vertices),positionPrev:h.positionPrev||s.clone(h.position),anglePrev:h.anglePrev||h.angle,vertices:h.vertices,parts:h.parts||[h],isStatic:h.isStatic,isSleeping:h.isSleeping,parent:h.parent||h}),a.rotate(h.vertices,h.angle,h.position),p.rotate(h.axes,h.angle),d.update(h.bounds,h.vertices,h.velocity),o.set(h,{axes:g.axes||h.axes,area:g.area||h.area,mass:g.mass||h.mass,inertia:g.inertia||h.inertia});var m=h.isStatic?"#14151f":c.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),v=h.isStatic?"#555":"#ccc",w=h.isStatic&&h.render.fillStyle===null?1:0;h.render.fillStyle=h.render.fillStyle||m,h.render.strokeStyle=h.render.strokeStyle||v,h.render.lineWidth=h.render.lineWidth||w,h.render.sprite.xOffset+=-(h.bounds.min.x-h.position.x)/(h.bounds.max.x-h.bounds.min.x),h.render.sprite.yOffset+=-(h.bounds.min.y-h.position.y)/(h.bounds.max.y-h.bounds.min.y)};o.set=function(h,g,m){var v;typeof g=="string"&&(v=g,g={},g[v]=m);for(v in g)if(Object.prototype.hasOwnProperty.call(g,v))switch(m=g[v],v){case"isStatic":o.setStatic(h,m);break;case"isSleeping":l.set(h,m);break;case"mass":o.setMass(h,m);break;case"density":o.setDensity(h,m);break;case"inertia":o.setInertia(h,m);break;case"vertices":o.setVertices(h,m);break;case"position":o.setPosition(h,m);break;case"angle":o.setAngle(h,m);break;case"velocity":o.setVelocity(h,m);break;case"angularVelocity":o.setAngularVelocity(h,m);break;case"speed":o.setSpeed(h,m);break;case"angularSpeed":o.setAngularSpeed(h,m);break;case"parts":o.setParts(h,m);break;case"centre":o.setCentre(h,m);break;default:h[v]=m}},o.setStatic=function(h,g){for(var m=0;m<h.parts.length;m++){var v=h.parts[m];g?(v.isStatic||(v._original={restitution:v.restitution,friction:v.friction,mass:v.mass,inertia:v.inertia,density:v.density,inverseMass:v.inverseMass,inverseInertia:v.inverseInertia}),v.restitution=0,v.friction=1,v.mass=v.inertia=v.density=1/0,v.inverseMass=v.inverseInertia=0,v.positionPrev.x=v.position.x,v.positionPrev.y=v.position.y,v.anglePrev=v.angle,v.angularVelocity=0,v.speed=0,v.angularSpeed=0,v.motion=0):v._original&&(v.restitution=v._original.restitution,v.friction=v._original.friction,v.mass=v._original.mass,v.inertia=v._original.inertia,v.density=v._original.density,v.inverseMass=v._original.inverseMass,v.inverseInertia=v._original.inverseInertia,v._original=null),v.isStatic=g}},o.setMass=function(h,g){var m=h.inertia/(h.mass/6);h.inertia=m*(g/6),h.inverseInertia=1/h.inertia,h.mass=g,h.inverseMass=1/h.mass,h.density=h.mass/h.area},o.setDensity=function(h,g){o.setMass(h,g*h.area),h.density=g},o.setInertia=function(h,g){h.inertia=g,h.inverseInertia=1/h.inertia},o.setVertices=function(h,g){g[0].body===h?h.vertices=g:h.vertices=a.create(g,h),h.axes=p.fromVertices(h.vertices),h.area=a.area(h.vertices),o.setMass(h,h.density*h.area);var m=a.centre(h.vertices);a.translate(h.vertices,m,-1),o.setInertia(h,o._inertiaScale*a.inertia(h.vertices,h.mass)),a.translate(h.vertices,h.position),d.update(h.bounds,h.vertices,h.velocity)},o.setParts=function(h,g,m){var v;for(g=g.slice(0),h.parts.length=0,h.parts.push(h),h.parent=h,v=0;v<g.length;v++){var w=g[v];w!==h&&(w.parent=h,h.parts.push(w))}if(h.parts.length!==1){if(m=typeof m<"u"?m:!0,m){var S=[];for(v=0;v<g.length;v++)S=S.concat(g[v].vertices);a.clockwiseSort(S);var C=a.hull(S),A=a.centre(C);o.setVertices(h,C),a.translate(h.vertices,A)}var _=o._totalProperties(h);h.area=_.area,h.parent=h,h.position.x=_.centre.x,h.position.y=_.centre.y,h.positionPrev.x=_.centre.x,h.positionPrev.y=_.centre.y,o.setMass(h,_.mass),o.setInertia(h,_.inertia),o.setPosition(h,_.centre)}},o.setCentre=function(h,g,m){m?(h.positionPrev.x+=g.x,h.positionPrev.y+=g.y,h.position.x+=g.x,h.position.y+=g.y):(h.positionPrev.x=g.x-(h.position.x-h.positionPrev.x),h.positionPrev.y=g.y-(h.position.y-h.positionPrev.y),h.position.x=g.x,h.position.y=g.y)},o.setPosition=function(h,g,m){var v=s.sub(g,h.position);m?(h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.velocity.x=v.x,h.velocity.y=v.y,h.speed=s.magnitude(v)):(h.positionPrev.x+=v.x,h.positionPrev.y+=v.y);for(var w=0;w<h.parts.length;w++){var S=h.parts[w];S.position.x+=v.x,S.position.y+=v.y,a.translate(S.vertices,v),d.update(S.bounds,S.vertices,h.velocity)}},o.setAngle=function(h,g,m){var v=g-h.angle;m?(h.anglePrev=h.angle,h.angularVelocity=v,h.angularSpeed=Math.abs(v)):h.anglePrev+=v;for(var w=0;w<h.parts.length;w++){var S=h.parts[w];S.angle+=v,a.rotate(S.vertices,v,h.position),p.rotate(S.axes,v),d.update(S.bounds,S.vertices,h.velocity),w>0&&s.rotateAbout(S.position,v,h.position,S.position)}},o.setVelocity=function(h,g){var m=h.deltaTime/o._baseDelta;h.positionPrev.x=h.position.x-g.x*m,h.positionPrev.y=h.position.y-g.y*m,h.velocity.x=(h.position.x-h.positionPrev.x)/m,h.velocity.y=(h.position.y-h.positionPrev.y)/m,h.speed=s.magnitude(h.velocity)},o.getVelocity=function(h){var g=o._baseDelta/h.deltaTime;return{x:(h.position.x-h.positionPrev.x)*g,y:(h.position.y-h.positionPrev.y)*g}},o.getSpeed=function(h){return s.magnitude(o.getVelocity(h))},o.setSpeed=function(h,g){o.setVelocity(h,s.mult(s.normalise(o.getVelocity(h)),g))},o.setAngularVelocity=function(h,g){var m=h.deltaTime/o._baseDelta;h.anglePrev=h.angle-g*m,h.angularVelocity=(h.angle-h.anglePrev)/m,h.angularSpeed=Math.abs(h.angularVelocity)},o.getAngularVelocity=function(h){return(h.angle-h.anglePrev)*o._baseDelta/h.deltaTime},o.getAngularSpeed=function(h){return Math.abs(o.getAngularVelocity(h))},o.setAngularSpeed=function(h,g){o.setAngularVelocity(h,c.sign(o.getAngularVelocity(h))*g)},o.translate=function(h,g,m){o.setPosition(h,s.add(h.position,g),m)},o.rotate=function(h,g,m,v){if(!m)o.setAngle(h,h.angle+g,v);else{var w=Math.cos(g),S=Math.sin(g),C=h.position.x-m.x,A=h.position.y-m.y;o.setPosition(h,{x:m.x+(C*w-A*S),y:m.y+(C*S+A*w)},v),o.setAngle(h,h.angle+g,v)}},o.scale=function(h,g,m,v){var w=0,S=0;v=v||h.position;for(var C=0;C<h.parts.length;C++){var A=h.parts[C];a.scale(A.vertices,g,m,v),A.axes=p.fromVertices(A.vertices),A.area=a.area(A.vertices),o.setMass(A,h.density*A.area),a.translate(A.vertices,{x:-A.position.x,y:-A.position.y}),o.setInertia(A,o._inertiaScale*a.inertia(A.vertices,A.mass)),a.translate(A.vertices,{x:A.position.x,y:A.position.y}),C>0&&(w+=A.area,S+=A.inertia),A.position.x=v.x+(A.position.x-v.x)*g,A.position.y=v.y+(A.position.y-v.y)*m,d.update(A.bounds,A.vertices,h.velocity)}h.parts.length>1&&(h.area=w,h.isStatic||(o.setMass(h,h.density*w),o.setInertia(h,S))),h.circleRadius&&(g===m?h.circleRadius*=g:h.circleRadius=null)},o.update=function(h,g){g=(typeof g<"u"?g:1e3/60)*h.timeScale;var m=g*g,v=o._timeCorrection?g/(h.deltaTime||g):1,w=1-h.frictionAir*(g/c._baseDelta),S=(h.position.x-h.positionPrev.x)*v,C=(h.position.y-h.positionPrev.y)*v;h.velocity.x=S*w+h.force.x/h.mass*m,h.velocity.y=C*w+h.force.y/h.mass*m,h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.position.x+=h.velocity.x,h.position.y+=h.velocity.y,h.deltaTime=g,h.angularVelocity=(h.angle-h.anglePrev)*w*v+h.torque/h.inertia*m,h.anglePrev=h.angle,h.angle+=h.angularVelocity;for(var A=0;A<h.parts.length;A++){var _=h.parts[A];a.translate(_.vertices,h.velocity),A>0&&(_.position.x+=h.velocity.x,_.position.y+=h.velocity.y),h.angularVelocity!==0&&(a.rotate(_.vertices,h.angularVelocity,h.position),p.rotate(_.axes,h.angularVelocity),A>0&&s.rotateAbout(_.position,h.angularVelocity,h.position,_.position)),d.update(_.bounds,_.vertices,h.velocity)}},o.updateVelocities=function(h){var g=o._baseDelta/h.deltaTime,m=h.velocity;m.x=(h.position.x-h.positionPrev.x)*g,m.y=(h.position.y-h.positionPrev.y)*g,h.speed=Math.sqrt(m.x*m.x+m.y*m.y),h.angularVelocity=(h.angle-h.anglePrev)*g,h.angularSpeed=Math.abs(h.angularVelocity)},o.applyForce=function(h,g,m){var v={x:g.x-h.position.x,y:g.y-h.position.y};h.force.x+=m.x,h.force.y+=m.y,h.torque+=v.x*m.y-v.y*m.x},o._totalProperties=function(h){for(var g={mass:0,area:0,inertia:0,centre:{x:0,y:0}},m=h.parts.length===1?0:1;m<h.parts.length;m++){var v=h.parts[m],w=v.mass!==1/0?v.mass:1;g.mass+=w,g.area+=v.area,g.inertia+=v.inertia,g.centre=s.add(g.centre,s.mult(v.position,w))}return g.centre=s.div(g.centre,g.mass),g}})()},function(n,r,i){var o={};n.exports=o;var a=i(0);(function(){o.on=function(s,l,c){for(var d=l.split(" "),p,f=0;f<d.length;f++)p=d[f],s.events=s.events||{},s.events[p]=s.events[p]||[],s.events[p].push(c);return c},o.off=function(s,l,c){if(!l){s.events={};return}typeof l=="function"&&(c=l,l=a.keys(s.events).join(" "));for(var d=l.split(" "),p=0;p<d.length;p++){var f=s.events[d[p]],h=[];if(c&&f)for(var g=0;g<f.length;g++)f[g]!==c&&h.push(f[g]);s.events[d[p]]=h}},o.trigger=function(s,l,c){var d,p,f,h,g=s.events;if(g&&a.keys(g).length>0){c||(c={}),d=l.split(" ");for(var m=0;m<d.length;m++)if(p=d[m],f=g[p],f){h=a.clone(c,!1),h.name=p,h.source=s;for(var v=0;v<f.length;v++)f[v].apply(s,[h])}}}})()},function(n,r,i){var o={};n.exports=o;var a=i(5),s=i(0),l=i(1),c=i(4);(function(){o.create=function(d){return s.extend({id:s.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},d)},o.setModified=function(d,p,f,h){if(d.isModified=p,p&&d.cache&&(d.cache.allBodies=null,d.cache.allConstraints=null,d.cache.allComposites=null),f&&d.parent&&o.setModified(d.parent,p,f,h),h)for(var g=0;g<d.composites.length;g++){var m=d.composites[g];o.setModified(m,p,f,h)}},o.add=function(d,p){var f=[].concat(p);a.trigger(d,"beforeAdd",{object:p});for(var h=0;h<f.length;h++){var g=f[h];switch(g.type){case"body":if(g.parent!==g){s.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}o.addBody(d,g);break;case"constraint":o.addConstraint(d,g);break;case"composite":o.addComposite(d,g);break;case"mouseConstraint":o.addConstraint(d,g.constraint);break}}return a.trigger(d,"afterAdd",{object:p}),d},o.remove=function(d,p,f){var h=[].concat(p);a.trigger(d,"beforeRemove",{object:p});for(var g=0;g<h.length;g++){var m=h[g];switch(m.type){case"body":o.removeBody(d,m,f);break;case"constraint":o.removeConstraint(d,m,f);break;case"composite":o.removeComposite(d,m,f);break;case"mouseConstraint":o.removeConstraint(d,m.constraint);break}}return a.trigger(d,"afterRemove",{object:p}),d},o.addComposite=function(d,p){return d.composites.push(p),p.parent=d,o.setModified(d,!0,!0,!1),d},o.removeComposite=function(d,p,f){var h=s.indexOf(d.composites,p);if(h!==-1){var g=o.allBodies(p);o.removeCompositeAt(d,h);for(var m=0;m<g.length;m++)g[m].sleepCounter=0}if(f)for(var m=0;m<d.composites.length;m++)o.removeComposite(d.composites[m],p,!0);return d},o.removeCompositeAt=function(d,p){return d.composites.splice(p,1),o.setModified(d,!0,!0,!1),d},o.addBody=function(d,p){return d.bodies.push(p),o.setModified(d,!0,!0,!1),d},o.removeBody=function(d,p,f){var h=s.indexOf(d.bodies,p);if(h!==-1&&(o.removeBodyAt(d,h),p.sleepCounter=0),f)for(var g=0;g<d.composites.length;g++)o.removeBody(d.composites[g],p,!0);return d},o.removeBodyAt=function(d,p){return d.bodies.splice(p,1),o.setModified(d,!0,!0,!1),d},o.addConstraint=function(d,p){return d.constraints.push(p),o.setModified(d,!0,!0,!1),d},o.removeConstraint=function(d,p,f){var h=s.indexOf(d.constraints,p);if(h!==-1&&o.removeConstraintAt(d,h),f)for(var g=0;g<d.composites.length;g++)o.removeConstraint(d.composites[g],p,!0);return d},o.removeConstraintAt=function(d,p){return d.constraints.splice(p,1),o.setModified(d,!0,!0,!1),d},o.clear=function(d,p,f){if(f)for(var h=0;h<d.composites.length;h++)o.clear(d.composites[h],p,!0);return p?d.bodies=d.bodies.filter(function(g){return g.isStatic}):d.bodies.length=0,d.constraints.length=0,d.composites.length=0,o.setModified(d,!0,!0,!1),d},o.allBodies=function(d){if(d.cache&&d.cache.allBodies)return d.cache.allBodies;for(var p=[].concat(d.bodies),f=0;f<d.composites.length;f++)p=p.concat(o.allBodies(d.composites[f]));return d.cache&&(d.cache.allBodies=p),p},o.allConstraints=function(d){if(d.cache&&d.cache.allConstraints)return d.cache.allConstraints;for(var p=[].concat(d.constraints),f=0;f<d.composites.length;f++)p=p.concat(o.allConstraints(d.composites[f]));return d.cache&&(d.cache.allConstraints=p),p},o.allComposites=function(d){if(d.cache&&d.cache.allComposites)return d.cache.allComposites;for(var p=[].concat(d.composites),f=0;f<d.composites.length;f++)p=p.concat(o.allComposites(d.composites[f]));return d.cache&&(d.cache.allComposites=p),p},o.get=function(d,p,f){var h,g;switch(f){case"body":h=o.allBodies(d);break;case"constraint":h=o.allConstraints(d);break;case"composite":h=o.allComposites(d).concat(d);break}return h?(g=h.filter(function(m){return m.id.toString()===p.toString()}),g.length===0?null:g[0]):null},o.move=function(d,p,f){return o.remove(d,p),o.add(f,p),d},o.rebase=function(d){for(var p=o.allBodies(d).concat(o.allConstraints(d)).concat(o.allComposites(d)),f=0;f<p.length;f++)p[f].id=s.nextId();return d},o.translate=function(d,p,f){for(var h=f?o.allBodies(d):d.bodies,g=0;g<h.length;g++)c.translate(h[g],p);return d},o.rotate=function(d,p,f,h){for(var g=Math.cos(p),m=Math.sin(p),v=h?o.allBodies(d):d.bodies,w=0;w<v.length;w++){var S=v[w],C=S.position.x-f.x,A=S.position.y-f.y;c.setPosition(S,{x:f.x+(C*g-A*m),y:f.y+(C*m+A*g)}),c.rotate(S,p)}return d},o.scale=function(d,p,f,h,g){for(var m=g?o.allBodies(d):d.bodies,v=0;v<m.length;v++){var w=m[v],S=w.position.x-h.x,C=w.position.y-h.y;c.setPosition(w,{x:h.x+S*p,y:h.y+C*f}),c.scale(w,p,f)}return d},o.bounds=function(d){for(var p=o.allBodies(d),f=[],h=0;h<p.length;h+=1){var g=p[h];f.push(g.bounds.min,g.bounds.max)}return l.create(f)}})()},function(n,r,i){var o={};n.exports=o;var a=i(4),s=i(5),l=i(0);(function(){o._motionWakeThreshold=.18,o._motionSleepThreshold=.08,o._minBias=.9,o.update=function(c,d){for(var p=d/l._baseDelta,f=o._motionSleepThreshold,h=0;h<c.length;h++){var g=c[h],m=a.getSpeed(g),v=a.getAngularSpeed(g),w=m*m+v*v;if(g.force.x!==0||g.force.y!==0){o.set(g,!1);continue}var S=Math.min(g.motion,w),C=Math.max(g.motion,w);g.motion=o._minBias*S+(1-o._minBias)*C,g.sleepThreshold>0&&g.motion<f?(g.sleepCounter+=1,g.sleepCounter>=g.sleepThreshold/p&&o.set(g,!0)):g.sleepCounter>0&&(g.sleepCounter-=1)}},o.afterCollisions=function(c){for(var d=o._motionSleepThreshold,p=0;p<c.length;p++){var f=c[p];if(f.isActive){var h=f.collision,g=h.bodyA.parent,m=h.bodyB.parent;if(!(g.isSleeping&&m.isSleeping||g.isStatic||m.isStatic)&&(g.isSleeping||m.isSleeping)){var v=g.isSleeping&&!g.isStatic?g:m,w=v===g?m:g;!v.isStatic&&w.motion>d&&o.set(v,!1)}}}},o.set=function(c,d){var p=c.isSleeping;d?(c.isSleeping=!0,c.sleepCounter=c.sleepThreshold,c.positionImpulse.x=0,c.positionImpulse.y=0,c.positionPrev.x=c.position.x,c.positionPrev.y=c.position.y,c.anglePrev=c.angle,c.speed=0,c.angularSpeed=0,c.motion=0,p||s.trigger(c,"sleepStart")):(c.isSleeping=!1,c.sleepCounter=0,p&&s.trigger(c,"sleepEnd"))}})()},function(n,r,i){var o={};n.exports=o;var a=i(3),s=i(9);(function(){var l=[],c={overlap:0,axis:null},d={overlap:0,axis:null};o.create=function(p,f){return{pair:null,collided:!1,bodyA:p,bodyB:f,parentA:p.parent,parentB:f.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},o.collides=function(p,f,h){if(o._overlapAxes(c,p.vertices,f.vertices,p.axes),c.overlap<=0||(o._overlapAxes(d,f.vertices,p.vertices,f.axes),d.overlap<=0))return null;var g=h&&h.table[s.id(p,f)],m;g?m=g.collision:(m=o.create(p,f),m.collided=!0,m.bodyA=p.id<f.id?p:f,m.bodyB=p.id<f.id?f:p,m.parentA=m.bodyA.parent,m.parentB=m.bodyB.parent),p=m.bodyA,f=m.bodyB;var v;c.overlap<d.overlap?v=c:v=d;var w=m.normal,S=m.tangent,C=m.penetration,A=m.supports,_=v.overlap,I=v.axis,E=I.x,k=I.y,T=f.position.x-p.position.x,P=f.position.y-p.position.y;E*T+k*P>=0&&(E=-E,k=-k),w.x=E,w.y=k,S.x=-k,S.y=E,C.x=E*_,C.y=k*_,m.depth=_;var O=o._findSupports(p,f,w,1),R=0;if(a.contains(p.vertices,O[0])&&(A[R++]=O[0]),a.contains(p.vertices,O[1])&&(A[R++]=O[1]),R<2){var N=o._findSupports(f,p,w,-1);a.contains(f.vertices,N[0])&&(A[R++]=N[0]),R<2&&a.contains(f.vertices,N[1])&&(A[R++]=N[1])}return R===0&&(A[R++]=O[0]),m.supportCount=R,m},o._overlapAxes=function(p,f,h,g){var m=f.length,v=h.length,w=f[0].x,S=f[0].y,C=h[0].x,A=h[0].y,_=g.length,I=Number.MAX_VALUE,E=0,k,T,P,O,R,N;for(R=0;R<_;R++){var L=g[R],B=L.x,V=L.y,j=w*B+S*V,z=C*B+A*V,H=j,J=z;for(N=1;N<m;N+=1)O=f[N].x*B+f[N].y*V,O>H?H=O:O<j&&(j=O);for(N=1;N<v;N+=1)O=h[N].x*B+h[N].y*V,O>J?J=O:O<z&&(z=O);if(T=H-z,P=J-j,k=T<P?T:P,k<I&&(I=k,E=R,k<=0))break}p.axis=g[E],p.overlap=I},o._findSupports=function(p,f,h,g){var m=f.vertices,v=m.length,w=p.position.x,S=p.position.y,C=h.x*g,A=h.y*g,_=m[0],I=_,E=C*(w-I.x)+A*(S-I.y),k,T,P;for(P=1;P<v;P+=1)I=m[P],T=C*(w-I.x)+A*(S-I.y),T<E&&(E=T,_=I);return k=m[(v+_.index-1)%v],E=C*(w-k.x)+A*(S-k.y),I=m[(_.index+1)%v],C*(w-I.x)+A*(S-I.y)<E?(l[0]=_,l[1]=I,l):(l[0]=_,l[1]=k,l)}})()},function(n,r,i){var o={};n.exports=o;var a=i(16);(function(){o.create=function(s,l){var c=s.bodyA,d=s.bodyB,p={id:o.id(c,d),bodyA:c,bodyB:d,collision:s,contacts:[a.create(),a.create()],contactCount:0,separation:0,isActive:!0,isSensor:c.isSensor||d.isSensor,timeCreated:l,timeUpdated:l,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return o.update(p,s,l),p},o.update=function(s,l,c){var d=l.supports,p=l.supportCount,f=s.contacts,h=l.parentA,g=l.parentB;s.isActive=!0,s.timeUpdated=c,s.collision=l,s.separation=l.depth,s.inverseMass=h.inverseMass+g.inverseMass,s.friction=h.friction<g.friction?h.friction:g.friction,s.frictionStatic=h.frictionStatic>g.frictionStatic?h.frictionStatic:g.frictionStatic,s.restitution=h.restitution>g.restitution?h.restitution:g.restitution,s.slop=h.slop>g.slop?h.slop:g.slop,s.contactCount=p,l.pair=s;var m=d[0],v=f[0],w=d[1],S=f[1];(S.vertex===m||v.vertex===w)&&(f[1]=v,f[0]=v=S,S=f[1]),v.vertex=m,S.vertex=w},o.setActive=function(s,l,c){l?(s.isActive=!0,s.timeUpdated=c):(s.isActive=!1,s.contactCount=0)},o.id=function(s,l){return s.id<l.id?s.id.toString(36)+":"+l.id.toString(36):l.id.toString(36)+":"+s.id.toString(36)}})()},function(n,r,i){var o={};n.exports=o;var a=i(3),s=i(2),l=i(7),c=i(1),d=i(11),p=i(0);(function(){o._warming=.4,o._torqueDampen=1,o._minLength=1e-6,o.create=function(f){var h=f;h.bodyA&&!h.pointA&&(h.pointA={x:0,y:0}),h.bodyB&&!h.pointB&&(h.pointB={x:0,y:0});var g=h.bodyA?s.add(h.bodyA.position,h.pointA):h.pointA,m=h.bodyB?s.add(h.bodyB.position,h.pointB):h.pointB,v=s.magnitude(s.sub(g,m));h.length=typeof h.length<"u"?h.length:v,h.id=h.id||p.nextId(),h.label=h.label||"Constraint",h.type="constraint",h.stiffness=h.stiffness||(h.length>0?1:.7),h.damping=h.damping||0,h.angularStiffness=h.angularStiffness||0,h.angleA=h.bodyA?h.bodyA.angle:h.angleA,h.angleB=h.bodyB?h.bodyB.angle:h.angleB,h.plugin={};var w={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return h.length===0&&h.stiffness>.1?(w.type="pin",w.anchors=!1):h.stiffness<.9&&(w.type="spring"),h.render=p.extend(w,h.render),h},o.preSolveAll=function(f){for(var h=0;h<f.length;h+=1){var g=f[h],m=g.constraintImpulse;g.isStatic||m.x===0&&m.y===0&&m.angle===0||(g.position.x+=m.x,g.position.y+=m.y,g.angle+=m.angle)}},o.solveAll=function(f,h){for(var g=p.clamp(h/p._baseDelta,0,1),m=0;m<f.length;m+=1){var v=f[m],w=!v.bodyA||v.bodyA&&v.bodyA.isStatic,S=!v.bodyB||v.bodyB&&v.bodyB.isStatic;(w||S)&&o.solve(f[m],g)}for(m=0;m<f.length;m+=1)v=f[m],w=!v.bodyA||v.bodyA&&v.bodyA.isStatic,S=!v.bodyB||v.bodyB&&v.bodyB.isStatic,!w&&!S&&o.solve(f[m],g)},o.solve=function(f,h){var g=f.bodyA,m=f.bodyB,v=f.pointA,w=f.pointB;if(!(!g&&!m)){g&&!g.isStatic&&(s.rotate(v,g.angle-f.angleA,v),f.angleA=g.angle),m&&!m.isStatic&&(s.rotate(w,m.angle-f.angleB,w),f.angleB=m.angle);var S=v,C=w;if(g&&(S=s.add(g.position,v)),m&&(C=s.add(m.position,w)),!(!S||!C)){var A=s.sub(S,C),_=s.magnitude(A);_<o._minLength&&(_=o._minLength);var I=(_-f.length)/_,E=f.stiffness>=1||f.length===0,k=E?f.stiffness*h:f.stiffness*h*h,T=f.damping*h,P=s.mult(A,I*k),O=(g?g.inverseMass:0)+(m?m.inverseMass:0),R=(g?g.inverseInertia:0)+(m?m.inverseInertia:0),N=O+R,L,B,V,j,z;if(T>0){var H=s.create();V=s.div(A,_),z=s.sub(m&&s.sub(m.position,m.positionPrev)||H,g&&s.sub(g.position,g.positionPrev)||H),j=s.dot(V,z)}g&&!g.isStatic&&(B=g.inverseMass/O,g.constraintImpulse.x-=P.x*B,g.constraintImpulse.y-=P.y*B,g.position.x-=P.x*B,g.position.y-=P.y*B,T>0&&(g.positionPrev.x-=T*V.x*j*B,g.positionPrev.y-=T*V.y*j*B),L=s.cross(v,P)/N*o._torqueDampen*g.inverseInertia*(1-f.angularStiffness),g.constraintImpulse.angle-=L,g.angle-=L),m&&!m.isStatic&&(B=m.inverseMass/O,m.constraintImpulse.x+=P.x*B,m.constraintImpulse.y+=P.y*B,m.position.x+=P.x*B,m.position.y+=P.y*B,T>0&&(m.positionPrev.x+=T*V.x*j*B,m.positionPrev.y+=T*V.y*j*B),L=s.cross(w,P)/N*o._torqueDampen*m.inverseInertia*(1-f.angularStiffness),m.constraintImpulse.angle+=L,m.angle+=L)}}},o.postSolveAll=function(f){for(var h=0;h<f.length;h++){var g=f[h],m=g.constraintImpulse;if(!(g.isStatic||m.x===0&&m.y===0&&m.angle===0)){l.set(g,!1);for(var v=0;v<g.parts.length;v++){var w=g.parts[v];a.translate(w.vertices,m),v>0&&(w.position.x+=m.x,w.position.y+=m.y),m.angle!==0&&(a.rotate(w.vertices,m.angle,g.position),d.rotate(w.axes,m.angle),v>0&&s.rotateAbout(w.position,m.angle,g.position,w.position)),c.update(w.bounds,w.vertices,g.velocity)}m.angle*=o._warming,m.x*=o._warming,m.y*=o._warming}}},o.pointAWorld=function(f){return{x:(f.bodyA?f.bodyA.position.x:0)+(f.pointA?f.pointA.x:0),y:(f.bodyA?f.bodyA.position.y:0)+(f.pointA?f.pointA.y:0)}},o.pointBWorld=function(f){return{x:(f.bodyB?f.bodyB.position.x:0)+(f.pointB?f.pointB.x:0),y:(f.bodyB?f.bodyB.position.y:0)+(f.pointB?f.pointB.y:0)}},o.currentLength=function(f){var h=(f.bodyA?f.bodyA.position.x:0)+(f.pointA?f.pointA.x:0),g=(f.bodyA?f.bodyA.position.y:0)+(f.pointA?f.pointA.y:0),m=(f.bodyB?f.bodyB.position.x:0)+(f.pointB?f.pointB.x:0),v=(f.bodyB?f.bodyB.position.y:0)+(f.pointB?f.pointB.y:0),w=h-m,S=g-v;return Math.sqrt(w*w+S*S)}})()},function(n,r,i){var o={};n.exports=o;var a=i(2),s=i(0);(function(){o.fromVertices=function(l){for(var c={},d=0;d<l.length;d++){var p=(d+1)%l.length,f=a.normalise({x:l[p].y-l[d].y,y:l[d].x-l[p].x}),h=f.y===0?1/0:f.x/f.y;h=h.toFixed(3).toString(),c[h]=f}return s.values(c)},o.rotate=function(l,c){if(c!==0)for(var d=Math.cos(c),p=Math.sin(c),f=0;f<l.length;f++){var h=l[f],g;g=h.x*d-h.y*p,h.y=h.x*p+h.y*d,h.x=g}}})()},function(n,r,i){var o={};n.exports=o;var a=i(3),s=i(0),l=i(4),c=i(1),d=i(2);(function(){o.rectangle=function(p,f,h,g,m){m=m||{};var v={label:"Rectangle Body",position:{x:p,y:f},vertices:a.fromPath("L 0 0 L "+h+" 0 L "+h+" "+g+" L 0 "+g)};if(m.chamfer){var w=m.chamfer;v.vertices=a.chamfer(v.vertices,w.radius,w.quality,w.qualityMin,w.qualityMax),delete m.chamfer}return l.create(s.extend({},v,m))},o.trapezoid=function(p,f,h,g,m,v){v=v||{},m>=1&&s.warn("Bodies.trapezoid: slope parameter must be < 1."),m*=.5;var w=(1-m*2)*h,S=h*m,C=S+w,A=C+S,_;m<.5?_="L 0 0 L "+S+" "+-g+" L "+C+" "+-g+" L "+A+" 0":_="L 0 0 L "+C+" "+-g+" L "+A+" 0";var I={label:"Trapezoid Body",position:{x:p,y:f},vertices:a.fromPath(_)};if(v.chamfer){var E=v.chamfer;I.vertices=a.chamfer(I.vertices,E.radius,E.quality,E.qualityMin,E.qualityMax),delete v.chamfer}return l.create(s.extend({},I,v))},o.circle=function(p,f,h,g,m){g=g||{};var v={label:"Circle Body",circleRadius:h};m=m||25;var w=Math.ceil(Math.max(10,Math.min(m,h)));return w%2===1&&(w+=1),o.polygon(p,f,w,h,s.extend({},v,g))},o.polygon=function(p,f,h,g,m){if(m=m||{},h<3)return o.circle(p,f,g,m);for(var v=2*Math.PI/h,w="",S=v*.5,C=0;C<h;C+=1){var A=S+C*v,_=Math.cos(A)*g,I=Math.sin(A)*g;w+="L "+_.toFixed(3)+" "+I.toFixed(3)+" "}var E={label:"Polygon Body",position:{x:p,y:f},vertices:a.fromPath(w)};if(m.chamfer){var k=m.chamfer;E.vertices=a.chamfer(E.vertices,k.radius,k.quality,k.qualityMin,k.qualityMax),delete m.chamfer}return l.create(s.extend({},E,m))},o.fromVertices=function(p,f,h,g,m,v,w,S){var C=s.getDecomp(),A,_,I,E,k,T,P,O,R,N,L;for(A=!!(C&&C.quickDecomp),g=g||{},I=[],m=typeof m<"u"?m:!1,v=typeof v<"u"?v:.01,w=typeof w<"u"?w:10,S=typeof S<"u"?S:.01,s.isArray(h[0])||(h=[h]),N=0;N<h.length;N+=1)if(T=h[N],E=a.isConvex(T),k=!E,k&&!A&&s.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),E||!A)E?T=a.clockwiseSort(T):T=a.hull(T),I.push({position:{x:p,y:f},vertices:T});else{var B=T.map(function(K){return[K.x,K.y]});C.makeCCW(B),v!==!1&&C.removeCollinearPoints(B,v),S!==!1&&C.removeDuplicatePoints&&C.removeDuplicatePoints(B,S);var V=C.quickDecomp(B);for(P=0;P<V.length;P++){var j=V[P],z=j.map(function(K){return{x:K[0],y:K[1]}});w>0&&a.area(z)<w||I.push({position:a.centre(z),vertices:z})}}for(P=0;P<I.length;P++)I[P]=l.create(s.extend(I[P],g));if(m){var H=5;for(P=0;P<I.length;P++){var J=I[P];for(O=P+1;O<I.length;O++){var de=I[O];if(c.overlaps(J.bounds,de.bounds)){var ae=J.vertices,Ce=de.vertices;for(R=0;R<J.vertices.length;R++)for(L=0;L<de.vertices.length;L++){var te=d.magnitudeSquared(d.sub(ae[(R+1)%ae.length],Ce[L])),G=d.magnitudeSquared(d.sub(ae[R],Ce[(L+1)%Ce.length]));te<H&&G<H&&(ae[R].isInternal=!0,Ce[L].isInternal=!0)}}}}}return I.length>1?(_=l.create(s.extend({parts:I.slice(0)},g)),l.setPosition(_,{x:p,y:f}),_):I[0]}})()},function(n,r,i){var o={};n.exports=o;var a=i(0),s=i(8);(function(){o.create=function(l){var c={bodies:[],collisions:[],pairs:null};return a.extend(c,l)},o.setBodies=function(l,c){l.bodies=c.slice(0)},o.clear=function(l){l.bodies=[],l.collisions=[]},o.collisions=function(l){var c=l.pairs,d=l.bodies,p=d.length,f=o.canCollide,h=s.collides,g=l.collisions,m=0,v,w;for(d.sort(o._compareBoundsX),v=0;v<p;v++){var S=d[v],C=S.bounds,A=S.bounds.max.x,_=S.bounds.max.y,I=S.bounds.min.y,E=S.isStatic||S.isSleeping,k=S.parts.length,T=k===1;for(w=v+1;w<p;w++){var P=d[w],O=P.bounds;if(O.min.x>A)break;if(!(_<O.min.y||I>O.max.y)&&!(E&&(P.isStatic||P.isSleeping))&&f(S.collisionFilter,P.collisionFilter)){var R=P.parts.length;if(T&&R===1){var N=h(S,P,c);N&&(g[m++]=N)}else for(var L=k>1?1:0,B=R>1?1:0,V=L;V<k;V++)for(var j=S.parts[V],C=j.bounds,z=B;z<R;z++){var H=P.parts[z],O=H.bounds;if(!(C.min.x>O.max.x||C.max.x<O.min.x||C.max.y<O.min.y||C.min.y>O.max.y)){var N=h(j,H,c);N&&(g[m++]=N)}}}}}return g.length!==m&&(g.length=m),g},o.canCollide=function(l,c){return l.group===c.group&&l.group!==0?l.group>0:(l.mask&c.category)!==0&&(c.mask&l.category)!==0},o._compareBoundsX=function(l,c){return l.bounds.min.x-c.bounds.min.x}})()},function(n,r,i){var o={};n.exports=o;var a=i(0);(function(){o.create=function(s){var l={};return s||a.log("Mouse.create: element was undefined, defaulting to document.body","warn"),l.element=s||document.body,l.absolute={x:0,y:0},l.position={x:0,y:0},l.mousedownPosition={x:0,y:0},l.mouseupPosition={x:0,y:0},l.offset={x:0,y:0},l.scale={x:1,y:1},l.wheelDelta=0,l.button=-1,l.pixelRatio=parseInt(l.element.getAttribute("data-pixel-ratio"),10)||1,l.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},l.mousemove=function(c){var d=o._getRelativeMousePosition(c,l.element,l.pixelRatio),p=c.changedTouches;p&&(l.button=0,c.preventDefault()),l.absolute.x=d.x,l.absolute.y=d.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y,l.sourceEvents.mousemove=c},l.mousedown=function(c){var d=o._getRelativeMousePosition(c,l.element,l.pixelRatio),p=c.changedTouches;p?(l.button=0,c.preventDefault()):l.button=c.button,l.absolute.x=d.x,l.absolute.y=d.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y,l.mousedownPosition.x=l.position.x,l.mousedownPosition.y=l.position.y,l.sourceEvents.mousedown=c},l.mouseup=function(c){var d=o._getRelativeMousePosition(c,l.element,l.pixelRatio),p=c.changedTouches;p&&c.preventDefault(),l.button=-1,l.absolute.x=d.x,l.absolute.y=d.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y,l.mouseupPosition.x=l.position.x,l.mouseupPosition.y=l.position.y,l.sourceEvents.mouseup=c},l.mousewheel=function(c){l.wheelDelta=Math.max(-1,Math.min(1,c.wheelDelta||-c.detail)),c.preventDefault(),l.sourceEvents.mousewheel=c},o.setElement(l,l.element),l},o.setElement=function(s,l){s.element=l,l.addEventListener("mousemove",s.mousemove,{passive:!0}),l.addEventListener("mousedown",s.mousedown,{passive:!0}),l.addEventListener("mouseup",s.mouseup,{passive:!0}),l.addEventListener("wheel",s.mousewheel,{passive:!1}),l.addEventListener("touchmove",s.mousemove,{passive:!1}),l.addEventListener("touchstart",s.mousedown,{passive:!1}),l.addEventListener("touchend",s.mouseup,{passive:!1})},o.clearSourceEvents=function(s){s.sourceEvents.mousemove=null,s.sourceEvents.mousedown=null,s.sourceEvents.mouseup=null,s.sourceEvents.mousewheel=null,s.wheelDelta=0},o.setOffset=function(s,l){s.offset.x=l.x,s.offset.y=l.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y},o.setScale=function(s,l){s.scale.x=l.x,s.scale.y=l.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y},o._getRelativeMousePosition=function(s,l,c){var d=l.getBoundingClientRect(),p=document.documentElement||document.body.parentNode||document.body,f=window.pageXOffset!==void 0?window.pageXOffset:p.scrollLeft,h=window.pageYOffset!==void 0?window.pageYOffset:p.scrollTop,g=s.changedTouches,m,v;return g?(m=g[0].pageX-d.left-f,v=g[0].pageY-d.top-h):(m=s.pageX-d.left-f,v=s.pageY-d.top-h),{x:m/(l.clientWidth/(l.width||l.clientWidth)*c),y:v/(l.clientHeight/(l.height||l.clientHeight)*c)}}})()},function(n,r,i){var o={};n.exports=o;var a=i(0);(function(){o._registry={},o.register=function(s){if(o.isPlugin(s)||a.warn("Plugin.register:",o.toString(s),"does not implement all required fields."),s.name in o._registry){var l=o._registry[s.name],c=o.versionParse(s.version).number,d=o.versionParse(l.version).number;c>d?(a.warn("Plugin.register:",o.toString(l),"was upgraded to",o.toString(s)),o._registry[s.name]=s):c<d?a.warn("Plugin.register:",o.toString(l),"can not be downgraded to",o.toString(s)):s!==l&&a.warn("Plugin.register:",o.toString(s),"is already registered to different plugin object")}else o._registry[s.name]=s;return s},o.resolve=function(s){return o._registry[o.dependencyParse(s).name]},o.toString=function(s){return typeof s=="string"?s:(s.name||"anonymous")+"@"+(s.version||s.range||"0.0.0")},o.isPlugin=function(s){return s&&s.name&&s.version&&s.install},o.isUsed=function(s,l){return s.used.indexOf(l)>-1},o.isFor=function(s,l){var c=s.for&&o.dependencyParse(s.for);return!s.for||l.name===c.name&&o.versionSatisfies(l.version,c.range)},o.use=function(s,l){if(s.uses=(s.uses||[]).concat(l||[]),s.uses.length===0){a.warn("Plugin.use:",o.toString(s),"does not specify any dependencies to install.");return}for(var c=o.dependencies(s),d=a.topologicalSort(c),p=[],f=0;f<d.length;f+=1)if(d[f]!==s.name){var h=o.resolve(d[f]);if(!h){p.push("❌ "+d[f]);continue}o.isUsed(s,h.name)||(o.isFor(h,s)||(a.warn("Plugin.use:",o.toString(h),"is for",h.for,"but installed on",o.toString(s)+"."),h._warned=!0),h.install?h.install(s):(a.warn("Plugin.use:",o.toString(h),"does not specify an install function."),h._warned=!0),h._warned?(p.push("🔶 "+o.toString(h)),delete h._warned):p.push("✅ "+o.toString(h)),s.used.push(h.name))}p.length>0&&a.info(p.join("  "))},o.dependencies=function(s,l){var c=o.dependencyParse(s),d=c.name;if(l=l||{},!(d in l)){s=o.resolve(s)||s,l[d]=a.map(s.uses||[],function(f){o.isPlugin(f)&&o.register(f);var h=o.dependencyParse(f),g=o.resolve(f);return g&&!o.versionSatisfies(g.version,h.range)?(a.warn("Plugin.dependencies:",o.toString(g),"does not satisfy",o.toString(h),"used by",o.toString(c)+"."),g._warned=!0,s._warned=!0):g||(a.warn("Plugin.dependencies:",o.toString(f),"used by",o.toString(c),"could not be resolved."),s._warned=!0),h.name});for(var p=0;p<l[d].length;p+=1)o.dependencies(l[d][p],l);return l}},o.dependencyParse=function(s){if(a.isString(s)){var l=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return l.test(s)||a.warn("Plugin.dependencyParse:",s,"is not a valid dependency string."),{name:s.split("@")[0],range:s.split("@")[1]||"*"}}return{name:s.name,range:s.range||s.version}},o.versionParse=function(s){var l=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;l.test(s)||a.warn("Plugin.versionParse:",s,"is not a valid version or range.");var c=l.exec(s),d=Number(c[4]),p=Number(c[5]),f=Number(c[6]);return{isRange:!!(c[1]||c[2]),version:c[3],range:s,operator:c[1]||c[2]||"",major:d,minor:p,patch:f,parts:[d,p,f],prerelease:c[7],number:d*1e8+p*1e4+f}},o.versionSatisfies=function(s,l){l=l||"*";var c=o.versionParse(l),d=o.versionParse(s);if(c.isRange){if(c.operator==="*"||s==="*")return!0;if(c.operator===">")return d.number>c.number;if(c.operator===">=")return d.number>=c.number;if(c.operator==="~")return d.major===c.major&&d.minor===c.minor&&d.patch>=c.patch;if(c.operator==="^")return c.major>0?d.major===c.major&&d.number>=c.number:c.minor>0?d.minor===c.minor&&d.patch>=c.patch:d.patch===c.patch}return s===l||s==="*"}})()},function(n,r){var i={};n.exports=i,function(){i.create=function(o){return{vertex:o,normalImpulse:0,tangentImpulse:0}}}()},function(n,r,i){var o={};n.exports=o;var a=i(7),s=i(18),l=i(13),c=i(19),d=i(5),p=i(6),f=i(10),h=i(0),g=i(4);(function(){o._deltaMax=1e3/60,o.create=function(m){m=m||{};var v={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},w=h.extend(v,m);return w.world=m.world||p.create({label:"World"}),w.pairs=m.pairs||c.create(),w.detector=m.detector||l.create(),w.detector.pairs=w.pairs,w.grid={buckets:[]},w.world.gravity=w.gravity,w.broadphase=w.grid,w.metrics={},w},o.update=function(m,v){var w=h.now(),S=m.world,C=m.detector,A=m.pairs,_=m.timing,I=_.timestamp,E;v>o._deltaMax&&h.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",o._deltaMax.toFixed(3),"ms."),v=typeof v<"u"?v:h._baseDelta,v*=_.timeScale,_.timestamp+=v,_.lastDelta=v;var k={timestamp:_.timestamp,delta:v};d.trigger(m,"beforeUpdate",k);var T=p.allBodies(S),P=p.allConstraints(S);for(S.isModified&&(l.setBodies(C,T),p.setModified(S,!1,!1,!0)),m.enableSleeping&&a.update(T,v),o._bodiesApplyGravity(T,m.gravity),v>0&&o._bodiesUpdate(T,v),d.trigger(m,"beforeSolve",k),f.preSolveAll(T),E=0;E<m.constraintIterations;E++)f.solveAll(P,v);f.postSolveAll(T);var O=l.collisions(C);c.update(A,O,I),m.enableSleeping&&a.afterCollisions(A.list),A.collisionStart.length>0&&d.trigger(m,"collisionStart",{pairs:A.collisionStart,timestamp:_.timestamp,delta:v});var R=h.clamp(20/m.positionIterations,0,1);for(s.preSolvePosition(A.list),E=0;E<m.positionIterations;E++)s.solvePosition(A.list,v,R);for(s.postSolvePosition(T),f.preSolveAll(T),E=0;E<m.constraintIterations;E++)f.solveAll(P,v);for(f.postSolveAll(T),s.preSolveVelocity(A.list),E=0;E<m.velocityIterations;E++)s.solveVelocity(A.list,v);return o._bodiesUpdateVelocities(T),A.collisionActive.length>0&&d.trigger(m,"collisionActive",{pairs:A.collisionActive,timestamp:_.timestamp,delta:v}),A.collisionEnd.length>0&&d.trigger(m,"collisionEnd",{pairs:A.collisionEnd,timestamp:_.timestamp,delta:v}),o._bodiesClearForces(T),d.trigger(m,"afterUpdate",k),m.timing.lastElapsed=h.now()-w,m},o.merge=function(m,v){if(h.extend(m,v),v.world){m.world=v.world,o.clear(m);for(var w=p.allBodies(m.world),S=0;S<w.length;S++){var C=w[S];a.set(C,!1),C.id=h.nextId()}}},o.clear=function(m){c.clear(m.pairs),l.clear(m.detector)},o._bodiesClearForces=function(m){for(var v=m.length,w=0;w<v;w++){var S=m[w];S.force.x=0,S.force.y=0,S.torque=0}},o._bodiesApplyGravity=function(m,v){var w=typeof v.scale<"u"?v.scale:.001,S=m.length;if(!(v.x===0&&v.y===0||w===0))for(var C=0;C<S;C++){var A=m[C];A.isStatic||A.isSleeping||(A.force.y+=A.mass*v.y*w,A.force.x+=A.mass*v.x*w)}},o._bodiesUpdate=function(m,v){for(var w=m.length,S=0;S<w;S++){var C=m[S];C.isStatic||C.isSleeping||g.update(C,v)}},o._bodiesUpdateVelocities=function(m){for(var v=m.length,w=0;w<v;w++)g.updateVelocities(m[w])}})()},function(n,r,i){var o={};n.exports=o;var a=i(3),s=i(0),l=i(1);(function(){o._restingThresh=2,o._restingThreshTangent=Math.sqrt(6),o._positionDampen=.9,o._positionWarming=.8,o._frictionNormalMultiplier=5,o._frictionMaxStatic=Number.MAX_VALUE,o.preSolvePosition=function(c){var d,p,f,h=c.length;for(d=0;d<h;d++)p=c[d],p.isActive&&(f=p.contactCount,p.collision.parentA.totalContacts+=f,p.collision.parentB.totalContacts+=f)},o.solvePosition=function(c,d,p){var f,h,g,m,v,w,S,C,A=o._positionDampen*(p||1),_=s.clamp(d/s._baseDelta,0,1),I=c.length;for(f=0;f<I;f++)h=c[f],!(!h.isActive||h.isSensor)&&(g=h.collision,m=g.parentA,v=g.parentB,w=g.normal,h.separation=g.depth+w.x*(v.positionImpulse.x-m.positionImpulse.x)+w.y*(v.positionImpulse.y-m.positionImpulse.y));for(f=0;f<I;f++)h=c[f],!(!h.isActive||h.isSensor)&&(g=h.collision,m=g.parentA,v=g.parentB,w=g.normal,C=h.separation-h.slop*_,(m.isStatic||v.isStatic)&&(C*=2),m.isStatic||m.isSleeping||(S=A/m.totalContacts,m.positionImpulse.x+=w.x*C*S,m.positionImpulse.y+=w.y*C*S),v.isStatic||v.isSleeping||(S=A/v.totalContacts,v.positionImpulse.x-=w.x*C*S,v.positionImpulse.y-=w.y*C*S))},o.postSolvePosition=function(c){for(var d=o._positionWarming,p=c.length,f=a.translate,h=l.update,g=0;g<p;g++){var m=c[g],v=m.positionImpulse,w=v.x,S=v.y,C=m.velocity;if(m.totalContacts=0,w!==0||S!==0){for(var A=0;A<m.parts.length;A++){var _=m.parts[A];f(_.vertices,v),h(_.bounds,_.vertices,C),_.position.x+=w,_.position.y+=S}m.positionPrev.x+=w,m.positionPrev.y+=S,w*C.x+S*C.y<0?(v.x=0,v.y=0):(v.x*=d,v.y*=d)}}},o.preSolveVelocity=function(c){var d=c.length,p,f;for(p=0;p<d;p++){var h=c[p];if(!(!h.isActive||h.isSensor)){var g=h.contacts,m=h.contactCount,v=h.collision,w=v.parentA,S=v.parentB,C=v.normal,A=v.tangent;for(f=0;f<m;f++){var _=g[f],I=_.vertex,E=_.normalImpulse,k=_.tangentImpulse;if(E!==0||k!==0){var T=C.x*E+A.x*k,P=C.y*E+A.y*k;w.isStatic||w.isSleeping||(w.positionPrev.x+=T*w.inverseMass,w.positionPrev.y+=P*w.inverseMass,w.anglePrev+=w.inverseInertia*((I.x-w.position.x)*P-(I.y-w.position.y)*T)),S.isStatic||S.isSleeping||(S.positionPrev.x-=T*S.inverseMass,S.positionPrev.y-=P*S.inverseMass,S.anglePrev-=S.inverseInertia*((I.x-S.position.x)*P-(I.y-S.position.y)*T))}}}}},o.solveVelocity=function(c,d){var p=d/s._baseDelta,f=p*p,h=f*p,g=-o._restingThresh*p,m=o._restingThreshTangent,v=o._frictionNormalMultiplier*p,w=o._frictionMaxStatic,S=c.length,C,A,_,I;for(_=0;_<S;_++){var E=c[_];if(!(!E.isActive||E.isSensor)){var k=E.collision,T=k.parentA,P=k.parentB,O=k.normal.x,R=k.normal.y,N=k.tangent.x,L=k.tangent.y,B=E.inverseMass,V=E.friction*E.frictionStatic*v,j=E.contacts,z=E.contactCount,H=1/z,J=T.position.x-T.positionPrev.x,de=T.position.y-T.positionPrev.y,ae=T.angle-T.anglePrev,Ce=P.position.x-P.positionPrev.x,te=P.position.y-P.positionPrev.y,G=P.angle-P.anglePrev;for(I=0;I<z;I++){var K=j[I],me=K.vertex,ye=me.x-T.position.x,ee=me.y-T.position.y,oe=me.x-P.position.x,he=me.y-P.position.y,we=J-ee*ae,W=de+ye*ae,ge=Ce-he*G,fe=te+oe*G,ve=we-ge,ce=W-fe,De=O*ve+R*ce,He=N*ve+L*ce,Ue=E.separation+De,et=Math.min(Ue,1);et=Ue<0?0:et;var pt=et*V;He<-pt||He>pt?(A=He>0?He:-He,C=E.friction*(He>0?1:-1)*h,C<-A?C=-A:C>A&&(C=A)):(C=He,A=w);var jt=ye*R-ee*O,Rt=oe*R-he*O,ln=H/(B+T.inverseInertia*jt*jt+P.inverseInertia*Rt*Rt),gt=(1+E.restitution)*De*ln;if(C*=ln,De<g)K.normalImpulse=0;else{var wt=K.normalImpulse;K.normalImpulse+=gt,K.normalImpulse>0&&(K.normalImpulse=0),gt=K.normalImpulse-wt}if(He<-m||He>m)K.tangentImpulse=0;else{var at=K.tangentImpulse;K.tangentImpulse+=C,K.tangentImpulse<-A&&(K.tangentImpulse=-A),K.tangentImpulse>A&&(K.tangentImpulse=A),C=K.tangentImpulse-at}var _t=O*gt+N*C,Ht=R*gt+L*C;T.isStatic||T.isSleeping||(T.positionPrev.x+=_t*T.inverseMass,T.positionPrev.y+=Ht*T.inverseMass,T.anglePrev+=(ye*Ht-ee*_t)*T.inverseInertia),P.isStatic||P.isSleeping||(P.positionPrev.x-=_t*P.inverseMass,P.positionPrev.y-=Ht*P.inverseMass,P.anglePrev-=(oe*Ht-he*_t)*P.inverseInertia)}}}}})()},function(n,r,i){var o={};n.exports=o;var a=i(9),s=i(0);(function(){o.create=function(l){return s.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},l)},o.update=function(l,c,d){var p=a.update,f=a.create,h=a.setActive,g=l.table,m=l.list,v=m.length,w=v,S=l.collisionStart,C=l.collisionEnd,A=l.collisionActive,_=c.length,I=0,E=0,k=0,T,P,O;for(O=0;O<_;O++)T=c[O],P=T.pair,P?(P.isActive&&(A[k++]=P),p(P,T,d)):(P=f(T,d),g[P.id]=P,S[I++]=P,m[w++]=P);for(w=0,v=m.length,O=0;O<v;O++)P=m[O],P.timeUpdated>=d?m[w++]=P:(h(P,!1,d),P.collision.bodyA.sleepCounter>0&&P.collision.bodyB.sleepCounter>0?m[w++]=P:(C[E++]=P,delete g[P.id]));m.length!==w&&(m.length=w),S.length!==I&&(S.length=I),C.length!==E&&(C.length=E),A.length!==k&&(A.length=k)},o.clear=function(l){return l.table={},l.list.length=0,l.collisionStart.length=0,l.collisionActive.length=0,l.collisionEnd.length=0,l}})()},function(n,r,i){var o=n.exports=i(21);o.Axes=i(11),o.Bodies=i(12),o.Body=i(4),o.Bounds=i(1),o.Collision=i(8),o.Common=i(0),o.Composite=i(6),o.Composites=i(22),o.Constraint=i(10),o.Contact=i(16),o.Detector=i(13),o.Engine=i(17),o.Events=i(5),o.Grid=i(23),o.Mouse=i(14),o.MouseConstraint=i(24),o.Pair=i(9),o.Pairs=i(19),o.Plugin=i(15),o.Query=i(25),o.Render=i(26),o.Resolver=i(18),o.Runner=i(27),o.SAT=i(28),o.Sleeping=i(7),o.Svg=i(29),o.Vector=i(2),o.Vertices=i(3),o.World=i(30),o.Engine.run=o.Runner.run,o.Common.deprecated(o.Engine,"run","Engine.run ➤ use Matter.Runner.run(engine) instead")},function(n,r,i){var o={};n.exports=o;var a=i(15),s=i(0);(function(){o.name="matter-js",o.version="0.20.0",o.uses=[],o.used=[],o.use=function(){a.use(o,Array.prototype.slice.call(arguments))},o.before=function(l,c){return l=l.replace(/^Matter./,""),s.chainPathBefore(o,l,c)},o.after=function(l,c){return l=l.replace(/^Matter./,""),s.chainPathAfter(o,l,c)}})()},function(n,r,i){var o={};n.exports=o;var a=i(6),s=i(10),l=i(0),c=i(4),d=i(12),p=l.deprecated;(function(){o.stack=function(f,h,g,m,v,w,S){for(var C=a.create({label:"Stack"}),A=f,_=h,I,E=0,k=0;k<m;k++){for(var T=0,P=0;P<g;P++){var O=S(A,_,P,k,I,E);if(O){var R=O.bounds.max.y-O.bounds.min.y,N=O.bounds.max.x-O.bounds.min.x;R>T&&(T=R),c.translate(O,{x:N*.5,y:R*.5}),A=O.bounds.max.x+v,a.addBody(C,O),I=O,E+=1}else A+=v}_+=T+w,A=f}return C},o.chain=function(f,h,g,m,v,w){for(var S=f.bodies,C=1;C<S.length;C++){var A=S[C-1],_=S[C],I=A.bounds.max.y-A.bounds.min.y,E=A.bounds.max.x-A.bounds.min.x,k=_.bounds.max.y-_.bounds.min.y,T=_.bounds.max.x-_.bounds.min.x,P={bodyA:A,pointA:{x:E*h,y:I*g},bodyB:_,pointB:{x:T*m,y:k*v}},O=l.extend(P,w);a.addConstraint(f,s.create(O))}return f.label+=" Chain",f},o.mesh=function(f,h,g,m,v){var w=f.bodies,S,C,A,_,I;for(S=0;S<g;S++){for(C=1;C<h;C++)A=w[C-1+S*h],_=w[C+S*h],a.addConstraint(f,s.create(l.extend({bodyA:A,bodyB:_},v)));if(S>0)for(C=0;C<h;C++)A=w[C+(S-1)*h],_=w[C+S*h],a.addConstraint(f,s.create(l.extend({bodyA:A,bodyB:_},v))),m&&C>0&&(I=w[C-1+(S-1)*h],a.addConstraint(f,s.create(l.extend({bodyA:I,bodyB:_},v)))),m&&C<h-1&&(I=w[C+1+(S-1)*h],a.addConstraint(f,s.create(l.extend({bodyA:I,bodyB:_},v))))}return f.label+=" Mesh",f},o.pyramid=function(f,h,g,m,v,w,S){return o.stack(f,h,g,m,v,w,function(C,A,_,I,E,k){var T=Math.min(m,Math.ceil(g/2)),P=E?E.bounds.max.x-E.bounds.min.x:0;if(!(I>T)){I=T-I;var O=I,R=g-1-I;if(!(_<O||_>R)){k===1&&c.translate(E,{x:(_+(g%2===1?1:-1))*P,y:0});var N=E?_*P:0;return S(f+N+_*v,A,_,I,E,k)}}})},o.newtonsCradle=function(f,h,g,m,v){for(var w=a.create({label:"Newtons Cradle"}),S=0;S<g;S++){var C=1.9,A=d.circle(f+S*(m*C),h+v,m,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),_=s.create({pointA:{x:f+S*(m*C),y:h},bodyB:A});a.addBody(w,A),a.addConstraint(w,_)}return w},p(o,"newtonsCradle","Composites.newtonsCradle ➤ moved to newtonsCradle example"),o.car=function(f,h,g,m,v){var w=c.nextGroup(!0),S=20,C=-g*.5+S,A=g*.5-S,_=0,I=a.create({label:"Car"}),E=d.rectangle(f,h,g,m,{collisionFilter:{group:w},chamfer:{radius:m*.5},density:2e-4}),k=d.circle(f+C,h+_,v,{collisionFilter:{group:w},friction:.8}),T=d.circle(f+A,h+_,v,{collisionFilter:{group:w},friction:.8}),P=s.create({bodyB:E,pointB:{x:C,y:_},bodyA:k,stiffness:1,length:0}),O=s.create({bodyB:E,pointB:{x:A,y:_},bodyA:T,stiffness:1,length:0});return a.addBody(I,E),a.addBody(I,k),a.addBody(I,T),a.addConstraint(I,P),a.addConstraint(I,O),I},p(o,"car","Composites.car ➤ moved to car example"),o.softBody=function(f,h,g,m,v,w,S,C,A,_){A=l.extend({inertia:1/0},A),_=l.extend({stiffness:.2,render:{type:"line",anchors:!1}},_);var I=o.stack(f,h,g,m,v,w,function(E,k){return d.circle(E,k,C,A)});return o.mesh(I,g,m,S,_),I.label="Soft Body",I},p(o,"softBody","Composites.softBody ➤ moved to softBody and cloth examples")})()},function(n,r,i){var o={};n.exports=o;var a=i(9),s=i(0),l=s.deprecated;(function(){o.create=function(c){var d={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return s.extend(d,c)},o.update=function(c,d,p,f){var h,g,m,v=p.world,w=c.buckets,S,C,A=!1;for(h=0;h<d.length;h++){var _=d[h];if(!(_.isSleeping&&!f)&&!(v.bounds&&(_.bounds.max.x<v.bounds.min.x||_.bounds.min.x>v.bounds.max.x||_.bounds.max.y<v.bounds.min.y||_.bounds.min.y>v.bounds.max.y))){var I=o._getRegion(c,_);if(!_.region||I.id!==_.region.id||f){(!_.region||f)&&(_.region=I);var E=o._regionUnion(I,_.region);for(g=E.startCol;g<=E.endCol;g++)for(m=E.startRow;m<=E.endRow;m++){C=o._getBucketId(g,m),S=w[C];var k=g>=I.startCol&&g<=I.endCol&&m>=I.startRow&&m<=I.endRow,T=g>=_.region.startCol&&g<=_.region.endCol&&m>=_.region.startRow&&m<=_.region.endRow;!k&&T&&T&&S&&o._bucketRemoveBody(c,S,_),(_.region===I||k&&!T||f)&&(S||(S=o._createBucket(w,C)),o._bucketAddBody(c,S,_))}_.region=I,A=!0}}}A&&(c.pairsList=o._createActivePairsList(c))},l(o,"update","Grid.update ➤ replaced by Matter.Detector"),o.clear=function(c){c.buckets={},c.pairs={},c.pairsList=[]},l(o,"clear","Grid.clear ➤ replaced by Matter.Detector"),o._regionUnion=function(c,d){var p=Math.min(c.startCol,d.startCol),f=Math.max(c.endCol,d.endCol),h=Math.min(c.startRow,d.startRow),g=Math.max(c.endRow,d.endRow);return o._createRegion(p,f,h,g)},o._getRegion=function(c,d){var p=d.bounds,f=Math.floor(p.min.x/c.bucketWidth),h=Math.floor(p.max.x/c.bucketWidth),g=Math.floor(p.min.y/c.bucketHeight),m=Math.floor(p.max.y/c.bucketHeight);return o._createRegion(f,h,g,m)},o._createRegion=function(c,d,p,f){return{id:c+","+d+","+p+","+f,startCol:c,endCol:d,startRow:p,endRow:f}},o._getBucketId=function(c,d){return"C"+c+"R"+d},o._createBucket=function(c,d){var p=c[d]=[];return p},o._bucketAddBody=function(c,d,p){var f=c.pairs,h=a.id,g=d.length,m;for(m=0;m<g;m++){var v=d[m];if(!(p.id===v.id||p.isStatic&&v.isStatic)){var w=h(p,v),S=f[w];S?S[2]+=1:f[w]=[p,v,1]}}d.push(p)},o._bucketRemoveBody=function(c,d,p){var f=c.pairs,h=a.id,g;d.splice(s.indexOf(d,p),1);var m=d.length;for(g=0;g<m;g++){var v=f[h(p,d[g])];v&&(v[2]-=1)}},o._createActivePairsList=function(c){var d,p=c.pairs,f=s.keys(p),h=f.length,g=[],m;for(m=0;m<h;m++)d=p[f[m]],d[2]>0?g.push(d):delete p[f[m]];return g}})()},function(n,r,i){var o={};n.exports=o;var a=i(3),s=i(7),l=i(14),c=i(5),d=i(13),p=i(10),f=i(6),h=i(0),g=i(1);(function(){o.create=function(m,v){var w=(m?m.mouse:null)||(v?v.mouse:null);w||(m&&m.render&&m.render.canvas?w=l.create(m.render.canvas):v&&v.element?w=l.create(v.element):(w=l.create(),h.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var S=p.create({label:"Mouse Constraint",pointA:w.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),C={type:"mouseConstraint",mouse:w,element:null,body:null,constraint:S,collisionFilter:{category:1,mask:4294967295,group:0}},A=h.extend(C,v);return c.on(m,"beforeUpdate",function(){var _=f.allBodies(m.world);o.update(A,_),o._triggerEvents(A)}),A},o.update=function(m,v){var w=m.mouse,S=m.constraint,C=m.body;if(w.button===0){if(S.bodyB)s.set(S.bodyB,!1),S.pointA=w.position;else for(var A=0;A<v.length;A++)if(C=v[A],g.contains(C.bounds,w.position)&&d.canCollide(C.collisionFilter,m.collisionFilter))for(var _=C.parts.length>1?1:0;_<C.parts.length;_++){var I=C.parts[_];if(a.contains(I.vertices,w.position)){S.pointA=w.position,S.bodyB=m.body=C,S.pointB={x:w.position.x-C.position.x,y:w.position.y-C.position.y},S.angleB=C.angle,s.set(C,!1),c.trigger(m,"startdrag",{mouse:w,body:C});break}}}else S.bodyB=m.body=null,S.pointB=null,C&&c.trigger(m,"enddrag",{mouse:w,body:C})},o._triggerEvents=function(m){var v=m.mouse,w=v.sourceEvents;w.mousemove&&c.trigger(m,"mousemove",{mouse:v}),w.mousedown&&c.trigger(m,"mousedown",{mouse:v}),w.mouseup&&c.trigger(m,"mouseup",{mouse:v}),l.clearSourceEvents(v)}})()},function(n,r,i){var o={};n.exports=o;var a=i(2),s=i(8),l=i(1),c=i(12),d=i(3);(function(){o.collides=function(p,f){for(var h=[],g=f.length,m=p.bounds,v=s.collides,w=l.overlaps,S=0;S<g;S++){var C=f[S],A=C.parts.length,_=A===1?0:1;if(w(C.bounds,m))for(var I=_;I<A;I++){var E=C.parts[I];if(w(E.bounds,m)){var k=v(E,p);if(k){h.push(k);break}}}}return h},o.ray=function(p,f,h,g){g=g||1e-100;for(var m=a.angle(f,h),v=a.magnitude(a.sub(f,h)),w=(h.x+f.x)*.5,S=(h.y+f.y)*.5,C=c.rectangle(w,S,v,g,{angle:m}),A=o.collides(C,p),_=0;_<A.length;_+=1){var I=A[_];I.body=I.bodyB=I.bodyA}return A},o.region=function(p,f,h){for(var g=[],m=0;m<p.length;m++){var v=p[m],w=l.overlaps(v.bounds,f);(w&&!h||!w&&h)&&g.push(v)}return g},o.point=function(p,f){for(var h=[],g=0;g<p.length;g++){var m=p[g];if(l.contains(m.bounds,f))for(var v=m.parts.length===1?0:1;v<m.parts.length;v++){var w=m.parts[v];if(l.contains(w.bounds,f)&&d.contains(w.vertices,f)){h.push(m);break}}}return h}})()},function(n,r,i){var o={};n.exports=o;var a=i(4),s=i(0),l=i(6),c=i(1),d=i(5),p=i(2),f=i(14);(function(){var h,g;typeof window<"u"&&(h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(_){window.setTimeout(function(){_(s.now())},1e3/60)},g=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),o._goodFps=30,o._goodDelta=1e3/60,o.create=function(_){var I={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],engineUpdatesHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",wireframeStrokeStyle:"#bbb",hasBounds:!!_.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},E=s.extend(I,_);return E.canvas&&(E.canvas.width=E.options.width||E.canvas.width,E.canvas.height=E.options.height||E.canvas.height),E.mouse=_.mouse,E.engine=_.engine,E.canvas=E.canvas||w(E.options.width,E.options.height),E.context=E.canvas.getContext("2d"),E.textures={},E.bounds=E.bounds||{min:{x:0,y:0},max:{x:E.canvas.width,y:E.canvas.height}},E.controller=o,E.options.showBroadphase=!1,E.options.pixelRatio!==1&&o.setPixelRatio(E,E.options.pixelRatio),s.isElement(E.element)&&E.element.appendChild(E.canvas),E},o.run=function(_){(function I(E){_.frameRequestId=h(I),m(_,E),o.world(_,E),_.context.setTransform(_.options.pixelRatio,0,0,_.options.pixelRatio,0,0),(_.options.showStats||_.options.showDebug)&&o.stats(_,_.context,E),(_.options.showPerformance||_.options.showDebug)&&o.performance(_,_.context,E),_.context.setTransform(1,0,0,1,0,0)})()},o.stop=function(_){g(_.frameRequestId)},o.setPixelRatio=function(_,I){var E=_.options,k=_.canvas;I==="auto"&&(I=S(k)),E.pixelRatio=I,k.setAttribute("data-pixel-ratio",I),k.width=E.width*I,k.height=E.height*I,k.style.width=E.width+"px",k.style.height=E.height+"px"},o.setSize=function(_,I,E){_.options.width=I,_.options.height=E,_.bounds.max.x=_.bounds.min.x+I,_.bounds.max.y=_.bounds.min.y+E,_.options.pixelRatio!==1?o.setPixelRatio(_,_.options.pixelRatio):(_.canvas.width=I,_.canvas.height=E)},o.lookAt=function(_,I,E,k){k=typeof k<"u"?k:!0,I=s.isArray(I)?I:[I],E=E||{x:0,y:0};for(var T={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},P=0;P<I.length;P+=1){var O=I[P],R=O.bounds?O.bounds.min:O.min||O.position||O,N=O.bounds?O.bounds.max:O.max||O.position||O;R&&N&&(R.x<T.min.x&&(T.min.x=R.x),N.x>T.max.x&&(T.max.x=N.x),R.y<T.min.y&&(T.min.y=R.y),N.y>T.max.y&&(T.max.y=N.y))}var L=T.max.x-T.min.x+2*E.x,B=T.max.y-T.min.y+2*E.y,V=_.canvas.height,j=_.canvas.width,z=j/V,H=L/B,J=1,de=1;H>z?de=H/z:J=z/H,_.options.hasBounds=!0,_.bounds.min.x=T.min.x,_.bounds.max.x=T.min.x+L*J,_.bounds.min.y=T.min.y,_.bounds.max.y=T.min.y+B*de,k&&(_.bounds.min.x+=L*.5-L*J*.5,_.bounds.max.x+=L*.5-L*J*.5,_.bounds.min.y+=B*.5-B*de*.5,_.bounds.max.y+=B*.5-B*de*.5),_.bounds.min.x-=E.x,_.bounds.max.x-=E.x,_.bounds.min.y-=E.y,_.bounds.max.y-=E.y,_.mouse&&(f.setScale(_.mouse,{x:(_.bounds.max.x-_.bounds.min.x)/_.canvas.width,y:(_.bounds.max.y-_.bounds.min.y)/_.canvas.height}),f.setOffset(_.mouse,_.bounds.min))},o.startViewTransform=function(_){var I=_.bounds.max.x-_.bounds.min.x,E=_.bounds.max.y-_.bounds.min.y,k=I/_.options.width,T=E/_.options.height;_.context.setTransform(_.options.pixelRatio/k,0,0,_.options.pixelRatio/T,0,0),_.context.translate(-_.bounds.min.x,-_.bounds.min.y)},o.endViewTransform=function(_){_.context.setTransform(_.options.pixelRatio,0,0,_.options.pixelRatio,0,0)},o.world=function(_,I){var E=s.now(),k=_.engine,T=k.world,P=_.canvas,O=_.context,R=_.options,N=_.timing,L=l.allBodies(T),B=l.allConstraints(T),V=R.wireframes?R.wireframeBackground:R.background,j=[],z=[],H,J={timestamp:k.timing.timestamp};if(d.trigger(_,"beforeRender",J),_.currentBackground!==V&&A(_,V),O.globalCompositeOperation="source-in",O.fillStyle="transparent",O.fillRect(0,0,P.width,P.height),O.globalCompositeOperation="source-over",R.hasBounds){for(H=0;H<L.length;H++){var de=L[H];c.overlaps(de.bounds,_.bounds)&&j.push(de)}for(H=0;H<B.length;H++){var ae=B[H],Ce=ae.bodyA,te=ae.bodyB,G=ae.pointA,K=ae.pointB;Ce&&(G=p.add(Ce.position,ae.pointA)),te&&(K=p.add(te.position,ae.pointB)),!(!G||!K)&&(c.contains(_.bounds,G)||c.contains(_.bounds,K))&&z.push(ae)}o.startViewTransform(_),_.mouse&&(f.setScale(_.mouse,{x:(_.bounds.max.x-_.bounds.min.x)/_.options.width,y:(_.bounds.max.y-_.bounds.min.y)/_.options.height}),f.setOffset(_.mouse,_.bounds.min))}else z=B,j=L,_.options.pixelRatio!==1&&_.context.setTransform(_.options.pixelRatio,0,0,_.options.pixelRatio,0,0);!R.wireframes||k.enableSleeping&&R.showSleeping?o.bodies(_,j,O):(R.showConvexHulls&&o.bodyConvexHulls(_,j,O),o.bodyWireframes(_,j,O)),R.showBounds&&o.bodyBounds(_,j,O),(R.showAxes||R.showAngleIndicator)&&o.bodyAxes(_,j,O),R.showPositions&&o.bodyPositions(_,j,O),R.showVelocity&&o.bodyVelocity(_,j,O),R.showIds&&o.bodyIds(_,j,O),R.showSeparations&&o.separations(_,k.pairs.list,O),R.showCollisions&&o.collisions(_,k.pairs.list,O),R.showVertexNumbers&&o.vertexNumbers(_,j,O),R.showMousePosition&&o.mousePosition(_,_.mouse,O),o.constraints(z,O),R.hasBounds&&o.endViewTransform(_),d.trigger(_,"afterRender",J),N.lastElapsed=s.now()-E},o.stats=function(_,I,E){for(var k=_.engine,T=k.world,P=l.allBodies(T),O=0,R=55,N=44,L=0,B=0,V=0;V<P.length;V+=1)O+=P[V].parts.length;var j={Part:O,Body:P.length,Cons:l.allConstraints(T).length,Comp:l.allComposites(T).length,Pair:k.pairs.list.length};I.fillStyle="#0e0f19",I.fillRect(L,B,R*5.5,N),I.font="12px Arial",I.textBaseline="top",I.textAlign="right";for(var z in j){var H=j[z];I.fillStyle="#aaa",I.fillText(z,L+R,B+8),I.fillStyle="#eee",I.fillText(H,L+R,B+26),L+=R}},o.performance=function(_,I){var E=_.engine,k=_.timing,T=k.deltaHistory,P=k.elapsedHistory,O=k.timestampElapsedHistory,R=k.engineDeltaHistory,N=k.engineUpdatesHistory,L=k.engineElapsedHistory,B=E.timing.lastUpdatesPerFrame,V=E.timing.lastDelta,j=v(T),z=v(P),H=v(R),J=v(N),de=v(L),ae=v(O),Ce=ae/j||0,te=Math.round(j/V),G=1e3/j||0,K=4,me=12,ye=60,ee=34,oe=10,he=69;I.fillStyle="#0e0f19",I.fillRect(0,50,me*5+ye*6+22,ee),o.status(I,oe,he,ye,K,T.length,Math.round(G)+" fps",G/o._goodFps,function(we){return T[we]/j-1}),o.status(I,oe+me+ye,he,ye,K,R.length,V.toFixed(2)+" dt",o._goodDelta/V,function(we){return R[we]/H-1}),o.status(I,oe+(me+ye)*2,he,ye,K,N.length,B+" upf",Math.pow(s.clamp(J/te||1,0,1),4),function(we){return N[we]/J-1}),o.status(I,oe+(me+ye)*3,he,ye,K,L.length,de.toFixed(2)+" ut",1-B*de/o._goodFps,function(we){return L[we]/de-1}),o.status(I,oe+(me+ye)*4,he,ye,K,P.length,z.toFixed(2)+" rt",1-z/o._goodFps,function(we){return P[we]/z-1}),o.status(I,oe+(me+ye)*5,he,ye,K,O.length,Ce.toFixed(2)+" x",Ce*Ce*Ce,function(we){return(O[we]/T[we]/Ce||0)-1})},o.status=function(_,I,E,k,T,P,O,R,N){_.strokeStyle="#888",_.fillStyle="#444",_.lineWidth=1,_.fillRect(I,E+7,k,1),_.beginPath(),_.moveTo(I,E+7-T*s.clamp(.4*N(0),-2,2));for(var L=0;L<k;L+=1)_.lineTo(I+L,E+7-(L<P?T*s.clamp(.4*N(L),-2,2):0));_.stroke(),_.fillStyle="hsl("+s.clamp(25+95*R,0,120)+",100%,60%)",_.fillRect(I,E-7,4,4),_.font="12px Arial",_.textBaseline="middle",_.textAlign="right",_.fillStyle="#eee",_.fillText(O,I+k,E-5)},o.constraints=function(_,I){for(var E=I,k=0;k<_.length;k++){var T=_[k];if(!(!T.render.visible||!T.pointA||!T.pointB)){var P=T.bodyA,O=T.bodyB,R,N;if(P?R=p.add(P.position,T.pointA):R=T.pointA,T.render.type==="pin")E.beginPath(),E.arc(R.x,R.y,3,0,2*Math.PI),E.closePath();else{if(O?N=p.add(O.position,T.pointB):N=T.pointB,E.beginPath(),E.moveTo(R.x,R.y),T.render.type==="spring")for(var L=p.sub(N,R),B=p.perp(p.normalise(L)),V=Math.ceil(s.clamp(T.length/5,12,20)),j,z=1;z<V;z+=1)j=z%2===0?1:-1,E.lineTo(R.x+L.x*(z/V)+B.x*j*4,R.y+L.y*(z/V)+B.y*j*4);E.lineTo(N.x,N.y)}T.render.lineWidth&&(E.lineWidth=T.render.lineWidth,E.strokeStyle=T.render.strokeStyle,E.stroke()),T.render.anchors&&(E.fillStyle=T.render.strokeStyle,E.beginPath(),E.arc(R.x,R.y,3,0,2*Math.PI),E.arc(N.x,N.y,3,0,2*Math.PI),E.closePath(),E.fill())}}},o.bodies=function(_,I,E){var k=E;_.engine;var T=_.options,P=T.showInternalEdges||!T.wireframes,O,R,N,L;for(N=0;N<I.length;N++)if(O=I[N],!!O.render.visible){for(L=O.parts.length>1?1:0;L<O.parts.length;L++)if(R=O.parts[L],!!R.render.visible){if(T.showSleeping&&O.isSleeping?k.globalAlpha=.5*R.render.opacity:R.render.opacity!==1&&(k.globalAlpha=R.render.opacity),R.render.sprite&&R.render.sprite.texture&&!T.wireframes){var B=R.render.sprite,V=C(_,B.texture);k.translate(R.position.x,R.position.y),k.rotate(R.angle),k.drawImage(V,V.width*-B.xOffset*B.xScale,V.height*-B.yOffset*B.yScale,V.width*B.xScale,V.height*B.yScale),k.rotate(-R.angle),k.translate(-R.position.x,-R.position.y)}else{if(R.circleRadius)k.beginPath(),k.arc(R.position.x,R.position.y,R.circleRadius,0,2*Math.PI);else{k.beginPath(),k.moveTo(R.vertices[0].x,R.vertices[0].y);for(var j=1;j<R.vertices.length;j++)!R.vertices[j-1].isInternal||P?k.lineTo(R.vertices[j].x,R.vertices[j].y):k.moveTo(R.vertices[j].x,R.vertices[j].y),R.vertices[j].isInternal&&!P&&k.moveTo(R.vertices[(j+1)%R.vertices.length].x,R.vertices[(j+1)%R.vertices.length].y);k.lineTo(R.vertices[0].x,R.vertices[0].y),k.closePath()}T.wireframes?(k.lineWidth=1,k.strokeStyle=_.options.wireframeStrokeStyle,k.stroke()):(k.fillStyle=R.render.fillStyle,R.render.lineWidth&&(k.lineWidth=R.render.lineWidth,k.strokeStyle=R.render.strokeStyle,k.stroke()),k.fill())}k.globalAlpha=1}}},o.bodyWireframes=function(_,I,E){var k=E,T=_.options.showInternalEdges,P,O,R,N,L;for(k.beginPath(),R=0;R<I.length;R++)if(P=I[R],!!P.render.visible)for(L=P.parts.length>1?1:0;L<P.parts.length;L++){for(O=P.parts[L],k.moveTo(O.vertices[0].x,O.vertices[0].y),N=1;N<O.vertices.length;N++)!O.vertices[N-1].isInternal||T?k.lineTo(O.vertices[N].x,O.vertices[N].y):k.moveTo(O.vertices[N].x,O.vertices[N].y),O.vertices[N].isInternal&&!T&&k.moveTo(O.vertices[(N+1)%O.vertices.length].x,O.vertices[(N+1)%O.vertices.length].y);k.lineTo(O.vertices[0].x,O.vertices[0].y)}k.lineWidth=1,k.strokeStyle=_.options.wireframeStrokeStyle,k.stroke()},o.bodyConvexHulls=function(_,I,E){var k=E,T,P,O;for(k.beginPath(),P=0;P<I.length;P++)if(T=I[P],!(!T.render.visible||T.parts.length===1)){for(k.moveTo(T.vertices[0].x,T.vertices[0].y),O=1;O<T.vertices.length;O++)k.lineTo(T.vertices[O].x,T.vertices[O].y);k.lineTo(T.vertices[0].x,T.vertices[0].y)}k.lineWidth=1,k.strokeStyle="rgba(255,255,255,0.2)",k.stroke()},o.vertexNumbers=function(_,I,E){var k=E,T,P,O;for(T=0;T<I.length;T++){var R=I[T].parts;for(O=R.length>1?1:0;O<R.length;O++){var N=R[O];for(P=0;P<N.vertices.length;P++)k.fillStyle="rgba(255,255,255,0.2)",k.fillText(T+"_"+P,N.position.x+(N.vertices[P].x-N.position.x)*.8,N.position.y+(N.vertices[P].y-N.position.y)*.8)}}},o.mousePosition=function(_,I,E){var k=E;k.fillStyle="rgba(255,255,255,0.8)",k.fillText(I.position.x+"  "+I.position.y,I.position.x+5,I.position.y-5)},o.bodyBounds=function(_,I,E){var k=E;_.engine;var T=_.options;k.beginPath();for(var P=0;P<I.length;P++){var O=I[P];if(O.render.visible)for(var R=I[P].parts,N=R.length>1?1:0;N<R.length;N++){var L=R[N];k.rect(L.bounds.min.x,L.bounds.min.y,L.bounds.max.x-L.bounds.min.x,L.bounds.max.y-L.bounds.min.y)}}T.wireframes?k.strokeStyle="rgba(255,255,255,0.08)":k.strokeStyle="rgba(0,0,0,0.1)",k.lineWidth=1,k.stroke()},o.bodyAxes=function(_,I,E){var k=E;_.engine;var T=_.options,P,O,R,N;for(k.beginPath(),O=0;O<I.length;O++){var L=I[O],B=L.parts;if(L.render.visible)if(T.showAxes)for(R=B.length>1?1:0;R<B.length;R++)for(P=B[R],N=0;N<P.axes.length;N++){var V=P.axes[N];k.moveTo(P.position.x,P.position.y),k.lineTo(P.position.x+V.x*20,P.position.y+V.y*20)}else for(R=B.length>1?1:0;R<B.length;R++)for(P=B[R],N=0;N<P.axes.length;N++)k.moveTo(P.position.x,P.position.y),k.lineTo((P.vertices[0].x+P.vertices[P.vertices.length-1].x)/2,(P.vertices[0].y+P.vertices[P.vertices.length-1].y)/2)}T.wireframes?(k.strokeStyle="indianred",k.lineWidth=1):(k.strokeStyle="rgba(255, 255, 255, 0.4)",k.globalCompositeOperation="overlay",k.lineWidth=2),k.stroke(),k.globalCompositeOperation="source-over"},o.bodyPositions=function(_,I,E){var k=E;_.engine;var T=_.options,P,O,R,N;for(k.beginPath(),R=0;R<I.length;R++)if(P=I[R],!!P.render.visible)for(N=0;N<P.parts.length;N++)O=P.parts[N],k.arc(O.position.x,O.position.y,3,0,2*Math.PI,!1),k.closePath();for(T.wireframes?k.fillStyle="indianred":k.fillStyle="rgba(0,0,0,0.5)",k.fill(),k.beginPath(),R=0;R<I.length;R++)P=I[R],P.render.visible&&(k.arc(P.positionPrev.x,P.positionPrev.y,2,0,2*Math.PI,!1),k.closePath());k.fillStyle="rgba(255,165,0,0.8)",k.fill()},o.bodyVelocity=function(_,I,E){var k=E;k.beginPath();for(var T=0;T<I.length;T++){var P=I[T];if(P.render.visible){var O=a.getVelocity(P);k.moveTo(P.position.x,P.position.y),k.lineTo(P.position.x+O.x,P.position.y+O.y)}}k.lineWidth=3,k.strokeStyle="cornflowerblue",k.stroke()},o.bodyIds=function(_,I,E){var k=E,T,P;for(T=0;T<I.length;T++)if(I[T].render.visible){var O=I[T].parts;for(P=O.length>1?1:0;P<O.length;P++){var R=O[P];k.font="12px Arial",k.fillStyle="rgba(255,255,255,0.5)",k.fillText(R.id,R.position.x+10,R.position.y-10)}}},o.collisions=function(_,I,E){var k=E,T=_.options,P,O,R,N;for(k.beginPath(),R=0;R<I.length;R++)if(P=I[R],!!P.isActive)for(O=P.collision,N=0;N<P.contactCount;N++){var L=P.contacts[N],B=L.vertex;k.rect(B.x-1.5,B.y-1.5,3.5,3.5)}for(T.wireframes?k.fillStyle="rgba(255,255,255,0.7)":k.fillStyle="orange",k.fill(),k.beginPath(),R=0;R<I.length;R++)if(P=I[R],!!P.isActive&&(O=P.collision,P.contactCount>0)){var V=P.contacts[0].vertex.x,j=P.contacts[0].vertex.y;P.contactCount===2&&(V=(P.contacts[0].vertex.x+P.contacts[1].vertex.x)/2,j=(P.contacts[0].vertex.y+P.contacts[1].vertex.y)/2),O.bodyB===O.supports[0].body||O.bodyA.isStatic===!0?k.moveTo(V-O.normal.x*8,j-O.normal.y*8):k.moveTo(V+O.normal.x*8,j+O.normal.y*8),k.lineTo(V,j)}T.wireframes?k.strokeStyle="rgba(255,165,0,0.7)":k.strokeStyle="orange",k.lineWidth=1,k.stroke()},o.separations=function(_,I,E){var k=E,T=_.options,P,O,R,N,L;for(k.beginPath(),L=0;L<I.length;L++)if(P=I[L],!!P.isActive){O=P.collision,R=O.bodyA,N=O.bodyB;var B=1;!N.isStatic&&!R.isStatic&&(B=.5),N.isStatic&&(B=0),k.moveTo(N.position.x,N.position.y),k.lineTo(N.position.x-O.penetration.x*B,N.position.y-O.penetration.y*B),B=1,!N.isStatic&&!R.isStatic&&(B=.5),R.isStatic&&(B=0),k.moveTo(R.position.x,R.position.y),k.lineTo(R.position.x+O.penetration.x*B,R.position.y+O.penetration.y*B)}T.wireframes?k.strokeStyle="rgba(255,165,0,0.5)":k.strokeStyle="orange",k.stroke()},o.inspector=function(_,I){_.engine;var E=_.selected,k=_.render,T=k.options,P;if(T.hasBounds){var O=k.bounds.max.x-k.bounds.min.x,R=k.bounds.max.y-k.bounds.min.y,N=O/k.options.width,L=R/k.options.height;I.scale(1/N,1/L),I.translate(-k.bounds.min.x,-k.bounds.min.y)}for(var B=0;B<E.length;B++){var V=E[B].data;switch(I.translate(.5,.5),I.lineWidth=1,I.strokeStyle="rgba(255,165,0,0.9)",I.setLineDash([1,2]),V.type){case"body":P=V.bounds,I.beginPath(),I.rect(Math.floor(P.min.x-3),Math.floor(P.min.y-3),Math.floor(P.max.x-P.min.x+6),Math.floor(P.max.y-P.min.y+6)),I.closePath(),I.stroke();break;case"constraint":var j=V.pointA;V.bodyA&&(j=V.pointB),I.beginPath(),I.arc(j.x,j.y,10,0,2*Math.PI),I.closePath(),I.stroke();break}I.setLineDash([]),I.translate(-.5,-.5)}_.selectStart!==null&&(I.translate(.5,.5),I.lineWidth=1,I.strokeStyle="rgba(255,165,0,0.6)",I.fillStyle="rgba(255,165,0,0.1)",P=_.selectBounds,I.beginPath(),I.rect(Math.floor(P.min.x),Math.floor(P.min.y),Math.floor(P.max.x-P.min.x),Math.floor(P.max.y-P.min.y)),I.closePath(),I.stroke(),I.fill(),I.translate(-.5,-.5)),T.hasBounds&&I.setTransform(1,0,0,1,0,0)};var m=function(_,I){var E=_.engine,k=_.timing,T=k.historySize,P=E.timing.timestamp;k.delta=I-k.lastTime||o._goodDelta,k.lastTime=I,k.timestampElapsed=P-k.lastTimestamp||0,k.lastTimestamp=P,k.deltaHistory.unshift(k.delta),k.deltaHistory.length=Math.min(k.deltaHistory.length,T),k.engineDeltaHistory.unshift(E.timing.lastDelta),k.engineDeltaHistory.length=Math.min(k.engineDeltaHistory.length,T),k.timestampElapsedHistory.unshift(k.timestampElapsed),k.timestampElapsedHistory.length=Math.min(k.timestampElapsedHistory.length,T),k.engineUpdatesHistory.unshift(E.timing.lastUpdatesPerFrame),k.engineUpdatesHistory.length=Math.min(k.engineUpdatesHistory.length,T),k.engineElapsedHistory.unshift(E.timing.lastElapsed),k.engineElapsedHistory.length=Math.min(k.engineElapsedHistory.length,T),k.elapsedHistory.unshift(k.lastElapsed),k.elapsedHistory.length=Math.min(k.elapsedHistory.length,T)},v=function(_){for(var I=0,E=0;E<_.length;E+=1)I+=_[E];return I/_.length||0},w=function(_,I){var E=document.createElement("canvas");return E.width=_,E.height=I,E.oncontextmenu=function(){return!1},E.onselectstart=function(){return!1},E},S=function(_){var I=_.getContext("2d"),E=window.devicePixelRatio||1,k=I.webkitBackingStorePixelRatio||I.mozBackingStorePixelRatio||I.msBackingStorePixelRatio||I.oBackingStorePixelRatio||I.backingStorePixelRatio||1;return E/k},C=function(_,I){var E=_.textures[I];return E||(E=_.textures[I]=new Image,E.src=I,E)},A=function(_,I){var E=I;/(jpg|gif|png)$/.test(I)&&(E="url("+I+")"),_.canvas.style.background=E,_.canvas.style.backgroundSize="contain",_.currentBackground=I}})()},function(n,r,i){var o={};n.exports=o;var a=i(5),s=i(17),l=i(0);(function(){o._maxFrameDelta=1e3/15,o._frameDeltaFallback=1e3/60,o._timeBufferMargin=1.5,o._elapsedNextEstimate=1,o._smoothingLowerBound=.1,o._smoothingUpperBound=.9,o.create=function(d){var p={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},f=l.extend(p,d);return f.fps=0,f},o.run=function(d,p){return d.timeBuffer=o._frameDeltaFallback,function f(h){d.frameRequestId=o._onNextFrame(d,f),h&&d.enabled&&o.tick(d,p,h)}(),d},o.tick=function(d,p,f){var h=l.now(),g=d.delta,m=0,v=f-d.timeLastTick;if((!v||!d.timeLastTick||v>Math.max(o._maxFrameDelta,d.maxFrameTime))&&(v=d.frameDelta||o._frameDeltaFallback),d.frameDeltaSmoothing){d.frameDeltaHistory.push(v),d.frameDeltaHistory=d.frameDeltaHistory.slice(-d.frameDeltaHistorySize);var w=d.frameDeltaHistory.slice(0).sort(),S=d.frameDeltaHistory.slice(w.length*o._smoothingLowerBound,w.length*o._smoothingUpperBound),C=c(S);v=C||v}d.frameDeltaSnapping&&(v=1e3/Math.round(1e3/v)),d.frameDelta=v,d.timeLastTick=f,d.timeBuffer+=d.frameDelta,d.timeBuffer=l.clamp(d.timeBuffer,0,d.frameDelta+g*o._timeBufferMargin),d.lastUpdatesDeferred=0;var A=d.maxUpdates||Math.ceil(d.maxFrameTime/g),_={timestamp:p.timing.timestamp};a.trigger(d,"beforeTick",_),a.trigger(d,"tick",_);for(var I=l.now();g>0&&d.timeBuffer>=g*o._timeBufferMargin;){a.trigger(d,"beforeUpdate",_),s.update(p,g),a.trigger(d,"afterUpdate",_),d.timeBuffer-=g,m+=1;var E=l.now()-h,k=l.now()-I,T=E+o._elapsedNextEstimate*k/m;if(m>=A||T>d.maxFrameTime){d.lastUpdatesDeferred=Math.round(Math.max(0,d.timeBuffer/g-o._timeBufferMargin));break}}p.timing.lastUpdatesPerFrame=m,a.trigger(d,"afterTick",_),d.frameDeltaHistory.length>=100&&(d.lastUpdatesDeferred&&Math.round(d.frameDelta/g)>A?l.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):d.lastUpdatesDeferred&&l.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof d.isFixed<"u"&&l.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(d.deltaMin||d.deltaMax)&&l.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),d.fps!==0&&l.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},o.stop=function(d){o._cancelNextFrame(d)},o._onNextFrame=function(d,p){if(typeof window<"u"&&window.requestAnimationFrame)d.frameRequestId=window.requestAnimationFrame(p);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return d.frameRequestId},o._cancelNextFrame=function(d){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(d.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var c=function(d){for(var p=0,f=d.length,h=0;h<f;h+=1)p+=d[h];return p/f||0}})()},function(n,r,i){var o={};n.exports=o;var a=i(8),s=i(0),l=s.deprecated;(function(){o.collides=function(c,d){return a.collides(c,d)},l(o,"collides","SAT.collides ➤ replaced by Collision.collides")})()},function(n,r,i){var o={};n.exports=o,i(1);var a=i(0);(function(){o.pathToVertices=function(s,l){typeof window<"u"&&!("SVGPathSeg"in window)&&a.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var c,d,p,f,h,g,m,v,w,S,C=[],A,_,I=0,E=0,k=0;l=l||15;var T=function(O,R,N){var L=N%2===1&&N>1;if(!w||O!=w.x||R!=w.y){w&&L?(A=w.x,_=w.y):(A=0,_=0);var B={x:A+O,y:_+R};(L||!w)&&(w=B),C.push(B),E=A+O,k=_+R}},P=function(O){var R=O.pathSegTypeAsLetter.toUpperCase();if(R!=="Z"){switch(R){case"M":case"L":case"T":case"C":case"S":case"Q":E=O.x,k=O.y;break;case"H":E=O.x;break;case"V":k=O.y;break}T(E,k,O.pathSegType)}};for(o._svgPathToAbsolute(s),p=s.getTotalLength(),g=[],c=0;c<s.pathSegList.numberOfItems;c+=1)g.push(s.pathSegList.getItem(c));for(m=g.concat();I<p;){if(S=s.getPathSegAtLength(I),h=g[S],h!=v){for(;m.length&&m[0]!=h;)P(m.shift());v=h}switch(h.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":f=s.getPointAtLength(I),T(f.x,f.y,0);break}I+=l}for(c=0,d=m.length;c<d;++c)P(m[c]);return C},o._svgPathToAbsolute=function(s){for(var l,c,d,p,f,h,g=s.pathSegList,m=0,v=0,w=g.numberOfItems,S=0;S<w;++S){var C=g.getItem(S),A=C.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(A))"x"in C&&(m=C.x),"y"in C&&(v=C.y);else switch("x1"in C&&(d=m+C.x1),"x2"in C&&(f=m+C.x2),"y1"in C&&(p=v+C.y1),"y2"in C&&(h=v+C.y2),"x"in C&&(m+=C.x),"y"in C&&(v+=C.y),A){case"m":g.replaceItem(s.createSVGPathSegMovetoAbs(m,v),S);break;case"l":g.replaceItem(s.createSVGPathSegLinetoAbs(m,v),S);break;case"h":g.replaceItem(s.createSVGPathSegLinetoHorizontalAbs(m),S);break;case"v":g.replaceItem(s.createSVGPathSegLinetoVerticalAbs(v),S);break;case"c":g.replaceItem(s.createSVGPathSegCurvetoCubicAbs(m,v,d,p,f,h),S);break;case"s":g.replaceItem(s.createSVGPathSegCurvetoCubicSmoothAbs(m,v,f,h),S);break;case"q":g.replaceItem(s.createSVGPathSegCurvetoQuadraticAbs(m,v,d,p),S);break;case"t":g.replaceItem(s.createSVGPathSegCurvetoQuadraticSmoothAbs(m,v),S);break;case"a":g.replaceItem(s.createSVGPathSegArcAbs(m,v,C.r1,C.r2,C.angle,C.largeArcFlag,C.sweepFlag),S);break;case"z":case"Z":m=l,v=c;break}(A=="M"||A=="m")&&(l=m,c=v)}}})()},function(n,r,i){var o={};n.exports=o;var a=i(6);i(0),function(){o.create=a.create,o.add=a.add,o.remove=a.remove,o.clear=a.clear,o.addComposite=a.addComposite,o.addBody=a.addBody,o.addConstraint=a.addConstraint}()}])})})(_9);var Fe=_9.exports;const kwe=b("div",{target:"ea931zf6"})({name:"1jwlvpf",styles:"position:relative;width:100vw;height:100vh;overflow:hidden;user-select:none;touch-action:none;transition:background 0.3s ease;background:#1a1a1a"}),Ewe=b("div",{target:"ea931zf5"})({name:"1eio7ex",styles:"width:100%;height:100%;position:relative"}),Twe=b("div",{target:"ea931zf4"})({name:"yaeb9g",styles:"position:absolute;bottom:20px;left:20px;z-index:10;color:#333;font-family:'Arial',sans-serif"}),Iwe=b("div",{target:"ea931zf3"})({name:"1mnwjv9",styles:"font-size:28px;font-weight:bold;margin-bottom:10px;text-shadow:2px 2px 4px rgba(255,255,255,0.8);padding:10px 15px;background:rgba(255,255,255,0.9);border-radius:10px;border:3px solid #FFD700"}),Awe=b("div",{target:"ea931zf2"})({name:"w1yhlb",styles:"font-size:14px;background:rgba(255,255,255,0.9);padding:12px;border-radius:10px;max-width:220px;margin-bottom:10px;box-shadow:0 4px 12px rgba(0,0,0,0.2);border:2px solid #4A90E2"}),Pwe=b(bt,{target:"ea931zf1"})({name:"2nlr50",styles:"position:absolute;top:20px;right:20px;background:rgba(255,255,255,0.95);color:#333;padding:12px 20px;border-radius:10px;text-decoration:none;font-weight:bold;font-size:16px;z-index:10;transition:all 0.3s ease;border:2px solid #FF6600;&:hover{background:rgba(255,255,255,1);transform:translateY(-3px);box-shadow:0 6px 20px rgba(0,0,0,0.3);text-decoration:none;color:#333;}"}),Dwe=b("div",{target:"ea931zf0"})("position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);font-size:48px;font-weight:bold;color:#FFD700;text-shadow:3px 3px 6px rgba(0,0,0,0.5);z-index:20;opacity:",e=>e.$show?1:0,";transition:opacity 0.5s ease;pointer-events:none;"),Rwe=()=>{const e=D.useRef(null),t=D.useRef(null),n=D.useRef(null),r=D.useRef(null),i=D.useRef(null);D.useRef([]);const o=D.useRef(null),a=D.useRef(null);D.useRef(null);const[s,l]=D.useState(0),[c,d]=D.useState(0),[p,f]=D.useState(""),[h,g]=D.useState(!1),m=k=>{f(k),g(!0),setTimeout(()=>g(!1),2e3)},v=(k,T)=>Fe.Bodies.circle(k,T,15,{render:{fillStyle:"#FF6600",strokeStyle:"#000000",lineWidth:3},restitution:.8,density:.001,frictionAir:.01}),w=(k,T,P)=>{const O=[],R=[];for(let V=0;V<5;V++){const j=[],z=k+P/4*V;for(let H=0;H<4;H++){const J=T+H*8,de=Math.sin(H*.2)*(H*.3),ae=Fe.Bodies.circle(z+de,J,1.2,{render:{fillStyle:"#FFFFFF",strokeStyle:"#DDDDDD",lineWidth:.5},collisionFilter:{group:-1,category:0,mask:0},frictionAir:.25,density:1e-6,isSensor:!0,isStatic:!1});if(j.push(ae),O.push(ae),H>0){const Ce=Fe.Constraint.create({bodyA:j[H-1],bodyB:ae,length:8,stiffness:.8,damping:.5,render:{lineWidth:1,strokeStyle:"#FFFFFF"}});R.push(Ce)}if(H===0){const Ce=Fe.Constraint.create({pointA:{x:z,y:T},bodyB:ae,length:0,stiffness:1,render:{visible:!1}});R.push(Ce)}}}for(let V=1;V<4;V++)for(let j=0;j<4;j++){const z=O[j*4+V],H=O[(j+1)*4+V];if(z&&H){const J=Fe.Constraint.create({bodyA:z,bodyB:H,length:Fe.Vector.magnitude(Fe.Vector.sub(z.position,H.position)),stiffness:.9,damping:.5,render:{lineWidth:.8,strokeStyle:"#FFFFFF"}});R.push(J)}}return{netBodies:O,netConstraints:R}},S=(k,T)=>{const R=[],N=Fe.Bodies.rectangle(k-30-15,T+100,8,200,{isStatic:!0,render:{fillStyle:"#444444",strokeStyle:"#222222",lineWidth:2}});R.push(N);const L=Fe.Bodies.rectangle(k-60/2-12,T+15,25,5,{isStatic:!0,render:{fillStyle:"#444444",strokeStyle:"#222222",lineWidth:2}});Fe.Body.setAngle(L,-.4),R.push(L);const B=Fe.Bodies.rectangle(k-60/2-15,T+190,60,8,{isStatic:!0,render:{fillStyle:"#333333",strokeStyle:"#111111",lineWidth:2}});R.push(B);const V=Fe.Bodies.rectangle(k-60/2-4,T-40,8,80,{isStatic:!0,render:{fillStyle:"#FFFFFF",strokeStyle:"#000000",lineWidth:3},restitution:.8}),j=Fe.Bodies.circle(k-60/2,T,4,{isStatic:!0,render:{fillStyle:"#FF6600",strokeStyle:"#CC4400",lineWidth:2},restitution:.8}),z=Fe.Bodies.circle(k+60/2,T,4,{isStatic:!0,render:{fillStyle:"#FF6600",strokeStyle:"#CC4400",lineWidth:2},restitution:.8}),H=Fe.Bodies.rectangle(k-60/2+5,T-10,3,20,{isStatic:!0,render:{fillStyle:"#FF6600",strokeStyle:"#CC4400",lineWidth:1}}),J=w(k-60/2+8,T+4+2,44);return{backboard:V,rimLeft:j,rimRight:z,support:H,basketballStand:R,net:J,x:k,y:T,width:60}},C=(k,T,P=!1,O=0)=>{const R=k.canvas.getContext("2d"),N=T.position,L=15,B=T.angle;if(R.save(),R.translate(N.x,N.y),R.rotate(B),P&&O>.8){const H=(O-.8)*10;R.translate((Math.random()-.5)*H,(Math.random()-.5)*H)}R.beginPath(),R.arc(0,0,L,0,Math.PI*2),R.fillStyle=P?"#ff8500":"#f57c00",R.fill();const V=3;for(let H=-15;H<=L;H+=V)for(let J=-15;J<=L;J+=V)H*H+J*J<=L*L&&(R.beginPath(),R.arc(H,J,.5,0,Math.PI*2),R.fillStyle="rgba(0, 0, 0, 0.1)",R.fill());const j=R.createRadialGradient(-15/3,-15/3,0,-15/3,-15/3,L);j.addColorStop(0,"rgba(255, 255, 255, 0.3)"),j.addColorStop(1,"rgba(255, 255, 255, 0)"),R.beginPath(),R.arc(0,0,L,0,Math.PI*2),R.fillStyle=j,R.fill();const z=R.createRadialGradient(L/3,L/3,0,L/3,L/3,L);if(z.addColorStop(0,"rgba(0, 0, 0, 0.2)"),z.addColorStop(1,"rgba(0, 0, 0, 0)"),R.beginPath(),R.arc(0,0,L,0,Math.PI*2),R.fillStyle=z,R.fill(),R.strokeStyle="#2d2d2d",R.lineWidth=2.5,R.lineCap="round",R.beginPath(),R.moveTo(0,-13),R.lineTo(0,L-2),R.stroke(),R.beginPath(),R.moveTo(-13,0),R.lineTo(L-2,0),R.stroke(),R.beginPath(),R.arc(-15*.6,0,L*.8,-Math.PI/3,Math.PI/3,!1),R.stroke(),R.beginPath(),R.arc(L*.6,0,L*.8,Math.PI-Math.PI/3,Math.PI+Math.PI/3,!1),R.stroke(),P&&O>0){const H=L+O*20,J=R.createRadialGradient(0,0,L,0,0,H);J.addColorStop(0,"rgba(255, 255, 255, 0)"),J.addColorStop(1,`rgba(255, 133, 0, ${O*.5})`),R.beginPath(),R.arc(0,0,H,0,Math.PI*2),R.fillStyle=J,R.fill()}R.beginPath(),R.arc(0,0,L,0,Math.PI*2),R.strokeStyle="#2d2d2d",R.lineWidth=2,R.stroke(),R.restore()},A=(k,T,P,O)=>{const R=k.canvas.getContext("2d"),N=T.x-P.x,L=T.y-P.y,B=Math.sqrt(N*N+L*L),j=Math.min(B/150,1)*O;R.strokeStyle=`rgba(255, 255, 255, ${.5+j*.5})`,R.lineWidth=2+j*3,R.setLineDash([5,5]),R.beginPath(),R.moveTo(T.x,T.y);const z=30,H=N/B*j*15,J=L/B*j*15;for(let de=1;de<=z;de++){const ae=de/z,Ce=T.x+H*ae*50,te=T.y+J*ae*50+.5*1*ae*ae*500;R.lineTo(Ce,te)}R.stroke(),R.setLineDash([])},_=D.useCallback(()=>{r.current&&Fe.Runner.stop(r.current),n.current&&(Fe.Render.stop(n.current),n.current.canvas&&n.current.canvas.remove()),t.current&&(Fe.Engine.clear(t.current),Fe.World.clear(t.current.world)),e.current&&(e.current.innerHTML="");const k=Fe.Engine.create();k.world.gravity.y=1,k.timing.timeScale=1,k.positionIterations=6,k.velocityIterations=4,k.constraintIterations=2,k.enableSleeping=!0,t.current=k;const T=Fe.Render.create({element:e.current,engine:k,options:{width:window.innerWidth,height:window.innerHeight,wireframes:!1,background:"transparent",pixelRatio:Math.min(window.devicePixelRatio||1,2),showAngleIndicator:!1,showVelocity:!1,showDebug:!1,showBounds:!1,showBroadphase:!1,showStats:!1}});n.current=T;const P=Fe.Bodies.rectangle(window.innerWidth/2,window.innerHeight-25,window.innerWidth,50,{isStatic:!0,render:{fillStyle:"#333333"},restitution:.9,label:"ground"}),O=Fe.Bodies.rectangle(-25,window.innerHeight/2,50,window.innerHeight,{isStatic:!0,render:{fillStyle:"transparent"},restitution:.9}),R=Fe.Bodies.rectangle(window.innerWidth+25,window.innerHeight/2,50,window.innerHeight,{isStatic:!0,render:{fillStyle:"transparent"},restitution:.9}),N=window.innerWidth-200,L=window.innerHeight-400,B=v(N,L);Fe.Body.setStatic(B,!0),i.current=B;const z=S(180,200);o.current=z,Fe.World.add(k.world,[P,O,R,B,z.backboard,z.rimLeft,z.rimRight,z.support,...z.basketballStand,...z.net.netBodies]),Fe.World.add(k.world,z.net.netConstraints);const H=Fe.Mouse.create(T.canvas),J=Fe.MouseConstraint.create(k,{mouse:H,constraint:{stiffness:.8,render:{visible:!1}}});a.current=J,Fe.World.add(k.world,J);let de=!1,ae=null,Ce=0,te=!1;const G=200;let K=null;const me=()=>{if(i.current&&o.current&&!i.current.isStatic){const we=i.current,W=o.current.net.netBodies,ge=o.current.x,fe=o.current.y+20;if(Fe.Vector.magnitude(Fe.Vector.sub(we.position,{x:ge,y:fe}))<25){const ce=Fe.Vector.magnitude(we.velocity);ce>5&&W.forEach((De,He)=>{const Ue=Fe.Vector.magnitude(Fe.Vector.sub(we.position,De.position));if(Ue<20){const et=Fe.Vector.sub(De.position,we.position);if(Fe.Vector.magnitude(et)>0){const pt=Fe.Vector.normalise(et),Rt=Math.max(0,(20-Ue)/20)*ce*1e-6,ln=Fe.Vector.mult(pt,Rt);Fe.Body.applyForce(De,De.position,ln)}}})}}};Fe.Events.on(J,"startdrag",we=>{const W=we.body;W===i.current&&(console.log("🏀 開始蓄力 - Started charging shot"),de=!0,te=!0,ae={x:W.position.x,y:W.position.y},Fe.Body.setStatic(i.current,!0))}),Fe.Events.on(J,"mousedown",we=>{console.log("🖱️ 滑鼠按下事件 - Mouse down");const W=J.mouse.position,ge=i.current.position;Math.sqrt(Math.pow(W.x-ge.x,2)+Math.pow(W.y-ge.y,2))<30&&i.current.isStatic&&(console.log("🎯 點擊籃球 - Ball clicked, preparing for launch"),setTimeout(()=>{i.current.isStatic&&(console.log("🚀 執行簡化發射 - Executing simple launch"),Fe.Body.setStatic(i.current,!1),Fe.Body.setVelocity(i.current,{x:-20,y:-15}),Fe.Body.setAngularVelocity(i.current,.2),d(ve=>ve+1))},100))}),Fe.Events.on(J,"enddrag",we=>{if(console.log("🎯 滑鼠放開事件觸發 - Mouse released"),console.log("📊 當前狀態 - isCharging:",de,"chargeStartPos:",ae,"hasStartedGame:",te),de&&ae&&te){console.log("🚀 發射！- Releasing shot with charge level:",Ce);const W=J.mouse.position,ge=ae.x-W.x,fe=ae.y-W.y,ve=Math.sqrt(ge*ge+fe*fe);if(console.log("📐 距離計算 - dx:",ge,"dy:",fe,"distance:",ve),ve<5){console.log("⚠️ 距離太小，使用預設發射力度");const ce=-20,De=-15;Fe.Body.setStatic(i.current,!1),Fe.Body.setVelocity(i.current,{x:ce,y:De}),Fe.Body.setAngularVelocity(i.current,(Math.random()-.5)*.3),console.log("✅ 物理啟用（預設力度）- Ball physics enabled, velocity applied:",{x:ce,y:De})}else{const ce=Math.min(ve/G,1.5),De=ge/ve*ce*35,He=fe/ve*ce*35;if(isNaN(De)||isNaN(He)){console.error("❌ 速度計算錯誤 - Invalid velocity:",{velocityX:De,velocityY:He});return}Fe.Body.setStatic(i.current,!1),Fe.Body.setVelocity(i.current,{x:De,y:He}),Fe.Body.setAngularVelocity(i.current,(Math.random()-.5)*.3),console.log("✅ 物理啟用 - Ball physics enabled, velocity applied:",{x:De,y:He})}console.log("📊 籃球狀態 - Ball static status:",i.current.isStatic),d(ce=>ce+1),de=!1,ae=null,Ce=0,te=!1}else console.log("❌ 發射條件不滿足 - Shot conditions not met")}),Fe.Events.on(k,"beforeUpdate",()=>{if(de&&ae&&J.mouse.position&&te){const we=J.mouse.position,W=ae.x-we.x,ge=ae.y-we.y,fe=Math.sqrt(W*W+ge*ge);Ce=Math.min(fe/G,1.2)}me()});let ye=!1,ee=!1;Fe.Events.on(k,"beforeUpdate",()=>{const we=i.current,W=o.current;if(we&&W&&!we.isStatic){const ge=W.x-W.width/2,fe=W.x+W.width/2;if(we.velocity.y>0&&we.position.x>ge&&we.position.x<fe&&we.position.y>W.y-5&&we.position.y<W.y+10&&!ye){ye=!0,ee=!0,l(ce=>ce+1);const ve=["太棒了！","完美！","神射手！","好球！","漂亮！"];m(ve[Math.floor(Math.random()*ve.length)]),console.log("🏀 進球！球將繼續自然落下 - Ball scored! Continuing natural fall")}we.position.y>W.y+15&&(ee=!0)}}),Fe.Events.on(k,"collisionStart",we=>{const W=we.pairs;for(let ge=0;ge<W.length;ge++){const{bodyA:fe,bodyB:ve}=W[ge];(fe===i.current&&ve.label==="ground"||ve===i.current&&fe.label==="ground")&&ee&&(K&&clearTimeout(K),console.log("🏀 籃球碰到地板 - Ball hit ground, starting 1 second timer"),K=setTimeout(()=>{console.log("🔄 1秒到了，重新開始遊戲 - 1 second elapsed, restarting game"),ye=!1,ee=!1,_()},1e3))}});let oe=0;Fe.Events.on(T,"afterRender",()=>{oe++,oe%2===0&&i.current&&C(T,i.current,de,Ce),de&&ae&&J.mouse.position&&te&&A(T,ae,J.mouse.position,Ce)}),Fe.Render.run(T);const he=Fe.Runner.create({delta:1e3/60,isFixed:!0});r.current=he,Fe.Runner.run(he,k)},[s]),I=()=>{l(0),d(0),_()};D.useEffect(()=>(_(),()=>{r.current&&Fe.Runner.stop(r.current),n.current&&(Fe.Render.stop(n.current),n.current.canvas&&n.current.canvas.remove()),t.current&&Fe.Engine.clear(t.current)}),[_]),D.useEffect(()=>{const k=()=>{_()};return window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[_]);const E=c>0?Math.round(s/c*100):0;return y(kwe,{children:[u(Ewe,{ref:e}),y(Twe,{children:[y(Iwe,{children:["🏀 得分: ",s," / ",c,c>0&&y("div",{style:{fontSize:"18px",marginTop:"5px"},children:["🎯 準確度: ",E,"%"]})]}),y(Awe,{children:[u("strong",{children:"🎮 彈弓投籃遊戲"}),u("br",{}),"🎯 拖拽右側籃球往後拉動蓄力",u("br",{}),"⚡ 蓄力越多威力越大（白色軌跡線預覽）",u("br",{}),"⚠️ 蓄力過度籃球會抖動警告",u("br",{}),"🚀 放開滑鼠發射籃球",u("br",{}),"🔄 籃球碰到地板1秒後自動重新開始",u("br",{}),u("button",{onClick:I,style:{marginTop:"10px",padding:"6px 12px",background:"linear-gradient(45deg, #7C3AED, #3B82F6)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"12px",boxShadow:"0 2px 6px rgba(0,0,0,0.2)"},children:"🔄 重新開始"})]})]}),u(Dwe,{$show:h,children:p}),u(Pwe,{to:"/",children:"🏠 返回首頁"})]})},Nwe=b("div",{target:"e68zg2w4"})({name:"1rzlr2s",styles:"max-width:800px;margin:40px auto;padding:30px;background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);border-radius:16px;color:white;min-height:100vh"}),Mwe=b("h1",{target:"e68zg2w3"})({name:"195qor4",styles:"text-align:center;margin-bottom:30px;font-size:28px;font-weight:700"}),Owe=b("div",{target:"e68zg2w2"})({name:"pnqx8q",styles:"background:rgba(255, 255, 255, 0.15);padding:20px;border-radius:12px;margin-bottom:30px;h3{margin-bottom:15px;color:#FFE082;}p{margin:8px 0;line-height:1.6;}"}),$we=b("button",{target:"e68zg2w1"})({name:"wgha4t",styles:"background:#4CAF50;color:white;border:none;padding:15px 30px;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;margin:10px;transition:all 0.3s ease;&:hover{background:#45a049;transform:translateY(-2px);}&:disabled{background:#cccccc;cursor:not-allowed;transform:none;}"}),Lwe=b("div",{target:"e68zg2w0"})({name:"afqhb2",styles:"background:rgba(255, 255, 255, 0.1);padding:20px;border-radius:12px;margin:20px 0;white-space:pre-line;font-family:monospace;font-size:14px;line-height:1.4;max-height:400px;overflow-y:auto"}),Fwe={"003_2_2":{title:"奶類搭配範例（紅茶拿鐵、烏龍奶等）",subtitle:"懂得奶的本質之後，進階的你就該學會如何搭配各種茶底",content:{text:`
        <h3>🧋 奶的萬花筒——調出經典風味組合</h3>
        <p>懂得奶的本質之後，進階的你就該學會如何搭配各種茶底，做出不同的招牌奶茶品項。本節將以三款經典飲品為例，教你如何打造經典與創新。</p>
        
        <h3>🔹 經典範例一：紅茶拿鐵</h3>
        <ul>
          <li><strong>茶底：</strong> 阿薩姆紅茶（悶泡 5 分鐘）</li>
          <li><strong>奶類：</strong> 全脂鮮奶（4/10）＋微糖</li>
          <li><strong>特點：</strong> 濃厚茶香＋鮮奶順口，適合單飲或配料</li>
        </ul>
        
        <h3>🔹 經典範例二：烏龍奶茶</h3>
        <ul>
          <li><strong>茶底：</strong> 清香烏龍或鐵觀音</li>
          <li><strong>奶類：</strong> 奶精或鮮奶（依品牌風格）</li>
          <li><strong>特點：</strong> 焙火香與奶交織，奶比例略低以凸顯茶味</li>
        </ul>
        
        <h3>🔹 經典範例三：抹茶鮮奶（非茶葉）</h3>
        <ul>
          <li><strong>茶底：</strong> 抹茶粉需先用熱水打底再倒入鮮奶</li>
          <li><strong>奶類：</strong> 高比例鮮奶＋微糖</li>
          <li><strong>特點：</strong> 上下層分明、色澤美觀、口感清新</li>
        </ul>
        
        <h3>🔹 搭配原則總結：</h3>
        <ul>
          <li>香氣強的茶，搭低比例奶（如鐵觀音）</li>
          <li>柔和的茶，搭高比例奶（如錫蘭）</li>
          <li>厚重茶，搭奶精；清香茶，搭鮮奶</li>
        </ul>
        
        <p><strong>💡 小提醒：</strong> 一杯好奶茶不靠食譜，而靠你對「茶感＋奶感」的掌握與判斷！</p>
      `},duration:"15-20分鐘",difficulty:"中級"},"003_2_3":{title:"奶泡製作與應用（抹茶奶蓋、奶霜）",subtitle:"現在的飲品不只「有奶」，還要「有層次」",content:{text:`
        <h3>☁️ 奶，竟然可以發泡！奶蓋與奶霜的秘密</h3>
        <p>現在的飲品不只「有奶」，還要「有層次」。奶蓋、奶霜、氣泡奶成為飲品美感與口感的關鍵。本節將手把手教你打出雲朵般的奶泡，打造一杯視覺與味覺的雙重饗宴。</p>
        
        <h3>🔹 重點一：奶蓋與奶霜的差別</h3>
        <ul>
          <li><strong>奶蓋：</strong> 鹹奶油打發，口感厚重，需加入奶油起司 + 海鹽</li>
          <li><strong>奶霜：</strong> 甜感較高，口感輕盈，常加入鮮奶油 + 鮮奶 + 糖</li>
        </ul>
        
        <h3>🔹 重點二：打發技巧</h3>
        <ul>
          <li>使用電動打蛋器，中速打約 3–5 分鐘</li>
          <li>檢查濃稠度：可呈現「波紋」狀、可站立在茶湯表面</li>
          <li>濃度太稀：再打發；太濃：加點鮮奶稀釋</li>
        </ul>
        
        <h3>🔹 重點三：應用方式</h3>
        <ul>
          <li><strong>抹茶奶蓋：</strong> 先倒抹茶，後淋奶蓋</li>
          <li><strong>黑糖奶霜：</strong> 杯底黑糖漿＋冷鮮奶＋奶霜上蓋</li>
          <li><strong>奶蓋茶：</strong> 以鹹味平衡茶湯苦味（四季春搭奶蓋最常見）</li>
        </ul>
        
        <p><strong>💡 小提醒：</strong> 奶蓋就像飲料的皇冠，做得好，它會讓整杯飲料「質感爆棚」；做不好，就像帽子掉在地上，一切都亂了。</p>
      `},duration:"20-25分鐘",difficulty:"進階"}},Bwe={"004_3_2":{title:"加料組合技巧（Q彈感、視覺美感）",subtitle:"加料，不只是加好料。懂得「搭配感」與「視覺構圖」的人，才能做出讓人一看就想點的夢幻飲品",content:{text:`
        <h3>🎨 配料也能配色！讓你的飲料在 IG 上成為主角</h3>
        <p>加料，不只是加好料。懂得「搭配感」與「視覺構圖」的人，才能做出讓人一看就想點的夢幻飲品。本節要教你如何設計吸睛又好喝的配料組合！</p>
        
        <h3>🔹 重點一：口感的組合美學</h3>
        <ul>
          <li><strong>Q + 軟：</strong> 珍珠 + 仙草（咀嚼感豐富）</li>
          <li><strong>爽脆 + 滑順：</strong> 椰果 + 奶霜</li>
          <li><strong>單一 Q 感：</strong> 白玉 + 黑糖醬（口感單純、風味集中）</li>
        </ul>
        
        <h3>🔹 重點二：視覺構圖小技巧</h3>
        <ul>
          <li>分層杯設計：底層加料 → 中層茶湯 → 上層奶蓋或奶霜</li>
          <li>配色避開「深+深」組合（例如黑糖珍珠 + 烏龍茶）</li>
          <li>利用白玉、寒天、果粒提升「透明感」和「清涼感」</li>
        </ul>
        
        <h3>🔹 重點三：常見失敗案例解析</h3>
        <ul>
          <li><strong>視覺混濁：</strong> 奶霜與茶混合錯位</li>
          <li><strong>一層太厚：</strong> 配料沉底過重影響吸管使用</li>
          <li><strong>杯面亂：</strong> 奶蓋過厚或撒料不均勻</li>
        </ul>
        
        <p><strong>💡 小提醒：</strong> 飲料是門視覺設計。喝之前會先拍、拍之前就要美。配料不只是味道的事，更是「打卡的藝術」。</p>
      `},duration:"15-20分鐘",difficulty:"中級"},"004_3_3":{title:"加料搭配實務與創意應用",subtitle:"會做配料的人很多，但懂得怎麼「搭出爆品組合」的人才稀有",content:{text:`
        <h3>🧠 從規則中解放創意——配料設計師養成課</h3>
        <p>會做配料的人很多，但懂得怎麼「搭出爆品組合」的人才稀有。本節要打開你對配料的想像力，從經典組合一路進化到 DIY 客製搭配策略！</p>
        
        <h3>🔹 重點一：經典加料組合大全</h3>
        <ul>
          <li>黑糖珍珠 + 奶茶（不敗經典）</li>
          <li>愛玉 + 檸檬綠（夏日爆品）</li>
          <li>椰果 + 蜂蜜紅（風味延伸）</li>
          <li>奶霜 + 小芋圓 + 鐵觀音（咀嚼系＋奶蓋控）</li>
        </ul>
        
        <h3>🔹 重點二：創意搭配發想法</h3>
        <ul>
          <li><strong>色彩主題：</strong> 透明系（白玉+愛玉）、粉色系（草莓+寒天）</li>
          <li><strong>口感層次：</strong> 咬得到的（粉圓）、滑順的（仙草）、碎碎的（QQ）</li>
          <li><strong>季節限定：</strong> 夏天重果香、冬天重口感（如桂圓紅棗、薑汁珍珠）</li>
        </ul>
        
        <h3>🔹 重點三：讓顧客「玩搭配」的策略</h3>
        <ul>
          <li>提供「三選一」加料組合套餐</li>
          <li>加價升級第二配料 + 美學搭配建議</li>
          <li>每月設計「主題配料杯」+ 投票活動促進參與</li>
        </ul>
        
        <p><strong>💡 小提醒：</strong> 加料是一種創作。讓客人愛上你的飲品，有時只需要多一層「口感驚喜」＋一點「設計感」。</p>
      `},duration:"18-23分鐘",difficulty:"進階"}},zwe=()=>{const[e,t]=D.useState(!1),[n,r]=D.useState({message:"",type:""});return y(Nwe,{children:[y(Mwe,{children:[u("i",{className:"ri-upload-cloud-line"}),"補充缺失課程內容"]}),y(Owe,{children:[y("h3",{children:[u("i",{className:"ri-information-line"}),"上傳內容說明"]}),u("p",{children:"• 第三章第2節：奶類搭配範例（紅茶拿鐵、烏龍奶等）"}),u("p",{children:"• 第三章第3節：奶泡製作與應用（抹茶奶蓋、奶霜）"}),u("p",{children:"• 第四章第2節：加料組合技巧（Q彈感、視覺美感）"}),u("p",{children:"• 第四章第3節：加料搭配實務與創意應用"}),u("p",{children:"• 將使用正確的 courseId_chapterIndex_sectionIndex 格式儲存到 section_contents 集合"})]}),u("div",{style:{textAlign:"center",marginBottom:"20px"},children:u($we,{onClick:async()=>{t(!0),r({message:"開始上傳缺失的第三章和第四章小節內容...",type:"info"});try{const o={...Fwe,...Bwe};let a=0,s=Object.keys(o).length;for(const[l,c]of Object.entries(o)){const d={title:c.title,subtitle:c.subtitle,content:{text:c.content.text,quiz:{question:"此課程尚未設置測驗題目",options:["請繼續學習下一個章節"],correctAnswer:0,explanation:"課程內容已學習完成，您可以繼續學習下一個章節的內容。"}},estimatedTime:c.duration,difficulty:c.difficulty,courseId:l.split("_")[0],chapterIndex:parseInt(l.split("_")[1]),sectionIndex:parseInt(l.split("_")[2]),progress:25,navigation:{prev:null,next:null},objectives:["學習本節內容","理解核心概念","應用實務技巧"],createdAt:At(),updatedAt:At(),authorUid:"admin",isPublished:!0};await zt(Ie(U,"section_contents",l),d),a++,r(p=>({...p,message:p.message+`
✅ 已上傳：${c.title} (ID: ${l})`}))}r({message:`🎉 缺失課程內容上傳完成！

📊 上傳統計：
• 成功上傳：${a}/${s} 個小節
• 第三章：3.2, 3.3 小節
• 第四章：4.2, 4.3 小節

現在所有章節的課程內容都應該能正常訪問了！`,type:"success"})}catch(o){console.error("上傳失敗:",o),r({message:`❌ 上傳失敗：${o.message}

請檢查：
• 網路連線是否正常
• Firebase 權限是否足夠
• Firestore 安全規則是否允許寫入`,type:"error"})}finally{t(!1)}},disabled:e,children:e?"上傳中...":"🚀 開始上傳缺失內容"})}),n.message&&u(Lwe,{children:n.message}),e&&u("div",{style:{textAlign:"center",margin:"20px 0"},children:"⏳ 正在上傳課程內容..."})]})},Vwe=b("div",{target:"e1lgon4u4"})({name:"mgfytk",styles:"max-width:1200px;margin:40px auto;padding:30px;background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);border-radius:16px;color:white;min-height:100vh"}),jwe=b("h1",{target:"e1lgon4u3"})({name:"195qor4",styles:"text-align:center;margin-bottom:30px;font-size:28px;font-weight:700"}),Uwe=b("button",{target:"e1lgon4u2"})({name:"wgha4t",styles:"background:#4CAF50;color:white;border:none;padding:15px 30px;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;margin:10px;transition:all 0.3s ease;&:hover{background:#45a049;transform:translateY(-2px);}&:disabled{background:#cccccc;cursor:not-allowed;transform:none;}"}),qwe=b("div",{target:"e1lgon4u1"})({name:"lg3gex",styles:"background:rgba(255, 255, 255, 0.1);padding:20px;border-radius:12px;margin:20px 0;white-space:pre-line;font-family:monospace;font-size:14px;line-height:1.4;max-height:600px;overflow-y:auto"}),Wwe=b("div",{target:"e1lgon4u0"})({name:"103s1dx",styles:"background:rgba(255, 255, 255, 0.15);margin:10px 0;padding:15px;border-radius:8px;border-left:4px solid #FFE082"}),Hwe=()=>{const[e,t]=D.useState(!1),[n,r]=D.useState(""),[i,o]=D.useState([]);return y(Vwe,{children:[u(jwe,{children:"🔍 Section Contents 資料庫調試"}),u("div",{style:{textAlign:"center",marginBottom:"20px"},children:u(Uwe,{onClick:async()=>{t(!0),r(`正在查詢 section_contents 集合...

`);try{const s=await be(se(U,"section_contents"));if(s.empty){r("❌ section_contents 集合是空的或不存在！"),o([]);return}let l=`✅ 找到 ${s.size} 個文檔

`;const c=[];s.forEach(p=>{const f=p.data(),h={id:p.id,title:f.title||"無標題",courseId:f.courseId||"無courseId",chapterIndex:f.chapterIndex??"無chapterIndex",sectionIndex:f.sectionIndex??"無sectionIndex",subtitle:f.subtitle||"",estimatedTime:f.estimatedTime||f.duration||"",difficulty:f.difficulty||"",hasContent:!!f.content,contentType:typeof f.content};c.push(h),l+=`📄 文檔ID: ${p.id}
`,l+=`   標題: ${h.title}
`,l+=`   courseId: ${h.courseId}
`,l+=`   chapterIndex: ${h.chapterIndex}
`,l+=`   sectionIndex: ${h.sectionIndex}
`,l+=`   時長: ${h.estimatedTime}
`,l+=`   難度: ${h.difficulty}
`,l+=`   有內容: ${h.hasContent?"是":"否"}
`,l+=`   內容類型: ${h.contentType}
`,l+=`
`}),l+=`
📊 ID格式分析:
`;const d=new Set;if(c.forEach(p=>{const f=p.id.split("_");d.add(`${f.length}部分: ${f.join(" - ")}`)}),d.forEach(p=>{l+=`   ${p}
`}),l+=`
💡 建議的前端請求邏輯:
`,l+=`   根據以上文檔ID格式，前端應該使用:
`,c.length>0){const p=c[0];p.id.split("_").length===3&&(l+="   格式: ${courseId}_${chapterIndex}_${sectionIndex}\n",l+=`   範例: ${p.id}
`)}r(l),o(c)}catch(s){r(`❌ 查詢失敗: ${s.message}`),o([])}finally{t(!1)}},disabled:e,children:e?"查詢中...":"🔍 查詢 section_contents 集合"})}),n&&u(qwe,{children:n}),i.length>0&&y("div",{children:[u("h3",{style:{marginTop:"30px",marginBottom:"20px"},children:"📋 詳細文檔列表"}),i.map((s,l)=>y(Wwe,{children:[u("h4",{style:{margin:"0 0 10px 0",color:"#FFE082"},children:s.title}),y("p",{style:{margin:"5px 0",fontSize:"12px"},children:[u("strong",{children:"文檔ID:"})," ",s.id]}),y("p",{style:{margin:"5px 0",fontSize:"12px"},children:[u("strong",{children:"路徑參數:"})," courseId=",s.courseId,", chapterIndex=",s.chapterIndex,", sectionIndex=",s.sectionIndex]}),y("p",{style:{margin:"5px 0",fontSize:"12px"},children:[u("strong",{children:"副標題:"})," ",s.subtitle||"無"]}),y("p",{style:{margin:"5px 0",fontSize:"12px"},children:[u("strong",{children:"時長/難度:"})," ",s.estimatedTime," / ",s.difficulty]})]},l))]})]})},Gwe=b("div",{target:"e6fwhaw10"})({name:"16xebg2",styles:"max-width:800px;margin:40px auto;padding:30px;background:linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);border:2px solid #ff7c00;border-radius:12px;color:#ffffff;font-family:'Roboto Mono',monospace"}),Ywe=b("h1",{target:"e6fwhaw9"})({name:"1y6evon",styles:"text-align:center;color:#ff7c00;font-size:28px;font-weight:900;text-transform:uppercase;letter-spacing:2px;margin-bottom:30px;text-shadow:0 0 10px rgba(255, 124, 0, 0.5)"}),U1=b("div",{target:"e6fwhaw8"})({name:"pkchhr",styles:"background:linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);border:1px solid #404040;border-radius:8px;padding:24px;margin-bottom:24px;position:relative;&::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg, #ff7c00, #ffc107, #ff7c00);}"}),q1=b("h2",{target:"e6fwhaw7"})({name:"kdq9cd",styles:"color:#ff7c00;font-size:20px;font-weight:800;text-transform:uppercase;letter-spacing:1px;margin-bottom:16px;display:flex;align-items:center;gap:8px"}),Kwe=b("select",{target:"e6fwhaw6"})({name:"16yqcdx",styles:"width:100%;padding:12px;background:#2a2a2a;color:#ffffff;border:2px solid #404040;border-radius:6px;font-size:14px;font-weight:600;font-family:'Roboto Mono',monospace;&:focus{outline:none;border-color:#ff7c00;box-shadow:0 0 10px rgba(255, 124, 0, 0.3);}option{background:#2a2a2a;color:#ffffff;}"}),W1=b("button",{target:"e6fwhaw5"})("padding:12px 24px;background:",e=>e.danger?"linear-gradient(135deg, #dc2626 0%, #991b1b 100%)":e.warning?"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)":"linear-gradient(135deg, #ff7c00 0%, #ffc107 100%)",";color:",e=>e.danger||e.warning?"#ffffff":"#000000",";border:2px solid ",e=>e.danger?"#dc2626":e.warning?"#f59e0b":"#ff7c00",";border-radius:6px;font-size:14px;font-weight:800;text-transform:uppercase;letter-spacing:1px;cursor:pointer;transition:all 0.3s ease;font-family:'Roboto Mono',monospace;margin-right:12px;margin-bottom:8px;&:hover{transform:translateY(-2px);box-shadow:0 6px 20px ",e=>e.danger?"rgba(220, 38, 38, 0.4)":e.warning?"rgba(245, 158, 11, 0.4)":"rgba(255, 124, 0, 0.4)",";}&:disabled{opacity:0.5;cursor:not-allowed;transform:none;}"),Y6=b("div",{target:"e6fwhaw4"})({name:"gxrlt1",styles:"background:rgba(255, 124, 0, 0.1);border:1px solid rgba(255, 124, 0, 0.3);border-radius:8px;padding:16px;margin:16px 0;h4{color:#ff7c00;margin:0 0 8px 0;font-size:16px;font-weight:700;}p{color:#e0e0e0;margin:0;font-size:14px;line-height:1.5;}"}),Xwe=b("div",{target:"e6fwhaw3"})("background:",e=>e.success?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",";border:1px solid ",e=>e.success?"rgba(34, 197, 94, 0.3)":"rgba(239, 68, 68, 0.3)",";border-radius:8px;padding:16px;margin:16px 0;color:",e=>e.success?"#22c55e":"#ef4444",";h4{margin:0 0 8px 0;font-size:16px;font-weight:700;}p{margin:0;font-size:14px;line-height:1.5;}"),Qwe=b("div",{target:"e6fwhaw2"})({name:"uppxed",styles:"display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:16px;margin:16px 0"}),bg=b("div",{target:"e6fwhaw1"})({name:"15vq0oa",styles:"background:linear-gradient(135deg, #404040 0%, #2a2a2a 100%);padding:16px;border-radius:8px;border:1px solid #555555;text-align:center;h3{color:#ff7c00;font-size:24px;font-weight:900;margin:0 0 8px 0;}p{color:#c0c0c0;font-size:14px;margin:0;text-transform:uppercase;letter-spacing:1px;}"}),H1=b("div",{target:"e6fwhaw0"})({name:"100itt0",styles:"display:inline-block;width:20px;height:20px;border:2px solid #404040;border-radius:50%;border-top-color:#ff7c00;animation:spin 1s ease-in-out infinite;margin-right:8px;@keyframes spin{to{transform:rotate(360deg);}}"}),Jwe=()=>{const[e,t]=D.useState([]),[n,r]=D.useState(""),[i,o]=D.useState(!1),[a,s]=D.useState({announcements:{total:0,byStore:{}},schedules:{total:0,byStore:{}}}),[l,c]=D.useState(null);D.useEffect(()=>{d()},[]);const d=async()=>{try{o(!0);const g=await be(se(U,"users")),m=new Set;g.docs.forEach(_=>{const I=_.data();I.store&&m.add(I.store),I.storeName&&I.store&&m.add(I.store)});const v=await be(se(U,"announcements")),w={total:0,byStore:{}};v.docs.forEach(_=>{const I=_.data();w.total++;let E="global";if(I.storeId)E=I.storeId;else if(I.publisher&&I.publisher!=="enterprise")E=I.publisher;else if(I.targetStores&&Array.isArray(I.targetStores)){I.targetStores.forEach(k=>{w.byStore[k]||(w.byStore[k]=0),w.byStore[k]++});return}w.byStore[E]||(w.byStore[E]=0),w.byStore[E]++});const S=await be(se(U,"schedules")),C={total:0,byStore:{}};S.docs.forEach(_=>{const I=_.data();C.total++;const E=I.store||"unknown";C.byStore[E]||(C.byStore[E]=0),C.byStore[E]++,I.store&&m.add(I.store)});const A=Array.from(m).sort();t(A),s({announcements:w,schedules:C})}catch(g){console.error("載入資料失敗:",g),c({success:!1,message:`載入資料失敗: ${g.message}`})}finally{o(!1)}},p=async()=>{if(window.confirm(n?`確定要刪除分店「${n}」的所有公告資料嗎？此操作無法復原！`:"確定要刪除所有公告資料嗎？此操作無法復原！"))try{o(!0);let g,m=0;if(n===""){const v=await be(se(U,"announcements")),w=Bo(U);v.docs.forEach(S=>{w.delete(S.ref),m++}),await w.commit()}else{const v=[g(se(U,"announcements"),tn("storeId","==",n)),g(se(U,"announcements"),tn("publisher","==",n)),g(se(U,"announcements"),tn("targetStores","array-contains",n))];for(const w of v){const S=await be(w),C=Bo(U);S.docs.forEach(A=>{C.delete(A.ref),m++}),S.docs.length>0&&await C.commit()}}c({success:!0,message:`成功刪除 ${m} 筆公告資料`}),await d()}catch(g){console.error("刪除公告失敗:",g),c({success:!1,message:`刪除公告失敗: ${g.message}`})}finally{o(!1)}},f=async()=>{if(window.confirm(n?`確定要刪除分店「${n}」的所有排班資料嗎？此操作無法復原！`:"確定要刪除所有排班資料嗎？此操作無法復原！"))try{o(!0);let g=0;if(n===""){const m=await be(se(U,"schedules")),v=Bo(U);m.docs.forEach(w=>{v.delete(w.ref),g++}),await v.commit()}else{const m=tt(se(U,"schedules"),tn("store","==",n)),v=await be(m),w=Bo(U);v.docs.forEach(S=>{w.delete(S.ref),g++}),await w.commit()}c({success:!0,message:`成功刪除 ${g} 筆排班資料`}),await d()}catch(g){console.error("刪除排班失敗:",g),c({success:!1,message:`刪除排班失敗: ${g.message}`})}finally{o(!1)}},h=async()=>{if(window.confirm(n?`確定要刪除分店「${n}」的所有公告和排班資料嗎？此操作無法復原！`:"確定要刪除所有公告和排班資料嗎？此操作無法復原！"))try{o(!0);let g=0;if(n===""){const m=await be(se(U,"announcements")),v=Bo(U);m.docs.forEach(w=>{v.delete(w.ref),g++}),await v.commit()}else{const m=[tt(se(U,"announcements"),tn("storeId","==",n)),tt(se(U,"announcements"),tn("publisher","==",n)),tt(se(U,"announcements"),tn("targetStores","array-contains",n))];for(const v of m){const w=await be(v),S=Bo(U);w.docs.forEach(C=>{S.delete(C.ref),g++}),w.docs.length>0&&await S.commit()}}if(n===""){const m=await be(se(U,"schedules")),v=Bo(U);m.docs.forEach(w=>{v.delete(w.ref),g++}),await v.commit()}else{const m=tt(se(U,"schedules"),tn("store","==",n)),v=await be(m),w=Bo(U);v.docs.forEach(S=>{w.delete(S.ref),g++}),await w.commit()}c({success:!0,message:`成功刪除 ${g} 筆資料（公告 + 排班）`}),await d()}catch(g){console.error("刪除所有資料失敗:",g),c({success:!1,message:`刪除資料失敗: ${g.message}`})}finally{o(!1)}};return y(Gwe,{children:[y(Ywe,{children:[u("i",{className:"ri-delete-bin-line",style:{marginRight:"12px"}}),"資料清理工具"]}),y(U1,{children:[y(q1,{children:[u("i",{className:"ri-store-2-line"}),"分店選擇"]}),y(Kwe,{value:n,onChange:g=>r(g.target.value),children:[u("option",{value:"",children:"所有分店"}),e.map(g=>u("option",{value:g,children:g},g))]}),y(Y6,{children:[u("h4",{children:"⚠️ 操作說明"}),u("p",{children:"選擇「所有分店」將刪除整個系統的資料。 選擇特定分店只會刪除該分店相關的資料。 請謹慎操作，刪除後無法復原！"})]})]}),y(U1,{children:[y(q1,{children:[u("i",{className:"ri-bar-chart-line"}),"資料統計"]}),y(Qwe,{children:[y(bg,{children:[u("h3",{children:a.announcements.total}),u("p",{children:"總公告數"})]}),y(bg,{children:[u("h3",{children:a.schedules.total}),u("p",{children:"總排班數"})]}),y(bg,{children:[u("h3",{children:n?a.announcements.byStore[n]||0:a.announcements.total}),u("p",{children:n?`${n} 公告`:"全部公告"})]}),y(bg,{children:[u("h3",{children:n?a.schedules.byStore[n]||0:a.schedules.total}),u("p",{children:n?`${n} 排班`:"全部排班"})]})]})]}),y(U1,{children:[y(q1,{children:[u("i",{className:"ri-tools-line"}),"清理操作"]}),y("div",{children:[y(W1,{warning:!0,onClick:p,disabled:i,children:[i&&u(H1,{}),"刪除公告資料"]}),y(W1,{warning:!0,onClick:f,disabled:i,children:[i&&u(H1,{}),"刪除排班資料"]}),y(W1,{danger:!0,onClick:h,disabled:i,children:[i&&u(H1,{}),"刪除所有資料"]})]}),y(Y6,{children:[u("h4",{children:"🔧 操作提示"}),y("p",{children:["「刪除公告資料」：只刪除公告相關資料",u("br",{}),"「刪除排班資料」：只刪除排班相關資料",u("br",{}),"「刪除所有資料」：同時刪除公告和排班資料"]})]})]}),l&&y(Xwe,{success:l.success,children:[u("h4",{children:l.success?"✅ 操作成功":"❌ 操作失敗"}),u("p",{children:l.message})]})]})};var Wv={exports:{}},wd={exports:{}};(function(){var e,t,n,r,i,o;typeof performance<"u"&&performance!==null&&performance.now?wd.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(wd.exports=function(){return(e()-i)/1e6},t=process.hrtime,e=function(){var a;return a=t(),a[0]*1e9+a[1]},r=e(),o=process.uptime()*1e9,i=r-o):Date.now?(wd.exports=function(){return Date.now()-n},n=Date.now()):(wd.exports=function(){return new Date().getTime()-n},n=new Date().getTime())}).call(_d);var Zwe=wd.exports,e5e=Zwe,Ko=typeof window>"u"?_d:window,wg=["moz","webkit"],Ec="AnimationFrame",Qc=Ko["request"+Ec],Gp=Ko["cancel"+Ec]||Ko["cancelRequest"+Ec];for(var sd=0;!Qc&&sd<wg.length;sd++)Qc=Ko[wg[sd]+"Request"+Ec],Gp=Ko[wg[sd]+"Cancel"+Ec]||Ko[wg[sd]+"CancelRequest"+Ec];if(!Qc||!Gp){var G1=0,K6=0,zs=[],t5e=1e3/60;Qc=function(e){if(zs.length===0){var t=e5e(),n=Math.max(0,t5e-(t-G1));G1=n+t,setTimeout(function(){var r=zs.slice(0);zs.length=0;for(var i=0;i<r.length;i++)if(!r[i].cancelled)try{r[i].callback(G1)}catch(o){setTimeout(function(){throw o},0)}},Math.round(n))}return zs.push({handle:++K6,callback:e,cancelled:!1}),K6},Gp=function(e){for(var t=0;t<zs.length;t++)zs[t].handle===e&&(zs[t].cancelled=!0)}}Wv.exports=function(e){return Qc.call(Ko,e)};Wv.exports.cancel=function(){Gp.apply(Ko,arguments)};Wv.exports.polyfill=function(e){e||(e=Ko),e.requestAnimationFrame=Qc,e.cancelAnimationFrame=Gp};var n5e=Wv.exports;const X6=Jc(n5e);var r5e=function(e,t,n,r,i,o,a,s){if(!e){var l;if(t===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,a,s],d=0;l=new Error(t.replace(/%s/g,function(){return c[d++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}},i5e=r5e,Hv={};Object.defineProperty(Hv,"__esModule",{value:!0});function aw(e,t,n,r){var i,o=!1,a=0;function s(){i&&clearTimeout(i)}function l(){s(),o=!0}typeof t!="boolean"&&(r=n,n=t,t=void 0);function c(){for(var d=arguments.length,p=new Array(d),f=0;f<d;f++)p[f]=arguments[f];var h=this,g=Date.now()-a;if(o)return;function m(){a=Date.now(),n.apply(h,p)}function v(){i=void 0}r&&!i&&m(),s(),r===void 0&&g>e?m():t!==!0&&(i=setTimeout(r?v:m,r===void 0?e-g:e))}return c.cancel=l,c}function o5e(e,t,n){return n===void 0?aw(e,t,!1):aw(e,n,t!==!1)}Hv.debounce=o5e;Hv.throttle=aw;var k9={exports:{}},a5e=k9.exports={};a5e.forEach=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n]);if(r)return r}};var E9=k9.exports,s5e=function(e){var t=e.stateHandler.getState;function n(a){var s=t(a);return s&&!!s.isDetectable}function r(a){t(a).isDetectable=!0}function i(a){return!!t(a).busy}function o(a,s){t(a).busy=!!s}return{isDetectable:n,markAsDetectable:r,isBusy:i,markBusy:o}},l5e=function(e){var t={};function n(a){var s=e.get(a);return s===void 0?[]:t[s]||[]}function r(a,s){var l=e.get(a);t[l]||(t[l]=[]),t[l].push(s)}function i(a,s){for(var l=n(a),c=0,d=l.length;c<d;++c)if(l[c]===s){l.splice(c,1);break}}function o(a){var s=n(a);s&&(s.length=0)}return{get:n,add:r,removeListener:i,removeAllListeners:o}},c5e=function(){var e=1;function t(){return e++}return{generate:t}},u5e=function(e){var t=e.idGenerator,n=e.stateHandler.getState;function r(o){var a=n(o);return a&&a.id!==void 0?a.id:null}function i(o){var a=n(o);if(!a)throw new Error("setId required the element to have a resize detection state.");var s=t.generate();return a.id=s,s}return{get:r,set:i}},d5e=function(e){function t(){}var n={log:t,warn:t,error:t};if(!e&&window.console){var r=function(i,o){i[o]=function(){var s=console[o];if(s.apply)s.apply(console,arguments);else for(var l=0;l<arguments.length;l++)s(arguments[l])}};r(n,"log"),r(n,"warn"),r(n,"error")}return n},T9={exports:{}},I9=T9.exports={};I9.isIE=function(e){function t(){var r=navigator.userAgent.toLowerCase();return r.indexOf("msie")!==-1||r.indexOf("trident")!==-1||r.indexOf(" edge/")!==-1}if(!t())return!1;if(!e)return!0;var n=function(){var r,i=3,o=document.createElement("div"),a=o.getElementsByTagName("i");do o.innerHTML="<!--[if gt IE "+ ++i+"]><i></i><![endif]-->";while(a[0]);return i>4?i:r}();return e===n};I9.isLegacyOpera=function(){return!!window.opera};var A9=T9.exports,P9={exports:{}},p5e=P9.exports={};p5e.getOption=h5e;function h5e(e,t,n){var r=e[t];return r==null&&n!==void 0?n:r}var f5e=P9.exports,Q6=f5e,g5e=function(t){t=t||{};var n=t.reporter,r=Q6.getOption(t,"async",!0),i=Q6.getOption(t,"auto",!0);i&&!r&&(n&&n.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),r=!0);var o=J6(),a,s=!1;function l(g,m){!s&&i&&r&&o.size()===0&&p(),o.add(g,m)}function c(){for(s=!0;o.size();){var g=o;o=J6(),g.process()}s=!1}function d(g){s||(g===void 0&&(g=r),a&&(f(a),a=null),g?p():c())}function p(){a=h(c)}function f(g){var m=clearTimeout;return m(g)}function h(g){var m=function(v){return setTimeout(v,0)};return m(g)}return{add:l,force:d}};function J6(){var e={},t=0,n=0,r=0;function i(s,l){l||(l=s,s=0),s>n?n=s:s<r&&(r=s),e[s]||(e[s]=[]),e[s].push(l),t++}function o(){for(var s=r;s<=n;s++)for(var l=e[s],c=0;c<l.length;c++){var d=l[c];d()}}function a(){return t}return{add:i,process:o,size:a}}var HC="_erd";function m5e(e){return e[HC]={},D9(e)}function D9(e){return e[HC]}function v5e(e){delete e[HC]}var x5e={initState:m5e,getState:D9,cleanState:v5e},ld=A9,y5e=function(e){e=e||{};var t=e.reporter,n=e.batchProcessor,r=e.stateHandler.getState;if(!t)throw new Error("Missing required dependency: reporter.");function i(c,d){function p(){d(c)}if(ld.isIE(8))r(c).object={proxy:p},c.attachEvent("onresize",p);else{var f=s(c);if(!f)throw new Error("Element is not detectable by this strategy.");f.contentDocument.defaultView.addEventListener("resize",p)}}function o(c){var d=e.important?" !important; ":"; ";return(c.join(d)+d).trim()}function a(c,d,p){p||(p=d,d=c,c=null),c=c||{},c.debug;function f(h,g){var m=o(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),v=!1,w=window.getComputedStyle(h),S=h.offsetWidth,C=h.offsetHeight;r(h).startSize={width:S,height:C};function A(){function _(){if(w.position==="static"){h.style.setProperty("position","relative",c.important?"important":"");var k=function(T,P,O,R){function N(B){return B.replace(/[^-\d\.]/g,"")}var L=O[R];L!=="auto"&&N(L)!=="0"&&(T.warn("An element that is positioned static has style."+R+"="+L+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+R+" will be set to 0. Element: ",P),P.style.setProperty(R,"0",c.important?"important":""))};k(t,h,w,"top"),k(t,h,w,"right"),k(t,h,w,"bottom"),k(t,h,w,"left")}}function I(){v||_();function k(P,O){if(!P.contentDocument){var R=r(P);R.checkForObjectDocumentTimeoutId&&window.clearTimeout(R.checkForObjectDocumentTimeoutId),R.checkForObjectDocumentTimeoutId=setTimeout(function(){R.checkForObjectDocumentTimeoutId=0,k(P,O)},100);return}O(P.contentDocument)}var T=this;k(T,function(O){g(h)})}w.position!==""&&(_(),v=!0);var E=document.createElement("object");E.style.cssText=m,E.tabIndex=-1,E.type="text/html",E.setAttribute("aria-hidden","true"),E.onload=I,ld.isIE()||(E.data="about:blank"),r(h)&&(h.appendChild(E),r(h).object=E,ld.isIE()&&(E.data="about:blank"))}n?n.add(A):A()}ld.isIE(8)?p(d):f(d,p)}function s(c){return r(c).object}function l(c){if(r(c)){var d=s(c);d&&(ld.isIE(8)?c.detachEvent("onresize",d.proxy):c.removeChild(d),r(c).checkForObjectDocumentTimeoutId&&window.clearTimeout(r(c).checkForObjectDocumentTimeoutId),delete r(c).object)}}return{makeDetectable:a,addListener:i,uninstall:l}},b5e=E9.forEach,w5e=function(e){e=e||{};var t=e.reporter,n=e.batchProcessor,r=e.stateHandler.getState;e.stateHandler.hasState;var i=e.idHandler;if(!n)throw new Error("Missing required dependency: batchProcessor");if(!t)throw new Error("Missing required dependency: reporter.");var o=d(),a="erd_scroll_detection_scrollbar_style",s="erd_scroll_detection_container";function l(A){p(A,a,s)}l(window.document);function c(A){var _=e.important?" !important; ":"; ";return(A.join(_)+_).trim()}function d(){var A=500,_=500,I=document.createElement("div");I.style.cssText=c(["position: absolute","width: "+A*2+"px","height: "+_*2+"px","visibility: hidden","margin: 0","padding: 0"]);var E=document.createElement("div");E.style.cssText=c(["position: absolute","width: "+A+"px","height: "+_+"px","overflow: scroll","visibility: none","top: "+-500*3+"px","left: "+-500*3+"px","visibility: hidden","margin: 0","padding: 0"]),E.appendChild(I),document.body.insertBefore(E,document.body.firstChild);var k=A-E.clientWidth,T=_-E.clientHeight;return document.body.removeChild(E),{width:k,height:T}}function p(A,_,I){function E(O,R){R=R||function(L){A.head.appendChild(L)};var N=A.createElement("style");return N.innerHTML=O,N.id=_,R(N),N}if(!A.getElementById(_)){var k=I+"_animation",T=I+"_animation_active",P=`/* Created by the element-resize-detector library. */
`;P+="."+I+" > div::-webkit-scrollbar { "+c(["display: none"])+` }

`,P+="."+T+" { "+c(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+k,"animation-name: "+k])+` }
`,P+="@-webkit-keyframes "+k+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,P+="@keyframes "+k+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",E(P)}}function f(A){A.className+=" "+s+"_animation_active"}function h(A,_,I){if(A.addEventListener)A.addEventListener(_,I);else if(A.attachEvent)A.attachEvent("on"+_,I);else return t.error("[scroll] Don't know how to add event listeners.")}function g(A,_,I){if(A.removeEventListener)A.removeEventListener(_,I);else if(A.detachEvent)A.detachEvent("on"+_,I);else return t.error("[scroll] Don't know how to remove event listeners.")}function m(A){return r(A).container.childNodes[0].childNodes[0].childNodes[0]}function v(A){return r(A).container.childNodes[0].childNodes[0].childNodes[1]}function w(A,_){var I=r(A).listeners;if(!I.push)throw new Error("Cannot add listener to an element that is not detectable.");r(A).listeners.push(_)}function S(A,_,I){I||(I=_,_=A,A=null),A=A||{};function E(){if(A.debug){var ee=Array.prototype.slice.call(arguments);if(ee.unshift(i.get(_),"Scroll: "),t.log.apply)t.log.apply(null,ee);else for(var oe=0;oe<ee.length;oe++)t.log(ee[oe])}}function k(ee){function oe(he){var we=he.getRootNode&&he.getRootNode().contains(he);return he===he.ownerDocument.body||he.ownerDocument.body.contains(he)||we}return!oe(ee)||window.getComputedStyle(ee)===null}function T(ee){var oe=r(ee).container.childNodes[0],he=window.getComputedStyle(oe);return!he.width||he.width.indexOf("px")===-1}function P(){var ee=window.getComputedStyle(_),oe={};return oe.position=ee.position,oe.width=_.offsetWidth,oe.height=_.offsetHeight,oe.top=ee.top,oe.right=ee.right,oe.bottom=ee.bottom,oe.left=ee.left,oe.widthCSS=ee.width,oe.heightCSS=ee.height,oe}function O(){var ee=P();r(_).startSize={width:ee.width,height:ee.height},E("Element start size",r(_).startSize)}function R(){r(_).listeners=[]}function N(){if(E("storeStyle invoked."),!r(_)){E("Aborting because element has been uninstalled");return}var ee=P();r(_).style=ee}function L(ee,oe,he){r(ee).lastWidth=oe,r(ee).lastHeight=he}function B(ee){return m(ee).childNodes[0]}function V(){return 2*o.width+1}function j(){return 2*o.height+1}function z(ee){return ee+10+V()}function H(ee){return ee+10+j()}function J(ee){return ee*2+V()}function de(ee){return ee*2+j()}function ae(ee,oe,he){var we=m(ee),W=v(ee),ge=z(oe),fe=H(he),ve=J(oe),ce=de(he);we.scrollLeft=ge,we.scrollTop=fe,W.scrollLeft=ve,W.scrollTop=ce}function Ce(){var ee=r(_).container;if(!ee){ee=document.createElement("div"),ee.className=s,ee.style.cssText=c(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),r(_).container=ee,f(ee),_.appendChild(ee);var oe=function(){r(_).onRendered&&r(_).onRendered()};h(ee,"animationstart",oe),r(_).onAnimationStart=oe}return ee}function te(){function ee(){var at=r(_).style;if(at.position==="static"){_.style.setProperty("position","relative",A.important?"important":"");var _t=function(Ht,q,X,ie){function ne(Me){return Me.replace(/[^-\d\.]/g,"")}var Te=X[ie];Te!=="auto"&&ne(Te)!=="0"&&(Ht.warn("An element that is positioned static has style."+ie+"="+Te+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+ie+" will be set to 0. Element: ",q),q.style[ie]=0)};_t(t,_,at,"top"),_t(t,_,at,"right"),_t(t,_,at,"bottom"),_t(t,_,at,"left")}}function oe(at,_t,Ht,q){return at=at?at+"px":"0",_t=_t?_t+"px":"0",Ht=Ht?Ht+"px":"0",q=q?q+"px":"0",["left: "+at,"top: "+_t,"right: "+q,"bottom: "+Ht]}if(E("Injecting elements"),!r(_)){E("Aborting because element has been uninstalled");return}ee();var he=r(_).container;he||(he=Ce());var we=o.width,W=o.height,ge=c(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),fe=c(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(oe(-(1+we),-(1+W),-W,-we))),ve=c(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),ce=c(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),De=c(["position: absolute","left: 0","top: 0"]),He=c(["position: absolute","width: 200%","height: 200%"]),Ue=document.createElement("div"),et=document.createElement("div"),pt=document.createElement("div"),jt=document.createElement("div"),Rt=document.createElement("div"),ln=document.createElement("div");Ue.dir="ltr",Ue.style.cssText=ge,Ue.className=s,et.className=s,et.style.cssText=fe,pt.style.cssText=ve,jt.style.cssText=De,Rt.style.cssText=ce,ln.style.cssText=He,pt.appendChild(jt),Rt.appendChild(ln),et.appendChild(pt),et.appendChild(Rt),Ue.appendChild(et),he.appendChild(Ue);function gt(){var at=r(_);at&&at.onExpand?at.onExpand():E("Aborting expand scroll handler: element has been uninstalled")}function wt(){var at=r(_);at&&at.onShrink?at.onShrink():E("Aborting shrink scroll handler: element has been uninstalled")}h(pt,"scroll",gt),h(Rt,"scroll",wt),r(_).onExpandScroll=gt,r(_).onShrinkScroll=wt}function G(){function ee(ve,ce,De){var He=B(ve),Ue=z(ce),et=H(De);He.style.setProperty("width",Ue+"px",A.important?"important":""),He.style.setProperty("height",et+"px",A.important?"important":"")}function oe(ve){var ce=_.offsetWidth,De=_.offsetHeight,He=ce!==r(_).lastWidth||De!==r(_).lastHeight;E("Storing current size",ce,De),L(_,ce,De),n.add(0,function(){if(He){if(!r(_)){E("Aborting because element has been uninstalled");return}if(!he()){E("Aborting because element container has not been initialized");return}if(A.debug){var et=_.offsetWidth,pt=_.offsetHeight;(et!==ce||pt!==De)&&t.warn(i.get(_),"Scroll: Size changed before updating detector elements.")}ee(_,ce,De)}}),n.add(1,function(){if(!r(_)){E("Aborting because element has been uninstalled");return}if(!he()){E("Aborting because element container has not been initialized");return}ae(_,ce,De)}),He&&ve&&n.add(2,function(){if(!r(_)){E("Aborting because element has been uninstalled");return}if(!he()){E("Aborting because element container has not been initialized");return}ve()})}function he(){return!!r(_).container}function we(){function ve(){return r(_).lastNotifiedWidth===void 0}E("notifyListenersIfNeeded invoked");var ce=r(_);if(ve()&&ce.lastWidth===ce.startSize.width&&ce.lastHeight===ce.startSize.height)return E("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(ce.lastWidth===ce.lastNotifiedWidth&&ce.lastHeight===ce.lastNotifiedHeight)return E("Not notifying: Size already notified");E("Current size not notified, notifying..."),ce.lastNotifiedWidth=ce.lastWidth,ce.lastNotifiedHeight=ce.lastHeight,b5e(r(_).listeners,function(De){De(_)})}function W(){if(E("startanimation triggered."),T(_)){E("Ignoring since element is still unrendered...");return}E("Element rendered.");var ve=m(_),ce=v(_);(ve.scrollLeft===0||ve.scrollTop===0||ce.scrollLeft===0||ce.scrollTop===0)&&(E("Scrollbars out of sync. Updating detector elements..."),oe(we))}function ge(){if(E("Scroll detected."),T(_)){E("Scroll event fired while unrendered. Ignoring...");return}oe(we)}if(E("registerListenersAndPositionElements invoked."),!r(_)){E("Aborting because element has been uninstalled");return}r(_).onRendered=W,r(_).onExpand=ge,r(_).onShrink=ge;var fe=r(_).style;ee(_,fe.width,fe.height)}function K(){if(E("finalizeDomMutation invoked."),!r(_)){E("Aborting because element has been uninstalled");return}var ee=r(_).style;L(_,ee.width,ee.height),ae(_,ee.width,ee.height)}function me(){I(_)}function ye(){E("Installing..."),R(),O(),n.add(0,N),n.add(1,te),n.add(2,G),n.add(3,K),n.add(4,me)}E("Making detectable..."),k(_)?(E("Element is detached"),Ce(),E("Waiting until element is attached..."),r(_).onRendered=function(){E("Element is now attached"),ye()}):ye()}function C(A){var _=r(A);_&&(_.onExpandScroll&&g(m(A),"scroll",_.onExpandScroll),_.onShrinkScroll&&g(v(A),"scroll",_.onShrinkScroll),_.onAnimationStart&&g(_.container,"animationstart",_.onAnimationStart),_.container&&A.removeChild(_.container))}return{makeDetectable:S,addListener:w,uninstall:C,initDocument:l}},Sd=E9.forEach,S5e=s5e,C5e=l5e,_5e=c5e,k5e=u5e,E5e=d5e,Z6=A9,T5e=g5e,Aa=x5e,I5e=y5e,A5e=w5e;function eP(e){return Array.isArray(e)||e.length!==void 0}function tP(e){if(Array.isArray(e))return e;var t=[];return Sd(e,function(n){t.push(n)}),t}function nP(e){return e&&e.nodeType===1}var P5e=function(e){e=e||{};var t;if(e.idHandler)t={get:function(S){return e.idHandler.get(S,!0)},set:e.idHandler.set};else{var n=_5e(),r=k5e({idGenerator:n,stateHandler:Aa});t=r}var i=e.reporter;if(!i){var o=i===!1;i=E5e(o)}var a=Pa(e,"batchProcessor",T5e({reporter:i})),s={};s.callOnAdd=!!Pa(e,"callOnAdd",!0),s.debug=!!Pa(e,"debug",!1);var l=C5e(t),c=S5e({stateHandler:Aa}),d,p=Pa(e,"strategy","object"),f=Pa(e,"important",!1),h={reporter:i,batchProcessor:a,stateHandler:Aa,idHandler:t,important:f};if(p==="scroll"&&(Z6.isLegacyOpera()?(i.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),p="object"):Z6.isIE(9)&&(i.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),p="object")),p==="scroll")d=A5e(h);else if(p==="object")d=I5e(h);else throw new Error("Invalid strategy name: "+p);var g={};function m(S,C,A){function _(O){var R=l.get(O);Sd(R,function(L){L(O)})}function I(O,R,N){l.add(R,N),O&&N(R)}if(A||(A=C,C=S,S={}),!C)throw new Error("At least one element required.");if(!A)throw new Error("Listener required.");if(nP(C))C=[C];else if(eP(C))C=tP(C);else return i.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var E=0,k=Pa(S,"callOnAdd",s.callOnAdd),T=Pa(S,"onReady",function(){}),P=Pa(S,"debug",s.debug);Sd(C,function(R){Aa.getState(R)||(Aa.initState(R),t.set(R));var N=t.get(R);if(P&&i.log("Attaching listener to element",N,R),!c.isDetectable(R)){if(P&&i.log(N,"Not detectable."),c.isBusy(R)){P&&i.log(N,"System busy making it detectable"),I(k,R,A),g[N]=g[N]||[],g[N].push(function(){E++,E===C.length&&T()});return}return P&&i.log(N,"Making detectable..."),c.markBusy(R,!0),d.makeDetectable({debug:P,important:f},R,function(B){if(P&&i.log(N,"onElementDetectable"),Aa.getState(B)){c.markAsDetectable(B),c.markBusy(B,!1),d.addListener(B,_),I(k,B,A);var V=Aa.getState(B);if(V&&V.startSize){var j=B.offsetWidth,z=B.offsetHeight;(V.startSize.width!==j||V.startSize.height!==z)&&_(B)}g[N]&&Sd(g[N],function(H){H()})}else P&&i.log(N,"Element uninstalled before being detectable.");delete g[N],E++,E===C.length&&T()})}P&&i.log(N,"Already detecable, adding listener."),I(k,R,A),E++}),E===C.length&&T()}function v(S){if(!S)return i.error("At least one element is required.");if(nP(S))S=[S];else if(eP(S))S=tP(S);else return i.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");Sd(S,function(C){l.removeAllListeners(C),d.uninstall(C),Aa.cleanState(C)})}function w(S){d.initDocument&&d.initDocument(S)}return{listenTo:m,removeListener:l.removeListener,removeAllListeners:l.removeAllListeners,uninstall:v,initDocument:w}};function Pa(e,t,n){var r=e[t];return r==null&&n!==void 0?n:r}var D5e=function(t,n,r,i){var o=r?r.call(i,t,n):void 0;if(o!==void 0)return!!o;if(t===n)return!0;if(typeof t!="object"||!t||typeof n!="object"||!n)return!1;var a=Object.keys(t),s=Object.keys(n);if(a.length!==s.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(n),c=0;c<a.length;c++){var d=a[c];if(!l(d))return!1;var p=t[d],f=n[d];if(o=r?r.call(i,p,f,d):void 0,o===!1||o===void 0&&p!==f)return!1}return!0},f0=D,R5e=ru,N5e=i5e,rP=Hv,M5e=P5e,O5e=D5e;function Lh(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var al=Lh(f0),$5e=Lh(R5e),Y1=Lh(N5e),L5e=Lh(M5e),F5e=Lh(O5e);function iP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function oP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iP(Object(n),!0).forEach(function(r){kr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function GC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B5e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function YC(e,t,n){return t&&B5e(e.prototype,t),e}function kr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g0(){return g0=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g0.apply(this,arguments)}function KC(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sw(e,t)}function m0(e){return m0=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},m0(e)}function sw(e,t){return sw=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},sw(e,t)}function z5e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function V5e(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function nm(e,t){if(e==null)return{};var n=V5e(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ti(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j5e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ti(e)}function XC(e){var t=z5e();return function(){var r=m0(e),i;if(t){var o=m0(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return j5e(this,i)}}var K1={};function U5e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"scroll";return K1[e]||(K1[e]=L5e.default({strategy:e})),K1[e]}var q5e=["explicitRef","className","style","size","disablePlaceholder","onSize"],W5e="react-sizeme: an error occurred whilst stopping to listen to node size changes",Vs={monitorWidth:!0,monitorHeight:!1,refreshRate:16,refreshMode:"throttle",noPlaceholder:!1,resizeDetectorStrategy:"scroll"};function R9(e){return e.displayName||e.name||"Component"}var N9=function(e){KC(n,e);var t=XC(n);function n(){return GC(this,n),t.apply(this,arguments)}return YC(n,[{key:"render",value:function(){return f0.Children.only(this.props.children)}}]),n}(f0.Component);kr(N9,"displayName","SizeMeReferenceWrapper");function M9(e){var t=e.className,n=e.style,r={};return!t&&!n?r.style={width:"100%",height:"100%"}:(t&&(r.className=t),n&&(r.style=n)),al.default.createElement("div",r)}M9.displayName="SizeMePlaceholder";var H5e=function(t){function n(r){var i=r.explicitRef,o=r.className,a=r.style,s=r.size,l=r.disablePlaceholder;r.onSize;var c=nm(r,q5e),d=s==null||s.width==null&&s.height==null,p=d&&!l,f={className:o,style:a};s!=null&&(f.size=s);var h=p?al.default.createElement(M9,{className:o,style:a}):al.default.createElement(t,g0({},f,c));return al.default.createElement(N9,{ref:i},h)}return n.displayName="SizeMeRenderer(".concat(R9(t),")"),n};function sa(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Vs,t=e.monitorWidth,n=t===void 0?Vs.monitorWidth:t,r=e.monitorHeight,i=r===void 0?Vs.monitorHeight:r,o=e.refreshRate,a=o===void 0?Vs.refreshRate:o,s=e.refreshMode,l=s===void 0?Vs.refreshMode:s,c=e.noPlaceholder,d=c===void 0?Vs.noPlaceholder:c,p=e.resizeDetectorStrategy,f=p===void 0?Vs.resizeDetectorStrategy:p;Y1.default(n||i,'You have to monitor at least one of the width or height when using "sizeMe"'),Y1.default(a>=16,"It is highly recommended that you don't put your refreshRate lower than 16 as this may cause layout thrashing."),Y1.default(l==="throttle"||l==="debounce",'The refreshMode should have a value of "throttle" or "debounce"');var h=l==="throttle"?rP.throttle:rP.debounce;return function(m){var v=H5e(m),w=function(S){KC(A,S);var C=XC(A);function A(){var _;GC(this,A);for(var I=arguments.length,E=new Array(I),k=0;k<I;k++)E[k]=arguments[k];return _=C.call.apply(C,[this].concat(E)),kr(Ti(_),"domEl",null),kr(Ti(_),"state",{width:void 0,height:void 0}),kr(Ti(_),"uninstall",function(){if(_.domEl){try{_.detector.uninstall(_.domEl)}catch{console.warn(W5e)}_.domEl=null}}),kr(Ti(_),"determineStrategy",function(T){T.onSize?(_.callbackState||(_.callbackState=oP({},_.state)),_.strategy="callback"):_.strategy="render"}),kr(Ti(_),"strategisedSetState",function(T){_.strategy==="callback"&&(_.callbackState=T,_.props.onSize(T)),_.setState(T)}),kr(Ti(_),"strategisedGetState",function(){return _.strategy==="callback"?_.callbackState:_.state}),kr(Ti(_),"refCallback",function(T){_.element=T}),kr(Ti(_),"hasSizeChanged",function(T,P){var O=T,R=P;return n&&O.width!==R.width||i&&O.height!==R.height}),kr(Ti(_),"checkIfSizeChanged",h(a,function(T){var P=T.getBoundingClientRect(),O=P.width,R=P.height,N={width:n?O:null,height:i?R:null};_.hasSizeChanged(_.strategisedGetState(),N)&&_.strategisedSetState(N)})),_}return YC(A,[{key:"componentDidMount",value:function(){this.detector=U5e(f),this.determineStrategy(this.props),this.handleDOMNode()}},{key:"componentDidUpdate",value:function(){this.determineStrategy(this.props),this.handleDOMNode()}},{key:"componentWillUnmount",value:function(){this.hasSizeChanged=function(){},this.checkIfSizeChanged=function(){},this.uninstall()}},{key:"handleDOMNode",value:function(){var I=this.element&&$5e.default.findDOMNode(this.element);if(!I){this.uninstall();return}this.domEl?(this.domEl.isSameNode&&!this.domEl.isSameNode(I)||this.domEl!==I)&&(this.uninstall(),this.domEl=I,this.detector.listenTo(this.domEl,this.checkIfSizeChanged)):(this.domEl=I,this.detector.listenTo(this.domEl,this.checkIfSizeChanged))}},{key:"render",value:function(){var I=sa.enableSSRBehaviour||sa.noPlaceholders||d||this.strategy==="callback",E=oP({},this.state);return al.default.createElement(v,g0({explicitRef:this.refCallback,size:this.strategy==="callback"?null:E,disablePlaceholder:I},this.props))}}]),A}(al.default.Component);return kr(w,"displayName","SizeMe(".concat(R9(m),")")),w.WrappedComponent=m,w}}sa.enableSSRBehaviour=!1;sa.noPlaceholders=!1;var G5e=["children","render"],Y5e=["children","render"],K5e=["children","render"],O9=function(e){KC(n,e);var t=XC(n);function n(r){var i;GC(this,n),i=t.call(this,r),kr(Ti(i),"createComponent",function(a){i.SizeAware=sa(a)(function(s){var l=s.children;return l})}),kr(Ti(i),"onSize",function(a){return i.setState({size:a})}),r.children,r.render;var o=nm(r,G5e);return i.createComponent(o),i.state={size:{width:void 0,height:void 0}},i}return YC(n,[{key:"componentDidUpdate",value:function(i){var o=this.props;o.children,o.render;var a=nm(o,Y5e);i.children,i.render;var s=nm(i,K5e);F5e.default(a,s)||this.createComponent(a)}},{key:"render",value:function(){var i=this.SizeAware,o=this.props.children||this.props.render;return al.default.createElement(i,{onSize:this.onSize},o({size:this.state.size}))}}]),n}(f0.Component);kr(O9,"defaultProps",{children:void 0,render:void 0});sa.SizeMe=O9;sa.withSize=sa;var X5e=sa;const Q5e=Jc(X5e);var $9={exports:{}},J5e={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},L9={exports:{}},Z5e=function(t){return!t||typeof t=="string"?!1:t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&t.constructor.name!=="String")},eSe=Z5e,tSe=Array.prototype.concat,nSe=Array.prototype.slice,aP=L9.exports=function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];eSe(o)?n=tSe.call(n,nSe.call(o)):n.push(o)}return n};aP.wrap=function(e){return function(){return e(aP(arguments))}};var rSe=L9.exports,Kd=J5e,Fh=rSe,F9=Object.hasOwnProperty,B9=Object.create(null);for(var X1 in Kd)F9.call(Kd,X1)&&(B9[Kd[X1]]=X1);var ii=$9.exports={to:{},get:{}};ii.get=function(e){var t=e.substring(0,3).toLowerCase(),n,r;switch(t){case"hsl":n=ii.get.hsl(e),r="hsl";break;case"hwb":n=ii.get.hwb(e),r="hwb";break;default:n=ii.get.rgb(e),r="rgb";break}return n?{model:r,value:n}:null};ii.get.rgb=function(e){if(!e)return null;var t=/^#([a-f0-9]{3,4})$/i,n=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,r=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,o=/^(\w+)$/,a=[0,0,0,1],s,l,c;if(s=e.match(n)){for(c=s[2],s=s[1],l=0;l<3;l++){var d=l*2;a[l]=parseInt(s.slice(d,d+2),16)}c&&(a[3]=parseInt(c,16)/255)}else if(s=e.match(t)){for(s=s[1],c=s[3],l=0;l<3;l++)a[l]=parseInt(s[l]+s[l],16);c&&(a[3]=parseInt(c+c,16)/255)}else if(s=e.match(r)){for(l=0;l<3;l++)a[l]=parseInt(s[l+1],0);s[4]&&(s[5]?a[3]=parseFloat(s[4])*.01:a[3]=parseFloat(s[4]))}else if(s=e.match(i)){for(l=0;l<3;l++)a[l]=Math.round(parseFloat(s[l+1])*2.55);s[4]&&(s[5]?a[3]=parseFloat(s[4])*.01:a[3]=parseFloat(s[4]))}else return(s=e.match(o))?s[1]==="transparent"?[0,0,0,0]:F9.call(Kd,s[1])?(a=Kd[s[1]],a[3]=1,a):null:null;for(l=0;l<3;l++)a[l]=ls(a[l],0,255);return a[3]=ls(a[3],0,1),a};ii.get.hsl=function(e){if(!e)return null;var t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=e.match(t);if(n){var r=parseFloat(n[4]),i=(parseFloat(n[1])%360+360)%360,o=ls(parseFloat(n[2]),0,100),a=ls(parseFloat(n[3]),0,100),s=ls(isNaN(r)?1:r,0,1);return[i,o,a,s]}return null};ii.get.hwb=function(e){if(!e)return null;var t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=e.match(t);if(n){var r=parseFloat(n[4]),i=(parseFloat(n[1])%360+360)%360,o=ls(parseFloat(n[2]),0,100),a=ls(parseFloat(n[3]),0,100),s=ls(isNaN(r)?1:r,0,1);return[i,o,a,s]}return null};ii.to.hex=function(){var e=Fh(arguments);return"#"+Sg(e[0])+Sg(e[1])+Sg(e[2])+(e[3]<1?Sg(Math.round(e[3]*255)):"")};ii.to.rgb=function(){var e=Fh(arguments);return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"};ii.to.rgb.percent=function(){var e=Fh(arguments),t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")"};ii.to.hsl=function(){var e=Fh(arguments);return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};ii.to.hwb=function(){var e=Fh(arguments),t="";return e.length>=4&&e[3]!==1&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"};ii.to.keyword=function(e){return B9[e.slice(0,3)]};function ls(e,t,n){return Math.min(Math.max(t,e),n)}function Sg(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}var iSe=$9.exports,z9={exports:{}},oSe={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},sl=oSe,V9={};for(var Q1 in sl)sl.hasOwnProperty(Q1)&&(V9[sl[Q1]]=Q1);var je=z9.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var Or in je)if(je.hasOwnProperty(Or)){if(!("channels"in je[Or]))throw new Error("missing channels property: "+Or);if(!("labels"in je[Or]))throw new Error("missing channel labels property: "+Or);if(je[Or].labels.length!==je[Or].channels)throw new Error("channel and label counts mismatch: "+Or);var aSe=je[Or].channels,sSe=je[Or].labels;delete je[Or].channels,delete je[Or].labels,Object.defineProperty(je[Or],"channels",{value:aSe}),Object.defineProperty(je[Or],"labels",{value:sSe})}je.rgb.hsl=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=o-i,s,l,c;return o===i?s=0:t===o?s=(n-r)/a:n===o?s=2+(r-t)/a:r===o&&(s=4+(t-n)/a),s=Math.min(s*60,360),s<0&&(s+=360),c=(i+o)/2,o===i?l=0:c<=.5?l=a/(o+i):l=a/(2-o-i),[s,l*100,c*100]};je.rgb.hsv=function(e){var t,n,r,i,o,a=e[0]/255,s=e[1]/255,l=e[2]/255,c=Math.max(a,s,l),d=c-Math.min(a,s,l),p=function(f){return(c-f)/6/d+1/2};return d===0?i=o=0:(o=d/c,t=p(a),n=p(s),r=p(l),a===c?i=r-n:s===c?i=1/3+t-r:l===c&&(i=2/3+n-t),i<0?i+=1:i>1&&(i-=1)),[i*360,o*100,c*100]};je.rgb.hwb=function(e){var t=e[0],n=e[1],r=e[2],i=je.rgb.hsl(e)[0],o=1/255*Math.min(t,Math.min(n,r));return r=1-1/255*Math.max(t,Math.max(n,r)),[i,o*100,r*100]};je.rgb.cmyk=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255,i,o,a,s;return s=Math.min(1-t,1-n,1-r),i=(1-t-s)/(1-s)||0,o=(1-n-s)/(1-s)||0,a=(1-r-s)/(1-s)||0,[i*100,o*100,a*100,s*100]};function lSe(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2)}je.rgb.keyword=function(e){var t=V9[e];if(t)return t;var n=1/0,r;for(var i in sl)if(sl.hasOwnProperty(i)){var o=sl[i],a=lSe(e,o);a<n&&(n=a,r=i)}return r};je.keyword.rgb=function(e){return sl[e]};je.rgb.xyz=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;var i=t*.4124+n*.3576+r*.1805,o=t*.2126+n*.7152+r*.0722,a=t*.0193+n*.1192+r*.9505;return[i*100,o*100,a*100]};je.rgb.lab=function(e){var t=je.rgb.xyz(e),n=t[0],r=t[1],i=t[2],o,a,s;return n/=95.047,r/=100,i/=108.883,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,o=116*r-16,a=500*(n-r),s=200*(r-i),[o,a,s]};je.hsl.rgb=function(e){var t=e[0]/360,n=e[1]/100,r=e[2]/100,i,o,a,s,l;if(n===0)return l=r*255,[l,l,l];r<.5?o=r*(1+n):o=r+n-r*n,i=2*r-o,s=[0,0,0];for(var c=0;c<3;c++)a=t+1/3*-(c-1),a<0&&a++,a>1&&a--,6*a<1?l=i+(o-i)*6*a:2*a<1?l=o:3*a<2?l=i+(o-i)*(2/3-a)*6:l=i,s[c]=l*255;return s};je.hsl.hsv=function(e){var t=e[0],n=e[1]/100,r=e[2]/100,i=n,o=Math.max(r,.01),a,s;return r*=2,n*=r<=1?r:2-r,i*=o<=1?o:2-o,s=(r+n)/2,a=r===0?2*i/(o+i):2*n/(r+n),[t,a*100,s*100]};je.hsv.rgb=function(e){var t=e[0]/60,n=e[1]/100,r=e[2]/100,i=Math.floor(t)%6,o=t-Math.floor(t),a=255*r*(1-n),s=255*r*(1-n*o),l=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,l,a];case 1:return[s,r,a];case 2:return[a,r,l];case 3:return[a,s,r];case 4:return[l,a,r];case 5:return[r,a,s]}};je.hsv.hsl=function(e){var t=e[0],n=e[1]/100,r=e[2]/100,i=Math.max(r,.01),o,a,s;return s=(2-n)*r,o=(2-n)*i,a=n*i,a/=o<=1?o:2-o,a=a||0,s/=2,[t,a*100,s*100]};je.hwb.rgb=function(e){var t=e[0]/360,n=e[1]/100,r=e[2]/100,i=n+r,o,a,s,l;i>1&&(n/=i,r/=i),o=Math.floor(6*t),a=1-r,s=6*t-o,o&1&&(s=1-s),l=n+s*(a-n);var c,d,p;switch(o){default:case 6:case 0:c=a,d=l,p=n;break;case 1:c=l,d=a,p=n;break;case 2:c=n,d=a,p=l;break;case 3:c=n,d=l,p=a;break;case 4:c=l,d=n,p=a;break;case 5:c=a,d=n,p=l;break}return[c*255,d*255,p*255]};je.cmyk.rgb=function(e){var t=e[0]/100,n=e[1]/100,r=e[2]/100,i=e[3]/100,o,a,s;return o=1-Math.min(1,t*(1-i)+i),a=1-Math.min(1,n*(1-i)+i),s=1-Math.min(1,r*(1-i)+i),[o*255,a*255,s*255]};je.xyz.rgb=function(e){var t=e[0]/100,n=e[1]/100,r=e[2]/100,i,o,a;return i=t*3.2406+n*-1.5372+r*-.4986,o=t*-.9689+n*1.8758+r*.0415,a=t*.0557+n*-.204+r*1.057,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*12.92,i=Math.min(Math.max(0,i),1),o=Math.min(Math.max(0,o),1),a=Math.min(Math.max(0,a),1),[i*255,o*255,a*255]};je.xyz.lab=function(e){var t=e[0],n=e[1],r=e[2],i,o,a;return t/=95.047,n/=100,r/=108.883,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,i=116*n-16,o=500*(t-n),a=200*(n-r),[i,o,a]};je.lab.xyz=function(e){var t=e[0],n=e[1],r=e[2],i,o,a;o=(t+16)/116,i=n/500+o,a=o-r/200;var s=Math.pow(o,3),l=Math.pow(i,3),c=Math.pow(a,3);return o=s>.008856?s:(o-16/116)/7.787,i=l>.008856?l:(i-16/116)/7.787,a=c>.008856?c:(a-16/116)/7.787,i*=95.047,o*=100,a*=108.883,[i,o,a]};je.lab.lch=function(e){var t=e[0],n=e[1],r=e[2],i,o,a;return i=Math.atan2(r,n),o=i*360/2/Math.PI,o<0&&(o+=360),a=Math.sqrt(n*n+r*r),[t,a,o]};je.lch.lab=function(e){var t=e[0],n=e[1],r=e[2],i,o,a;return a=r/360*2*Math.PI,i=n*Math.cos(a),o=n*Math.sin(a),[t,i,o]};je.rgb.ansi16=function(e){var t=e[0],n=e[1],r=e[2],i=1 in arguments?arguments[1]:je.rgb.hsv(e)[2];if(i=Math.round(i/50),i===0)return 30;var o=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return i===2&&(o+=60),o};je.hsv.ansi16=function(e){return je.rgb.ansi16(je.hsv.rgb(e),e[2])};je.rgb.ansi256=function(e){var t=e[0],n=e[1],r=e[2];if(t===n&&n===r)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;var i=16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5);return i};je.ansi16.rgb=function(e){var t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];var n=(~~(e>50)+1)*.5,r=(t&1)*n*255,i=(t>>1&1)*n*255,o=(t>>2&1)*n*255;return[r,i,o]};je.ansi256.rgb=function(e){if(e>=232){var t=(e-232)*10+8;return[t,t,t]}e-=16;var n,r=Math.floor(e/36)/5*255,i=Math.floor((n=e%36)/6)/5*255,o=n%6/5*255;return[r,i,o]};je.rgb.hex=function(e){var t=((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255),n=t.toString(16).toUpperCase();return"000000".substring(n.length)+n};je.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var n=t[0];t[0].length===3&&(n=n.split("").map(function(s){return s+s}).join(""));var r=parseInt(n,16),i=r>>16&255,o=r>>8&255,a=r&255;return[i,o,a]};je.rgb.hcg=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.max(Math.max(t,n),r),o=Math.min(Math.min(t,n),r),a=i-o,s,l;return a<1?s=o/(1-a):s=0,a<=0?l=0:i===t?l=(n-r)/a%6:i===n?l=2+(r-t)/a:l=4+(t-n)/a+4,l/=6,l%=1,[l*360,a*100,s*100]};je.hsl.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=1,i=0;return n<.5?r=2*t*n:r=2*t*(1-n),r<1&&(i=(n-.5*r)/(1-r)),[e[0],r*100,i*100]};je.hsv.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=t*n,i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],r*100,i*100]};je.hcg.rgb=function(e){var t=e[0]/360,n=e[1]/100,r=e[2]/100;if(n===0)return[r*255,r*255,r*255];var i=[0,0,0],o=t%1*6,a=o%1,s=1-a,l=0;switch(Math.floor(o)){case 0:i[0]=1,i[1]=a,i[2]=0;break;case 1:i[0]=s,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=a;break;case 3:i[0]=0,i[1]=s,i[2]=1;break;case 4:i[0]=a,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=s}return l=(1-n)*r,[(n*i[0]+l)*255,(n*i[1]+l)*255,(n*i[2]+l)*255]};je.hcg.hsv=function(e){var t=e[1]/100,n=e[2]/100,r=t+n*(1-t),i=0;return r>0&&(i=t/r),[e[0],i*100,r*100]};je.hcg.hsl=function(e){var t=e[1]/100,n=e[2]/100,r=n*(1-t)+.5*t,i=0;return r>0&&r<.5?i=t/(2*r):r>=.5&&r<1&&(i=t/(2*(1-r))),[e[0],i*100,r*100]};je.hcg.hwb=function(e){var t=e[1]/100,n=e[2]/100,r=t+n*(1-t);return[e[0],(r-t)*100,(1-r)*100]};je.hwb.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=1-n,i=r-t,o=0;return i<1&&(o=(r-i)/(1-i)),[e[0],i*100,o*100]};je.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};je.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};je.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};je.gray.hsl=je.gray.hsv=function(e){return[0,0,e[0]]};je.gray.hwb=function(e){return[0,100,e[0]]};je.gray.cmyk=function(e){return[0,0,0,e[0]]};je.gray.lab=function(e){return[e[0],0,0]};je.gray.hex=function(e){var t=Math.round(e[0]/100*255)&255,n=(t<<16)+(t<<8)+t,r=n.toString(16).toUpperCase();return"000000".substring(r.length)+r};je.rgb.gray=function(e){var t=(e[0]+e[1]+e[2])/3;return[t/255*100]};var j9=z9.exports,v0=j9;function cSe(){for(var e={},t=Object.keys(v0),n=t.length,r=0;r<n;r++)e[t[r]]={distance:-1,parent:null};return e}function uSe(e){var t=cSe(),n=[e];for(t[e].distance=0;n.length;)for(var r=n.pop(),i=Object.keys(v0[r]),o=i.length,a=0;a<o;a++){var s=i[a],l=t[s];l.distance===-1&&(l.distance=t[r].distance+1,l.parent=r,n.unshift(s))}return t}function dSe(e,t){return function(n){return t(e(n))}}function pSe(e,t){for(var n=[t[e].parent,e],r=v0[t[e].parent][e],i=t[e].parent;t[i].parent;)n.unshift(t[i].parent),r=dSe(v0[t[i].parent][i],r),i=t[i].parent;return r.conversion=n,r}var hSe=function(e){for(var t=uSe(e),n={},r=Object.keys(t),i=r.length,o=0;o<i;o++){var a=r[o],s=t[a];s.parent!==null&&(n[a]=pSe(a,t))}return n},lw=j9,fSe=hSe,Yl={},gSe=Object.keys(lw);function mSe(e){var t=function(n){return n==null?n:(arguments.length>1&&(n=Array.prototype.slice.call(arguments)),e(n))};return"conversion"in e&&(t.conversion=e.conversion),t}function vSe(e){var t=function(n){if(n==null)return n;arguments.length>1&&(n=Array.prototype.slice.call(arguments));var r=e(n);if(typeof r=="object")for(var i=r.length,o=0;o<i;o++)r[o]=Math.round(r[o]);return r};return"conversion"in e&&(t.conversion=e.conversion),t}gSe.forEach(function(e){Yl[e]={},Object.defineProperty(Yl[e],"channels",{value:lw[e].channels}),Object.defineProperty(Yl[e],"labels",{value:lw[e].labels});var t=fSe(e),n=Object.keys(t);n.forEach(function(r){var i=t[r];Yl[e][r]=vSe(i),Yl[e][r].raw=mSe(i)})});var xSe=Yl,Cd=iSe,Zr=xSe,QC=[].slice,U9=["keyword","gray","hex"],cw={};Object.keys(Zr).forEach(function(e){cw[QC.call(Zr[e].labels).sort().join("")]=e});var x0={};function Zn(e,t){if(!(this instanceof Zn))return new Zn(e,t);if(t&&t in U9&&(t=null),t&&!(t in Zr))throw new Error("Unknown model: "+t);var n,r;if(e==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof Zn)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if(typeof e=="string"){var i=Cd.get(e);if(i===null)throw new Error("Unable to parse color from string: "+e);this.model=i.model,r=Zr[this.model].channels,this.color=i.value.slice(0,r),this.valpha=typeof i.value[r]=="number"?i.value[r]:1}else if(e.length){this.model=t||"rgb",r=Zr[this.model].channels;var o=QC.call(e,0,r);this.color=uw(o,r),this.valpha=typeof e[r]=="number"?e[r]:1}else if(typeof e=="number")e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{this.valpha=1;var a=Object.keys(e);"alpha"in e&&(a.splice(a.indexOf("alpha"),1),this.valpha=typeof e.alpha=="number"?e.alpha:0);var s=a.sort().join("");if(!(s in cw))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=cw[s];var l=Zr[this.model].labels,c=[];for(n=0;n<l.length;n++)c.push(e[l[n]]);this.color=uw(c)}if(x0[this.model])for(r=Zr[this.model].channels,n=0;n<r;n++){var d=x0[this.model][n];d&&(this.color[n]=d(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Zn.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var t=this.model in Cd.to?this:this.rgb();t=t.round(typeof e=="number"?e:1);var n=t.valpha===1?t.color:t.color.concat(this.valpha);return Cd.to[t.model](n)},percentString:function(e){var t=this.rgb().round(typeof e=="number"?e:1),n=t.valpha===1?t.color:t.color.concat(this.valpha);return Cd.to.rgb.percent(n)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},t=Zr[this.model].channels,n=Zr[this.model].labels,r=0;r<t;r++)e[n[r]]=this.color[r];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new Zn(this.color.map(bSe(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new Zn(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:dn("rgb",0,An(255)),green:dn("rgb",1,An(255)),blue:dn("rgb",2,An(255)),hue:dn(["hsl","hsv","hsl","hwb","hcg"],0,function(e){return(e%360+360)%360}),saturationl:dn("hsl",1,An(100)),lightness:dn("hsl",2,An(100)),saturationv:dn("hsv",1,An(100)),value:dn("hsv",2,An(100)),chroma:dn("hcg",1,An(100)),gray:dn("hcg",2,An(100)),white:dn("hwb",1,An(100)),wblack:dn("hwb",2,An(100)),cyan:dn("cmyk",0,An(100)),magenta:dn("cmyk",1,An(100)),yellow:dn("cmyk",2,An(100)),black:dn("cmyk",3,An(100)),x:dn("xyz",0,An(100)),y:dn("xyz",1,An(100)),z:dn("xyz",2,An(100)),l:dn("lab",0,An(100)),a:dn("lab",1),b:dn("lab",2),keyword:function(e){return arguments.length?new Zn(e):Zr[this.model].keyword(this.color)},hex:function(e){return arguments.length?new Zn(e):Cd.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity:function(){for(var e=this.rgb().color,t=[],n=0;n<e.length;n++){var r=e[n]/255;t[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},isDark:function(){var e=this.rgb().color,t=(e[0]*299+e[1]*587+e[2]*114)/1e3;return t<128},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten:function(e){var t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken:function(e){var t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate:function(e){var t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate:function(e){var t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten:function(e){var t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken:function(e){var t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale:function(){var e=this.rgb().color,t=e[0]*.3+e[1]*.59+e[2]*.11;return Zn.rgb(t,t,t)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl(),n=t.color[0];return n=(n+e)%360,n=n<0?360+n:n,t.color[0]=n,t},mix:function(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);var n=e.rgb(),r=this.rgb(),i=t===void 0?.5:t,o=2*i-1,a=n.alpha()-r.alpha(),s=((o*a===-1?o:(o+a)/(1+o*a))+1)/2,l=1-s;return Zn.rgb(s*n.red()+l*r.red(),s*n.green()+l*r.green(),s*n.blue()+l*r.blue(),n.alpha()*i+r.alpha()*(1-i))}};Object.keys(Zr).forEach(function(e){if(U9.indexOf(e)===-1){var t=Zr[e].channels;Zn.prototype[e]=function(){if(this.model===e)return new Zn(this);if(arguments.length)return new Zn(arguments,e);var n=typeof arguments[t]=="number"?t:this.valpha;return new Zn(wSe(Zr[this.model][e].raw(this.color)).concat(n),e)},Zn[e]=function(n){return typeof n=="number"&&(n=uw(QC.call(arguments),t)),new Zn(n,e)}}});function ySe(e,t){return Number(e.toFixed(t))}function bSe(e){return function(t){return ySe(t,e)}}function dn(e,t,n){return e=Array.isArray(e)?e:[e],e.forEach(function(r){(x0[r]||(x0[r]=[]))[t]=n}),e=e[0],function(r){var i;return arguments.length?(n&&(r=n(r)),i=this[e](),i.color[t]=r,i):(i=this[e]().color[t],n&&(i=n(i)),i)}}function An(e){return function(t){return Math.max(0,Math.min(e,t))}}function wSe(e){return Array.isArray(e)?e:[e]}function uw(e,t){for(var n=0;n<t;n++)typeof e[n]!="number"&&(e[n]=0);return e}var SSe=Zn;const CSe=Jc(SSe);function JC(e,t){return t={exports:{}},e(t,t.exports),t.exports}var qn=typeof Symbol=="function"&&Symbol.for,ZC=qn?Symbol.for("react.element"):60103,e_=qn?Symbol.for("react.portal"):60106,Gv=qn?Symbol.for("react.fragment"):60107,Yv=qn?Symbol.for("react.strict_mode"):60108,Kv=qn?Symbol.for("react.profiler"):60114,Xv=qn?Symbol.for("react.provider"):60109,Qv=qn?Symbol.for("react.context"):60110,t_=qn?Symbol.for("react.async_mode"):60111,Jv=qn?Symbol.for("react.concurrent_mode"):60111,Zv=qn?Symbol.for("react.forward_ref"):60112,ex=qn?Symbol.for("react.suspense"):60113,_Se=qn?Symbol.for("react.suspense_list"):60120,tx=qn?Symbol.for("react.memo"):60115,nx=qn?Symbol.for("react.lazy"):60116,kSe=qn?Symbol.for("react.block"):60121,ESe=qn?Symbol.for("react.fundamental"):60117,TSe=qn?Symbol.for("react.responder"):60118,ISe=qn?Symbol.for("react.scope"):60119;function mi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case ZC:switch(e=e.type,e){case t_:case Jv:case Gv:case Kv:case Yv:case ex:return e;default:switch(e=e&&e.$$typeof,e){case Qv:case Zv:case nx:case tx:case Xv:return e;default:return t}}case e_:return t}}}function q9(e){return mi(e)===Jv}var ASe=t_,PSe=Jv,DSe=Qv,RSe=Xv,NSe=ZC,MSe=Zv,OSe=Gv,$Se=nx,LSe=tx,FSe=e_,BSe=Kv,zSe=Yv,VSe=ex,jSe=function(e){return q9(e)||mi(e)===t_},USe=q9,qSe=function(e){return mi(e)===Qv},WSe=function(e){return mi(e)===Xv},HSe=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===ZC},GSe=function(e){return mi(e)===Zv},YSe=function(e){return mi(e)===Gv},KSe=function(e){return mi(e)===nx},XSe=function(e){return mi(e)===tx},QSe=function(e){return mi(e)===e_},JSe=function(e){return mi(e)===Kv},ZSe=function(e){return mi(e)===Yv},eCe=function(e){return mi(e)===ex},tCe=function(e){return typeof e=="string"||typeof e=="function"||e===Gv||e===Jv||e===Kv||e===Yv||e===ex||e===_Se||typeof e=="object"&&e!==null&&(e.$$typeof===nx||e.$$typeof===tx||e.$$typeof===Xv||e.$$typeof===Qv||e.$$typeof===Zv||e.$$typeof===ESe||e.$$typeof===TSe||e.$$typeof===ISe||e.$$typeof===kSe)},nCe=mi,rCe={AsyncMode:ASe,ConcurrentMode:PSe,ContextConsumer:DSe,ContextProvider:RSe,Element:NSe,ForwardRef:MSe,Fragment:OSe,Lazy:$Se,Memo:LSe,Portal:FSe,Profiler:BSe,StrictMode:zSe,Suspense:VSe,isAsyncMode:jSe,isConcurrentMode:USe,isContextConsumer:qSe,isContextProvider:WSe,isElement:HSe,isForwardRef:GSe,isFragment:YSe,isLazy:KSe,isMemo:XSe,isPortal:QSe,isProfiler:JSe,isStrictMode:ZSe,isSuspense:eCe,isValidElementType:tCe,typeOf:nCe};JC(function(e,t){});JC(function(e){e.exports=rCe});var sP=Object.getOwnPropertySymbols,iCe=Object.prototype.hasOwnProperty,oCe=Object.prototype.propertyIsEnumerable;function aCe(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function sCe(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}sCe();var lCe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",cCe=lCe;Function.call.bind(Object.prototype.hasOwnProperty);function W9(){}function H9(){}H9.resetWarningCache=W9;var uCe=function(){function e(r,i,o,a,s,l){if(l!==cCe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:H9,resetWarningCache:W9};return n.PropTypes=n,n},js=JC(function(e){e.exports=uCe()});function lP(e,t,n){const r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw e.getShaderInfoLog(r);return r}class Fo{constructor(t,n,r){const i=lP(t,t.VERTEX_SHADER,n),o=lP(t,t.FRAGMENT_SHADER,r);if(this.uniforms={},this.program=t.createProgram(),this.gl=t,t.attachShader(this.program,i),t.attachShader(this.program,o),t.linkProgram(this.program),!t.getProgramParameter(this.program,t.LINK_STATUS))throw t.getProgramInfoLog(this.program);const a=t.getProgramParameter(this.program,t.ACTIVE_UNIFORMS);for(let s=0;s<a;s++){const l=t.getActiveUniform(this.program,s).name;this.uniforms[l]=t.getUniformLocation(this.program,l)}}bind(){this.gl.useProgram(this.program)}}function dCe(e){const t={alpha:!1,depth:!1,stencil:!1,antialias:!1};let n=e.getContext("webgl2",t);const r=!!n;r||(n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t));let i,o;r?(n.getExtension("EXT_color_buffer_float"),o=n.getExtension("OES_texture_float_linear")):(i=n.getExtension("OES_texture_half_float"),o=n.getExtension("OES_texture_half_float_linear")),n.clearColor(0,0,0,1);const a=r?n.HALF_FLOAT:i.HALF_FLOAT_OES;let s,l,c;return r?(s=Ma(n,n.RGBA16F,n.RGBA,a),l=Ma(n,n.RG16F,n.RG,a),c=Ma(n,n.R16F,n.RED,a)):(s=Ma(n,n.RGBA,n.RGBA,a),l=Ma(n,n.RGBA,n.RGBA,a),c=Ma(n,n.RGBA,n.RGBA,a)),{gl:n,ext:{formatRGBA:s,formatRG:l,formatR:c,halfFloatTexType:a,supportLinearFiltering:o}}}function Ma(e,t,n,r){if(!pCe(e,t,n,r))switch(t){case e.R16F:return Ma(e,e.RG16F,e.RG,r);case e.RG16F:return Ma(e,e.RGBA16F,e.RGBA,r);default:return null}return{internalFormat:t,format:n}}function pCe(e,t,n,r){const i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,t,4,4,0,n,r,null);let o=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE}var hCe=`
precision highp float;
precision mediump sampler2D;

varying vec2 vUv;
uniform sampler2D uVelocity;
uniform sampler2D uSource;
uniform vec2 texelSize;
uniform float dt;
uniform float dissipation;

vec4 bilerp (in sampler2D sam, in vec2 p) {
  vec4 st;
  st.xy = floor(p - 0.5) + 0.5;
  st.zw = st.xy + 1.0;
  vec4 uv = st * texelSize.xyxy;
  vec4 a = texture2D(sam, uv.xy);
  vec4 b = texture2D(sam, uv.zy);
  vec4 c = texture2D(sam, uv.xw);
  vec4 d = texture2D(sam, uv.zw);
  vec2 f = p - st.xy;
  return mix(mix(a, b, f.x), mix(c, d, f.x), f.y);
}

void main () {
  vec2 coord = gl_FragCoord.xy - dt * texture2D(uVelocity, vUv).xy;
  gl_FragColor = dissipation * bilerp(uSource, coord);
  gl_FragColor.a = 1.0;
}
`,fCe=`
precision highp float;
precision mediump sampler2D;

varying vec2 vUv;
uniform sampler2D uVelocity;
uniform sampler2D uSource;
uniform vec2 texelSize;
uniform float dt;
uniform float dissipation;

void main () {
  vec2 coord = vUv - dt * texture2D(uVelocity, vUv).xy * texelSize;
  gl_FragColor = dissipation * texture2D(uSource, coord);
  gl_FragColor.a = 1.0;
}
`,gCe=`
precision highp float;
precision mediump sampler2D;

varying vec2 vUv;
uniform sampler2D uTexture;
uniform float value;

void main () {
  gl_FragColor = value * texture2D(uTexture, vUv);
}
`,mCe=`
precision highp float;
precision mediump sampler2D;

varying vec2 vUv;
varying vec2 vL;
varying vec2 vR;
varying vec2 vT;
varying vec2 vB;
uniform sampler2D uVelocity;

void main () {
  float L = texture2D(uVelocity, vL).y;
  float R = texture2D(uVelocity, vR).y;
  float T = texture2D(uVelocity, vT).x;
  float B = texture2D(uVelocity, vB).x;
  float vorticity = R - L - T + B;
  gl_FragColor = vec4(vorticity, 0.0, 0.0, 1.0);
}
`,vCe=`
precision highp float;
precision mediump sampler2D;

varying vec2 vUv;
uniform sampler2D uTexture;

void main () {
  gl_FragColor = texture2D(uTexture, vUv);
}
`,xCe=`
precision highp float;
precision mediump sampler2D;

varying vec2 vUv;
varying vec2 vL;
varying vec2 vR;
varying vec2 vT;
varying vec2 vB;
uniform sampler2D uVelocity;

vec2 sampleVelocity (in vec2 uv) {
  vec2 multiplier = vec2(1.0, 1.0);
  if (uv.x < 0.0) { uv.x = 0.0; multiplier.x = -1.0; };
  if (uv.x > 1.0) { uv.x = 1.0; multiplier.x = -1.0; };
  if (uv.y < 0.0) { uv.y = 0.0; multiplier.y = -1.0; };
  if (uv.y > 1.0) { uv.y = 1.0; multiplier.y = -1.0; };
  return multiplier * texture2D(uVelocity, uv).xy;
}

void main () {
  float L = sampleVelocity(vL).x;
  float R = sampleVelocity(vR).x;
  float T = sampleVelocity(vT).y;
  float B = sampleVelocity(vB).y;
  float div = 0.5 * (R - L + T - B);
  gl_FragColor = vec4(div, 0.0, 0.0, 1.0);
}
`,yCe=`
precision highp float;
precision mediump sampler2D;

varying vec2 vUv;
varying vec2 vL;
varying vec2 vR;
varying vec2 vT;
varying vec2 vB;
uniform sampler2D uPressure;
uniform sampler2D uVelocity;

vec2 boundary (in vec2 uv) {
  uv = min(max(uv, 0.0), 1.0);
  return uv;
}

void main () {
  float L = texture2D(uPressure, boundary(vL)).x;
  float R = texture2D(uPressure, boundary(vR)).x;
  float T = texture2D(uPressure, boundary(vT)).x;
  float B = texture2D(uPressure, boundary(vB)).x;
  vec2 velocity = texture2D(uVelocity, vUv).xy;
  velocity.xy -= vec2(R - L, T - B);
  gl_FragColor = vec4(velocity, 0.0, 1.0);
}
`,bCe=`
precision highp float;
precision mediump sampler2D;

varying vec2 vUv;
varying vec2 vL;
varying vec2 vR;
varying vec2 vT;
varying vec2 vB;
uniform sampler2D uPressure;
uniform sampler2D uDivergence;

vec2 boundary (in vec2 uv) {
  uv = min(max(uv, 0.0), 1.0);
  return uv;
}

void main () {
  float L = texture2D(uPressure, boundary(vL)).x;
  float R = texture2D(uPressure, boundary(vR)).x;
  float T = texture2D(uPressure, boundary(vT)).x;
  float B = texture2D(uPressure, boundary(vB)).x;
  float C = texture2D(uPressure, vUv).x;
  float divergence = texture2D(uDivergence, vUv).x;
  float pressure = (L + R + B + T - divergence) * 0.25;
  gl_FragColor = vec4(pressure, 0.0, 0.0, 1.0);
}
`,wCe=`
precision highp float;
precision mediump sampler2D;

varying vec2 vUv;
uniform sampler2D uTarget;
uniform float aspectRatio;
uniform vec3 color;
uniform vec2 point;
uniform float radius;

void main () {
  vec2 p = vUv - point.xy;
  p.x *= aspectRatio;
  vec3 splat = exp(-dot(p, p) / radius) * color;
  vec3 base = texture2D(uTarget, vUv).xyz;
  gl_FragColor = vec4(base + splat, 1.0);
}
`,SCe=`
precision highp float;
precision mediump sampler2D;

attribute vec2 aPosition;
varying vec2 vUv;
varying vec2 vL;
varying vec2 vR;
varying vec2 vT;
varying vec2 vB;
uniform vec2 texelSize;

void main () {
  vUv = aPosition * 0.5 + 0.5;
  vL = vUv - vec2(texelSize.x, 0.0);
  vR = vUv + vec2(texelSize.x, 0.0);
  vT = vUv + vec2(0.0, texelSize.y);
  vB = vUv - vec2(0.0, texelSize.y);
  gl_Position = vec4(aPosition, 0.0, 1.0);
}
`,CCe=`
precision highp float;
precision mediump sampler2D;

varying vec2 vUv;
varying vec2 vT;
varying vec2 vB;
uniform sampler2D uVelocity;
uniform sampler2D uCurl;
uniform float curl;
uniform float dt;

void main () {
  float T = texture2D(uCurl, vT).x;
  float B = texture2D(uCurl, vB).x;
  float C = texture2D(uCurl, vUv).x;
  vec2 force = vec2(abs(T) - abs(B), 0.0);
  force *= 1.0 / length(force + 0.00001) * curl * C;
  vec2 vel = texture2D(uVelocity, vUv).xy;
  gl_FragColor = vec4(vel + force * dt, 0.0, 1.0);
}
`,Pn={advectionManualFiltering:hCe,advection:fCe,clear:gCe,curl:mCe,display:vCe,divergence:xCe,gradientSubtract:yCe,pressure:bCe,splat:wCe,vert:SCe,vorticity:CCe};function _Ce(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function cP(e){return e[_Ce(0,e.length-1)]}const y0={textureDownsample:1,densityDissipation:.98,velocityDissipation:.99,pressureDissipation:.8,pressureIterations:25,curl:30,splatRadius:.005,colorsPool:["#4e342e","#424242","#00695c"]};class kCe{constructor(){this.id=-1,this.x=0,this.y=0,this.dx=0,this.dy=0,this.down=!1,this.moved=!1,this.color=[30,0,300]}}class ECe{constructor(t){this.onMouseMove=a=>{this._pointers[0].moved=this._pointers[0].down,this._pointers[0].dx=(a.offsetX-this._pointers[0].x)*10,this._pointers[0].dy=(a.offsetY-this._pointers[0].y)*10,this._pointers[0].x=a.offsetX,this._pointers[0].y=a.offsetY},this.start=()=>{this._pointers[0].down=!0,this._pointers[0].color=cP(this._config.colorsPool)},this.end=()=>{this._pointers[0].down=!1},this.changeColor=()=>{this._pointers[0].color=cP(this._config.colorsPool)},this.onTouchStart=a=>{for(let s=0;s<a.touches.length;++s)this._pointers[s].down=!0,this._pointers[s].color=[Math.random()+.2,Math.random()+.2,Math.random()+.2]},this.onTouchMove=a=>{for(let s=0;s<a.touches.length;++s){const l=a.touches[s];this._pointers[s].moved=this._pointers[s].down,this._pointers[s].dx=(l.clientX-this._pointers[s].x)*10,this._pointers[s].dy=(l.clientY-this._pointers[s].y)*10,this._pointers[s].x=l.clientX,this._pointers[s].y=l.clientY}},this.onTouchEnd=a=>{for(let s=0;s<a.touches.length;++s)this._pointers[s].down=!1},this._blit=a=>{const s=this._gl;s.bindFramebuffer(s.FRAMEBUFFER,a),s.drawElements(s.TRIANGLES,6,s.UNSIGNED_SHORT,0)};const{canvas:n,config:r=y0}=t;this._canvas=n,this.config={...y0,...r},this._pointers=[new kCe],this._splatStack=[];const{gl:i,ext:o}=dCe(n);this._gl=i,this._ext=o,this._initPrograms(),this._initBlit(),this.resize(),this._time=Date.now(),this._timer=0}get config(){return this._config}set config(t){this._config=t,this._config.colorsPool=this._config.colorsPool.map(n=>CSe(n).rgb().array().map(r=>r/255+.2))}get width(){return this._canvas.width}get height(){return this._canvas.height}addSplat(t){this._splatStack.push([t])}addSplats(t){this._splatStack.push(Array.isArray(t)?t:[t])}addRandomSplats(t){const n=[];for(let r=0;r<t;++r)n.push(this._getRandomSplat());this.addSplats(n)}resize(){const{width:t,height:n}=this._canvas;(this._width!==t||this._height!==n)&&(this._width=t,this._height=n,this._initFramebuffers())}_initPrograms(){const t=this._gl,n=this._ext;this._programs={},this._programs.clear=new Fo(t,Pn.vert,Pn.clear),this._programs.display=new Fo(t,Pn.vert,Pn.display),this._programs.splat=new Fo(t,Pn.vert,Pn.splat),this._programs.advection=new Fo(t,Pn.vert,n.supportLinearFiltering?Pn.advection:Pn.advectionManualFiltering),this._programs.divergence=new Fo(t,Pn.vert,Pn.divergence),this._programs.curl=new Fo(t,Pn.vert,Pn.curl),this._programs.vorticity=new Fo(t,Pn.vert,Pn.vorticity),this._programs.pressure=new Fo(t,Pn.vert,Pn.pressure),this._programs.gradientSubtract=new Fo(t,Pn.vert,Pn.gradientSubtract)}_initFramebuffers(){const t=this._gl,n=this._ext;function r(c,d,p,f,h,g,m){t.activeTexture(t.TEXTURE0+c);const v=t.createTexture();t.bindTexture(t.TEXTURE_2D,v),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,m),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,m),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,f,d,p,0,h,g,null);const w=t.createFramebuffer();return t.bindFramebuffer(t.FRAMEBUFFER,w),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,v,0),t.viewport(0,0,d,p),t.clear(t.COLOR_BUFFER_BIT),[v,w,c]}function i(c,d,p,f,h,g,m){let v=r(c,d,p,f,h,g,m),w=r(c+1,d,p,f,h,g,m);return{get read(){return v},get write(){return w},swap(){const S=v;v=w,w=S}}}this._textureWidth=t.drawingBufferWidth>>this._config.textureDownsample,this._textureHeight=t.drawingBufferHeight>>this._config.textureDownsample;const o=n.halfFloatTexType,a=n.formatRGBA,s=n.formatRG,l=n.formatR;this._density=i(2,this._textureWidth,this._textureHeight,a.internalFormat,a.format,o,n.supportLinearFiltering?t.LINEAR:t.NEAREST),this._velocity=i(0,this._textureWidth,this._textureHeight,s.internalFormat,s.format,o,n.supportLinearFiltering?t.LINEAR:t.NEAREST),this._divergence=r(4,this._textureWidth,this._textureHeight,l.internalFormat,l.format,o,t.NEAREST),this._curl=r(5,this._textureWidth,this._textureHeight,l.internalFormat,l.format,o,t.NEAREST),this._pressure=i(6,this._textureWidth,this._textureHeight,l.internalFormat,l.format,o,t.NEAREST)}_initBlit(){const t=this._gl;t.bindBuffer(t.ARRAY_BUFFER,t.createBuffer()),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,t.createBuffer()),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),t.STATIC_DRAW),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(0)}_splat(t,n,r,i,o){const a=this._gl;this._programs.splat.bind(),a.uniform1i(this._programs.splat.uniforms.uTarget,this._velocity.read[2]),a.uniform1f(this._programs.splat.uniforms.aspectRatio,this._canvas.width/this._canvas.height),a.uniform2f(this._programs.splat.uniforms.point,t/this._canvas.width,1-n/this._canvas.height),a.uniform3f(this._programs.splat.uniforms.color,r,-i,1),a.uniform1f(this._programs.splat.uniforms.radius,this._config.splatRadius),this._blit(this._velocity.write[1]),this._velocity.swap(),a.uniform1i(this._programs.splat.uniforms.uTarget,this._density.read[2]),a.uniform3f(this._programs.splat.uniforms.color,o[0]*.3,o[1]*.3,o[2]*.3),this._blit(this._density.write[1]),this._density.swap()}_addSplat(t){const{x:n,y:r,dx:i,dy:o,color:a}=t;n!==void 0&&r!==void 0&&i!==void 0&&o!==void 0&&a!==void 0&&this._splat(n,r,i,o,a)}_addSplats(t){for(const n of t)this._addSplat(n)}_getRandomSplat(){const t=[Math.random()*10,Math.random()*10,Math.random()*10],n=this._canvas.width*Math.random(),r=this._canvas.height*Math.random(),i=1e3*(Math.random()-.5),o=1e3*(Math.random()-.5);return{x:n,y:r,dx:i,dy:o,color:t}}update(){const t=this._gl,n=Math.min((Date.now()-this._time)/1e3,.016);this._time=Date.now(),this._timer+=1e-4;const r=this._textureWidth,i=this._textureHeight,o=1/r,a=1/i;t.viewport(0,0,r,i),this._splatStack.length>0&&this._addSplats(this._splatStack.pop()),this._programs.advection.bind(),t.uniform2f(this._programs.advection.uniforms.texelSize,o,a),t.uniform1i(this._programs.advection.uniforms.uVelocity,this._velocity.read[2]),t.uniform1i(this._programs.advection.uniforms.uSource,this._velocity.read[2]),t.uniform1f(this._programs.advection.uniforms.dt,n),t.uniform1f(this._programs.advection.uniforms.dissipation,this._config.velocityDissipation),this._blit(this._velocity.write[1]),this._velocity.swap(),t.uniform1i(this._programs.advection.uniforms.uVelocity,this._velocity.read[2]),t.uniform1i(this._programs.advection.uniforms.uSource,this._density.read[2]),t.uniform1f(this._programs.advection.uniforms.dissipation,this._config.densityDissipation),this._blit(this._density.write[1]),this._density.swap();for(let l=0;l<this._pointers.length;l++){const c=this._pointers[l];c.moved&&(this._splat(c.x,c.y,c.dx,c.dy,c.color),c.moved=!1)}this._programs.curl.bind(),t.uniform2f(this._programs.curl.uniforms.texelSize,o,a),t.uniform1i(this._programs.curl.uniforms.uVelocity,this._velocity.read[2]),this._blit(this._curl[1]),this._programs.vorticity.bind(),t.uniform2f(this._programs.vorticity.uniforms.texelSize,o,a),t.uniform1i(this._programs.vorticity.uniforms.uVelocity,this._velocity.read[2]),t.uniform1i(this._programs.vorticity.uniforms.uCurl,this._curl[2]),t.uniform1f(this._programs.vorticity.uniforms.curl,this._config.curl),t.uniform1f(this._programs.vorticity.uniforms.dt,n),this._blit(this._velocity.write[1]),this._velocity.swap(),this._programs.divergence.bind(),t.uniform2f(this._programs.divergence.uniforms.texelSize,o,a),t.uniform1i(this._programs.divergence.uniforms.uVelocity,this._velocity.read[2]),this._blit(this._divergence[1]),this._programs.clear.bind();let s=this._pressure.read[2];t.activeTexture(t.TEXTURE0+s),t.bindTexture(t.TEXTURE_2D,this._pressure.read[0]),t.uniform1i(this._programs.clear.uniforms.uTexture,s),t.uniform1f(this._programs.clear.uniforms.value,this._config.pressureDissipation),this._blit(this._pressure.write[1]),this._pressure.swap(),this._programs.pressure.bind(),t.uniform2f(this._programs.pressure.uniforms.texelSize,o,a),t.uniform1i(this._programs.pressure.uniforms.uDivergence,this._divergence[2]),s=this._pressure.read[2],t.uniform1i(this._programs.pressure.uniforms.uPressure,s),t.activeTexture(t.TEXTURE0+s);for(let l=0;l<this._config.pressureIterations;l++)t.bindTexture(t.TEXTURE_2D,this._pressure.read[0]),this._blit(this._pressure.write[1]),this._pressure.swap();this._programs.gradientSubtract.bind(),t.uniform2f(this._programs.gradientSubtract.uniforms.texelSize,o,a),t.uniform1i(this._programs.gradientSubtract.uniforms.uPressure,this._pressure.read[2]),t.uniform1i(this._programs.gradientSubtract.uniforms.uVelocity,this._velocity.read[2]),this._blit(this._velocity.write[1]),this._velocity.swap(),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),this._programs.display.bind(),t.uniform1i(this._programs.display.uniforms.uTexture,this._density.read[2]),this._blit(null)}}class n_ extends D.Component{constructor(...t){super(...t),this._containerRef=n=>{this._container=n},this._canvasRef=n=>{this._canvas=n},this._onMouseEnter=n=>{n.preventDefault(),this._animation.start()},this._onMouseMove=n=>{n.preventDefault(),this._animation.onMouseMove(n.nativeEvent)},this.onMouseLeave=n=>{n.preventDefault(),this._animation.end()},this._onMouseClick=n=>{n.preventDefault(),this._animation.changeColor()},this._onTouchStart=n=>{this._animation.onTouchStart(n.nativeEvent)},this._onTouchMove=n=>{this._animation.onTouchMove(n.nativeEvent)},this._onTouchEnd=n=>{this._animation.onTouchEnd(n.nativeEvent)},this._onResize=()=>{this._canvas.width=this._container.clientWidth,this._canvas.height=this._container.clientHeight,this._animation&&this._animation.resize()},this._tick=()=>{this._animation&&this._animation.update(),this._tickRaf=X6(this._tick)}}componentDidMount(){window.addEventListener("resize",this._onResize),this._reset(this.props),this._tick(),this._animation.start()}componentDidUpdate(t,n,r){this._onResize(),this.props.config&&(this._animation.config={...y0,...this.props.config})}componentWillUnmount(){window.removeEventListener("resize",this._onResize),this._tickRaf&&(X6.cancel(this._tickRaf),this._tickRaf=null)}render(){const{content:t,config:n,animationRef:r,style:i,size:o,...a}=this.props;return ut.createElement("div",Object.assign({style:{width:"100%",height:"100%",overflow:"hidden",...i}},a,{ref:this._containerRef}),ut.createElement("canvas",{ref:this._canvasRef,onMouseEnter:this._onMouseEnter,onMouseMove:this._onMouseMove,onMouseLeave:this.onMouseLeave,onClick:this._onMouseClick,onTouchStart:this._onTouchStart,onTouchMove:this._onTouchMove,onTouchEnd:this._onTouchEnd,style:{width:"100%",height:"100%"}}))}_reset(t){const{animationRef:n,content:r,config:i}=t;this._onResize(),this._animation=new ECe({canvas:this._canvas,content:r,config:i}),n&&n(this._animation)}}n_.propTypes={content:js.string,config:js.object,style:js.object,animationRef:js.func,size:js.shape({width:js.number,height:js.number})};n_.defaultProps={config:y0,style:{}};var TCe=Q5e({monitorWidth:!0,monitorHeight:!0})(n_);const ICe=b("div",{target:"egcftr917"})({name:"15yhx5a",styles:"position:relative;width:100vw;height:100vh;overflow:hidden;background:#000;user-select:none"}),ACe=b("div",{target:"egcftr916"})({name:"1gn6nfl",styles:"position:absolute;top:0;left:0;width:100%;height:100%;z-index:1"}),PCe=b("div",{target:"egcftr915"})({name:"1uy659f",styles:"position:absolute;top:0;left:0;width:100%;height:100%;z-index:10;display:flex;flex-direction:column;pointer-events:none"}),DCe=b("div",{target:"egcftr914"})({name:"t4zomn",styles:"display:flex;justify-content:space-between;align-items:center;padding:20px 40px;background:rgba(0, 0, 0, 0.7);backdrop-filter:blur(10px);border-bottom:2px solid #ff7c00;pointer-events:auto"}),RCe=b("h1",{target:"egcftr913"})({name:"4jix3m",styles:"color:#fff;font-size:28px;font-weight:900;text-transform:uppercase;letter-spacing:2px;margin:0;text-shadow:0 0 20px rgba(255, 124, 0, 0.8)"}),NCe=b("div",{target:"egcftr912"})({name:"1l1yy35",styles:"display:flex;gap:30px;align-items:center"}),uP=b("div",{target:"egcftr911"})({name:"1g4f9da",styles:"text-align:center;color:#fff;.label{font-size:12px;text-transform:uppercase;letter-spacing:1px;opacity:0.8;margin-bottom:4px;}.value{font-size:24px;font-weight:900;color:#ff7c00;text-shadow:0 0 10px rgba(255, 124, 0, 0.5);}"}),MCe=b("div",{target:"egcftr910"})({name:"5p61of",styles:"flex:1;display:flex;padding:40px;gap:40px;pointer-events:auto"}),OCe=b("div",{target:"egcftr99"})({name:"1y4uegq",styles:"width:300px;background:rgba(0, 0, 0, 0.8);backdrop-filter:blur(10px);border-radius:20px;border:2px solid #ff7c00;padding:20px;box-shadow:0 10px 40px rgba(255, 124, 0, 0.3)"}),dP=b("h2",{target:"egcftr98"})({name:"12adf4a",styles:"color:#ff7c00;font-size:18px;font-weight:800;text-transform:uppercase;letter-spacing:1px;margin:0 0 20px 0;text-align:center"}),$Ce=b("div",{target:"egcftr97"})({name:"u306d5",styles:"display:grid;grid-template-columns:repeat(2, 1fr);gap:15px"}),LCe=b("div",{target:"egcftr96"})("width:100%;height:80px;background:",e=>e.color,";border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:24px;cursor:grab;transition:all 0.3s ease;border:2px solid rgba(255, 255, 255, 0.2);position:relative;overflow:hidden;&::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);transition:left 0.5s ease;}&:hover{transform:scale(1.05);box-shadow:0 10px 30px rgba(255, 124, 0, 0.4);&::before{left:100%;}}&:active{cursor:grabbing;transform:scale(1.1);}.name{color:#fff;font-weight:700;font-size:12px;position:absolute;bottom:8px;text-transform:uppercase;letter-spacing:1px;}"),FCe=b("div",{target:"egcftr95"})({name:"io1qu6",styles:"flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:30px"}),BCe=b("div",{target:"egcftr94"})("width:200px;height:300px;background:",e=>e.mixedColor||"rgba(255, 255, 255, 0.1)",";border:3px solid #fff;border-radius:0 0 50px 50px;position:relative;box-shadow:0 0 30px rgba(255, 255, 255, 0.3),inset 0 0 20px rgba(0, 0, 0, 0.2);transition:all 0.5s ease;&::before{content:'';position:absolute;top:20px;left:20px;right:20px;height:40px;background:linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);border-radius:20px 20px 0 0;}&.mixing{animation:bubble 2s ease-in-out infinite;}@keyframes bubble{0%,100%{transform:scale(1);}50%{transform:scale(1.02);filter:brightness(1.2);}}"),pP=b("button",{target:"egcftr93"})({name:"1tlt698",styles:"background:linear-gradient(135deg, #ff7c00, #ffc107);color:#000;border:none;border-radius:50px;padding:15px 40px;font-size:18px;font-weight:900;text-transform:uppercase;letter-spacing:1px;cursor:pointer;transition:all 0.3s ease;box-shadow:0 10px 30px rgba(255, 124, 0, 0.4);&:hover{transform:translateY(-3px);box-shadow:0 15px 40px rgba(255, 124, 0, 0.6);}&:active{transform:translateY(-1px);}&:disabled{opacity:0.5;cursor:not-allowed;transform:none;}"}),zCe=b("div",{target:"egcftr92"})({name:"1y4uegq",styles:"width:300px;background:rgba(0, 0, 0, 0.8);backdrop-filter:blur(10px);border-radius:20px;border:2px solid #ff7c00;padding:20px;box-shadow:0 10px 40px rgba(255, 124, 0, 0.3)"}),hP=b("div",{target:"egcftr91"})({name:"ron9ql",styles:"background:rgba(255, 124, 0, 0.1);border:1px solid rgba(255, 124, 0, 0.3);border-radius:12px;padding:15px;margin-bottom:15px;.recipe-name{color:#ff7c00;font-size:16px;font-weight:800;margin-bottom:8px;text-transform:uppercase;}.recipe-ingredients{color:#fff;font-size:12px;line-height:1.4;}.recipe-points{color:#ffc107;font-size:14px;font-weight:700;margin-top:8px;}"}),VCe=b("div",{target:"egcftr90"})("position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);background:rgba(0, 0, 0, 0.9);color:",e=>e.success?"#4ade80":"#ef4444",";padding:20px 40px;border-radius:15px;font-size:24px;font-weight:900;text-transform:uppercase;letter-spacing:2px;border:2px solid ",e=>e.success?"#4ade80":"#ef4444",";box-shadow:0 20px 60px rgba(0, 0, 0, 0.8);animation:popIn 0.5s ease-out;z-index:100;@keyframes popIn{0%{transform:translate(-50%, -50%) scale(0.5);opacity:0;}100%{transform:translate(-50%, -50%) scale(1);opacity:1;}}"),cd=[{id:"water",name:"水",emoji:"💧",color:"linear-gradient(135deg, #3b82f6, #1d4ed8)"},{id:"lemon",name:"檸檬",emoji:"🍋",color:"linear-gradient(135deg, #fbbf24, #f59e0b)"},{id:"mint",name:"薄荷",emoji:"🌿",color:"linear-gradient(135deg, #10b981, #059669)"},{id:"ice",name:"冰塊",emoji:"🧊",color:"linear-gradient(135deg, #e5e7eb, #9ca3af)"},{id:"sugar",name:"糖",emoji:"🍯",color:"linear-gradient(135deg, #fbbf24, #d97706)"},{id:"berry",name:"莓果",emoji:"🫐",color:"linear-gradient(135deg, #8b5cf6, #7c3aed)"},{id:"orange",name:"橙汁",emoji:"🍊",color:"linear-gradient(135deg, #fb923c, #ea580c)"},{id:"cola",name:"可樂",emoji:"🥤",color:"linear-gradient(135deg, #451a03, #78350f)"}],Us=[{name:"檸檬水",ingredients:["water","lemon","ice"],points:100,color:"linear-gradient(135deg, #dbeafe, #bfdbfe)"},{name:"薄荷檸檬汽水",ingredients:["water","lemon","mint","ice"],points:150,color:"linear-gradient(135deg, #dcfce7, #bbf7d0)"},{name:"莓果汽水",ingredients:["water","berry","sugar","ice"],points:120,color:"linear-gradient(135deg, #ede9fe, #ddd6fe)"},{name:"橙汁特調",ingredients:["orange","ice","sugar"],points:130,color:"linear-gradient(135deg, #fed7aa, #fdba74)"},{name:"超級混合飲",ingredients:["water","lemon","mint","berry","ice"],points:200,color:"linear-gradient(135deg, #fecaca, #fca5a5)"}],jCe=()=>{const[e,t]=D.useState(0),[n,r]=D.useState(1),[i,o]=D.useState([]),[a,s]=D.useState(""),[l,c]=D.useState(!1),[d,p]=D.useState(null),[f,h]=D.useState(Us[0]),g=D.useRef(null);D.useEffect(()=>{const _=Us[Math.floor(Math.random()*Us.length)];h(_)},[n]);const m={textureDownsample:2,densityDissipation:.98,velocityDissipation:.99,pressureDissipation:.8,pressureIterations:25,curl:30,splatRadius:.25},v=_=>{i.length<6&&(o([...i,_]),g.current&&g.current.addRandomSplats(3),w([...i,_]))},w=_=>{const I=_.map(E=>{const k=cd.find(T=>T.id===E);return(k==null?void 0:k.color)||""});if(I.length>0){const E=I[I.length-1];s(E)}},S=()=>{i.length!==0&&(c(!0),g.current&&g.current.addRandomSplats(10),setTimeout(()=>{c(!1),C()},2e3))},C=()=>{const _=Us.find(I=>I.ingredients.length===i.length&&I.ingredients.every(E=>i.includes(E)));_?(t(e+_.points),p({success:!0,message:`完美！${_.name} +${_.points}分`}),_===f&&(r(n+1),setTimeout(()=>{const I=Us[Math.floor(Math.random()*Us.length)];h(I)},2e3))):p({success:!1,message:"這個組合不太對..."}),setTimeout(()=>{p(null),A()},2e3)},A=()=>{o([]),s("")};return y(ICe,{children:[u(ACe,{children:u(TCe,{config:m,style:{width:"100%",height:"100%"},animationRef:_=>{g.current=_}})}),y(PCe,{children:[y(DCe,{children:[u(RCe,{children:"🍹 飲料調製大師"}),y(NCe,{children:[y(uP,{children:[u("div",{className:"label",children:"等級"}),u("div",{className:"value",children:n})]}),y(uP,{children:[u("div",{className:"label",children:"分數"}),u("div",{className:"value",children:e})]})]})]}),y(MCe,{children:[y(OCe,{children:[u(dP,{children:"🧪 配料庫"}),u($Ce,{children:cd.map(_=>y(LCe,{color:_.color,onClick:()=>v(_.id),children:[u("span",{style:{fontSize:"24px"},children:_.emoji}),u("div",{className:"name",children:_.name})]},_.id))})]}),y(FCe,{children:[u("h3",{style:{color:"#fff",textAlign:"center",margin:0},children:"拖拽配料到這裡開始調製！"}),u(BCe,{mixedColor:a,className:l?"mixing":"",children:i.length>0&&u("div",{style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",color:"#fff",fontSize:"12px",textAlign:"center"},children:i.map(_=>{var I;return(I=cd.find(E=>E.id===_))==null?void 0:I.emoji}).join(" ")})}),y("div",{style:{display:"flex",gap:"20px"},children:[u(pP,{onClick:S,disabled:i.length===0||l,children:l?"調製中...":"🥤 調製"}),u(pP,{onClick:A,style:{background:"linear-gradient(135deg, #ef4444, #dc2626)"},children:"🗑️ 清空"})]})]}),y(zCe,{children:[u(dP,{children:"📋 目標配方"}),y(hP,{style:{border:"2px solid #ff7c00"},children:[y("div",{className:"recipe-name",children:["🎯 ",f.name]}),y("div",{className:"recipe-ingredients",children:["需要配料：",f.ingredients.map(_=>{var I;return(I=cd.find(E=>E.id===_))==null?void 0:I.emoji}).join(" ")]}),y("div",{className:"recipe-points",children:["獎勵：",f.points,"分"]})]}),y("div",{style:{marginTop:"20px"},children:[u("div",{style:{color:"#fff",fontSize:"14px",marginBottom:"10px"},children:"🏆 所有配方："}),Us.map((_,I)=>y(hP,{children:[u("div",{className:"recipe-name",children:_.name}),u("div",{className:"recipe-ingredients",children:_.ingredients.map(E=>{var k;return(k=cd.find(T=>T.id===E))==null?void 0:k.emoji}).join(" ")}),y("div",{className:"recipe-points",children:[_.points,"分"]})]},I))]})]})]}),d&&u(VCe,{success:d.success,children:d.message})]})]})},UCe=b("div",{target:"ea4f5nc3"})({name:"oxzxro",styles:"max-width:800px;margin:50px auto;padding:40px;background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);border-radius:20px;color:white;font-family:'PingFang TC',-apple-system,BlinkMacSystemFont,sans-serif"}),qCe=b("h1",{target:"ea4f5nc2"})({name:"6t5wob",styles:"text-align:center;margin-bottom:30px;font-size:28px;font-weight:700;text-shadow:0 2px 4px rgba(0,0,0,0.3)"}),fP=b("button",{target:"ea4f5nc1"})({name:"vpyjzj",styles:"background:rgba(255,255,255,0.2);color:white;border:2px solid rgba(255,255,255,0.3);padding:15px 30px;border-radius:50px;font-size:16px;font-weight:600;cursor:pointer;transition:all 0.3s ease;margin:10px;&:hover{background:rgba(255,255,255,0.3);border-color:rgba(255,255,255,0.5);transform:translateY(-2px);box-shadow:0 8px 25px rgba(0,0,0,0.2);}&:disabled{opacity:0.5;cursor:not-allowed;transform:none;}"}),WCe=b("div",{target:"ea4f5nc0"})({name:"weylyd",styles:"margin-top:20px;padding:20px;background:rgba(255,255,255,0.1);border-radius:12px;min-height:60px;font-size:14px;line-height:1.6;max-height:300px;overflow-y:auto"}),HCe=()=>{const[e,t]=D.useState("準備上傳公告資料..."),[n,r]=D.useState(!1),[i,o]=D.useState(!1),a=[{title:"🎉 Liquid LMS 系統全面升級完成！",content:"親愛的員工夥伴們大家好！我們很高興地宣布，Liquid LMS 學習管理系統已完成全面升級！新版本帶來了更流暢的學習體驗和更豐富的功能。",type:"important",publisher:"enterprise",scope:"global",createdBy:"系統管理員"},{title:"📅 分店一 12月份排班表更新",content:"各位同仁好！12月份的排班表已經更新完成，請大家至系統查看個人班表。",type:"important",publisher:"store1",scope:"store",storeId:"store1",storeName:"分店一"},{title:"🎄 聖誕節特調飲品製作說明",content:"聖誕節即將到來！我們推出了限定特調飲品。培訓影片已上傳至學習系統，請在12/20前完成觀看。",type:"update",publisher:"store1",scope:"store",storeId:"store1",storeName:"分店一"},{title:"🧹 加強清潔消毒作業標準",content:"為維護最佳的衛生環境，即日起加強清潔消毒作業。保持清潔是我們的責任！",type:"policy",publisher:"store1",scope:"store",storeId:"store1",storeName:"分店一"},{title:"📚 員工教育訓練課程安排",content:"本月將舉辦多場教育訓練課程，請踴躍參與。完成課程可獲得學習點數！",type:"event",publisher:"store1",scope:"store",storeId:"store1",storeName:"分店一"},{title:"🏆 第四季優秀員工表揚",content:"恭喜優秀員工們！感謝大家的努力與付出，你們的表現是店舖成功的關鍵！",type:"event",publisher:"store1",scope:"store",storeId:"store1",storeName:"分店一"},{title:"🚧 分店二設備維護通知",content:"本週將進行設備定期維護，請注意時間安排。感謝大家的配合！",type:"important",publisher:"store2",scope:"store",storeId:"store2",storeName:"分店二"},{title:"🎯 分店二業績目標達成慶祝",content:"太棒了！我們提前達成本月業績目標！為感謝大家的努力，本週五將舉辦慶祝聚餐！",type:"event",publisher:"store2",scope:"store",storeId:"store2",storeName:"分店二"},{title:"📋 新進員工歡迎與訓練安排",content:"歡迎新加入的夥伴們！每位新進員工都會有專屬指導員，有問題隨時發問！",type:"update",publisher:"store2",scope:"store",storeId:"store2",storeName:"分店二"},{title:"🌡️ 冬季飲品溫度控制提醒",content:"天氣轉涼，客人對熱飲需求增加，請注意溫度控制。為客人提供最適溫的飲品！",type:"policy",publisher:"store2",scope:"store",storeId:"store2",storeName:"分店二"},{title:"🎊 分店二兩週年慶活動",content:"分店二即將迎來兩週年！感謝每位夥伴讓分店二茁壯成長！",type:"event",publisher:"store2",scope:"store",storeId:"store2",storeName:"分店二"},{title:"🌊 分店三颱風季應變措施",content:"進入颱風季節，請大家注意安全防護措施。員工安全最重要！",type:"important",publisher:"store3",scope:"store",storeId:"store3",storeName:"分店三"},{title:"🥤 在地特色飲品開發計畫",content:"為突顯分店三在地特色，我們將開發專屬飲品！讓我們一起創造獨有的美味！",type:"update",publisher:"store3",scope:"store",storeId:"store3",storeName:"分店三"},{title:"🚴‍♂️ 員工健康促進活動",content:"關心同仁健康，推出健康促進系列活動！健康的身體是工作的本錢，一起動起來！",type:"event",publisher:"store3",scope:"store",storeId:"store3",storeName:"分店三"},{title:"📱 手機點餐系統上線通知",content:"好消息！手機點餐系統正式上線！請大家務必參加訓練，掌握新系統！",type:"update",publisher:"store3",scope:"store",storeId:"store3",storeName:"分店三"},{title:"🏅 分店三服務品質提升計畫",content:"為提供更優質的服務，啟動服務品質提升計畫！用心服務每一位客人！",type:"policy",publisher:"store3",scope:"store",storeId:"store3",storeName:"分店三"}];return y(UCe,{children:[u(qCe,{children:"📢 公告資料上傳工具"}),u("div",{style:{textAlign:"center",marginBottom:"30px"},children:y("div",{style:{fontSize:"16px",lineHeight:"1.6",opacity:"0.9"},children:["將會上傳到 ",u("strong",{children:"Firestore announcements 集合"}),"：",u("br",{}),u("strong",{children:"• 1篇全體公告"}),u("br",{}),u("strong",{children:"• 分店一、分店二、分店三各5篇公告"}),u("br",{}),u("span",{style:{fontSize:"14px",opacity:"0.8"},children:"(總計16篇公告)"})]})}),y("div",{style:{textAlign:"center"},children:[u(fP,{onClick:async()=>{if(!(n||i)){r(!0),t(`🚀 開始上傳公告資料到 Firestore...
`);try{let c=0;for(let d=0;d<a.length;d++){const p=a[d];try{const f=new Date().toISOString(),h={title:p.title,content:p.content,type:p.type,publisher:p.publisher,scope:p.scope,createdBy:p.createdBy||`${p.storeName||"系統"}管理員`,createdAt:f};p.scope==="store"&&(h.storeId=p.storeId,h.storeName=p.storeName),await tr(se(U,"announcements"),h),c++,t(g=>g+`✅ 已上傳: ${p.title}
`)}catch(f){console.error("上傳公告失敗:",f),t(h=>h+`❌ 失敗: ${p.title} - ${f.message}
`)}}t(d=>d+`
🎉 上傳完成！成功上傳 ${c}/${a.length} 篇公告到 Firestore announcements 集合！`),o(!0)}catch(c){console.error("上傳過程發生錯誤:",c),t(d=>d+`
❌ 上傳過程發生錯誤: ${c.message}`)}finally{r(!1)}}},disabled:n,children:n?"⏳ 上傳中...":i?"✅ 已完成":"🚀 開始上傳到 Firestore"}),i&&u(fP,{onClick:()=>{t("準備上傳公告資料..."),o(!1)},children:"🔄 重置狀態"})]}),u(WCe,{children:u("pre",{style:{margin:0,fontFamily:"monospace",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:e})})]})},GCe=()=>y(oX,{children:[u(ks,{styles:aX}),u(tX,{children:u(nX,{children:u(BV,{children:y(RV,{children:[u(ze,{path:"/",element:u(KX,{})}),u(ze,{path:"/login",element:u(xQ,{})}),u(ze,{path:"/dashboard",element:u(WJ,{})}),u(ze,{path:"/pricing",element:u(Mee,{})}),u(ze,{path:"/contact",element:u(Jee,{})}),u(ze,{path:"/about",element:u(Ite,{})}),u(ze,{path:"/features",element:u(ane,{})}),u(ze,{path:"/courses",element:u(Ane,{})}),u(ze,{path:"/course/:courseId",element:u(sI,{})}),u(ze,{path:"/course-detail/:id",element:u(sI,{})}),u(ze,{path:"/courses-internal",element:u(are,{})}),u(ze,{path:"/learning",element:u(Xb,{to:"/courses-internal",replace:!0})}),u(ze,{path:"/section/:courseId/:chapterIndex/:sectionIndex",element:u(zre,{})}),u(ze,{path:"/exams",element:u(Zme,{})}),u(ze,{path:"/exam/:examId",element:u(q0e,{})}),u(ze,{path:"/exam/:type/:examId",element:u(A0e,{})}),u(ze,{path:"/beverage-exam",element:u(Qve,{})}),u(ze,{path:"/beverage-exam-hard",element:u(Yxe,{})}),u(ze,{path:"/tutorial",element:u(Bye,{})}),u(ze,{path:"/exam-management",element:u(ji,{allowedRoles:["enterprise"],children:u(Nbe,{})})}),u(ze,{path:"/seed-exam-data",element:u(h1e,{})}),u(ze,{path:"/create-test-course",element:u(f1e,{})}),u(ze,{path:"/test-firebase",element:u(gbe,{})}),u(ze,{path:"/test-firebase-and-create-course",element:u(ybe,{})}),u(ze,{path:"/firebase-rules",element:u(S1e,{})}),u(ze,{path:"/check-user-role",element:u(_1e,{})}),u(ze,{path:"/set-admin-role",element:u(tbe,{})}),u(ze,{path:"/update-database",element:u(Hye,{})}),u(ze,{path:"/initialize-exam",element:u(Jye,{})}),u(ze,{path:"/test-database",element:u(n1e,{})}),u(ze,{path:"/debug-database",element:u(l1e,{})}),u(ze,{path:"/upload-chapter1",element:u(Hbe,{})}),u(ze,{path:"/upload-chapter1-exams",element:u(t2e,{})}),u(ze,{path:"/upload-chapter2",element:u(l2e,{})}),u(ze,{path:"/remove-images-from-courses",element:u(v2e,{})}),u(ze,{path:"/new-course-system",element:u(C2e,{})}),u(ze,{path:"/debug-courses",element:u(I2e,{})}),u(ze,{path:"/upload-exam-questions",element:u(N2e,{})}),u(ze,{path:"/upload-remaining-chapters",element:u(F2e,{})}),u(ze,{path:"/upload-missing-sections",element:u(zwe,{})}),u(ze,{path:"/debug-section-contents",element:u(Hwe,{})}),u(ze,{path:"/data-cleanup",element:u(Jwe,{})}),u(ze,{path:"/add-announcements",element:u(HCe,{})}),u(ze,{path:"/register",element:u(ji,{allowedRoles:["enterprise"],children:u(EQ,{})})}),u(ze,{path:"/course-creator",element:u(ji,{allowedRoles:["enterprise"],children:u(die,{})})}),u(ze,{path:"/course-uploader",element:u(ji,{allowedRoles:["enterprise"],children:u(v4,{})})}),u(ze,{path:"/course-uploader/:courseId",element:u(ji,{allowedRoles:["enterprise"],children:u(v4,{})})}),u(ze,{path:"/upload-courses",element:u(ji,{allowedRoles:["enterprise"],children:u(pbe,{})})}),u(ze,{path:"/quick-upload",element:u(ji,{allowedRoles:["enterprise"],children:u(fbe,{})})}),u(ze,{path:"/staff",element:u(ji,{allowedRoles:["enterprise"],children:u(nJ,{})})}),u(ze,{path:"/course-management",element:u(ji,{allowedRoles:["enterprise","staff"],children:u(sJ,{})})}),u(ze,{path:"/announcements",element:u(ji,{allowedRoles:["enterprise","manager"],children:u(pJ,{})})}),u(ze,{path:"/schedule",element:u(OZ,{})}),u(ze,{path:"/schedule-history",element:u(HZ,{})}),u(ze,{path:"/profile",element:u(dee,{})}),u(ze,{path:"/secret-game",element:u(G6,{})}),u(ze,{path:"/tic-tac-toe",element:u(G6,{})}),u(ze,{path:"/basketball-game",element:u(Rwe,{})}),u(ze,{path:"/drink-mixing-game",element:u(jCe,{})}),u(ze,{path:"/course-editor/:chapterId/:sectionIndex",element:u(ji,{allowedRoles:["enterprise"],children:u(yde,{})})}),u(ze,{path:"/unauthorized",element:u(mJ,{})})]})})})})]}),G9=document.getElementById("root");if(!G9)throw new Error("找不到 root 元素");nb.createRoot(G9).render(u(ut.StrictMode,{children:u(GCe,{})}));
